function TN(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function uS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var eA={exports:{}},Lm={},tA={exports:{}},gn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC;function bN(){if(PC)return gn;PC=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function A(W,se,_e){this.props=W,this.context=se,this.refs=S,this.updater=_e||y}A.prototype.isReactComponent={},A.prototype.setState=function(W,se){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,se,"setState")},A.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function x(){}x.prototype=A.prototype;function C(W,se,_e){this.props=W,this.context=se,this.refs=S,this.updater=_e||y}var T=C.prototype=new x;T.constructor=C,_(T,A.prototype),T.isPureReactComponent=!0;var R=Array.isArray,L=Object.prototype.hasOwnProperty,B={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function O(W,se,_e){var De,ze={},de=null,ge=null;if(se!=null)for(De in se.ref!==void 0&&(ge=se.ref),se.key!==void 0&&(de=""+se.key),se)L.call(se,De)&&!k.hasOwnProperty(De)&&(ze[De]=se[De]);var Ue=arguments.length-2;if(Ue===1)ze.children=_e;else if(1<Ue){for(var We=Array(Ue),He=0;He<Ue;He++)We[He]=arguments[He+2];ze.children=We}if(W&&W.defaultProps)for(De in Ue=W.defaultProps,Ue)ze[De]===void 0&&(ze[De]=Ue[De]);return{$$typeof:i,type:W,key:de,ref:ge,props:ze,_owner:B.current}}function D(W,se){return{$$typeof:i,type:W.type,key:se,ref:W.ref,props:W.props,_owner:W._owner}}function N(W){return typeof W=="object"&&W!==null&&W.$$typeof===i}function z(W){var se={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(_e){return se[_e]})}var ee=/\/+/g;function te(W,se){return typeof W=="object"&&W!==null&&W.key!=null?z(""+W.key):se.toString(36)}function ce(W,se,_e,De,ze){var de=typeof W;(de==="undefined"||de==="boolean")&&(W=null);var ge=!1;if(W===null)ge=!0;else switch(de){case"string":case"number":ge=!0;break;case"object":switch(W.$$typeof){case i:case e:ge=!0}}if(ge)return ge=W,ze=ze(ge),W=De===""?"."+te(ge,0):De,R(ze)?(_e="",W!=null&&(_e=W.replace(ee,"$&/")+"/"),ce(ze,se,_e,"",function(He){return He})):ze!=null&&(N(ze)&&(ze=D(ze,_e+(!ze.key||ge&&ge.key===ze.key?"":(""+ze.key).replace(ee,"$&/")+"/")+W)),se.push(ze)),1;if(ge=0,De=De===""?".":De+":",R(W))for(var Ue=0;Ue<W.length;Ue++){de=W[Ue];var We=De+te(de,Ue);ge+=ce(de,se,_e,We,ze)}else if(We=g(W),typeof We=="function")for(W=We.call(W),Ue=0;!(de=W.next()).done;)de=de.value,We=De+te(de,Ue++),ge+=ce(de,se,_e,We,ze);else if(de==="object")throw se=String(W),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return ge}function K(W,se,_e){if(W==null)return W;var De=[],ze=0;return ce(W,De,"","",function(de){return se.call(_e,de,ze++)}),De}function oe(W){if(W._status===-1){var se=W._result;se=se(),se.then(function(_e){(W._status===0||W._status===-1)&&(W._status=1,W._result=_e)},function(_e){(W._status===0||W._status===-1)&&(W._status=2,W._result=_e)}),W._status===-1&&(W._status=0,W._result=se)}if(W._status===1)return W._result.default;throw W._result}var ae={current:null},U={transition:null},Z={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:U,ReactCurrentOwner:B};function q(){throw Error("act(...) is not supported in production builds of React.")}return gn.Children={map:K,forEach:function(W,se,_e){K(W,function(){se.apply(this,arguments)},_e)},count:function(W){var se=0;return K(W,function(){se++}),se},toArray:function(W){return K(W,function(se){return se})||[]},only:function(W){if(!N(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},gn.Component=A,gn.Fragment=t,gn.Profiler=r,gn.PureComponent=C,gn.StrictMode=n,gn.Suspense=c,gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,gn.act=q,gn.cloneElement=function(W,se,_e){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var De=_({},W.props),ze=W.key,de=W.ref,ge=W._owner;if(se!=null){if(se.ref!==void 0&&(de=se.ref,ge=B.current),se.key!==void 0&&(ze=""+se.key),W.type&&W.type.defaultProps)var Ue=W.type.defaultProps;for(We in se)L.call(se,We)&&!k.hasOwnProperty(We)&&(De[We]=se[We]===void 0&&Ue!==void 0?Ue[We]:se[We])}var We=arguments.length-2;if(We===1)De.children=_e;else if(1<We){Ue=Array(We);for(var He=0;He<We;He++)Ue[He]=arguments[He+2];De.children=Ue}return{$$typeof:i,type:W.type,key:ze,ref:de,props:De,_owner:ge}},gn.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:s,_context:W},W.Consumer=W},gn.createElement=O,gn.createFactory=function(W){var se=O.bind(null,W);return se.type=W,se},gn.createRef=function(){return{current:null}},gn.forwardRef=function(W){return{$$typeof:a,render:W}},gn.isValidElement=N,gn.lazy=function(W){return{$$typeof:f,_payload:{_status:-1,_result:W},_init:oe}},gn.memo=function(W,se){return{$$typeof:h,type:W,compare:se===void 0?null:se}},gn.startTransition=function(W){var se=U.transition;U.transition={};try{W()}finally{U.transition=se}},gn.unstable_act=q,gn.useCallback=function(W,se){return ae.current.useCallback(W,se)},gn.useContext=function(W){return ae.current.useContext(W)},gn.useDebugValue=function(){},gn.useDeferredValue=function(W){return ae.current.useDeferredValue(W)},gn.useEffect=function(W,se){return ae.current.useEffect(W,se)},gn.useId=function(){return ae.current.useId()},gn.useImperativeHandle=function(W,se,_e){return ae.current.useImperativeHandle(W,se,_e)},gn.useInsertionEffect=function(W,se){return ae.current.useInsertionEffect(W,se)},gn.useLayoutEffect=function(W,se){return ae.current.useLayoutEffect(W,se)},gn.useMemo=function(W,se){return ae.current.useMemo(W,se)},gn.useReducer=function(W,se,_e){return ae.current.useReducer(W,se,_e)},gn.useRef=function(W){return ae.current.useRef(W)},gn.useState=function(W){return ae.current.useState(W)},gn.useSyncExternalStore=function(W,se,_e){return ae.current.useSyncExternalStore(W,se,_e)},gn.useTransition=function(){return ae.current.useTransition()},gn.version="18.3.1",gn}var LC;function mx(){return LC||(LC=1,tA.exports=bN()),tA.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC;function RN(){if(DC)return Lm;DC=1;var i=mx(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,h){var f,m={},g=null,y=null;h!==void 0&&(g=""+h),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(y=c.ref);for(f in c)n.call(c,f)&&!s.hasOwnProperty(f)&&(m[f]=c[f]);if(a&&a.defaultProps)for(f in c=a.defaultProps,c)m[f]===void 0&&(m[f]=c[f]);return{$$typeof:e,type:a,key:g,ref:y,props:m,_owner:r.current}}return Lm.Fragment=t,Lm.jsx=o,Lm.jsxs=o,Lm}var BC;function IN(){return BC||(BC=1,eA.exports=RN()),eA.exports}var V=IN(),yv={},nA={exports:{}},fs={},iA={exports:{}},rA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC;function PN(){return NC||(NC=1,(function(i){function e(U,Z){var q=U.length;U.push(Z);e:for(;0<q;){var W=q-1>>>1,se=U[W];if(0<r(se,Z))U[W]=Z,U[q]=se,q=W;else break e}}function t(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var Z=U[0],q=U.pop();if(q!==Z){U[0]=q;e:for(var W=0,se=U.length,_e=se>>>1;W<_e;){var De=2*(W+1)-1,ze=U[De],de=De+1,ge=U[de];if(0>r(ze,q))de<se&&0>r(ge,ze)?(U[W]=ge,U[de]=q,W=de):(U[W]=ze,U[De]=q,W=De);else if(de<se&&0>r(ge,q))U[W]=ge,U[de]=q,W=de;else break e}}return Z}function r(U,Z){var q=U.sortIndex-Z.sortIndex;return q!==0?q:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var c=[],h=[],f=1,m=null,g=3,y=!1,_=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(U){for(var Z=t(h);Z!==null;){if(Z.callback===null)n(h);else if(Z.startTime<=U)n(h),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(h)}}function R(U){if(S=!1,T(U),!_)if(t(c)!==null)_=!0,oe(L);else{var Z=t(h);Z!==null&&ae(R,Z.startTime-U)}}function L(U,Z){_=!1,S&&(S=!1,x(O),O=-1),y=!0;var q=g;try{for(T(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||U&&!z());){var W=m.callback;if(typeof W=="function"){m.callback=null,g=m.priorityLevel;var se=W(m.expirationTime<=Z);Z=i.unstable_now(),typeof se=="function"?m.callback=se:m===t(c)&&n(c),T(Z)}else n(c);m=t(c)}if(m!==null)var _e=!0;else{var De=t(h);De!==null&&ae(R,De.startTime-Z),_e=!1}return _e}finally{m=null,g=q,y=!1}}var B=!1,k=null,O=-1,D=5,N=-1;function z(){return!(i.unstable_now()-N<D)}function ee(){if(k!==null){var U=i.unstable_now();N=U;var Z=!0;try{Z=k(!0,U)}finally{Z?te():(B=!1,k=null)}}else B=!1}var te;if(typeof C=="function")te=function(){C(ee)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,K=ce.port2;ce.port1.onmessage=ee,te=function(){K.postMessage(null)}}else te=function(){A(ee,0)};function oe(U){k=U,B||(B=!0,te())}function ae(U,Z){O=A(function(){U(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_continueExecution=function(){_||y||(_=!0,oe(L))},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var q=g;g=Z;try{return U()}finally{g=q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=g;g=U;try{return Z()}finally{g=q}},i.unstable_scheduleCallback=function(U,Z,q){var W=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?W+q:W):q=W,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,U={id:f++,callback:Z,priorityLevel:U,startTime:q,expirationTime:se,sortIndex:-1},q>W?(U.sortIndex=q,e(h,U),t(c)===null&&U===t(h)&&(S?(x(O),O=-1):S=!0,ae(R,q-W))):(U.sortIndex=se,e(c,U),_||y||(_=!0,oe(L))),U},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(U){var Z=g;return function(){var q=g;g=Z;try{return U.apply(this,arguments)}finally{g=q}}}})(rA)),rA}var FC;function LN(){return FC||(FC=1,iA.exports=PN()),iA.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC;function DN(){if(OC)return fs;OC=1;var i=mx(),e=LN();function t(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,v=1;v<arguments.length;v++)u+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(l,u){o(l,u),o(l+"Capture",u)}function o(l,u){for(r[l]=u,l=0;l<u.length;l++)n.add(u[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(l){return c.call(m,l)?!0:c.call(f,l)?!1:h.test(l)?m[l]=!0:(f[l]=!0,!1)}function y(l,u,v,w){if(v!==null&&v.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return w?!1:v!==null?!v.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,u,v,w){if(u===null||typeof u>"u"||y(l,u,v,w))return!0;if(w)return!1;if(v!==null)switch(v.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function S(l,u,v,w,b,P,G){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=w,this.attributeNamespace=b,this.mustUseProperty=v,this.propertyName=l,this.type=u,this.sanitizeURL=P,this.removeEmptyString=G}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){A[l]=new S(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];A[u]=new S(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){A[l]=new S(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){A[l]=new S(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){A[l]=new S(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){A[l]=new S(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){A[l]=new S(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){A[l]=new S(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){A[l]=new S(l,5,!1,l.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function C(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(x,C);A[u]=new S(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(x,C);A[u]=new S(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(x,C);A[u]=new S(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){A[l]=new S(l,1,!1,l.toLowerCase(),null,!1,!1)}),A.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){A[l]=new S(l,1,!1,l.toLowerCase(),null,!0,!0)});function T(l,u,v,w){var b=A.hasOwnProperty(u)?A[u]:null;(b!==null?b.type!==0:w||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(_(u,v,b,w)&&(v=null),w||b===null?g(u)&&(v===null?l.removeAttribute(u):l.setAttribute(u,""+v)):b.mustUseProperty?l[b.propertyName]=v===null?b.type===3?!1:"":v:(u=b.attributeName,w=b.attributeNamespace,v===null?l.removeAttribute(u):(b=b.type,v=b===3||b===4&&v===!0?"":""+v,w?l.setAttributeNS(w,u,v):l.setAttribute(u,v))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),B=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),z=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),U=Symbol.iterator;function Z(l){return l===null||typeof l!="object"?null:(l=U&&l[U]||l["@@iterator"],typeof l=="function"?l:null)}var q=Object.assign,W;function se(l){if(W===void 0)try{throw Error()}catch(v){var u=v.stack.trim().match(/\n( *(at )?)/);W=u&&u[1]||""}return`
`+W+l}var _e=!1;function De(l,u){if(!l||_e)return"";_e=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(we){var w=we}Reflect.construct(l,[],u)}else{try{u.call()}catch(we){w=we}l.call(u.prototype)}else{try{throw Error()}catch(we){w=we}l()}}catch(we){if(we&&w&&typeof we.stack=="string"){for(var b=we.stack.split(`
`),P=w.stack.split(`
`),G=b.length-1,ne=P.length-1;1<=G&&0<=ne&&b[G]!==P[ne];)ne--;for(;1<=G&&0<=ne;G--,ne--)if(b[G]!==P[ne]){if(G!==1||ne!==1)do if(G--,ne--,0>ne||b[G]!==P[ne]){var le=`
`+b[G].replace(" at new "," at ");return l.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",l.displayName)),le}while(1<=G&&0<=ne);break}}}finally{_e=!1,Error.prepareStackTrace=v}return(l=l?l.displayName||l.name:"")?se(l):""}function ze(l){switch(l.tag){case 5:return se(l.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return l=De(l.type,!1),l;case 11:return l=De(l.type.render,!1),l;case 1:return l=De(l.type,!0),l;default:return""}}function de(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case k:return"Fragment";case B:return"Portal";case D:return"Profiler";case O:return"StrictMode";case te:return"Suspense";case ce:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case z:return(l.displayName||"Context")+".Consumer";case N:return(l._context.displayName||"Context")+".Provider";case ee:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case K:return u=l.displayName||null,u!==null?u:de(l.type)||"Memo";case oe:u=l._payload,l=l._init;try{return de(l(u))}catch{}}return null}function ge(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(u);case 8:return u===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Ue(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function We(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function He(l){var u=We(l)?"checked":"value",v=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),w=""+l[u];if(!l.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var b=v.get,P=v.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(G){w=""+G,P.call(this,G)}}),Object.defineProperty(l,u,{enumerable:v.enumerable}),{getValue:function(){return w},setValue:function(G){w=""+G},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function rt(l){l._valueTracker||(l._valueTracker=He(l))}function zt(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var v=u.getValue(),w="";return l&&(w=We(l)?l.checked?"true":"false":l.value),l=w,l!==v?(u.setValue(l),!0):!1}function Q(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Oe(l,u){var v=u.checked;return q({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??l._wrapperState.initialChecked})}function Le(l,u){var v=u.defaultValue==null?"":u.defaultValue,w=u.checked!=null?u.checked:u.defaultChecked;v=Ue(u.value!=null?u.value:v),l._wrapperState={initialChecked:w,initialValue:v,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Pe(l,u){u=u.checked,u!=null&&T(l,"checked",u,!1)}function Re(l,u){Pe(l,u);var v=Ue(u.value),w=u.type;if(v!=null)w==="number"?(v===0&&l.value===""||l.value!=v)&&(l.value=""+v):l.value!==""+v&&(l.value=""+v);else if(w==="submit"||w==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?Ve(l,u.type,v):u.hasOwnProperty("defaultValue")&&Ve(l,u.type,Ue(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function Qe(l,u,v){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var w=u.type;if(!(w!=="submit"&&w!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,v||u===l.value||(l.value=u),l.defaultValue=u}v=l.name,v!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,v!==""&&(l.name=v)}function Ve(l,u,v){(u!=="number"||Q(l.ownerDocument)!==l)&&(v==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+v&&(l.defaultValue=""+v))}var je=Array.isArray;function Rt(l,u,v,w){if(l=l.options,u){u={};for(var b=0;b<v.length;b++)u["$"+v[b]]=!0;for(v=0;v<l.length;v++)b=u.hasOwnProperty("$"+l[v].value),l[v].selected!==b&&(l[v].selected=b),b&&w&&(l[v].defaultSelected=!0)}else{for(v=""+Ue(v),u=null,b=0;b<l.length;b++){if(l[b].value===v){l[b].selected=!0,w&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function Dt(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return q({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Y(l,u){var v=u.value;if(v==null){if(v=u.children,u=u.defaultValue,v!=null){if(u!=null)throw Error(t(92));if(je(v)){if(1<v.length)throw Error(t(93));v=v[0]}u=v}u==null&&(u=""),v=u}l._wrapperState={initialValue:Ue(v)}}function H(l,u){var v=Ue(u.value),w=Ue(u.defaultValue);v!=null&&(v=""+v,v!==l.value&&(l.value=v),u.defaultValue==null&&l.defaultValue!==v&&(l.defaultValue=v)),w!=null&&(l.defaultValue=""+w)}function ve(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function Ce(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?Ce(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var be,Et=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,v,w,b){MSApp.execUnsafeLocalFunction(function(){return l(u,v,w,b)})}:l})(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for(be=be||document.createElement("div"),be.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=be.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function et(l,u){if(u){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=u;return}}l.textContent=u}var gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},At=["Webkit","ms","Moz","O"];Object.keys(gt).forEach(function(l){At.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),gt[u]=gt[l]})});function Ke(l,u,v){return u==null||typeof u=="boolean"||u===""?"":v||typeof u!="number"||u===0||gt.hasOwnProperty(l)&&gt[l]?(""+u).trim():u+"px"}function lt(l,u){l=l.style;for(var v in u)if(u.hasOwnProperty(v)){var w=v.indexOf("--")===0,b=Ke(v,u[v],w);v==="float"&&(v="cssFloat"),w?l.setProperty(v,b):l[v]=b}}var Ot=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ie(l,u){if(u){if(Ot[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function xe(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tt=null;function re(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ge=null,Je=null,ot=null;function qe(l){if(l=Po(l)){if(typeof Ge!="function")throw Error(t(280));var u=l.stateNode;u&&(u=Ff(u),Ge(l.stateNode,l.type,u))}}function ke(l){Je?ot?ot.push(l):ot=[l]:Je=l}function ct(){if(Je){var l=Je,u=ot;if(ot=Je=null,qe(l),u)for(l=0;l<u.length;l++)qe(u[l])}}function Bt(l,u){return l(u)}function mn(){}var nn=!1;function Ai(l,u,v){if(nn)return l(u,v);nn=!0;try{return Bt(l,u,v)}finally{nn=!1,(Je!==null||ot!==null)&&(mn(),ct())}}function ci(l,u){var v=l.stateNode;if(v===null)return null;var w=Ff(v);if(w===null)return null;v=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(l=l.type,w=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!w;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(t(231,u,typeof v));return v}var Wl=!1;if(a)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{Wl=!1}function Xl(l,u,v,w,b,P,G,ne,le){var we=Array.prototype.slice.call(arguments,3);try{u.apply(v,we)}catch(Ye){this.onError(Ye)}}var Xs=!1,Oa=null,Ur=!1,jl=null,Yl={onError:function(l){Xs=!0,Oa=l}};function Zh(l,u,v,w,b,P,G,ne,le){Xs=!1,Oa=null,Xl.apply(Yl,arguments)}function qh(l,u,v,w,b,P,G,ne,le){if(Zh.apply(this,arguments),Xs){if(Xs){var we=Oa;Xs=!1,Oa=null}else throw Error(t(198));Ur||(Ur=!0,jl=we)}}function Ao(l){var u=l,v=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(v=u.return),l=u.return;while(l)}return u.tag===3?v:null}function Qh(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function $h(l){if(Ao(l)!==l)throw Error(t(188))}function ef(l){var u=l.alternate;if(!u){if(u=Ao(l),u===null)throw Error(t(188));return u!==l?null:l}for(var v=l,w=u;;){var b=v.return;if(b===null)break;var P=b.alternate;if(P===null){if(w=b.return,w!==null){v=w;continue}break}if(b.child===P.child){for(P=b.child;P;){if(P===v)return $h(b),l;if(P===w)return $h(b),u;P=P.sibling}throw Error(t(188))}if(v.return!==w.return)v=b,w=P;else{for(var G=!1,ne=b.child;ne;){if(ne===v){G=!0,v=b,w=P;break}if(ne===w){G=!0,w=b,v=P;break}ne=ne.sibling}if(!G){for(ne=P.child;ne;){if(ne===v){G=!0,v=P,w=b;break}if(ne===w){G=!0,w=P,v=b;break}ne=ne.sibling}if(!G)throw Error(t(189))}}if(v.alternate!==w)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?l:u}function tf(l){return l=ef(l),l!==null?nf(l):null}function nf(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=nf(l);if(u!==null)return u;l=l.sibling}return null}var X=e.unstable_scheduleCallback,me=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Me=e.unstable_requestPaint,ue=e.unstable_now,Ze=e.unstable_getCurrentPriorityLevel,at=e.unstable_ImmediatePriority,yt=e.unstable_UserBlockingPriority,mt=e.unstable_NormalPriority,kt=e.unstable_LowPriority,Nt=e.unstable_IdlePriority,xt=null,dt=null;function Ft(l){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(xt,l,void 0,(l.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:It,$t=Math.log,en=Math.LN2;function It(l){return l>>>=0,l===0?32:31-($t(l)/en|0)|0}var _n=64,Gt=4194304;function ni(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function es(l,u){var v=l.pendingLanes;if(v===0)return 0;var w=0,b=l.suspendedLanes,P=l.pingedLanes,G=v&268435455;if(G!==0){var ne=G&~b;ne!==0?w=ni(ne):(P&=G,P!==0&&(w=ni(P)))}else G=v&~b,G!==0?w=ni(G):P!==0&&(w=ni(P));if(w===0)return 0;if(u!==0&&u!==w&&(u&b)===0&&(b=w&-w,P=u&-u,b>=P||b===16&&(P&4194240)!==0))return u;if((w&4)!==0&&(w|=v&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=w;0<u;)v=31-rn(u),b=1<<v,w|=l[v],u&=~b;return w}function qi(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function js(l,u){for(var v=l.suspendedLanes,w=l.pingedLanes,b=l.expirationTimes,P=l.pendingLanes;0<P;){var G=31-rn(P),ne=1<<G,le=b[G];le===-1?((ne&v)===0||(ne&w)!==0)&&(b[G]=qi(ne,u)):le<=u&&(l.expiredLanes|=ne),P&=~ne}}function Nn(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Xn(){var l=_n;return _n<<=1,(_n&4194240)===0&&(_n=64),l}function Qi(l){for(var u=[],v=0;31>v;v++)u.push(l);return u}function ui(l,u,v){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-rn(u),l[u]=v}function $i(l,u){var v=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var w=l.eventTimes;for(l=l.expirationTimes;0<v;){var b=31-rn(v),P=1<<b;u[b]=0,w[b]=-1,l[b]=-1,v&=~P}}function Ys(l,u){var v=l.entangledLanes|=u;for(l=l.entanglements;v;){var w=31-rn(v),b=1<<w;b&u|l[w]&u&&(l[w]|=u),v&=~b}}var an=0;function Kl(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var nu,kp,C0,rf,sf,ka=!1,of=[],Ks=null,un=null,wo=null,Ua=new Map,Jl=new Map,la=[],ME="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wi(l,u){switch(l){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":Ua.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(u.pointerId)}}function za(l,u,v,w,b,P){return l===null||l.nativeEvent!==P?(l={blockedOn:u,domEventName:v,eventSystemFlags:w,nativeEvent:P,targetContainers:[b]},u!==null&&(u=Po(u),u!==null&&kp(u)),l):(l.eventSystemFlags|=w,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function CE(l,u,v,w,b){switch(u){case"focusin":return Ks=za(Ks,l,u,v,w,b),!0;case"dragenter":return un=za(un,l,u,v,w,b),!0;case"mouseover":return wo=za(wo,l,u,v,w,b),!0;case"pointerover":var P=b.pointerId;return Ua.set(P,za(Ua.get(P)||null,l,u,v,w,b)),!0;case"gotpointercapture":return P=b.pointerId,Jl.set(P,za(Jl.get(P)||null,l,u,v,w,b)),!0}return!1}function af(l){var u=ma(l.target);if(u!==null){var v=Ao(u);if(v!==null){if(u=v.tag,u===13){if(u=Qh(v),u!==null){l.blockedOn=u,sf(l.priority,function(){C0(v)});return}}else if(u===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function lf(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var v=ns(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(v===null){v=l.nativeEvent;var w=new v.constructor(v.type,v);tt=w,v.target.dispatchEvent(w),tt=null}else return u=Po(v),u!==null&&kp(u),l.blockedOn=v,!1;u.shift()}return!0}function iu(l,u,v){lf(l)&&v.delete(u)}function Js(){ka=!1,Ks!==null&&lf(Ks)&&(Ks=null),un!==null&&lf(un)&&(un=null),wo!==null&&lf(wo)&&(wo=null),Ua.forEach(iu),Jl.forEach(iu)}function ru(l,u){l.blockedOn===u&&(l.blockedOn=null,ka||(ka=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Js)))}function su(l){function u(b){return ru(b,l)}if(0<of.length){ru(of[0],l);for(var v=1;v<of.length;v++){var w=of[v];w.blockedOn===l&&(w.blockedOn=null)}}for(Ks!==null&&ru(Ks,l),un!==null&&ru(un,l),wo!==null&&ru(wo,l),Ua.forEach(u),Jl.forEach(u),v=0;v<la.length;v++)w=la[v],w.blockedOn===l&&(w.blockedOn=null);for(;0<la.length&&(v=la[0],v.blockedOn===null);)af(v),v.blockedOn===null&&la.shift()}var cr=R.ReactCurrentBatchConfig,ts=!0;function cf(l,u,v,w){var b=an,P=cr.transition;cr.transition=null;try{an=1,uf(l,u,v,w)}finally{an=b,cr.transition=P}}function Up(l,u,v,w){var b=an,P=cr.transition;cr.transition=null;try{an=4,uf(l,u,v,w)}finally{an=b,cr.transition=P}}function uf(l,u,v,w){if(ts){var b=ns(l,u,v,w);if(b===null)If(l,u,w,hf,v),wi(l,w);else if(CE(b,l,u,v,w))w.stopPropagation();else if(wi(l,w),u&4&&-1<ME.indexOf(l)){for(;b!==null;){var P=Po(b);if(P!==null&&nu(P),P=ns(l,u,v,w),P===null&&If(l,u,w,hf,v),P===b)break;b=P}b!==null&&w.stopPropagation()}else If(l,u,w,null,v)}}var hf=null;function ns(l,u,v,w){if(hf=null,l=re(w),l=ma(l),l!==null)if(u=Ao(l),u===null)l=null;else if(v=u.tag,v===13){if(l=Qh(u),l!==null)return l;l=null}else if(v===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return hf=l,null}function T0(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case at:return 1;case yt:return 4;case mt:case kt:return 16;case Nt:return 536870912;default:return 16}default:return 16}}var Ss=null,zp=null,wr=null;function ou(){if(wr)return wr;var l,u=zp,v=u.length,w,b="value"in Ss?Ss.value:Ss.textContent,P=b.length;for(l=0;l<v&&u[l]===b[l];l++);var G=v-l;for(w=1;w<=G&&u[v-w]===b[P-w];w++);return wr=b.slice(l,1<w?1-w:void 0)}function Ga(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function So(){return!0}function ff(){return!1}function ur(l){function u(v,w,b,P,G){this._reactName=v,this._targetInst=b,this.type=w,this.nativeEvent=P,this.target=G,this.currentTarget=null;for(var ne in l)l.hasOwnProperty(ne)&&(v=l[ne],this[ne]=v?v(P):P[ne]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?So:ff,this.isPropagationStopped=ff,this}return q(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),u}var Ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},au=ur(Ha),Va=q({},Ha,{view:0,detail:0}),Zl=ur(Va),Sr,is,rs,ql=q({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ua,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==rs&&(rs&&l.type==="mousemove"?(Sr=l.screenX-rs.screenX,is=l.screenY-rs.screenY):is=Sr=0,rs=l),Sr)},movementY:function(l){return"movementY"in l?l.movementY:is}}),Gp=ur(ql),Mo=q({},ql,{dataTransfer:0}),ca=ur(Mo),df=q({},Va,{relatedTarget:0}),pf=ur(df),mf=q({},Ha,{animationName:0,elapsedTime:0,pseudoElement:0}),b0=ur(mf),R0=q({},Ha,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Hp=ur(R0),gf=q({},Ha,{data:0}),Vp=ur(gf),I0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ql(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Wp[l])?!!u[l]:!1}function ua(){return Ql}var vf=q({},Va,{key:function(l){if(l.key){var u=I0[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Ga(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?P0[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ua,charCode:function(l){return l.type==="keypress"?Ga(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ga(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),yf=ur(vf),ss=q({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zr=ur(ss),Wa=q({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ua}),Co=ur(Wa),To=q({},Ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xa=ur(To),L0=q({},ql,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Xp=ur(L0),jp=[9,13,27,32],hr=a&&"CompositionEvent"in window,ki=null;a&&"documentMode"in document&&(ki=document.documentMode);var Kn=a&&"TextEvent"in window&&!ki,$l=a&&(!hr||ki&&8<ki&&11>=ki),os=" ",Yp=!1;function Kp(l,u){switch(l){case"keyup":return jp.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _f(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ha=!1;function D0(l,u){switch(l){case"compositionend":return _f(u);case"keypress":return u.which!==32?null:(Yp=!0,os);case"textInput":return l=u.data,l===os&&Yp?null:l;default:return null}}function lu(l,u){if(ha)return l==="compositionend"||!hr&&Kp(l,u)?(l=ou(),wr=zp=Ss=null,ha=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return $l&&u.locale!=="ko"?null:u.data;default:return null}}var ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xf(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!ec[l.type]:u==="textarea"}function tc(l,u,v,w){ke(w),u=Pf(u,"onChange"),0<u.length&&(v=new au("onChange","change",null,v,w),l.push({event:v,listeners:u}))}var fa=null,nc=null;function B0(l){oc(l,0)}function bo(l){var u=hi(l);if(zt(u))return l}function N0(l,u){if(l==="change")return u}var ic=!1;if(a){var Mr;if(a){var ja="oninput"in document;if(!ja){var Ya=document.createElement("div");Ya.setAttribute("oninput","return;"),ja=typeof Ya.oninput=="function"}Mr=ja}else Mr=!1;ic=Mr&&(!document.documentMode||9<document.documentMode)}function Ms(){fa&&(fa.detachEvent("onpropertychange",Ef),nc=fa=null)}function Ef(l){if(l.propertyName==="value"&&bo(nc)){var u=[];tc(u,nc,l,re(l)),Ai(B0,u)}}function rc(l,u,v){l==="focusin"?(Ms(),fa=u,nc=v,fa.attachEvent("onpropertychange",Ef)):l==="focusout"&&Ms()}function F0(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return bo(nc)}function Jp(l,u){if(l==="click")return bo(u)}function Qn(l,u){if(l==="input"||l==="change")return bo(u)}function Af(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Gr=typeof Object.is=="function"?Object.is:Af;function Ka(l,u){if(Gr(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var v=Object.keys(l),w=Object.keys(u);if(v.length!==w.length)return!1;for(w=0;w<v.length;w++){var b=v[w];if(!c.call(u,b)||!Gr(l[b],u[b]))return!1}return!0}function cu(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Hr(l,u){var v=cu(l);l=0;for(var w;v;){if(v.nodeType===3){if(w=l+v.textContent.length,l<=u&&w>=u)return{node:v,offset:u-l};l=w}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=cu(v)}}function Ja(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Ja(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function $n(){for(var l=window,u=Q();u instanceof l.HTMLIFrameElement;){try{var v=typeof u.contentWindow.location.href=="string"}catch{v=!1}if(v)l=u.contentWindow;else break;u=Q(l.document)}return u}function Pi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function Li(l){var u=$n(),v=l.focusedElem,w=l.selectionRange;if(u!==v&&v&&v.ownerDocument&&Ja(v.ownerDocument.documentElement,v)){if(w!==null&&Pi(v)){if(u=w.start,l=w.end,l===void 0&&(l=u),"selectionStart"in v)v.selectionStart=u,v.selectionEnd=Math.min(l,v.value.length);else if(l=(u=v.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var b=v.textContent.length,P=Math.min(w.start,b);w=w.end===void 0?P:Math.min(w.end,b),!l.extend&&P>w&&(b=w,w=P,P=b),b=Hr(v,P);var G=Hr(v,w);b&&G&&(l.rangeCount!==1||l.anchorNode!==b.node||l.anchorOffset!==b.offset||l.focusNode!==G.node||l.focusOffset!==G.offset)&&(u=u.createRange(),u.setStart(b.node,b.offset),l.removeAllRanges(),P>w?(l.addRange(u),l.extend(G.node,G.offset)):(u.setEnd(G.node,G.offset),l.addRange(u)))}}for(u=[],l=v;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<u.length;v++)l=u[v],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var wf=a&&"documentMode"in document&&11>=document.documentMode,Zs=null,Za=null,uu=null,Di=!1;function Sf(l,u,v){var w=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Di||Zs==null||Zs!==Q(w)||(w=Zs,"selectionStart"in w&&Pi(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),uu&&Ka(uu,w)||(uu=w,w=Pf(Za,"onSelect"),0<w.length&&(u=new au("onSelect","select",null,u,v),l.push({event:u,listeners:w}),u.target=Zs)))}function sc(l,u){var v={};return v[l.toLowerCase()]=u.toLowerCase(),v["Webkit"+l]="webkit"+u,v["Moz"+l]="moz"+u,v}var da={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},Cs={},Ts={};a&&(Ts=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function qs(l){if(Cs[l])return Cs[l];if(!da[l])return l;var u=da[l],v;for(v in u)if(u.hasOwnProperty(v)&&v in Ts)return Cs[l]=u[v];return l}var hu=qs("animationend"),fu=qs("animationiteration"),Zp=qs("animationstart"),qp=qs("transitionend"),Qp=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ro(l,u){Qp.set(l,u),s(u,[l])}for(var Mf=0;Mf<$p.length;Mf++){var du=$p[Mf],pu=du.toLowerCase(),O0=du[0].toUpperCase()+du.slice(1);Ro(pu,"on"+O0)}Ro(hu,"onAnimationEnd"),Ro(fu,"onAnimationIteration"),Ro(Zp,"onAnimationStart"),Ro("dblclick","onDoubleClick"),Ro("focusin","onFocus"),Ro("focusout","onBlur"),Ro(qp,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cf=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function Tf(l,u,v){var w=l.type||"unknown-event";l.currentTarget=v,qh(w,u,void 0,l),l.currentTarget=null}function oc(l,u){u=(u&4)!==0;for(var v=0;v<l.length;v++){var w=l[v],b=w.event;w=w.listeners;e:{var P=void 0;if(u)for(var G=w.length-1;0<=G;G--){var ne=w[G],le=ne.instance,we=ne.currentTarget;if(ne=ne.listener,le!==P&&b.isPropagationStopped())break e;Tf(b,ne,we),P=le}else for(G=0;G<w.length;G++){if(ne=w[G],le=ne.instance,we=ne.currentTarget,ne=ne.listener,le!==P&&b.isPropagationStopped())break e;Tf(b,ne,we),P=le}}}if(Ur)throw l=jl,Ur=!1,jl=null,l}function Hn(l,u){var v=u[$a];v===void 0&&(v=u[$a]=new Set);var w=l+"__bubble";v.has(w)||(Rf(u,l,2,!1),v.add(w))}function bf(l,u,v){var w=0;u&&(w|=4),Rf(v,l,w,u)}var mu="_reactListening"+Math.random().toString(36).slice(2);function ac(l){if(!l[mu]){l[mu]=!0,n.forEach(function(v){v!=="selectionchange"&&(Cf.has(v)||bf(v,!1,l),bf(v,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[mu]||(u[mu]=!0,bf("selectionchange",!1,u))}}function Rf(l,u,v,w){switch(T0(u)){case 1:var b=cf;break;case 4:b=Up;break;default:b=uf}v=b.bind(null,u,v,l),b=void 0,!Wl||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),w?b!==void 0?l.addEventListener(u,v,{capture:!0,passive:b}):l.addEventListener(u,v,!0):b!==void 0?l.addEventListener(u,v,{passive:b}):l.addEventListener(u,v,!1)}function If(l,u,v,w,b){var P=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var G=w.tag;if(G===3||G===4){var ne=w.stateNode.containerInfo;if(ne===b||ne.nodeType===8&&ne.parentNode===b)break;if(G===4)for(G=w.return;G!==null;){var le=G.tag;if((le===3||le===4)&&(le=G.stateNode.containerInfo,le===b||le.nodeType===8&&le.parentNode===b))return;G=G.return}for(;ne!==null;){if(G=ma(ne),G===null)return;if(le=G.tag,le===5||le===6){w=P=G;continue e}ne=ne.parentNode}}w=w.return}Ai(function(){var we=P,Ye=re(v),$e=[];e:{var Xe=Qp.get(l);if(Xe!==void 0){var vt=au,Mt=l;switch(l){case"keypress":if(Ga(v)===0)break e;case"keydown":case"keyup":vt=yf;break;case"focusin":Mt="focus",vt=pf;break;case"focusout":Mt="blur",vt=pf;break;case"beforeblur":case"afterblur":vt=pf;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vt=Gp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vt=ca;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vt=Co;break;case hu:case fu:case Zp:vt=b0;break;case qp:vt=Xa;break;case"scroll":vt=Zl;break;case"wheel":vt=Xp;break;case"copy":case"cut":case"paste":vt=Hp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vt=zr}var bt=(u&4)!==0,Mi=!bt&&l==="scroll",ye=bt?Xe!==null?Xe+"Capture":null:Xe;bt=[];for(var he=we,Ee;he!==null;){Ee=he;var it=Ee.stateNode;if(Ee.tag===5&&it!==null&&(Ee=it,ye!==null&&(it=ci(he,ye),it!=null&&bt.push(lc(he,it,Ee)))),Mi)break;he=he.return}0<bt.length&&(Xe=new vt(Xe,Mt,null,v,Ye),$e.push({event:Xe,listeners:bt}))}}if((u&7)===0){e:{if(Xe=l==="mouseover"||l==="pointerover",vt=l==="mouseout"||l==="pointerout",Xe&&v!==tt&&(Mt=v.relatedTarget||v.fromElement)&&(ma(Mt)||Mt[Vr]))break e;if((vt||Xe)&&(Xe=Ye.window===Ye?Ye:(Xe=Ye.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,vt?(Mt=v.relatedTarget||v.toElement,vt=we,Mt=Mt?ma(Mt):null,Mt!==null&&(Mi=Ao(Mt),Mt!==Mi||Mt.tag!==5&&Mt.tag!==6)&&(Mt=null)):(vt=null,Mt=we),vt!==Mt)){if(bt=Gp,it="onMouseLeave",ye="onMouseEnter",he="mouse",(l==="pointerout"||l==="pointerover")&&(bt=zr,it="onPointerLeave",ye="onPointerEnter",he="pointer"),Mi=vt==null?Xe:hi(vt),Ee=Mt==null?Xe:hi(Mt),Xe=new bt(it,he+"leave",vt,v,Ye),Xe.target=Mi,Xe.relatedTarget=Ee,it=null,ma(Ye)===we&&(bt=new bt(ye,he+"enter",Mt,v,Ye),bt.target=Ee,bt.relatedTarget=Mi,it=bt),Mi=it,vt&&Mt)t:{for(bt=vt,ye=Mt,he=0,Ee=bt;Ee;Ee=qa(Ee))he++;for(Ee=0,it=ye;it;it=qa(it))Ee++;for(;0<he-Ee;)bt=qa(bt),he--;for(;0<Ee-he;)ye=qa(ye),Ee--;for(;he--;){if(bt===ye||ye!==null&&bt===ye.alternate)break t;bt=qa(bt),ye=qa(ye)}bt=null}else bt=null;vt!==null&&k0($e,Xe,vt,bt,!1),Mt!==null&&Mi!==null&&k0($e,Mi,Mt,bt,!0)}}e:{if(Xe=we?hi(we):window,vt=Xe.nodeName&&Xe.nodeName.toLowerCase(),vt==="select"||vt==="input"&&Xe.type==="file")var Lt=N0;else if(xf(Xe))if(ic)Lt=Qn;else{Lt=F0;var Ht=rc}else(vt=Xe.nodeName)&&vt.toLowerCase()==="input"&&(Xe.type==="checkbox"||Xe.type==="radio")&&(Lt=Jp);if(Lt&&(Lt=Lt(l,we))){tc($e,Lt,v,Ye);break e}Ht&&Ht(l,Xe,we),l==="focusout"&&(Ht=Xe._wrapperState)&&Ht.controlled&&Xe.type==="number"&&Ve(Xe,"number",Xe.value)}switch(Ht=we?hi(we):window,l){case"focusin":(xf(Ht)||Ht.contentEditable==="true")&&(Zs=Ht,Za=we,uu=null);break;case"focusout":uu=Za=Zs=null;break;case"mousedown":Di=!0;break;case"contextmenu":case"mouseup":case"dragend":Di=!1,Sf($e,v,Ye);break;case"selectionchange":if(wf)break;case"keydown":case"keyup":Sf($e,v,Ye)}var Vt;if(hr)e:{switch(l){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else ha?Kp(l,v)&&(Kt="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(Kt="onCompositionStart");Kt&&($l&&v.locale!=="ko"&&(ha||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&ha&&(Vt=ou()):(Ss=Ye,zp="value"in Ss?Ss.value:Ss.textContent,ha=!0)),Ht=Pf(we,Kt),0<Ht.length&&(Kt=new Vp(Kt,l,null,v,Ye),$e.push({event:Kt,listeners:Ht}),Vt?Kt.data=Vt:(Vt=_f(v),Vt!==null&&(Kt.data=Vt)))),(Vt=Kn?D0(l,v):lu(l,v))&&(we=Pf(we,"onBeforeInput"),0<we.length&&(Ye=new Vp("onBeforeInput","beforeinput",null,v,Ye),$e.push({event:Ye,listeners:we}),Ye.data=Vt))}oc($e,u)})}function lc(l,u,v){return{instance:l,listener:u,currentTarget:v}}function Pf(l,u){for(var v=u+"Capture",w=[];l!==null;){var b=l,P=b.stateNode;b.tag===5&&P!==null&&(b=P,P=ci(l,v),P!=null&&w.unshift(lc(l,P,b)),P=ci(l,u),P!=null&&w.push(lc(l,P,b))),l=l.return}return w}function qa(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function k0(l,u,v,w,b){for(var P=u._reactName,G=[];v!==null&&v!==w;){var ne=v,le=ne.alternate,we=ne.stateNode;if(le!==null&&le===w)break;ne.tag===5&&we!==null&&(ne=we,b?(le=ci(v,P),le!=null&&G.unshift(lc(v,le,ne))):b||(le=ci(v,P),le!=null&&G.push(lc(v,le,ne)))),v=v.return}G.length!==0&&l.push({event:u,listeners:G})}var TE=/\r\n?/g,U0=/\u0000|\uFFFD/g;function em(l){return(typeof l=="string"?l:""+l).replace(TE,`
`).replace(U0,"")}function gu(l,u,v){if(u=em(u),em(l)!==u&&v)throw Error(t(425))}function vu(){}var cc=null,tm=null;function nm(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var im=typeof setTimeout=="function"?setTimeout:void 0,rm=typeof clearTimeout=="function"?clearTimeout:void 0,Lf=typeof Promise=="function"?Promise:void 0,bE=typeof queueMicrotask=="function"?queueMicrotask:typeof Lf<"u"?function(l){return Lf.resolve(null).then(l).catch(z0)}:im;function z0(l){setTimeout(function(){throw l})}function Df(l,u){var v=u,w=0;do{var b=v.nextSibling;if(l.removeChild(v),b&&b.nodeType===8)if(v=b.data,v==="/$"){if(w===0){l.removeChild(b),su(u);return}w--}else v!=="$"&&v!=="$?"&&v!=="$!"||w++;v=b}while(v);su(u)}function Io(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function sm(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"){if(u===0)return l;u--}else v==="/$"&&u++}l=l.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),Si="__reactFiber$"+Qa,uc="__reactProps$"+Qa,Vr="__reactContainer$"+Qa,$a="__reactEvents$"+Qa,Bf="__reactListeners$"+Qa,Nf="__reactHandles$"+Qa;function ma(l){var u=l[Si];if(u)return u;for(var v=l.parentNode;v;){if(u=v[Vr]||v[Si]){if(v=u.alternate,u.child!==null||v!==null&&v.child!==null)for(l=sm(l);l!==null;){if(v=l[Si])return v;l=sm(l)}return u}l=v,v=l.parentNode}return null}function Po(l){return l=l[Si]||l[Vr],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function hi(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function Ff(l){return l[uc]||null}var om=[],Bi=-1;function ii(l){return{current:l}}function Vn(l){0>Bi||(l.current=om[Bi],om[Bi]=null,Bi--)}function kn(l,u){Bi++,om[Bi]=l.current,l.current=u}var Lo={},Ui=ii(Lo),fr=ii(!1),Do=Lo;function el(l,u){var v=l.type.contextTypes;if(!v)return Lo;var w=l.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===u)return w.__reactInternalMemoizedMaskedChildContext;var b={},P;for(P in v)b[P]=u[P];return w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=b),b}function er(l){return l=l.childContextTypes,l!=null}function yu(){Vn(fr),Vn(Ui)}function am(l,u,v){if(Ui.current!==Lo)throw Error(t(168));kn(Ui,u),kn(fr,v)}function _u(l,u,v){var w=l.stateNode;if(u=u.childContextTypes,typeof w.getChildContext!="function")return v;w=w.getChildContext();for(var b in w)if(!(b in u))throw Error(t(108,ge(l)||"Unknown",b));return q({},v,w)}function tl(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Lo,Do=Ui.current,kn(Ui,l),kn(fr,fr.current),!0}function lm(l,u,v){var w=l.stateNode;if(!w)throw Error(t(169));v?(l=_u(l,u,Do),w.__reactInternalMemoizedMergedChildContext=l,Vn(fr),Vn(Ui),kn(Ui,l)):Vn(fr),kn(fr,v)}var bs=null,xu=!1,Of=!1;function Eu(l){bs===null?bs=[l]:bs.push(l)}function G0(l){xu=!0,Eu(l)}function Qs(){if(!Of&&bs!==null){Of=!0;var l=0,u=an;try{var v=bs;for(an=1;l<v.length;l++){var w=v[l];do w=w(!0);while(w!==null)}bs=null,xu=!1}catch(b){throw bs!==null&&(bs=bs.slice(l+1)),X(at,Qs),b}finally{an=u,Of=!1}}return null}var nl=[],Cr=0,kf=null,Uf=0,dr=[],Ni=0,il=null,st=1,as="";function Bo(l,u){nl[Cr++]=Uf,nl[Cr++]=kf,kf=l,Uf=u}function cm(l,u,v){dr[Ni++]=st,dr[Ni++]=as,dr[Ni++]=il,il=l;var w=st;l=as;var b=32-rn(w)-1;w&=~(1<<b),v+=1;var P=32-rn(u)+b;if(30<P){var G=b-b%5;P=(w&(1<<G)-1).toString(32),w>>=G,b-=G,st=1<<32-rn(u)+b|v<<b|w,as=P+l}else st=1<<P|v<<b|w,as=l}function um(l){l.return!==null&&(Bo(l,1),cm(l,1,0))}function No(l){for(;l===kf;)kf=nl[--Cr],nl[Cr]=null,Uf=nl[--Cr],nl[Cr]=null;for(;l===il;)il=dr[--Ni],dr[Ni]=null,as=dr[--Ni],dr[Ni]=null,st=dr[--Ni],dr[Ni]=null}var zi=null,pr=null,jn=!1,ls=null;function hm(l,u){var v=io(5,null,null,0);v.elementType="DELETED",v.stateNode=u,v.return=l,u=l.deletions,u===null?(l.deletions=[v],l.flags|=16):u.push(v)}function fm(l,u){switch(l.tag){case 5:var v=l.type;return u=u.nodeType!==1||v.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,zi=l,pr=Io(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,zi=l,pr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(v=il!==null?{id:st,overflow:as}:null,l.memoizedState={dehydrated:u,treeContext:v,retryLane:1073741824},v=io(18,null,null,0),v.stateNode=u,v.return=l,l.child=v,zi=l,pr=null,!0):!1;default:return!1}}function zf(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Gf(l){if(jn){var u=pr;if(u){var v=u;if(!fm(l,u)){if(zf(l))throw Error(t(418));u=Io(v.nextSibling);var w=zi;u&&fm(l,u)?hm(w,v):(l.flags=l.flags&-4097|2,jn=!1,zi=l)}}else{if(zf(l))throw Error(t(418));l.flags=l.flags&-4097|2,jn=!1,zi=l}}}function Hf(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;zi=l}function hc(l){if(l!==zi)return!1;if(!jn)return Hf(l),jn=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!nm(l.type,l.memoizedProps)),u&&(u=pr)){if(zf(l))throw dm(),Error(t(418));for(;u;)hm(l,u),u=Io(u.nextSibling)}if(Hf(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var v=l.data;if(v==="/$"){if(u===0){pr=Io(l.nextSibling);break e}u--}else v!=="$"&&v!=="$!"&&v!=="$?"||u++}l=l.nextSibling}pr=null}}else pr=zi?Io(l.stateNode.nextSibling):null;return!0}function dm(){for(var l=pr;l;)l=Io(l.nextSibling)}function ga(){pr=zi=null,jn=!1}function fc(l){ls===null?ls=[l]:ls.push(l)}var RE=R.ReactCurrentBatchConfig;function Au(l,u,v){if(l=v.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var w=v.stateNode}if(!w)throw Error(t(147,l));var b=w,P=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===P?u.ref:(u=function(G){var ne=b.refs;G===null?delete ne[P]:ne[P]=G},u._stringRef=P,u)}if(typeof l!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,l))}return l}function wu(l,u){throw l=Object.prototype.toString.call(u),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function pm(l){var u=l._init;return u(l._payload)}function mm(l){function u(ye,he){if(l){var Ee=ye.deletions;Ee===null?(ye.deletions=[he],ye.flags|=16):Ee.push(he)}}function v(ye,he){if(!l)return null;for(;he!==null;)u(ye,he),he=he.sibling;return null}function w(ye,he){for(ye=new Map;he!==null;)he.key!==null?ye.set(he.key,he):ye.set(he.index,he),he=he.sibling;return ye}function b(ye,he){return ye=wc(ye,he),ye.index=0,ye.sibling=null,ye}function P(ye,he,Ee){return ye.index=Ee,l?(Ee=ye.alternate,Ee!==null?(Ee=Ee.index,Ee<he?(ye.flags|=2,he):Ee):(ye.flags|=2,he)):(ye.flags|=1048576,he)}function G(ye){return l&&ye.alternate===null&&(ye.flags|=2),ye}function ne(ye,he,Ee,it){return he===null||he.tag!==6?(he=KE(Ee,ye.mode,it),he.return=ye,he):(he=b(he,Ee),he.return=ye,he)}function le(ye,he,Ee,it){var Lt=Ee.type;return Lt===k?Ye(ye,he,Ee.props.children,it,Ee.key):he!==null&&(he.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===oe&&pm(Lt)===he.type)?(it=b(he,Ee.props),it.ref=Au(ye,he,Ee),it.return=ye,it):(it=uv(Ee.type,Ee.key,Ee.props,null,ye.mode,it),it.ref=Au(ye,he,Ee),it.return=ye,it)}function we(ye,he,Ee,it){return he===null||he.tag!==4||he.stateNode.containerInfo!==Ee.containerInfo||he.stateNode.implementation!==Ee.implementation?(he=JE(Ee,ye.mode,it),he.return=ye,he):(he=b(he,Ee.children||[]),he.return=ye,he)}function Ye(ye,he,Ee,it,Lt){return he===null||he.tag!==7?(he=zu(Ee,ye.mode,it,Lt),he.return=ye,he):(he=b(he,Ee),he.return=ye,he)}function $e(ye,he,Ee){if(typeof he=="string"&&he!==""||typeof he=="number")return he=KE(""+he,ye.mode,Ee),he.return=ye,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case L:return Ee=uv(he.type,he.key,he.props,null,ye.mode,Ee),Ee.ref=Au(ye,null,he),Ee.return=ye,Ee;case B:return he=JE(he,ye.mode,Ee),he.return=ye,he;case oe:var it=he._init;return $e(ye,it(he._payload),Ee)}if(je(he)||Z(he))return he=zu(he,ye.mode,Ee,null),he.return=ye,he;wu(ye,he)}return null}function Xe(ye,he,Ee,it){var Lt=he!==null?he.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Lt!==null?null:ne(ye,he,""+Ee,it);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case L:return Ee.key===Lt?le(ye,he,Ee,it):null;case B:return Ee.key===Lt?we(ye,he,Ee,it):null;case oe:return Lt=Ee._init,Xe(ye,he,Lt(Ee._payload),it)}if(je(Ee)||Z(Ee))return Lt!==null?null:Ye(ye,he,Ee,it,null);wu(ye,Ee)}return null}function vt(ye,he,Ee,it,Lt){if(typeof it=="string"&&it!==""||typeof it=="number")return ye=ye.get(Ee)||null,ne(he,ye,""+it,Lt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case L:return ye=ye.get(it.key===null?Ee:it.key)||null,le(he,ye,it,Lt);case B:return ye=ye.get(it.key===null?Ee:it.key)||null,we(he,ye,it,Lt);case oe:var Ht=it._init;return vt(ye,he,Ee,Ht(it._payload),Lt)}if(je(it)||Z(it))return ye=ye.get(Ee)||null,Ye(he,ye,it,Lt,null);wu(he,it)}return null}function Mt(ye,he,Ee,it){for(var Lt=null,Ht=null,Vt=he,Kt=he=0,rr=null;Vt!==null&&Kt<Ee.length;Kt++){Vt.index>Kt?(rr=Vt,Vt=null):rr=Vt.sibling;var Ln=Xe(ye,Vt,Ee[Kt],it);if(Ln===null){Vt===null&&(Vt=rr);break}l&&Vt&&Ln.alternate===null&&u(ye,Vt),he=P(Ln,he,Kt),Ht===null?Lt=Ln:Ht.sibling=Ln,Ht=Ln,Vt=rr}if(Kt===Ee.length)return v(ye,Vt),jn&&Bo(ye,Kt),Lt;if(Vt===null){for(;Kt<Ee.length;Kt++)Vt=$e(ye,Ee[Kt],it),Vt!==null&&(he=P(Vt,he,Kt),Ht===null?Lt=Vt:Ht.sibling=Vt,Ht=Vt);return jn&&Bo(ye,Kt),Lt}for(Vt=w(ye,Vt);Kt<Ee.length;Kt++)rr=vt(Vt,ye,Kt,Ee[Kt],it),rr!==null&&(l&&rr.alternate!==null&&Vt.delete(rr.key===null?Kt:rr.key),he=P(rr,he,Kt),Ht===null?Lt=rr:Ht.sibling=rr,Ht=rr);return l&&Vt.forEach(function(Sc){return u(ye,Sc)}),jn&&Bo(ye,Kt),Lt}function bt(ye,he,Ee,it){var Lt=Z(Ee);if(typeof Lt!="function")throw Error(t(150));if(Ee=Lt.call(Ee),Ee==null)throw Error(t(151));for(var Ht=Lt=null,Vt=he,Kt=he=0,rr=null,Ln=Ee.next();Vt!==null&&!Ln.done;Kt++,Ln=Ee.next()){Vt.index>Kt?(rr=Vt,Vt=null):rr=Vt.sibling;var Sc=Xe(ye,Vt,Ln.value,it);if(Sc===null){Vt===null&&(Vt=rr);break}l&&Vt&&Sc.alternate===null&&u(ye,Vt),he=P(Sc,he,Kt),Ht===null?Lt=Sc:Ht.sibling=Sc,Ht=Sc,Vt=rr}if(Ln.done)return v(ye,Vt),jn&&Bo(ye,Kt),Lt;if(Vt===null){for(;!Ln.done;Kt++,Ln=Ee.next())Ln=$e(ye,Ln.value,it),Ln!==null&&(he=P(Ln,he,Kt),Ht===null?Lt=Ln:Ht.sibling=Ln,Ht=Ln);return jn&&Bo(ye,Kt),Lt}for(Vt=w(ye,Vt);!Ln.done;Kt++,Ln=Ee.next())Ln=vt(Vt,ye,Kt,Ln.value,it),Ln!==null&&(l&&Ln.alternate!==null&&Vt.delete(Ln.key===null?Kt:Ln.key),he=P(Ln,he,Kt),Ht===null?Lt=Ln:Ht.sibling=Ln,Ht=Ln);return l&&Vt.forEach(function(CN){return u(ye,CN)}),jn&&Bo(ye,Kt),Lt}function Mi(ye,he,Ee,it){if(typeof Ee=="object"&&Ee!==null&&Ee.type===k&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case L:e:{for(var Lt=Ee.key,Ht=he;Ht!==null;){if(Ht.key===Lt){if(Lt=Ee.type,Lt===k){if(Ht.tag===7){v(ye,Ht.sibling),he=b(Ht,Ee.props.children),he.return=ye,ye=he;break e}}else if(Ht.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===oe&&pm(Lt)===Ht.type){v(ye,Ht.sibling),he=b(Ht,Ee.props),he.ref=Au(ye,Ht,Ee),he.return=ye,ye=he;break e}v(ye,Ht);break}else u(ye,Ht);Ht=Ht.sibling}Ee.type===k?(he=zu(Ee.props.children,ye.mode,it,Ee.key),he.return=ye,ye=he):(it=uv(Ee.type,Ee.key,Ee.props,null,ye.mode,it),it.ref=Au(ye,he,Ee),it.return=ye,ye=it)}return G(ye);case B:e:{for(Ht=Ee.key;he!==null;){if(he.key===Ht)if(he.tag===4&&he.stateNode.containerInfo===Ee.containerInfo&&he.stateNode.implementation===Ee.implementation){v(ye,he.sibling),he=b(he,Ee.children||[]),he.return=ye,ye=he;break e}else{v(ye,he);break}else u(ye,he);he=he.sibling}he=JE(Ee,ye.mode,it),he.return=ye,ye=he}return G(ye);case oe:return Ht=Ee._init,Mi(ye,he,Ht(Ee._payload),it)}if(je(Ee))return Mt(ye,he,Ee,it);if(Z(Ee))return bt(ye,he,Ee,it);wu(ye,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,he!==null&&he.tag===6?(v(ye,he.sibling),he=b(he,Ee),he.return=ye,ye=he):(v(ye,he),he=KE(Ee,ye.mode,it),he.return=ye,ye=he),G(ye)):v(ye,he)}return Mi}var rl=mm(!0),Su=mm(!1),sl=ii(null),ol=null,Fo=null,dc=null;function al(){dc=Fo=ol=null}function Mu(l){var u=sl.current;Vn(sl),l._currentValue=u}function Cu(l,u,v){for(;l!==null;){var w=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),l===v)break;l=l.return}}function va(l,u){ol=l,dc=Fo=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(ln=!0),l.firstContext=null)}function Wr(l){var u=l._currentValue;if(dc!==l)if(l={context:l,memoizedValue:u,next:null},Fo===null){if(ol===null)throw Error(t(308));Fo=l,ol.dependencies={lanes:0,firstContext:l}}else Fo=Fo.next=l;return u}var Oo=null;function gm(l){Oo===null?Oo=[l]:Oo.push(l)}function Tu(l,u,v,w){var b=u.interleaved;return b===null?(v.next=v,gm(u)):(v.next=b.next,b.next=v),u.interleaved=v,Rs(l,w)}function Rs(l,u){l.lanes|=u;var v=l.alternate;for(v!==null&&(v.lanes|=u),v=l,l=l.return;l!==null;)l.childLanes|=u,v=l.alternate,v!==null&&(v.childLanes|=u),v=l,l=l.return;return v.tag===3?v.stateNode:null}var Fn=!1;function sn(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fi(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function On(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function Jn(l,u,v){var w=l.updateQueue;if(w===null)return null;if(w=w.shared,(bn&2)!==0){var b=w.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),w.pending=u,Rs(l,v)}return b=w.interleaved,b===null?(u.next=u,gm(w)):(u.next=b.next,b.next=u),w.interleaved=u,Rs(l,v)}function tr(l,u,v){if(u=u.updateQueue,u!==null&&(u=u.shared,(v&4194240)!==0)){var w=u.lanes;w&=l.pendingLanes,v|=w,u.lanes=v,Ys(l,v)}}function ll(l,u){var v=l.updateQueue,w=l.alternate;if(w!==null&&(w=w.updateQueue,v===w)){var b=null,P=null;if(v=v.firstBaseUpdate,v!==null){do{var G={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};P===null?b=P=G:P=P.next=G,v=v.next}while(v!==null);P===null?b=P=u:P=P.next=u}else b=P=u;v={baseState:w.baseState,firstBaseUpdate:b,lastBaseUpdate:P,shared:w.shared,effects:w.effects},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=u:l.next=u,v.lastBaseUpdate=u}function ri(l,u,v,w){var b=l.updateQueue;Fn=!1;var P=b.firstBaseUpdate,G=b.lastBaseUpdate,ne=b.shared.pending;if(ne!==null){b.shared.pending=null;var le=ne,we=le.next;le.next=null,G===null?P=we:G.next=we,G=le;var Ye=l.alternate;Ye!==null&&(Ye=Ye.updateQueue,ne=Ye.lastBaseUpdate,ne!==G&&(ne===null?Ye.firstBaseUpdate=we:ne.next=we,Ye.lastBaseUpdate=le))}if(P!==null){var $e=b.baseState;G=0,Ye=we=le=null,ne=P;do{var Xe=ne.lane,vt=ne.eventTime;if((w&Xe)===Xe){Ye!==null&&(Ye=Ye.next={eventTime:vt,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var Mt=l,bt=ne;switch(Xe=u,vt=v,bt.tag){case 1:if(Mt=bt.payload,typeof Mt=="function"){$e=Mt.call(vt,$e,Xe);break e}$e=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=bt.payload,Xe=typeof Mt=="function"?Mt.call(vt,$e,Xe):Mt,Xe==null)break e;$e=q({},$e,Xe);break e;case 2:Fn=!0}}ne.callback!==null&&ne.lane!==0&&(l.flags|=64,Xe=b.effects,Xe===null?b.effects=[ne]:Xe.push(ne))}else vt={eventTime:vt,lane:Xe,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Ye===null?(we=Ye=vt,le=$e):Ye=Ye.next=vt,G|=Xe;if(ne=ne.next,ne===null){if(ne=b.shared.pending,ne===null)break;Xe=ne,ne=Xe.next,Xe.next=null,b.lastBaseUpdate=Xe,b.shared.pending=null}}while(!0);if(Ye===null&&(le=$e),b.baseState=le,b.firstBaseUpdate=we,b.lastBaseUpdate=Ye,u=b.shared.interleaved,u!==null){b=u;do G|=b.lane,b=b.next;while(b!==u)}else P===null&&(b.shared.lanes=0);Fu|=G,l.lanes=G,l.memoizedState=$e}}function pc(l,u,v){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var w=l[u],b=w.callback;if(b!==null){if(w.callback=null,w=v,typeof b!="function")throw Error(t(191,b));b.call(w)}}}var $s={},Xr=ii($s),cl=ii($s),ko=ii($s);function gi(l){if(l===$s)throw Error(t(174));return l}function bu(l,u){switch(kn(ko,u),kn(cl,l),kn(Xr,$s),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Fe(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=Fe(u,l)}Vn(Xr),kn(Xr,u)}function ya(){Vn(Xr),Vn(cl),Vn(ko)}function ul(l){gi(ko.current);var u=gi(Xr.current),v=Fe(u,l.type);u!==v&&(kn(cl,l),kn(Xr,v))}function mc(l){cl.current===l&&(Vn(Xr),Vn(cl))}var Yn=ii(0);function Is(l){for(var u=l;u!==null;){if(u.tag===13){var v=u.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var gc=[];function eo(){for(var l=0;l<gc.length;l++)gc[l]._workInProgressVersionPrimary=null;gc.length=0}var hl=R.ReactCurrentDispatcher,fl=R.ReactCurrentBatchConfig,Uo=0,Wn=null,si=null,Mn=null,Ps=!1,nr=!1,_a=0,Tr=0;function Gi(){throw Error(t(321))}function Ru(l,u){if(u===null)return!1;for(var v=0;v<u.length&&v<l.length;v++)if(!Gr(l[v],u[v]))return!1;return!0}function Iu(l,u,v,w,b,P){if(Uo=P,Wn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,hl.current=l===null||l.memoizedState===null?K0:J0,l=v(w,b),nr){P=0;do{if(nr=!1,_a=0,25<=P)throw Error(t(301));P+=1,Mn=si=null,u.updateQueue=null,hl.current=Z0,l=v(w,b)}while(nr)}if(hl.current=Jf,u=si!==null&&si.next!==null,Uo=0,Mn=si=Wn=null,Ps=!1,u)throw Error(t(300));return l}function vm(){var l=_a!==0;return _a=0,l}function Hi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?Wn.memoizedState=Mn=l:Mn=Mn.next=l,Mn}function jr(){if(si===null){var l=Wn.alternate;l=l!==null?l.memoizedState:null}else l=si.next;var u=Mn===null?Wn.memoizedState:Mn.next;if(u!==null)Mn=u,si=l;else{if(l===null)throw Error(t(310));si=l,l={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},Mn===null?Wn.memoizedState=Mn=l:Mn=Mn.next=l}return Mn}function vc(l,u){return typeof u=="function"?u(l):u}function Pu(l){var u=jr(),v=u.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=l;var w=si,b=w.baseQueue,P=v.pending;if(P!==null){if(b!==null){var G=b.next;b.next=P.next,P.next=G}w.baseQueue=b=P,v.pending=null}if(b!==null){P=b.next,w=w.baseState;var ne=G=null,le=null,we=P;do{var Ye=we.lane;if((Uo&Ye)===Ye)le!==null&&(le=le.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),w=we.hasEagerState?we.eagerState:l(w,we.action);else{var $e={lane:Ye,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};le===null?(ne=le=$e,G=w):le=le.next=$e,Wn.lanes|=Ye,Fu|=Ye}we=we.next}while(we!==null&&we!==P);le===null?G=w:le.next=ne,Gr(w,u.memoizedState)||(ln=!0),u.memoizedState=w,u.baseState=G,u.baseQueue=le,v.lastRenderedState=w}if(l=v.interleaved,l!==null){b=l;do P=b.lane,Wn.lanes|=P,Fu|=P,b=b.next;while(b!==l)}else b===null&&(v.lanes=0);return[u.memoizedState,v.dispatch]}function zo(l){var u=jr(),v=u.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=l;var w=v.dispatch,b=v.pending,P=u.memoizedState;if(b!==null){v.pending=null;var G=b=b.next;do P=l(P,G.action),G=G.next;while(G!==b);Gr(P,u.memoizedState)||(ln=!0),u.memoizedState=P,u.baseQueue===null&&(u.baseState=P),v.lastRenderedState=P}return[P,w]}function ym(){}function _m(l,u){var v=Wn,w=jr(),b=u(),P=!Gr(w.memoizedState,b);if(P&&(w.memoizedState=b,ln=!0),w=w.queue,Am(H0.bind(null,v,w,l),[l]),w.getSnapshot!==u||P||Mn!==null&&Mn.memoizedState.tag&1){if(v.flags|=2048,Ls(9,Lu.bind(null,v,w,b,u),void 0,null),ir===null)throw Error(t(349));(Uo&30)!==0||Vf(v,u,b)}return b}function Vf(l,u,v){l.flags|=16384,l={getSnapshot:u,value:v},u=Wn.updateQueue,u===null?(u={lastEffect:null,stores:null},Wn.updateQueue=u,u.stores=[l]):(v=u.stores,v===null?u.stores=[l]:v.push(l))}function Lu(l,u,v,w){u.value=v,u.getSnapshot=w,V0(u)&&xm(l)}function H0(l,u,v){return v(function(){V0(u)&&xm(l)})}function V0(l){var u=l.getSnapshot;l=l.value;try{var v=u();return!Gr(l,v)}catch{return!0}}function xm(l){var u=Rs(l,1);u!==null&&Xo(u,l,1,-1)}function Em(l){var u=Hi();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vc,lastRenderedState:l},u.queue=l,l=l.dispatch=dl.bind(null,Wn,l),[u.memoizedState,l]}function Ls(l,u,v,w){return l={tag:l,create:u,destroy:v,deps:w,next:null},u=Wn.updateQueue,u===null?(u={lastEffect:null,stores:null},Wn.updateQueue=u,u.lastEffect=l.next=l):(v=u.lastEffect,v===null?u.lastEffect=l.next=l:(w=v.next,v.next=l,l.next=w,u.lastEffect=l)),l}function W0(){return jr().memoizedState}function to(l,u,v,w){var b=Hi();Wn.flags|=l,b.memoizedState=Ls(1|u,v,void 0,w===void 0?null:w)}function Du(l,u,v,w){var b=jr();w=w===void 0?null:w;var P=void 0;if(si!==null){var G=si.memoizedState;if(P=G.destroy,w!==null&&Ru(w,G.deps)){b.memoizedState=Ls(u,v,P,w);return}}Wn.flags|=l,b.memoizedState=Ls(1|u,v,P,w)}function mr(l,u){return to(8390656,8,l,u)}function Am(l,u){return Du(2048,8,l,u)}function wm(l,u){return Du(4,2,l,u)}function X0(l,u){return Du(4,4,l,u)}function j0(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Sm(l,u,v){return v=v!=null?v.concat([l]):null,Du(4,4,j0.bind(null,u,l),v)}function Wf(){}function Y0(l,u){var v=jr();u=u===void 0?null:u;var w=v.memoizedState;return w!==null&&u!==null&&Ru(u,w[1])?w[0]:(v.memoizedState=[l,u],l)}function Yr(l,u){var v=jr();u=u===void 0?null:u;var w=v.memoizedState;return w!==null&&u!==null&&Ru(u,w[1])?w[0]:(l=l(),v.memoizedState=[l,u],l)}function Xf(l,u,v){return(Uo&21)===0?(l.baseState&&(l.baseState=!1,ln=!0),l.memoizedState=v):(Gr(v,u)||(v=Xn(),Wn.lanes|=v,Fu|=v,l.baseState=!0),u)}function IE(l,u){var v=an;an=v!==0&&4>v?v:4,l(!0);var w=fl.transition;fl.transition={};try{l(!1),u()}finally{an=v,fl.transition=w}}function Go(){return jr().memoizedState}function jf(l,u,v){var w=Ec(l);if(v={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null},Bu(l))Yf(u,v);else if(v=Tu(l,u,v,w),v!==null){var b=Jr();Xo(v,l,w,b),Kf(v,u,w)}}function dl(l,u,v){var w=Ec(l),b={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null};if(Bu(l))Yf(u,b);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=u.lastRenderedReducer,P!==null))try{var G=u.lastRenderedState,ne=P(G,v);if(b.hasEagerState=!0,b.eagerState=ne,Gr(ne,G)){var le=u.interleaved;le===null?(b.next=b,gm(u)):(b.next=le.next,le.next=b),u.interleaved=b;return}}catch{}finally{}v=Tu(l,u,b,w),v!==null&&(b=Jr(),Xo(v,l,w,b),Kf(v,u,w))}}function Bu(l){var u=l.alternate;return l===Wn||u!==null&&u===Wn}function Yf(l,u){nr=Ps=!0;var v=l.pending;v===null?u.next=u:(u.next=v.next,v.next=u),l.pending=u}function Kf(l,u,v){if((v&4194240)!==0){var w=u.lanes;w&=l.pendingLanes,v|=w,u.lanes=v,Ys(l,v)}}var Jf={readContext:Wr,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useInsertionEffect:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useMutableSource:Gi,useSyncExternalStore:Gi,useId:Gi,unstable_isNewReconciler:!1},K0={readContext:Wr,useCallback:function(l,u){return Hi().memoizedState=[l,u===void 0?null:u],l},useContext:Wr,useEffect:mr,useImperativeHandle:function(l,u,v){return v=v!=null?v.concat([l]):null,to(4194308,4,j0.bind(null,u,l),v)},useLayoutEffect:function(l,u){return to(4194308,4,l,u)},useInsertionEffect:function(l,u){return to(4,2,l,u)},useMemo:function(l,u){var v=Hi();return u=u===void 0?null:u,l=l(),v.memoizedState=[l,u],l},useReducer:function(l,u,v){var w=Hi();return u=v!==void 0?v(u):u,w.memoizedState=w.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},w.queue=l,l=l.dispatch=jf.bind(null,Wn,l),[w.memoizedState,l]},useRef:function(l){var u=Hi();return l={current:l},u.memoizedState=l},useState:Em,useDebugValue:Wf,useDeferredValue:function(l){return Hi().memoizedState=l},useTransition:function(){var l=Em(!1),u=l[0];return l=IE.bind(null,l[1]),Hi().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,v){var w=Wn,b=Hi();if(jn){if(v===void 0)throw Error(t(407));v=v()}else{if(v=u(),ir===null)throw Error(t(349));(Uo&30)!==0||Vf(w,u,v)}b.memoizedState=v;var P={value:v,getSnapshot:u};return b.queue=P,mr(H0.bind(null,w,P,l),[l]),w.flags|=2048,Ls(9,Lu.bind(null,w,P,v,u),void 0,null),v},useId:function(){var l=Hi(),u=ir.identifierPrefix;if(jn){var v=as,w=st;v=(w&~(1<<32-rn(w)-1)).toString(32)+v,u=":"+u+"R"+v,v=_a++,0<v&&(u+="H"+v.toString(32)),u+=":"}else v=Tr++,u=":"+u+"r"+v.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},J0={readContext:Wr,useCallback:Y0,useContext:Wr,useEffect:Am,useImperativeHandle:Sm,useInsertionEffect:wm,useLayoutEffect:X0,useMemo:Yr,useReducer:Pu,useRef:W0,useState:function(){return Pu(vc)},useDebugValue:Wf,useDeferredValue:function(l){var u=jr();return Xf(u,si.memoizedState,l)},useTransition:function(){var l=Pu(vc)[0],u=jr().memoizedState;return[l,u]},useMutableSource:ym,useSyncExternalStore:_m,useId:Go,unstable_isNewReconciler:!1},Z0={readContext:Wr,useCallback:Y0,useContext:Wr,useEffect:Am,useImperativeHandle:Sm,useInsertionEffect:wm,useLayoutEffect:X0,useMemo:Yr,useReducer:zo,useRef:W0,useState:function(){return zo(vc)},useDebugValue:Wf,useDeferredValue:function(l){var u=jr();return si===null?u.memoizedState=l:Xf(u,si.memoizedState,l)},useTransition:function(){var l=zo(vc)[0],u=jr().memoizedState;return[l,u]},useMutableSource:ym,useSyncExternalStore:_m,useId:Go,unstable_isNewReconciler:!1};function cs(l,u){if(l&&l.defaultProps){u=q({},u),l=l.defaultProps;for(var v in l)u[v]===void 0&&(u[v]=l[v]);return u}return u}function Nu(l,u,v,w){u=l.memoizedState,v=v(w,u),v=v==null?u:q({},u,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var Zf={isMounted:function(l){return(l=l._reactInternals)?Ao(l)===l:!1},enqueueSetState:function(l,u,v){l=l._reactInternals;var w=Jr(),b=Ec(l),P=On(w,b);P.payload=u,v!=null&&(P.callback=v),u=Jn(l,P,b),u!==null&&(Xo(u,l,b,w),tr(u,l,b))},enqueueReplaceState:function(l,u,v){l=l._reactInternals;var w=Jr(),b=Ec(l),P=On(w,b);P.tag=1,P.payload=u,v!=null&&(P.callback=v),u=Jn(l,P,b),u!==null&&(Xo(u,l,b,w),tr(u,l,b))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var v=Jr(),w=Ec(l),b=On(v,w);b.tag=2,u!=null&&(b.callback=u),u=Jn(l,b,w),u!==null&&(Xo(u,l,w,v),tr(u,l,w))}};function q0(l,u,v,w,b,P,G){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(w,P,G):u.prototype&&u.prototype.isPureReactComponent?!Ka(v,w)||!Ka(b,P):!0}function d(l,u,v){var w=!1,b=Lo,P=u.contextType;return typeof P=="object"&&P!==null?P=Wr(P):(b=er(u)?Do:Ui.current,w=u.contextTypes,P=(w=w!=null)?el(l,b):Lo),u=new u(v,P),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Zf,l.stateNode=u,u._reactInternals=l,w&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=b,l.__reactInternalMemoizedMaskedChildContext=P),u}function p(l,u,v,w){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(v,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(v,w),u.state!==l&&Zf.enqueueReplaceState(u,u.state,null)}function E(l,u,v,w){var b=l.stateNode;b.props=v,b.state=l.memoizedState,b.refs={},sn(l);var P=u.contextType;typeof P=="object"&&P!==null?b.context=Wr(P):(P=er(u)?Do:Ui.current,b.context=el(l,P)),b.state=l.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(Nu(l,u,P,v),b.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(u=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),u!==b.state&&Zf.enqueueReplaceState(b,b.state,null),ri(l,v,b,w),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308)}function M(l,u){try{var v="",w=u;do v+=ze(w),w=w.return;while(w);var b=v}catch(P){b=`
Error generating stack: `+P.message+`
`+P.stack}return{value:l,source:u,stack:b,digest:null}}function I(l,u,v){return{value:l,source:null,stack:v??null,digest:u??null}}function F(l,u){try{console.error(u.value)}catch(v){setTimeout(function(){throw v})}}var $=typeof WeakMap=="function"?WeakMap:Map;function fe(l,u,v){v=On(-1,v),v.tag=3,v.payload={element:null};var w=u.value;return v.callback=function(){rv||(rv=!0,zE=w),F(l,u)},v}function Ie(l,u,v){v=On(-1,v),v.tag=3;var w=l.type.getDerivedStateFromError;if(typeof w=="function"){var b=u.value;v.payload=function(){return w(b)},v.callback=function(){F(l,u)}}var P=l.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(v.callback=function(){F(l,u),typeof w!="function"&&(_c===null?_c=new Set([this]):_c.add(this));var G=u.stack;this.componentDidCatch(u.value,{componentStack:G!==null?G:""})}),v}function nt(l,u,v){var w=l.pingCache;if(w===null){w=l.pingCache=new $;var b=new Set;w.set(u,b)}else b=w.get(u),b===void 0&&(b=new Set,w.set(u,b));b.has(v)||(b.add(v),l=mN.bind(null,l,u,v),u.then(l,l))}function _t(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function Zt(l,u,v,w,b){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(u=On(-1,1),u.tag=2,Jn(v,u,1))),v.lanes|=1),l):(l.flags|=65536,l.lanes=b,l)}var Ut=R.ReactCurrentOwner,ln=!1;function pt(l,u,v,w){u.child=l===null?Su(u,null,v,w):rl(u,l.child,v,w)}function Vi(l,u,v,w,b){v=v.render;var P=u.ref;return va(u,b),w=Iu(l,u,v,w,P,b),v=vm(),l!==null&&!ln?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~b,pl(l,u,b)):(jn&&v&&um(u),u.flags|=1,pt(l,u,w,b),u.child)}function Kr(l,u,v,w,b){if(l===null){var P=v.type;return typeof P=="function"&&!YE(P)&&P.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(u.tag=15,u.type=P,Ae(l,u,P,w,b)):(l=uv(v.type,null,w,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(P=l.child,(l.lanes&b)===0){var G=P.memoizedProps;if(v=v.compare,v=v!==null?v:Ka,v(G,w)&&l.ref===u.ref)return pl(l,u,b)}return u.flags|=1,l=wc(P,w),l.ref=u.ref,l.return=u,u.child=l}function Ae(l,u,v,w,b){if(l!==null){var P=l.memoizedProps;if(Ka(P,w)&&l.ref===u.ref)if(ln=!1,u.pendingProps=w=P,(l.lanes&b)!==0)(l.flags&131072)!==0&&(ln=!0);else return u.lanes=l.lanes,pl(l,u,b)}return ut(l,u,v,w,b)}function pe(l,u,v){var w=u.pendingProps,b=w.children,P=l!==null?l.memoizedState:null;if(w.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Qf,Ds),Ds|=v;else{if((v&1073741824)===0)return l=P!==null?P.baseLanes|v:v,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,kn(Qf,Ds),Ds|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=P!==null?P.baseLanes:v,kn(Qf,Ds),Ds|=w}else P!==null?(w=P.baseLanes|v,u.memoizedState=null):w=v,kn(Qf,Ds),Ds|=w;return pt(l,u,b,v),u.child}function Te(l,u){var v=u.ref;(l===null&&v!==null||l!==null&&l.ref!==v)&&(u.flags|=512,u.flags|=2097152)}function ut(l,u,v,w,b){var P=er(v)?Do:Ui.current;return P=el(u,P),va(u,b),v=Iu(l,u,v,w,P,b),w=vm(),l!==null&&!ln?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~b,pl(l,u,b)):(jn&&w&&um(u),u.flags|=1,pt(l,u,v,b),u.child)}function Pt(l,u,v,w,b){if(er(v)){var P=!0;tl(u)}else P=!1;if(va(u,b),u.stateNode===null)$0(l,u),d(u,v,w),E(u,v,w,b),w=!0;else if(l===null){var G=u.stateNode,ne=u.memoizedProps;G.props=ne;var le=G.context,we=v.contextType;typeof we=="object"&&we!==null?we=Wr(we):(we=er(v)?Do:Ui.current,we=el(u,we));var Ye=v.getDerivedStateFromProps,$e=typeof Ye=="function"||typeof G.getSnapshotBeforeUpdate=="function";$e||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ne!==w||le!==we)&&p(u,G,w,we),Fn=!1;var Xe=u.memoizedState;G.state=Xe,ri(u,w,G,b),le=u.memoizedState,ne!==w||Xe!==le||fr.current||Fn?(typeof Ye=="function"&&(Nu(u,v,Ye,w),le=u.memoizedState),(ne=Fn||q0(u,v,ne,w,Xe,le,we))?($e||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(u.flags|=4194308)):(typeof G.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=le),G.props=w,G.state=le,G.context=we,w=ne):(typeof G.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{G=u.stateNode,fi(l,u),ne=u.memoizedProps,we=u.type===u.elementType?ne:cs(u.type,ne),G.props=we,$e=u.pendingProps,Xe=G.context,le=v.contextType,typeof le=="object"&&le!==null?le=Wr(le):(le=er(v)?Do:Ui.current,le=el(u,le));var vt=v.getDerivedStateFromProps;(Ye=typeof vt=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ne!==$e||Xe!==le)&&p(u,G,w,le),Fn=!1,Xe=u.memoizedState,G.state=Xe,ri(u,w,G,b);var Mt=u.memoizedState;ne!==$e||Xe!==Mt||fr.current||Fn?(typeof vt=="function"&&(Nu(u,v,vt,w),Mt=u.memoizedState),(we=Fn||q0(u,v,we,w,Xe,Mt,le)||!1)?(Ye||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(w,Mt,le),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(w,Mt,le)),typeof G.componentDidUpdate=="function"&&(u.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof G.componentDidUpdate!="function"||ne===l.memoizedProps&&Xe===l.memoizedState||(u.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ne===l.memoizedProps&&Xe===l.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=Mt),G.props=w,G.state=Mt,G.context=le,w=we):(typeof G.componentDidUpdate!="function"||ne===l.memoizedProps&&Xe===l.memoizedState||(u.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ne===l.memoizedProps&&Xe===l.memoizedState||(u.flags|=1024),w=!1)}return tn(l,u,v,w,P,b)}function tn(l,u,v,w,b,P){Te(l,u);var G=(u.flags&128)!==0;if(!w&&!G)return b&&lm(u,v,!1),pl(l,u,P);w=u.stateNode,Ut.current=u;var ne=G&&typeof v.getDerivedStateFromError!="function"?null:w.render();return u.flags|=1,l!==null&&G?(u.child=rl(u,l.child,null,P),u.child=rl(u,null,ne,P)):pt(l,u,ne,P),u.memoizedState=w.state,b&&lm(u,v,!0),u.child}function qt(l){var u=l.stateNode;u.pendingContext?am(l,u.pendingContext,u.pendingContext!==u.context):u.context&&am(l,u.context,!1),bu(l,u.containerInfo)}function xn(l,u,v,w,b){return ga(),fc(b),u.flags|=256,pt(l,u,v,w),u.child}var vi={dehydrated:null,treeContext:null,retryLane:0};function yn(l){return{baseLanes:l,cachePool:null,transitions:null}}function Ho(l,u,v){var w=u.pendingProps,b=Yn.current,P=!1,G=(u.flags&128)!==0,ne;if((ne=G)||(ne=l!==null&&l.memoizedState===null?!1:(b&2)!==0),ne?(P=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(b|=1),kn(Yn,b&1),l===null)return Gf(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(G=w.children,l=w.fallback,P?(w=u.mode,P=u.child,G={mode:"hidden",children:G},(w&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=G):P=hv(G,w,0,null),l=zu(l,w,v,null),P.return=u,l.return=u,P.sibling=l,u.child=P,u.child.memoizedState=yn(v),u.memoizedState=vi,l):Mm(u,G));if(b=l.memoizedState,b!==null&&(ne=b.dehydrated,ne!==null))return iN(l,u,G,w,ne,b,v);if(P){P=w.fallback,G=u.mode,b=l.child,ne=b.sibling;var le={mode:"hidden",children:w.children};return(G&1)===0&&u.child!==b?(w=u.child,w.childLanes=0,w.pendingProps=le,u.deletions=null):(w=wc(b,le),w.subtreeFlags=b.subtreeFlags&14680064),ne!==null?P=wc(ne,P):(P=zu(P,G,v,null),P.flags|=2),P.return=u,w.return=u,w.sibling=P,u.child=w,w=P,P=u.child,G=l.child.memoizedState,G=G===null?yn(v):{baseLanes:G.baseLanes|v,cachePool:null,transitions:G.transitions},P.memoizedState=G,P.childLanes=l.childLanes&~v,u.memoizedState=vi,w}return P=l.child,l=P.sibling,w=wc(P,{mode:"visible",children:w.children}),(u.mode&1)===0&&(w.lanes=v),w.return=u,w.sibling=null,l!==null&&(v=u.deletions,v===null?(u.deletions=[l],u.flags|=16):v.push(l)),u.child=w,u.memoizedState=null,w}function Mm(l,u){return u=hv({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function Q0(l,u,v,w){return w!==null&&fc(w),rl(u,l.child,null,v),l=Mm(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function iN(l,u,v,w,b,P,G){if(v)return u.flags&256?(u.flags&=-257,w=I(Error(t(422))),Q0(l,u,G,w)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(P=w.fallback,b=u.mode,w=hv({mode:"visible",children:w.children},b,0,null),P=zu(P,b,G,null),P.flags|=2,w.return=u,P.return=u,w.sibling=P,u.child=w,(u.mode&1)!==0&&rl(u,l.child,null,G),u.child.memoizedState=yn(G),u.memoizedState=vi,P);if((u.mode&1)===0)return Q0(l,u,G,null);if(b.data==="$!"){if(w=b.nextSibling&&b.nextSibling.dataset,w)var ne=w.dgst;return w=ne,P=Error(t(419)),w=I(P,w,void 0),Q0(l,u,G,w)}if(ne=(G&l.childLanes)!==0,ln||ne){if(w=ir,w!==null){switch(G&-G){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(w.suspendedLanes|G))!==0?0:b,b!==0&&b!==P.retryLane&&(P.retryLane=b,Rs(l,b),Xo(w,l,b,-1))}return jE(),w=I(Error(t(421))),Q0(l,u,G,w)}return b.data==="$?"?(u.flags|=128,u.child=l.child,u=gN.bind(null,l),b._reactRetry=u,null):(l=P.treeContext,pr=Io(b.nextSibling),zi=u,jn=!0,ls=null,l!==null&&(dr[Ni++]=st,dr[Ni++]=as,dr[Ni++]=il,st=l.id,as=l.overflow,il=u),u=Mm(u,w.children),u.flags|=4096,u)}function eC(l,u,v){l.lanes|=u;var w=l.alternate;w!==null&&(w.lanes|=u),Cu(l.return,u,v)}function PE(l,u,v,w,b){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:v,tailMode:b}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=v,P.tailMode=b)}function tC(l,u,v){var w=u.pendingProps,b=w.revealOrder,P=w.tail;if(pt(l,u,w.children,v),w=Yn.current,(w&2)!==0)w=w&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&eC(l,v,u);else if(l.tag===19)eC(l,v,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}w&=1}if(kn(Yn,w),(u.mode&1)===0)u.memoizedState=null;else switch(b){case"forwards":for(v=u.child,b=null;v!==null;)l=v.alternate,l!==null&&Is(l)===null&&(b=v),v=v.sibling;v=b,v===null?(b=u.child,u.child=null):(b=v.sibling,v.sibling=null),PE(u,!1,b,v,P);break;case"backwards":for(v=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&Is(l)===null){u.child=b;break}l=b.sibling,b.sibling=v,v=b,b=l}PE(u,!0,v,null,P);break;case"together":PE(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function $0(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function pl(l,u,v){if(l!==null&&(u.dependencies=l.dependencies),Fu|=u.lanes,(v&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(t(153));if(u.child!==null){for(l=u.child,v=wc(l,l.pendingProps),u.child=v,v.return=u;l.sibling!==null;)l=l.sibling,v=v.sibling=wc(l,l.pendingProps),v.return=u;v.sibling=null}return u.child}function rN(l,u,v){switch(u.tag){case 3:qt(u),ga();break;case 5:ul(u);break;case 1:er(u.type)&&tl(u);break;case 4:bu(u,u.stateNode.containerInfo);break;case 10:var w=u.type._context,b=u.memoizedProps.value;kn(sl,w._currentValue),w._currentValue=b;break;case 13:if(w=u.memoizedState,w!==null)return w.dehydrated!==null?(kn(Yn,Yn.current&1),u.flags|=128,null):(v&u.child.childLanes)!==0?Ho(l,u,v):(kn(Yn,Yn.current&1),l=pl(l,u,v),l!==null?l.sibling:null);kn(Yn,Yn.current&1);break;case 19:if(w=(v&u.childLanes)!==0,(l.flags&128)!==0){if(w)return tC(l,u,v);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),kn(Yn,Yn.current),w)break;return null;case 22:case 23:return u.lanes=0,pe(l,u,v)}return pl(l,u,v)}var nC,LE,iC,rC;nC=function(l,u){for(var v=u.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},LE=function(){},iC=function(l,u,v,w){var b=l.memoizedProps;if(b!==w){l=u.stateNode,gi(Xr.current);var P=null;switch(v){case"input":b=Oe(l,b),w=Oe(l,w),P=[];break;case"select":b=q({},b,{value:void 0}),w=q({},w,{value:void 0}),P=[];break;case"textarea":b=Dt(l,b),w=Dt(l,w),P=[];break;default:typeof b.onClick!="function"&&typeof w.onClick=="function"&&(l.onclick=vu)}ie(v,w);var G;v=null;for(we in b)if(!w.hasOwnProperty(we)&&b.hasOwnProperty(we)&&b[we]!=null)if(we==="style"){var ne=b[we];for(G in ne)ne.hasOwnProperty(G)&&(v||(v={}),v[G]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(r.hasOwnProperty(we)?P||(P=[]):(P=P||[]).push(we,null));for(we in w){var le=w[we];if(ne=b?.[we],w.hasOwnProperty(we)&&le!==ne&&(le!=null||ne!=null))if(we==="style")if(ne){for(G in ne)!ne.hasOwnProperty(G)||le&&le.hasOwnProperty(G)||(v||(v={}),v[G]="");for(G in le)le.hasOwnProperty(G)&&ne[G]!==le[G]&&(v||(v={}),v[G]=le[G])}else v||(P||(P=[]),P.push(we,v)),v=le;else we==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,ne=ne?ne.__html:void 0,le!=null&&ne!==le&&(P=P||[]).push(we,le)):we==="children"?typeof le!="string"&&typeof le!="number"||(P=P||[]).push(we,""+le):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(r.hasOwnProperty(we)?(le!=null&&we==="onScroll"&&Hn("scroll",l),P||ne===le||(P=[])):(P=P||[]).push(we,le))}v&&(P=P||[]).push("style",v);var we=P;(u.updateQueue=we)&&(u.flags|=4)}},rC=function(l,u,v,w){v!==w&&(u.flags|=4)};function Cm(l,u){if(!jn)switch(l.tailMode){case"hidden":u=l.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:w.sibling=null}}function br(l){var u=l.alternate!==null&&l.alternate.child===l.child,v=0,w=0;if(u)for(var b=l.child;b!==null;)v|=b.lanes|b.childLanes,w|=b.subtreeFlags&14680064,w|=b.flags&14680064,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)v|=b.lanes|b.childLanes,w|=b.subtreeFlags,w|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=w,l.childLanes=v,u}function sN(l,u,v){var w=u.pendingProps;switch(No(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(u),null;case 1:return er(u.type)&&yu(),br(u),null;case 3:return w=u.stateNode,ya(),Vn(fr),Vn(Ui),eo(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(l===null||l.child===null)&&(hc(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,ls!==null&&(VE(ls),ls=null))),LE(l,u),br(u),null;case 5:mc(u);var b=gi(ko.current);if(v=u.type,l!==null&&u.stateNode!=null)iC(l,u,v,w,b),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!w){if(u.stateNode===null)throw Error(t(166));return br(u),null}if(l=gi(Xr.current),hc(u)){w=u.stateNode,v=u.type;var P=u.memoizedProps;switch(w[Si]=u,w[uc]=P,l=(u.mode&1)!==0,v){case"dialog":Hn("cancel",w),Hn("close",w);break;case"iframe":case"object":case"embed":Hn("load",w);break;case"video":case"audio":for(b=0;b<pa.length;b++)Hn(pa[b],w);break;case"source":Hn("error",w);break;case"img":case"image":case"link":Hn("error",w),Hn("load",w);break;case"details":Hn("toggle",w);break;case"input":Le(w,P),Hn("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!P.multiple},Hn("invalid",w);break;case"textarea":Y(w,P),Hn("invalid",w)}ie(v,P),b=null;for(var G in P)if(P.hasOwnProperty(G)){var ne=P[G];G==="children"?typeof ne=="string"?w.textContent!==ne&&(P.suppressHydrationWarning!==!0&&gu(w.textContent,ne,l),b=["children",ne]):typeof ne=="number"&&w.textContent!==""+ne&&(P.suppressHydrationWarning!==!0&&gu(w.textContent,ne,l),b=["children",""+ne]):r.hasOwnProperty(G)&&ne!=null&&G==="onScroll"&&Hn("scroll",w)}switch(v){case"input":rt(w),Qe(w,P,!0);break;case"textarea":rt(w),ve(w);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(w.onclick=vu)}w=b,u.updateQueue=w,w!==null&&(u.flags|=4)}else{G=b.nodeType===9?b:b.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Ce(v)),l==="http://www.w3.org/1999/xhtml"?v==="script"?(l=G.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof w.is=="string"?l=G.createElement(v,{is:w.is}):(l=G.createElement(v),v==="select"&&(G=l,w.multiple?G.multiple=!0:w.size&&(G.size=w.size))):l=G.createElementNS(l,v),l[Si]=u,l[uc]=w,nC(l,u,!1,!1),u.stateNode=l;e:{switch(G=xe(v,w),v){case"dialog":Hn("cancel",l),Hn("close",l),b=w;break;case"iframe":case"object":case"embed":Hn("load",l),b=w;break;case"video":case"audio":for(b=0;b<pa.length;b++)Hn(pa[b],l);b=w;break;case"source":Hn("error",l),b=w;break;case"img":case"image":case"link":Hn("error",l),Hn("load",l),b=w;break;case"details":Hn("toggle",l),b=w;break;case"input":Le(l,w),b=Oe(l,w),Hn("invalid",l);break;case"option":b=w;break;case"select":l._wrapperState={wasMultiple:!!w.multiple},b=q({},w,{value:void 0}),Hn("invalid",l);break;case"textarea":Y(l,w),b=Dt(l,w),Hn("invalid",l);break;default:b=w}ie(v,b),ne=b;for(P in ne)if(ne.hasOwnProperty(P)){var le=ne[P];P==="style"?lt(l,le):P==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&Et(l,le)):P==="children"?typeof le=="string"?(v!=="textarea"||le!=="")&&et(l,le):typeof le=="number"&&et(l,""+le):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(r.hasOwnProperty(P)?le!=null&&P==="onScroll"&&Hn("scroll",l):le!=null&&T(l,P,le,G))}switch(v){case"input":rt(l),Qe(l,w,!1);break;case"textarea":rt(l),ve(l);break;case"option":w.value!=null&&l.setAttribute("value",""+Ue(w.value));break;case"select":l.multiple=!!w.multiple,P=w.value,P!=null?Rt(l,!!w.multiple,P,!1):w.defaultValue!=null&&Rt(l,!!w.multiple,w.defaultValue,!0);break;default:typeof b.onClick=="function"&&(l.onclick=vu)}switch(v){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return br(u),null;case 6:if(l&&u.stateNode!=null)rC(l,u,l.memoizedProps,w);else{if(typeof w!="string"&&u.stateNode===null)throw Error(t(166));if(v=gi(ko.current),gi(Xr.current),hc(u)){if(w=u.stateNode,v=u.memoizedProps,w[Si]=u,(P=w.nodeValue!==v)&&(l=zi,l!==null))switch(l.tag){case 3:gu(w.nodeValue,v,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&gu(w.nodeValue,v,(l.mode&1)!==0)}P&&(u.flags|=4)}else w=(v.nodeType===9?v:v.ownerDocument).createTextNode(w),w[Si]=u,u.stateNode=w}return br(u),null;case 13:if(Vn(Yn),w=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(jn&&pr!==null&&(u.mode&1)!==0&&(u.flags&128)===0)dm(),ga(),u.flags|=98560,P=!1;else if(P=hc(u),w!==null&&w.dehydrated!==null){if(l===null){if(!P)throw Error(t(318));if(P=u.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[Si]=u}else ga(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;br(u),P=!1}else ls!==null&&(VE(ls),ls=null),P=!0;if(!P)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=v,u):(w=w!==null,w!==(l!==null&&l.memoizedState!==null)&&w&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||(Yn.current&1)!==0?Wi===0&&(Wi=3):jE())),u.updateQueue!==null&&(u.flags|=4),br(u),null);case 4:return ya(),LE(l,u),l===null&&ac(u.stateNode.containerInfo),br(u),null;case 10:return Mu(u.type._context),br(u),null;case 17:return er(u.type)&&yu(),br(u),null;case 19:if(Vn(Yn),P=u.memoizedState,P===null)return br(u),null;if(w=(u.flags&128)!==0,G=P.rendering,G===null)if(w)Cm(P,!1);else{if(Wi!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(G=Is(l),G!==null){for(u.flags|=128,Cm(P,!1),w=G.updateQueue,w!==null&&(u.updateQueue=w,u.flags|=4),u.subtreeFlags=0,w=v,v=u.child;v!==null;)P=v,l=w,P.flags&=14680066,G=P.alternate,G===null?(P.childLanes=0,P.lanes=l,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=G.childLanes,P.lanes=G.lanes,P.child=G.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=G.memoizedProps,P.memoizedState=G.memoizedState,P.updateQueue=G.updateQueue,P.type=G.type,l=G.dependencies,P.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),v=v.sibling;return kn(Yn,Yn.current&1|2),u.child}l=l.sibling}P.tail!==null&&ue()>$f&&(u.flags|=128,w=!0,Cm(P,!1),u.lanes=4194304)}else{if(!w)if(l=Is(G),l!==null){if(u.flags|=128,w=!0,v=l.updateQueue,v!==null&&(u.updateQueue=v,u.flags|=4),Cm(P,!0),P.tail===null&&P.tailMode==="hidden"&&!G.alternate&&!jn)return br(u),null}else 2*ue()-P.renderingStartTime>$f&&v!==1073741824&&(u.flags|=128,w=!0,Cm(P,!1),u.lanes=4194304);P.isBackwards?(G.sibling=u.child,u.child=G):(v=P.last,v!==null?v.sibling=G:u.child=G,P.last=G)}return P.tail!==null?(u=P.tail,P.rendering=u,P.tail=u.sibling,P.renderingStartTime=ue(),u.sibling=null,v=Yn.current,kn(Yn,w?v&1|2:v&1),u):(br(u),null);case 22:case 23:return XE(),w=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==w&&(u.flags|=8192),w&&(u.mode&1)!==0?(Ds&1073741824)!==0&&(br(u),u.subtreeFlags&6&&(u.flags|=8192)):br(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function oN(l,u){switch(No(u),u.tag){case 1:return er(u.type)&&yu(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return ya(),Vn(fr),Vn(Ui),eo(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return mc(u),null;case 13:if(Vn(Yn),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(t(340));ga()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Vn(Yn),null;case 4:return ya(),null;case 10:return Mu(u.type._context),null;case 22:case 23:return XE(),null;case 24:return null;default:return null}}var ev=!1,Rr=!1,aN=typeof WeakSet=="function"?WeakSet:Set,wt=null;function qf(l,u){var v=l.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(w){yi(l,u,w)}else v.current=null}function DE(l,u,v){try{v()}catch(w){yi(l,u,w)}}var sC=!1;function lN(l,u){if(cc=ts,l=$n(),Pi(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var w=v.getSelection&&v.getSelection();if(w&&w.rangeCount!==0){v=w.anchorNode;var b=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{v.nodeType,P.nodeType}catch{v=null;break e}var G=0,ne=-1,le=-1,we=0,Ye=0,$e=l,Xe=null;t:for(;;){for(var vt;$e!==v||b!==0&&$e.nodeType!==3||(ne=G+b),$e!==P||w!==0&&$e.nodeType!==3||(le=G+w),$e.nodeType===3&&(G+=$e.nodeValue.length),(vt=$e.firstChild)!==null;)Xe=$e,$e=vt;for(;;){if($e===l)break t;if(Xe===v&&++we===b&&(ne=G),Xe===P&&++Ye===w&&(le=G),(vt=$e.nextSibling)!==null)break;$e=Xe,Xe=$e.parentNode}$e=vt}v=ne===-1||le===-1?null:{start:ne,end:le}}else v=null}v=v||{start:0,end:0}}else v=null;for(tm={focusedElem:l,selectionRange:v},ts=!1,wt=u;wt!==null;)if(u=wt,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,wt=l;else for(;wt!==null;){u=wt;try{var Mt=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Mt!==null){var bt=Mt.memoizedProps,Mi=Mt.memoizedState,ye=u.stateNode,he=ye.getSnapshotBeforeUpdate(u.elementType===u.type?bt:cs(u.type,bt),Mi);ye.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var Ee=u.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(it){yi(u,u.return,it)}if(l=u.sibling,l!==null){l.return=u.return,wt=l;break}wt=u.return}return Mt=sC,sC=!1,Mt}function Tm(l,u,v){var w=u.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var b=w=w.next;do{if((b.tag&l)===l){var P=b.destroy;b.destroy=void 0,P!==void 0&&DE(u,v,P)}b=b.next}while(b!==w)}}function tv(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var v=u=u.next;do{if((v.tag&l)===l){var w=v.create;v.destroy=w()}v=v.next}while(v!==u)}}function BE(l){var u=l.ref;if(u!==null){var v=l.stateNode;switch(l.tag){case 5:l=v;break;default:l=v}typeof u=="function"?u(l):u.current=l}}function oC(l){var u=l.alternate;u!==null&&(l.alternate=null,oC(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[Si],delete u[uc],delete u[$a],delete u[Bf],delete u[Nf])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function aC(l){return l.tag===5||l.tag===3||l.tag===4}function lC(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||aC(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function NE(l,u,v){var w=l.tag;if(w===5||w===6)l=l.stateNode,u?v.nodeType===8?v.parentNode.insertBefore(l,u):v.insertBefore(l,u):(v.nodeType===8?(u=v.parentNode,u.insertBefore(l,v)):(u=v,u.appendChild(l)),v=v._reactRootContainer,v!=null||u.onclick!==null||(u.onclick=vu));else if(w!==4&&(l=l.child,l!==null))for(NE(l,u,v),l=l.sibling;l!==null;)NE(l,u,v),l=l.sibling}function FE(l,u,v){var w=l.tag;if(w===5||w===6)l=l.stateNode,u?v.insertBefore(l,u):v.appendChild(l);else if(w!==4&&(l=l.child,l!==null))for(FE(l,u,v),l=l.sibling;l!==null;)FE(l,u,v),l=l.sibling}var gr=null,Vo=!1;function yc(l,u,v){for(v=v.child;v!==null;)cC(l,u,v),v=v.sibling}function cC(l,u,v){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(xt,v)}catch{}switch(v.tag){case 5:Rr||qf(v,u);case 6:var w=gr,b=Vo;gr=null,yc(l,u,v),gr=w,Vo=b,gr!==null&&(Vo?(l=gr,v=v.stateNode,l.nodeType===8?l.parentNode.removeChild(v):l.removeChild(v)):gr.removeChild(v.stateNode));break;case 18:gr!==null&&(Vo?(l=gr,v=v.stateNode,l.nodeType===8?Df(l.parentNode,v):l.nodeType===1&&Df(l,v),su(l)):Df(gr,v.stateNode));break;case 4:w=gr,b=Vo,gr=v.stateNode.containerInfo,Vo=!0,yc(l,u,v),gr=w,Vo=b;break;case 0:case 11:case 14:case 15:if(!Rr&&(w=v.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){b=w=w.next;do{var P=b,G=P.destroy;P=P.tag,G!==void 0&&((P&2)!==0||(P&4)!==0)&&DE(v,u,G),b=b.next}while(b!==w)}yc(l,u,v);break;case 1:if(!Rr&&(qf(v,u),w=v.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=v.memoizedProps,w.state=v.memoizedState,w.componentWillUnmount()}catch(ne){yi(v,u,ne)}yc(l,u,v);break;case 21:yc(l,u,v);break;case 22:v.mode&1?(Rr=(w=Rr)||v.memoizedState!==null,yc(l,u,v),Rr=w):yc(l,u,v);break;default:yc(l,u,v)}}function uC(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var v=l.stateNode;v===null&&(v=l.stateNode=new aN),u.forEach(function(w){var b=vN.bind(null,l,w);v.has(w)||(v.add(w),w.then(b,b))})}}function Wo(l,u){var v=u.deletions;if(v!==null)for(var w=0;w<v.length;w++){var b=v[w];try{var P=l,G=u,ne=G;e:for(;ne!==null;){switch(ne.tag){case 5:gr=ne.stateNode,Vo=!1;break e;case 3:gr=ne.stateNode.containerInfo,Vo=!0;break e;case 4:gr=ne.stateNode.containerInfo,Vo=!0;break e}ne=ne.return}if(gr===null)throw Error(t(160));cC(P,G,b),gr=null,Vo=!1;var le=b.alternate;le!==null&&(le.return=null),b.return=null}catch(we){yi(b,u,we)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)hC(u,l),u=u.sibling}function hC(l,u){var v=l.alternate,w=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Wo(u,l),xa(l),w&4){try{Tm(3,l,l.return),tv(3,l)}catch(bt){yi(l,l.return,bt)}try{Tm(5,l,l.return)}catch(bt){yi(l,l.return,bt)}}break;case 1:Wo(u,l),xa(l),w&512&&v!==null&&qf(v,v.return);break;case 5:if(Wo(u,l),xa(l),w&512&&v!==null&&qf(v,v.return),l.flags&32){var b=l.stateNode;try{et(b,"")}catch(bt){yi(l,l.return,bt)}}if(w&4&&(b=l.stateNode,b!=null)){var P=l.memoizedProps,G=v!==null?v.memoizedProps:P,ne=l.type,le=l.updateQueue;if(l.updateQueue=null,le!==null)try{ne==="input"&&P.type==="radio"&&P.name!=null&&Pe(b,P),xe(ne,G);var we=xe(ne,P);for(G=0;G<le.length;G+=2){var Ye=le[G],$e=le[G+1];Ye==="style"?lt(b,$e):Ye==="dangerouslySetInnerHTML"?Et(b,$e):Ye==="children"?et(b,$e):T(b,Ye,$e,we)}switch(ne){case"input":Re(b,P);break;case"textarea":H(b,P);break;case"select":var Xe=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!P.multiple;var vt=P.value;vt!=null?Rt(b,!!P.multiple,vt,!1):Xe!==!!P.multiple&&(P.defaultValue!=null?Rt(b,!!P.multiple,P.defaultValue,!0):Rt(b,!!P.multiple,P.multiple?[]:"",!1))}b[uc]=P}catch(bt){yi(l,l.return,bt)}}break;case 6:if(Wo(u,l),xa(l),w&4){if(l.stateNode===null)throw Error(t(162));b=l.stateNode,P=l.memoizedProps;try{b.nodeValue=P}catch(bt){yi(l,l.return,bt)}}break;case 3:if(Wo(u,l),xa(l),w&4&&v!==null&&v.memoizedState.isDehydrated)try{su(u.containerInfo)}catch(bt){yi(l,l.return,bt)}break;case 4:Wo(u,l),xa(l);break;case 13:Wo(u,l),xa(l),b=l.child,b.flags&8192&&(P=b.memoizedState!==null,b.stateNode.isHidden=P,!P||b.alternate!==null&&b.alternate.memoizedState!==null||(UE=ue())),w&4&&uC(l);break;case 22:if(Ye=v!==null&&v.memoizedState!==null,l.mode&1?(Rr=(we=Rr)||Ye,Wo(u,l),Rr=we):Wo(u,l),xa(l),w&8192){if(we=l.memoizedState!==null,(l.stateNode.isHidden=we)&&!Ye&&(l.mode&1)!==0)for(wt=l,Ye=l.child;Ye!==null;){for($e=wt=Ye;wt!==null;){switch(Xe=wt,vt=Xe.child,Xe.tag){case 0:case 11:case 14:case 15:Tm(4,Xe,Xe.return);break;case 1:qf(Xe,Xe.return);var Mt=Xe.stateNode;if(typeof Mt.componentWillUnmount=="function"){w=Xe,v=Xe.return;try{u=w,Mt.props=u.memoizedProps,Mt.state=u.memoizedState,Mt.componentWillUnmount()}catch(bt){yi(w,v,bt)}}break;case 5:qf(Xe,Xe.return);break;case 22:if(Xe.memoizedState!==null){pC($e);continue}}vt!==null?(vt.return=Xe,wt=vt):pC($e)}Ye=Ye.sibling}e:for(Ye=null,$e=l;;){if($e.tag===5){if(Ye===null){Ye=$e;try{b=$e.stateNode,we?(P=b.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(ne=$e.stateNode,le=$e.memoizedProps.style,G=le!=null&&le.hasOwnProperty("display")?le.display:null,ne.style.display=Ke("display",G))}catch(bt){yi(l,l.return,bt)}}}else if($e.tag===6){if(Ye===null)try{$e.stateNode.nodeValue=we?"":$e.memoizedProps}catch(bt){yi(l,l.return,bt)}}else if(($e.tag!==22&&$e.tag!==23||$e.memoizedState===null||$e===l)&&$e.child!==null){$e.child.return=$e,$e=$e.child;continue}if($e===l)break e;for(;$e.sibling===null;){if($e.return===null||$e.return===l)break e;Ye===$e&&(Ye=null),$e=$e.return}Ye===$e&&(Ye=null),$e.sibling.return=$e.return,$e=$e.sibling}}break;case 19:Wo(u,l),xa(l),w&4&&uC(l);break;case 21:break;default:Wo(u,l),xa(l)}}function xa(l){var u=l.flags;if(u&2){try{e:{for(var v=l.return;v!==null;){if(aC(v)){var w=v;break e}v=v.return}throw Error(t(160))}switch(w.tag){case 5:var b=w.stateNode;w.flags&32&&(et(b,""),w.flags&=-33);var P=lC(l);FE(l,P,b);break;case 3:case 4:var G=w.stateNode.containerInfo,ne=lC(l);NE(l,ne,G);break;default:throw Error(t(161))}}catch(le){yi(l,l.return,le)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function cN(l,u,v){wt=l,fC(l)}function fC(l,u,v){for(var w=(l.mode&1)!==0;wt!==null;){var b=wt,P=b.child;if(b.tag===22&&w){var G=b.memoizedState!==null||ev;if(!G){var ne=b.alternate,le=ne!==null&&ne.memoizedState!==null||Rr;ne=ev;var we=Rr;if(ev=G,(Rr=le)&&!we)for(wt=b;wt!==null;)G=wt,le=G.child,G.tag===22&&G.memoizedState!==null?mC(b):le!==null?(le.return=G,wt=le):mC(b);for(;P!==null;)wt=P,fC(P),P=P.sibling;wt=b,ev=ne,Rr=we}dC(l)}else(b.subtreeFlags&8772)!==0&&P!==null?(P.return=b,wt=P):dC(l)}}function dC(l){for(;wt!==null;){var u=wt;if((u.flags&8772)!==0){var v=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Rr||tv(5,u);break;case 1:var w=u.stateNode;if(u.flags&4&&!Rr)if(v===null)w.componentDidMount();else{var b=u.elementType===u.type?v.memoizedProps:cs(u.type,v.memoizedProps);w.componentDidUpdate(b,v.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var P=u.updateQueue;P!==null&&pc(u,P,w);break;case 3:var G=u.updateQueue;if(G!==null){if(v=null,u.child!==null)switch(u.child.tag){case 5:v=u.child.stateNode;break;case 1:v=u.child.stateNode}pc(u,G,v)}break;case 5:var ne=u.stateNode;if(v===null&&u.flags&4){v=ne;var le=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&v.focus();break;case"img":le.src&&(v.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var we=u.alternate;if(we!==null){var Ye=we.memoizedState;if(Ye!==null){var $e=Ye.dehydrated;$e!==null&&su($e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Rr||u.flags&512&&BE(u)}catch(Xe){yi(u,u.return,Xe)}}if(u===l){wt=null;break}if(v=u.sibling,v!==null){v.return=u.return,wt=v;break}wt=u.return}}function pC(l){for(;wt!==null;){var u=wt;if(u===l){wt=null;break}var v=u.sibling;if(v!==null){v.return=u.return,wt=v;break}wt=u.return}}function mC(l){for(;wt!==null;){var u=wt;try{switch(u.tag){case 0:case 11:case 15:var v=u.return;try{tv(4,u)}catch(le){yi(u,v,le)}break;case 1:var w=u.stateNode;if(typeof w.componentDidMount=="function"){var b=u.return;try{w.componentDidMount()}catch(le){yi(u,b,le)}}var P=u.return;try{BE(u)}catch(le){yi(u,P,le)}break;case 5:var G=u.return;try{BE(u)}catch(le){yi(u,G,le)}}}catch(le){yi(u,u.return,le)}if(u===l){wt=null;break}var ne=u.sibling;if(ne!==null){ne.return=u.return,wt=ne;break}wt=u.return}}var uN=Math.ceil,nv=R.ReactCurrentDispatcher,OE=R.ReactCurrentOwner,no=R.ReactCurrentBatchConfig,bn=0,ir=null,Fi=null,vr=0,Ds=0,Qf=ii(0),Wi=0,bm=null,Fu=0,iv=0,kE=0,Rm=null,us=null,UE=0,$f=1/0,ml=null,rv=!1,zE=null,_c=null,sv=!1,xc=null,ov=0,Im=0,GE=null,av=-1,lv=0;function Jr(){return(bn&6)!==0?ue():av!==-1?av:av=ue()}function Ec(l){return(l.mode&1)===0?1:(bn&2)!==0&&vr!==0?vr&-vr:RE.transition!==null?(lv===0&&(lv=Xn()),lv):(l=an,l!==0||(l=window.event,l=l===void 0?16:T0(l.type)),l)}function Xo(l,u,v,w){if(50<Im)throw Im=0,GE=null,Error(t(185));ui(l,v,w),((bn&2)===0||l!==ir)&&(l===ir&&((bn&2)===0&&(iv|=v),Wi===4&&Ac(l,vr)),hs(l,w),v===1&&bn===0&&(u.mode&1)===0&&($f=ue()+500,xu&&Qs()))}function hs(l,u){var v=l.callbackNode;js(l,u);var w=es(l,l===ir?vr:0);if(w===0)v!==null&&me(v),l.callbackNode=null,l.callbackPriority=0;else if(u=w&-w,l.callbackPriority!==u){if(v!=null&&me(v),u===1)l.tag===0?G0(vC.bind(null,l)):Eu(vC.bind(null,l)),bE(function(){(bn&6)===0&&Qs()}),v=null;else{switch(Kl(w)){case 1:v=at;break;case 4:v=yt;break;case 16:v=mt;break;case 536870912:v=Nt;break;default:v=mt}v=MC(v,gC.bind(null,l))}l.callbackPriority=u,l.callbackNode=v}}function gC(l,u){if(av=-1,lv=0,(bn&6)!==0)throw Error(t(327));var v=l.callbackNode;if(ed()&&l.callbackNode!==v)return null;var w=es(l,l===ir?vr:0);if(w===0)return null;if((w&30)!==0||(w&l.expiredLanes)!==0||u)u=cv(l,w);else{u=w;var b=bn;bn|=2;var P=_C();(ir!==l||vr!==u)&&(ml=null,$f=ue()+500,ku(l,u));do try{dN();break}catch(ne){yC(l,ne)}while(!0);al(),nv.current=P,bn=b,Fi!==null?u=0:(ir=null,vr=0,u=Wi)}if(u!==0){if(u===2&&(b=Nn(l),b!==0&&(w=b,u=HE(l,b))),u===1)throw v=bm,ku(l,0),Ac(l,w),hs(l,ue()),v;if(u===6)Ac(l,w);else{if(b=l.current.alternate,(w&30)===0&&!hN(b)&&(u=cv(l,w),u===2&&(P=Nn(l),P!==0&&(w=P,u=HE(l,P))),u===1))throw v=bm,ku(l,0),Ac(l,w),hs(l,ue()),v;switch(l.finishedWork=b,l.finishedLanes=w,u){case 0:case 1:throw Error(t(345));case 2:Uu(l,us,ml);break;case 3:if(Ac(l,w),(w&130023424)===w&&(u=UE+500-ue(),10<u)){if(es(l,0)!==0)break;if(b=l.suspendedLanes,(b&w)!==w){Jr(),l.pingedLanes|=l.suspendedLanes&b;break}l.timeoutHandle=im(Uu.bind(null,l,us,ml),u);break}Uu(l,us,ml);break;case 4:if(Ac(l,w),(w&4194240)===w)break;for(u=l.eventTimes,b=-1;0<w;){var G=31-rn(w);P=1<<G,G=u[G],G>b&&(b=G),w&=~P}if(w=b,w=ue()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*uN(w/1960))-w,10<w){l.timeoutHandle=im(Uu.bind(null,l,us,ml),w);break}Uu(l,us,ml);break;case 5:Uu(l,us,ml);break;default:throw Error(t(329))}}}return hs(l,ue()),l.callbackNode===v?gC.bind(null,l):null}function HE(l,u){var v=Rm;return l.current.memoizedState.isDehydrated&&(ku(l,u).flags|=256),l=cv(l,u),l!==2&&(u=us,us=v,u!==null&&VE(u)),l}function VE(l){us===null?us=l:us.push.apply(us,l)}function hN(l){for(var u=l;;){if(u.flags&16384){var v=u.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var b=v[w],P=b.getSnapshot;b=b.value;try{if(!Gr(P(),b))return!1}catch{return!1}}}if(v=u.child,u.subtreeFlags&16384&&v!==null)v.return=u,u=v;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ac(l,u){for(u&=~kE,u&=~iv,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var v=31-rn(u),w=1<<v;l[v]=-1,u&=~w}}function vC(l){if((bn&6)!==0)throw Error(t(327));ed();var u=es(l,0);if((u&1)===0)return hs(l,ue()),null;var v=cv(l,u);if(l.tag!==0&&v===2){var w=Nn(l);w!==0&&(u=w,v=HE(l,w))}if(v===1)throw v=bm,ku(l,0),Ac(l,u),hs(l,ue()),v;if(v===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Uu(l,us,ml),hs(l,ue()),null}function WE(l,u){var v=bn;bn|=1;try{return l(u)}finally{bn=v,bn===0&&($f=ue()+500,xu&&Qs())}}function Ou(l){xc!==null&&xc.tag===0&&(bn&6)===0&&ed();var u=bn;bn|=1;var v=no.transition,w=an;try{if(no.transition=null,an=1,l)return l()}finally{an=w,no.transition=v,bn=u,(bn&6)===0&&Qs()}}function XE(){Ds=Qf.current,Vn(Qf)}function ku(l,u){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;if(v!==-1&&(l.timeoutHandle=-1,rm(v)),Fi!==null)for(v=Fi.return;v!==null;){var w=v;switch(No(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&yu();break;case 3:ya(),Vn(fr),Vn(Ui),eo();break;case 5:mc(w);break;case 4:ya();break;case 13:Vn(Yn);break;case 19:Vn(Yn);break;case 10:Mu(w.type._context);break;case 22:case 23:XE()}v=v.return}if(ir=l,Fi=l=wc(l.current,null),vr=Ds=u,Wi=0,bm=null,kE=iv=Fu=0,us=Rm=null,Oo!==null){for(u=0;u<Oo.length;u++)if(v=Oo[u],w=v.interleaved,w!==null){v.interleaved=null;var b=w.next,P=v.pending;if(P!==null){var G=P.next;P.next=b,w.next=G}v.pending=w}Oo=null}return l}function yC(l,u){do{var v=Fi;try{if(al(),hl.current=Jf,Ps){for(var w=Wn.memoizedState;w!==null;){var b=w.queue;b!==null&&(b.pending=null),w=w.next}Ps=!1}if(Uo=0,Mn=si=Wn=null,nr=!1,_a=0,OE.current=null,v===null||v.return===null){Wi=1,bm=u,Fi=null;break}e:{var P=l,G=v.return,ne=v,le=u;if(u=vr,ne.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var we=le,Ye=ne,$e=Ye.tag;if((Ye.mode&1)===0&&($e===0||$e===11||$e===15)){var Xe=Ye.alternate;Xe?(Ye.updateQueue=Xe.updateQueue,Ye.memoizedState=Xe.memoizedState,Ye.lanes=Xe.lanes):(Ye.updateQueue=null,Ye.memoizedState=null)}var vt=_t(G);if(vt!==null){vt.flags&=-257,Zt(vt,G,ne,P,u),vt.mode&1&&nt(P,we,u),u=vt,le=we;var Mt=u.updateQueue;if(Mt===null){var bt=new Set;bt.add(le),u.updateQueue=bt}else Mt.add(le);break e}else{if((u&1)===0){nt(P,we,u),jE();break e}le=Error(t(426))}}else if(jn&&ne.mode&1){var Mi=_t(G);if(Mi!==null){(Mi.flags&65536)===0&&(Mi.flags|=256),Zt(Mi,G,ne,P,u),fc(M(le,ne));break e}}P=le=M(le,ne),Wi!==4&&(Wi=2),Rm===null?Rm=[P]:Rm.push(P),P=G;do{switch(P.tag){case 3:P.flags|=65536,u&=-u,P.lanes|=u;var ye=fe(P,le,u);ll(P,ye);break e;case 1:ne=le;var he=P.type,Ee=P.stateNode;if((P.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(_c===null||!_c.has(Ee)))){P.flags|=65536,u&=-u,P.lanes|=u;var it=Ie(P,ne,u);ll(P,it);break e}}P=P.return}while(P!==null)}EC(v)}catch(Lt){u=Lt,Fi===v&&v!==null&&(Fi=v=v.return);continue}break}while(!0)}function _C(){var l=nv.current;return nv.current=Jf,l===null?Jf:l}function jE(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),ir===null||(Fu&268435455)===0&&(iv&268435455)===0||Ac(ir,vr)}function cv(l,u){var v=bn;bn|=2;var w=_C();(ir!==l||vr!==u)&&(ml=null,ku(l,u));do try{fN();break}catch(b){yC(l,b)}while(!0);if(al(),bn=v,nv.current=w,Fi!==null)throw Error(t(261));return ir=null,vr=0,Wi}function fN(){for(;Fi!==null;)xC(Fi)}function dN(){for(;Fi!==null&&!Se();)xC(Fi)}function xC(l){var u=SC(l.alternate,l,Ds);l.memoizedProps=l.pendingProps,u===null?EC(l):Fi=u,OE.current=null}function EC(l){var u=l;do{var v=u.alternate;if(l=u.return,(u.flags&32768)===0){if(v=sN(v,u,Ds),v!==null){Fi=v;return}}else{if(v=oN(v,u),v!==null){v.flags&=32767,Fi=v;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Wi=6,Fi=null;return}}if(u=u.sibling,u!==null){Fi=u;return}Fi=u=l}while(u!==null);Wi===0&&(Wi=5)}function Uu(l,u,v){var w=an,b=no.transition;try{no.transition=null,an=1,pN(l,u,v,w)}finally{no.transition=b,an=w}return null}function pN(l,u,v,w){do ed();while(xc!==null);if((bn&6)!==0)throw Error(t(327));v=l.finishedWork;var b=l.finishedLanes;if(v===null)return null;if(l.finishedWork=null,l.finishedLanes=0,v===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var P=v.lanes|v.childLanes;if($i(l,P),l===ir&&(Fi=ir=null,vr=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||sv||(sv=!0,MC(mt,function(){return ed(),null})),P=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||P){P=no.transition,no.transition=null;var G=an;an=1;var ne=bn;bn|=4,OE.current=null,lN(l,v),hC(v,l),Li(tm),ts=!!cc,tm=cc=null,l.current=v,cN(v),Me(),bn=ne,an=G,no.transition=P}else l.current=v;if(sv&&(sv=!1,xc=l,ov=b),P=l.pendingLanes,P===0&&(_c=null),Ft(v.stateNode),hs(l,ue()),u!==null)for(w=l.onRecoverableError,v=0;v<u.length;v++)b=u[v],w(b.value,{componentStack:b.stack,digest:b.digest});if(rv)throw rv=!1,l=zE,zE=null,l;return(ov&1)!==0&&l.tag!==0&&ed(),P=l.pendingLanes,(P&1)!==0?l===GE?Im++:(Im=0,GE=l):Im=0,Qs(),null}function ed(){if(xc!==null){var l=Kl(ov),u=no.transition,v=an;try{if(no.transition=null,an=16>l?16:l,xc===null)var w=!1;else{if(l=xc,xc=null,ov=0,(bn&6)!==0)throw Error(t(331));var b=bn;for(bn|=4,wt=l.current;wt!==null;){var P=wt,G=P.child;if((wt.flags&16)!==0){var ne=P.deletions;if(ne!==null){for(var le=0;le<ne.length;le++){var we=ne[le];for(wt=we;wt!==null;){var Ye=wt;switch(Ye.tag){case 0:case 11:case 15:Tm(8,Ye,P)}var $e=Ye.child;if($e!==null)$e.return=Ye,wt=$e;else for(;wt!==null;){Ye=wt;var Xe=Ye.sibling,vt=Ye.return;if(oC(Ye),Ye===we){wt=null;break}if(Xe!==null){Xe.return=vt,wt=Xe;break}wt=vt}}}var Mt=P.alternate;if(Mt!==null){var bt=Mt.child;if(bt!==null){Mt.child=null;do{var Mi=bt.sibling;bt.sibling=null,bt=Mi}while(bt!==null)}}wt=P}}if((P.subtreeFlags&2064)!==0&&G!==null)G.return=P,wt=G;else e:for(;wt!==null;){if(P=wt,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Tm(9,P,P.return)}var ye=P.sibling;if(ye!==null){ye.return=P.return,wt=ye;break e}wt=P.return}}var he=l.current;for(wt=he;wt!==null;){G=wt;var Ee=G.child;if((G.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=G,wt=Ee;else e:for(G=he;wt!==null;){if(ne=wt,(ne.flags&2048)!==0)try{switch(ne.tag){case 0:case 11:case 15:tv(9,ne)}}catch(Lt){yi(ne,ne.return,Lt)}if(ne===G){wt=null;break e}var it=ne.sibling;if(it!==null){it.return=ne.return,wt=it;break e}wt=ne.return}}if(bn=b,Qs(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(xt,l)}catch{}w=!0}return w}finally{an=v,no.transition=u}}return!1}function AC(l,u,v){u=M(v,u),u=fe(l,u,1),l=Jn(l,u,1),u=Jr(),l!==null&&(ui(l,1,u),hs(l,u))}function yi(l,u,v){if(l.tag===3)AC(l,l,v);else for(;u!==null;){if(u.tag===3){AC(u,l,v);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(_c===null||!_c.has(w))){l=M(v,l),l=Ie(u,l,1),u=Jn(u,l,1),l=Jr(),u!==null&&(ui(u,1,l),hs(u,l));break}}u=u.return}}function mN(l,u,v){var w=l.pingCache;w!==null&&w.delete(u),u=Jr(),l.pingedLanes|=l.suspendedLanes&v,ir===l&&(vr&v)===v&&(Wi===4||Wi===3&&(vr&130023424)===vr&&500>ue()-UE?ku(l,0):kE|=v),hs(l,u)}function wC(l,u){u===0&&((l.mode&1)===0?u=1:(u=Gt,Gt<<=1,(Gt&130023424)===0&&(Gt=4194304)));var v=Jr();l=Rs(l,u),l!==null&&(ui(l,u,v),hs(l,v))}function gN(l){var u=l.memoizedState,v=0;u!==null&&(v=u.retryLane),wC(l,v)}function vN(l,u){var v=0;switch(l.tag){case 13:var w=l.stateNode,b=l.memoizedState;b!==null&&(v=b.retryLane);break;case 19:w=l.stateNode;break;default:throw Error(t(314))}w!==null&&w.delete(u),wC(l,v)}var SC;SC=function(l,u,v){if(l!==null)if(l.memoizedProps!==u.pendingProps||fr.current)ln=!0;else{if((l.lanes&v)===0&&(u.flags&128)===0)return ln=!1,rN(l,u,v);ln=(l.flags&131072)!==0}else ln=!1,jn&&(u.flags&1048576)!==0&&cm(u,Uf,u.index);switch(u.lanes=0,u.tag){case 2:var w=u.type;$0(l,u),l=u.pendingProps;var b=el(u,Ui.current);va(u,v),b=Iu(null,u,w,l,b,v);var P=vm();return u.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,er(w)?(P=!0,tl(u)):P=!1,u.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,sn(u),b.updater=Zf,u.stateNode=b,b._reactInternals=u,E(u,w,l,v),u=tn(null,u,w,!0,P,v)):(u.tag=0,jn&&P&&um(u),pt(null,u,b,v),u=u.child),u;case 16:w=u.elementType;e:{switch($0(l,u),l=u.pendingProps,b=w._init,w=b(w._payload),u.type=w,b=u.tag=_N(w),l=cs(w,l),b){case 0:u=ut(null,u,w,l,v);break e;case 1:u=Pt(null,u,w,l,v);break e;case 11:u=Vi(null,u,w,l,v);break e;case 14:u=Kr(null,u,w,cs(w.type,l),v);break e}throw Error(t(306,w,""))}return u;case 0:return w=u.type,b=u.pendingProps,b=u.elementType===w?b:cs(w,b),ut(l,u,w,b,v);case 1:return w=u.type,b=u.pendingProps,b=u.elementType===w?b:cs(w,b),Pt(l,u,w,b,v);case 3:e:{if(qt(u),l===null)throw Error(t(387));w=u.pendingProps,P=u.memoizedState,b=P.element,fi(l,u),ri(u,w,null,v);var G=u.memoizedState;if(w=G.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},u.updateQueue.baseState=P,u.memoizedState=P,u.flags&256){b=M(Error(t(423)),u),u=xn(l,u,w,v,b);break e}else if(w!==b){b=M(Error(t(424)),u),u=xn(l,u,w,v,b);break e}else for(pr=Io(u.stateNode.containerInfo.firstChild),zi=u,jn=!0,ls=null,v=Su(u,null,w,v),u.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(ga(),w===b){u=pl(l,u,v);break e}pt(l,u,w,v)}u=u.child}return u;case 5:return ul(u),l===null&&Gf(u),w=u.type,b=u.pendingProps,P=l!==null?l.memoizedProps:null,G=b.children,nm(w,b)?G=null:P!==null&&nm(w,P)&&(u.flags|=32),Te(l,u),pt(l,u,G,v),u.child;case 6:return l===null&&Gf(u),null;case 13:return Ho(l,u,v);case 4:return bu(u,u.stateNode.containerInfo),w=u.pendingProps,l===null?u.child=rl(u,null,w,v):pt(l,u,w,v),u.child;case 11:return w=u.type,b=u.pendingProps,b=u.elementType===w?b:cs(w,b),Vi(l,u,w,b,v);case 7:return pt(l,u,u.pendingProps,v),u.child;case 8:return pt(l,u,u.pendingProps.children,v),u.child;case 12:return pt(l,u,u.pendingProps.children,v),u.child;case 10:e:{if(w=u.type._context,b=u.pendingProps,P=u.memoizedProps,G=b.value,kn(sl,w._currentValue),w._currentValue=G,P!==null)if(Gr(P.value,G)){if(P.children===b.children&&!fr.current){u=pl(l,u,v);break e}}else for(P=u.child,P!==null&&(P.return=u);P!==null;){var ne=P.dependencies;if(ne!==null){G=P.child;for(var le=ne.firstContext;le!==null;){if(le.context===w){if(P.tag===1){le=On(-1,v&-v),le.tag=2;var we=P.updateQueue;if(we!==null){we=we.shared;var Ye=we.pending;Ye===null?le.next=le:(le.next=Ye.next,Ye.next=le),we.pending=le}}P.lanes|=v,le=P.alternate,le!==null&&(le.lanes|=v),Cu(P.return,v,u),ne.lanes|=v;break}le=le.next}}else if(P.tag===10)G=P.type===u.type?null:P.child;else if(P.tag===18){if(G=P.return,G===null)throw Error(t(341));G.lanes|=v,ne=G.alternate,ne!==null&&(ne.lanes|=v),Cu(G,v,u),G=P.sibling}else G=P.child;if(G!==null)G.return=P;else for(G=P;G!==null;){if(G===u){G=null;break}if(P=G.sibling,P!==null){P.return=G.return,G=P;break}G=G.return}P=G}pt(l,u,b.children,v),u=u.child}return u;case 9:return b=u.type,w=u.pendingProps.children,va(u,v),b=Wr(b),w=w(b),u.flags|=1,pt(l,u,w,v),u.child;case 14:return w=u.type,b=cs(w,u.pendingProps),b=cs(w.type,b),Kr(l,u,w,b,v);case 15:return Ae(l,u,u.type,u.pendingProps,v);case 17:return w=u.type,b=u.pendingProps,b=u.elementType===w?b:cs(w,b),$0(l,u),u.tag=1,er(w)?(l=!0,tl(u)):l=!1,va(u,v),d(u,w,b),E(u,w,b,v),tn(null,u,w,!0,l,v);case 19:return tC(l,u,v);case 22:return pe(l,u,v)}throw Error(t(156,u.tag))};function MC(l,u){return X(l,u)}function yN(l,u,v,w){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(l,u,v,w){return new yN(l,u,v,w)}function YE(l){return l=l.prototype,!(!l||!l.isReactComponent)}function _N(l){if(typeof l=="function")return YE(l)?1:0;if(l!=null){if(l=l.$$typeof,l===ee)return 11;if(l===K)return 14}return 2}function wc(l,u){var v=l.alternate;return v===null?(v=io(l.tag,u,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=u,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&14680064,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,u=l.dependencies,v.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v}function uv(l,u,v,w,b,P){var G=2;if(w=l,typeof l=="function")YE(l)&&(G=1);else if(typeof l=="string")G=5;else e:switch(l){case k:return zu(v.children,b,P,u);case O:G=8,b|=8;break;case D:return l=io(12,v,u,b|2),l.elementType=D,l.lanes=P,l;case te:return l=io(13,v,u,b),l.elementType=te,l.lanes=P,l;case ce:return l=io(19,v,u,b),l.elementType=ce,l.lanes=P,l;case ae:return hv(v,b,P,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case N:G=10;break e;case z:G=9;break e;case ee:G=11;break e;case K:G=14;break e;case oe:G=16,w=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return u=io(G,v,u,b),u.elementType=l,u.type=w,u.lanes=P,u}function zu(l,u,v,w){return l=io(7,l,w,u),l.lanes=v,l}function hv(l,u,v,w){return l=io(22,l,w,u),l.elementType=ae,l.lanes=v,l.stateNode={isHidden:!1},l}function KE(l,u,v){return l=io(6,l,null,u),l.lanes=v,l}function JE(l,u,v){return u=io(4,l.children!==null?l.children:[],l.key,u),u.lanes=v,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function xN(l,u,v,w,b){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qi(0),this.expirationTimes=Qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.identifierPrefix=w,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function ZE(l,u,v,w,b,P,G,ne,le){return l=new xN(l,u,v,ne,le),u===1?(u=1,P===!0&&(u|=8)):u=0,P=io(3,null,null,u),l.current=P,P.stateNode=l,P.memoizedState={element:w,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},sn(P),l}function EN(l,u,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:w==null?null:""+w,children:l,containerInfo:u,implementation:v}}function CC(l){if(!l)return Lo;l=l._reactInternals;e:{if(Ao(l)!==l||l.tag!==1)throw Error(t(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(er(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(l.tag===1){var v=l.type;if(er(v))return _u(l,v,u)}return u}function TC(l,u,v,w,b,P,G,ne,le){return l=ZE(v,w,!0,l,b,P,G,ne,le),l.context=CC(null),v=l.current,w=Jr(),b=Ec(v),P=On(w,b),P.callback=u??null,Jn(v,P,b),l.current.lanes=b,ui(l,b,w),hs(l,w),l}function fv(l,u,v,w){var b=u.current,P=Jr(),G=Ec(b);return v=CC(v),u.context===null?u.context=v:u.pendingContext=v,u=On(P,G),u.payload={element:l},w=w===void 0?null:w,w!==null&&(u.callback=w),l=Jn(b,u,G),l!==null&&(Xo(l,b,G,P),tr(l,b,G)),G}function dv(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function bC(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<u?v:u}}function qE(l,u){bC(l,u),(l=l.alternate)&&bC(l,u)}function AN(){return null}var RC=typeof reportError=="function"?reportError:function(l){console.error(l)};function QE(l){this._internalRoot=l}pv.prototype.render=QE.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(t(409));fv(l,u,null,null)},pv.prototype.unmount=QE.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;Ou(function(){fv(null,l,null,null)}),u[Vr]=null}};function pv(l){this._internalRoot=l}pv.prototype.unstable_scheduleHydration=function(l){if(l){var u=rf();l={blockedOn:null,target:l,priority:u};for(var v=0;v<la.length&&u!==0&&u<la[v].priority;v++);la.splice(v,0,l),v===0&&af(l)}};function $E(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function mv(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function IC(){}function wN(l,u,v,w,b){if(b){if(typeof w=="function"){var P=w;w=function(){var we=dv(G);P.call(we)}}var G=TC(u,w,l,0,null,!1,!1,"",IC);return l._reactRootContainer=G,l[Vr]=G.current,ac(l.nodeType===8?l.parentNode:l),Ou(),G}for(;b=l.lastChild;)l.removeChild(b);if(typeof w=="function"){var ne=w;w=function(){var we=dv(le);ne.call(we)}}var le=ZE(l,0,!1,null,null,!1,!1,"",IC);return l._reactRootContainer=le,l[Vr]=le.current,ac(l.nodeType===8?l.parentNode:l),Ou(function(){fv(u,le,v,w)}),le}function gv(l,u,v,w,b){var P=v._reactRootContainer;if(P){var G=P;if(typeof b=="function"){var ne=b;b=function(){var le=dv(G);ne.call(le)}}fv(u,G,l,b)}else G=wN(v,u,l,b,w);return dv(G)}nu=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var v=ni(u.pendingLanes);v!==0&&(Ys(u,v|1),hs(u,ue()),(bn&6)===0&&($f=ue()+500,Qs()))}break;case 13:Ou(function(){var w=Rs(l,1);if(w!==null){var b=Jr();Xo(w,l,1,b)}}),qE(l,1)}},kp=function(l){if(l.tag===13){var u=Rs(l,134217728);if(u!==null){var v=Jr();Xo(u,l,134217728,v)}qE(l,134217728)}},C0=function(l){if(l.tag===13){var u=Ec(l),v=Rs(l,u);if(v!==null){var w=Jr();Xo(v,l,u,w)}qE(l,u)}},rf=function(){return an},sf=function(l,u){var v=an;try{return an=l,u()}finally{an=v}},Ge=function(l,u,v){switch(u){case"input":if(Re(l,v),u=v.name,v.type==="radio"&&u!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<v.length;u++){var w=v[u];if(w!==l&&w.form===l.form){var b=Ff(w);if(!b)throw Error(t(90));zt(w),Re(w,b)}}}break;case"textarea":H(l,v);break;case"select":u=v.value,u!=null&&Rt(l,!!v.multiple,u,!1)}},Bt=WE,mn=Ou;var SN={usingClientEntryPoint:!1,Events:[Po,hi,Ff,ke,ct,WE]},Pm={findFiberByHostInstance:ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MN={bundleType:Pm.bundleType,version:Pm.version,rendererPackageName:Pm.rendererPackageName,rendererConfig:Pm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=tf(l),l===null?null:l.stateNode},findFiberByHostInstance:Pm.findFiberByHostInstance||AN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vv.isDisabled&&vv.supportsFiber)try{xt=vv.inject(MN),dt=vv}catch{}}return fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SN,fs.createPortal=function(l,u){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$E(u))throw Error(t(200));return EN(l,u,null,v)},fs.createRoot=function(l,u){if(!$E(l))throw Error(t(299));var v=!1,w="",b=RC;return u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(b=u.onRecoverableError)),u=ZE(l,1,!1,null,null,v,!1,w,b),l[Vr]=u.current,ac(l.nodeType===8?l.parentNode:l),new QE(u)},fs.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=tf(u),l=l===null?null:l.stateNode,l},fs.flushSync=function(l){return Ou(l)},fs.hydrate=function(l,u,v){if(!mv(u))throw Error(t(200));return gv(null,l,u,!0,v)},fs.hydrateRoot=function(l,u,v){if(!$E(l))throw Error(t(405));var w=v!=null&&v.hydratedSources||null,b=!1,P="",G=RC;if(v!=null&&(v.unstable_strictMode===!0&&(b=!0),v.identifierPrefix!==void 0&&(P=v.identifierPrefix),v.onRecoverableError!==void 0&&(G=v.onRecoverableError)),u=TC(u,null,l,1,v??null,b,!1,P,G),l[Vr]=u.current,ac(l),w)for(l=0;l<w.length;l++)v=w[l],b=v._getVersion,b=b(v._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[v,b]:u.mutableSourceEagerHydrationData.push(v,b);return new pv(u)},fs.render=function(l,u,v){if(!mv(u))throw Error(t(200));return gv(null,l,u,!1,v)},fs.unmountComponentAtNode=function(l){if(!mv(l))throw Error(t(40));return l._reactRootContainer?(Ou(function(){gv(null,null,l,!1,function(){l._reactRootContainer=null,l[Vr]=null})}),!0):!1},fs.unstable_batchedUpdates=WE,fs.unstable_renderSubtreeIntoContainer=function(l,u,v,w){if(!mv(v))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return gv(l,u,v,!1,w)},fs.version="18.3.1-next-f1338f8080-20240426",fs}var kC;function i2(){if(kC)return nA.exports;kC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),nA.exports=DN(),nA.exports}var UC;function BN(){if(UC)return yv;UC=1;var i=i2();return yv.createRoot=i.createRoot,yv.hydrateRoot=i.hydrateRoot,yv}var r2=BN(),J=mx();const NN=uS(J),s2=TN({__proto__:null,default:NN},[J]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ON=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),zC=i=>{const e=ON(i);return e.charAt(0).toUpperCase()+e.slice(1)},o2=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=J.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:s,iconNode:o,...a},c)=>J.createElement("svg",{ref:c,...kN,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:o2("lucide",r),...a},[...o.map(([h,f])=>J.createElement(h,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=(i,e)=>{const t=J.forwardRef(({className:n,...r},s)=>J.createElement(UN,{ref:s,iconNode:e,className:o2(`lucide-${FN(zC(i))}`,`lucide-${i}`,n),...r}));return t.displayName=zC(i),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],GN=Ii("arrow-left",zN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],GC=Ii("camera",HN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],WN=Ii("cloud",VN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],jN=Ii("droplets",XN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],KN=Ii("external-link",YN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ZN=Ii("eye",JN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],QN=Ii("github",qN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],eF=Ii("lightbulb",$N);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],nF=Ii("mail",tF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],rF=Ii("map-pin",iF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],oF=Ii("menu",sF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],lF=Ii("moon",aF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],uF=Ii("rotate-cw",cF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]],fF=Ii("satellite",hF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],pF=Ii("sun",dF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gF=Ii("triangle-alert",mF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],yF=Ii("twitter",vF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],xF=Ii("waves",_F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],AF=Ii("x",EF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],SF=Ii("zoom-in",wF);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],CF=Ii("zoom-out",MF);function HC(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function a2(...i){return e=>{let t=!1;const n=i.map(r=>{const s=HC(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<n.length;r++){const s=n[r];typeof s=="function"?s():HC(i[r],null)}}}}function Hh(...i){return J.useCallback(a2(...i),i)}function hS(i){const e=bF(i),t=J.forwardRef((n,r)=>{const{children:s,...o}=n,a=J.Children.toArray(s),c=a.find(IF);if(c){const h=c.props.children,f=a.map(m=>m===c?J.Children.count(h)>1?J.Children.only(null):J.isValidElement(h)?h.props.children:null:m);return V.jsx(e,{...o,ref:r,children:J.isValidElement(h)?J.cloneElement(h,void 0,f):null})}return V.jsx(e,{...o,ref:r,children:s})});return t.displayName=`${i}.Slot`,t}var TF=hS("Slot");function bF(i){const e=J.forwardRef((t,n)=>{const{children:r,...s}=t;if(J.isValidElement(r)){const o=LF(r),a=PF(s,r.props);return r.type!==J.Fragment&&(a.ref=n?a2(n,o):o),J.cloneElement(r,a)}return J.Children.count(r)>1?J.Children.only(null):null});return e.displayName=`${i}.SlotClone`,e}var RF=Symbol("radix.slottable");function IF(i){return J.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===RF}function PF(i,e){const t={...e};for(const n in e){const r=i[n],s=e[n];/^on[A-Z]/.test(n)?r&&s?t[n]=(...a)=>{const c=s(...a);return r(...a),c}:r&&(t[n]=r):n==="style"?t[n]={...r,...s}:n==="className"&&(t[n]=[r,s].filter(Boolean).join(" "))}return{...i,...t}}function LF(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function l2(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(e=0;e<r;e++)i[e]&&(t=l2(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function c2(){for(var i,e,t=0,n="",r=arguments.length;t<r;t++)(i=arguments[t])&&(e=l2(i))&&(n&&(n+=" "),n+=e);return n}const VC=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,WC=c2,DF=(i,e)=>t=>{var n;if(e?.variants==null)return WC(i,t?.class,t?.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(h=>{const f=t?.[h],m=s?.[h];if(f===null)return null;const g=VC(f)||VC(m);return r[h][g]}),a=t&&Object.entries(t).reduce((h,f)=>{let[m,g]=f;return g===void 0||(h[m]=g),h},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,f)=>{let{class:m,className:g,...y}=f;return Object.entries(y).every(_=>{let[S,A]=_;return Array.isArray(A)?A.includes({...s,...a}[S]):{...s,...a}[S]===A})?[...h,m,g]:h},[]);return WC(i,o,c,t?.class,t?.className)},fS="-",BF=i=>{const e=FF(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:o=>{const a=o.split(fS);return a[0]===""&&a.length!==1&&a.shift(),u2(a,e)||NF(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&n[o]?[...c,...n[o]]:c}}},u2=(i,e)=>{if(i.length===0)return e.classGroupId;const t=i[0],n=e.nextPart.get(t),r=n?u2(i.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const s=i.join(fS);return e.validators.find(({validator:o})=>o(s))?.classGroupId},XC=/^\[(.+)\]$/,NF=i=>{if(XC.test(i)){const e=XC.exec(i)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},FF=i=>{const{theme:e,classGroups:t}=i,n={nextPart:new Map,validators:[]};for(const r in t)n1(t[r],n,r,e);return n},n1=(i,e,t,n)=>{i.forEach(r=>{if(typeof r=="string"){const s=r===""?e:jC(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(OF(r)){n1(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{n1(o,jC(e,s),t,n)})})},jC=(i,e)=>{let t=i;return e.split(fS).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},OF=i=>i.isThemeGetter,kF=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(s,o)=>{t.set(s,o),e++,e>i&&(e=0,n=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},i1="!",r1=":",UF=r1.length,zF=i=>{const{prefix:e,experimentalParseClassName:t}=i;let n=r=>{const s=[];let o=0,a=0,c=0,h;for(let _=0;_<r.length;_++){let S=r[_];if(o===0&&a===0){if(S===r1){s.push(r.slice(c,_)),c=_+UF;continue}if(S==="/"){h=_;continue}}S==="["?o++:S==="]"?o--:S==="("?a++:S===")"&&a--}const f=s.length===0?r:r.substring(c),m=GF(f),g=m!==f,y=h&&h>c?h-c:void 0;return{modifiers:s,hasImportantModifier:g,baseClassName:m,maybePostfixModifierPosition:y}};if(e){const r=e+r1,s=n;n=o=>o.startsWith(r)?s(o.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const r=n;n=s=>t({className:s,parseClassName:r})}return n},GF=i=>i.endsWith(i1)?i.substring(0,i.length-1):i.startsWith(i1)?i.substring(1):i,HF=i=>{const e=Object.fromEntries(i.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const r=[];let s=[];return n.forEach(o=>{o[0]==="["||e[o]?(r.push(...s.sort(),o),s=[]):s.push(o)}),r.push(...s.sort()),r}},VF=i=>({cache:kF(i.cacheSize),parseClassName:zF(i),sortModifiers:HF(i),...BF(i)}),WF=/\s+/,XF=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r,sortModifiers:s}=e,o=[],a=i.trim().split(WF);let c="";for(let h=a.length-1;h>=0;h-=1){const f=a[h],{isExternal:m,modifiers:g,hasImportantModifier:y,baseClassName:_,maybePostfixModifierPosition:S}=t(f);if(m){c=f+(c.length>0?" "+c:c);continue}let A=!!S,x=n(A?_.substring(0,S):_);if(!x){if(!A){c=f+(c.length>0?" "+c:c);continue}if(x=n(_),!x){c=f+(c.length>0?" "+c:c);continue}A=!1}const C=s(g).join(":"),T=y?C+i1:C,R=T+x;if(o.includes(R))continue;o.push(R);const L=r(x,A);for(let B=0;B<L.length;++B){const k=L[B];o.push(T+k)}c=f+(c.length>0?" "+c:c)}return c};function jF(){let i=0,e,t,n="";for(;i<arguments.length;)(e=arguments[i++])&&(t=h2(e))&&(n&&(n+=" "),n+=t);return n}const h2=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=h2(i[n]))&&(t&&(t+=" "),t+=e);return t};function YF(i,...e){let t,n,r,s=o;function o(c){const h=e.reduce((f,m)=>m(f),i());return t=VF(h),n=t.cache.get,r=t.cache.set,s=a,a(c)}function a(c){const h=n(c);if(h)return h;const f=XF(c,t);return r(c,f),f}return function(){return s(jF.apply(null,arguments))}}const Xi=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},f2=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,d2=/^\((?:(\w[\w-]*):)?(.+)\)$/i,KF=/^\d+\/\d+$/,JF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,QF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$F=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,td=i=>KF.test(i),dn=i=>!!i&&!Number.isNaN(Number(i)),Mc=i=>!!i&&Number.isInteger(Number(i)),sA=i=>i.endsWith("%")&&dn(i.slice(0,-1)),gl=i=>JF.test(i),eO=()=>!0,tO=i=>ZF.test(i)&&!qF.test(i),p2=()=>!1,nO=i=>QF.test(i),iO=i=>$F.test(i),rO=i=>!Ct(i)&&!Tt(i),sO=i=>Tp(i,v2,p2),Ct=i=>f2.test(i),Gu=i=>Tp(i,y2,tO),oA=i=>Tp(i,uO,dn),YC=i=>Tp(i,m2,p2),oO=i=>Tp(i,g2,iO),_v=i=>Tp(i,_2,nO),Tt=i=>d2.test(i),Dm=i=>bp(i,y2),aO=i=>bp(i,hO),KC=i=>bp(i,m2),lO=i=>bp(i,v2),cO=i=>bp(i,g2),xv=i=>bp(i,_2,!0),Tp=(i,e,t)=>{const n=f2.exec(i);return n?n[1]?e(n[1]):t(n[2]):!1},bp=(i,e,t=!1)=>{const n=d2.exec(i);return n?n[1]?e(n[1]):t:!1},m2=i=>i==="position"||i==="percentage",g2=i=>i==="image"||i==="url",v2=i=>i==="length"||i==="size"||i==="bg-size",y2=i=>i==="length",uO=i=>i==="number",hO=i=>i==="family-name",_2=i=>i==="shadow",fO=()=>{const i=Xi("color"),e=Xi("font"),t=Xi("text"),n=Xi("font-weight"),r=Xi("tracking"),s=Xi("leading"),o=Xi("breakpoint"),a=Xi("container"),c=Xi("spacing"),h=Xi("radius"),f=Xi("shadow"),m=Xi("inset-shadow"),g=Xi("text-shadow"),y=Xi("drop-shadow"),_=Xi("blur"),S=Xi("perspective"),A=Xi("aspect"),x=Xi("ease"),C=Xi("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],L=()=>[...R(),Tt,Ct],B=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],O=()=>[Tt,Ct,c],D=()=>[td,"full","auto",...O()],N=()=>[Mc,"none","subgrid",Tt,Ct],z=()=>["auto",{span:["full",Mc,Tt,Ct]},Mc,Tt,Ct],ee=()=>[Mc,"auto",Tt,Ct],te=()=>["auto","min","max","fr",Tt,Ct],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],K=()=>["start","end","center","stretch","center-safe","end-safe"],oe=()=>["auto",...O()],ae=()=>[td,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...O()],U=()=>[i,Tt,Ct],Z=()=>[...R(),KC,YC,{position:[Tt,Ct]}],q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",lO,sO,{size:[Tt,Ct]}],se=()=>[sA,Dm,Gu],_e=()=>["","none","full",h,Tt,Ct],De=()=>["",dn,Dm,Gu],ze=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>[dn,sA,KC,YC],Ue=()=>["","none",_,Tt,Ct],We=()=>["none",dn,Tt,Ct],He=()=>["none",dn,Tt,Ct],rt=()=>[dn,Tt,Ct],zt=()=>[td,"full",...O()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[gl],breakpoint:[gl],color:[eO],container:[gl],"drop-shadow":[gl],ease:["in","out","in-out"],font:[rO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[gl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[gl],shadow:[gl],spacing:["px",dn],text:[gl],"text-shadow":[gl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",td,Ct,Tt,A]}],container:["container"],columns:[{columns:[dn,Ct,Tt,a]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:L()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[Mc,"auto",Tt,Ct]}],basis:[{basis:[td,"full","auto",a,...O()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[dn,td,"auto","initial","none",Ct]}],grow:[{grow:["",dn,Tt,Ct]}],shrink:[{shrink:["",dn,Tt,Ct]}],order:[{order:[Mc,"first","last","none",Tt,Ct]}],"grid-cols":[{"grid-cols":N()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":N()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":te()}],"auto-rows":[{"auto-rows":te()}],gap:[{gap:O()}],"gap-x":[{"gap-x":O()}],"gap-y":[{"gap-y":O()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...K(),"normal"]}],"justify-self":[{"justify-self":["auto",...K()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...K(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...K(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...K(),"baseline"]}],"place-self":[{"place-self":["auto",...K()]}],p:[{p:O()}],px:[{px:O()}],py:[{py:O()}],ps:[{ps:O()}],pe:[{pe:O()}],pt:[{pt:O()}],pr:[{pr:O()}],pb:[{pb:O()}],pl:[{pl:O()}],m:[{m:oe()}],mx:[{mx:oe()}],my:[{my:oe()}],ms:[{ms:oe()}],me:[{me:oe()}],mt:[{mt:oe()}],mr:[{mr:oe()}],mb:[{mb:oe()}],ml:[{ml:oe()}],"space-x":[{"space-x":O()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":O()}],"space-y-reverse":["space-y-reverse"],size:[{size:ae()}],w:[{w:[a,"screen",...ae()]}],"min-w":[{"min-w":[a,"screen","none",...ae()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...ae()]}],h:[{h:["screen","lh",...ae()]}],"min-h":[{"min-h":["screen","lh","none",...ae()]}],"max-h":[{"max-h":["screen","lh",...ae()]}],"font-size":[{text:["base",t,Dm,Gu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Tt,oA]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",sA,Ct]}],"font-family":[{font:[aO,Ct,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Tt,Ct]}],"line-clamp":[{"line-clamp":[dn,"none",Tt,oA]}],leading:[{leading:[s,...O()]}],"list-image":[{"list-image":["none",Tt,Ct]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Tt,Ct]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ze(),"wavy"]}],"text-decoration-thickness":[{decoration:[dn,"from-font","auto",Tt,Gu]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[dn,"auto",Tt,Ct]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Tt,Ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Tt,Ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Z()}],"bg-repeat":[{bg:q()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mc,Tt,Ct],radial:["",Tt,Ct],conic:[Mc,Tt,Ct]},cO,oO]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:se()}],"gradient-via-pos":[{via:se()}],"gradient-to-pos":[{to:se()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:_e()}],"rounded-s":[{"rounded-s":_e()}],"rounded-e":[{"rounded-e":_e()}],"rounded-t":[{"rounded-t":_e()}],"rounded-r":[{"rounded-r":_e()}],"rounded-b":[{"rounded-b":_e()}],"rounded-l":[{"rounded-l":_e()}],"rounded-ss":[{"rounded-ss":_e()}],"rounded-se":[{"rounded-se":_e()}],"rounded-ee":[{"rounded-ee":_e()}],"rounded-es":[{"rounded-es":_e()}],"rounded-tl":[{"rounded-tl":_e()}],"rounded-tr":[{"rounded-tr":_e()}],"rounded-br":[{"rounded-br":_e()}],"rounded-bl":[{"rounded-bl":_e()}],"border-w":[{border:De()}],"border-w-x":[{"border-x":De()}],"border-w-y":[{"border-y":De()}],"border-w-s":[{"border-s":De()}],"border-w-e":[{"border-e":De()}],"border-w-t":[{"border-t":De()}],"border-w-r":[{"border-r":De()}],"border-w-b":[{"border-b":De()}],"border-w-l":[{"border-l":De()}],"divide-x":[{"divide-x":De()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":De()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ze(),"hidden","none"]}],"divide-style":[{divide:[...ze(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...ze(),"none","hidden"]}],"outline-offset":[{"outline-offset":[dn,Tt,Ct]}],"outline-w":[{outline:["",dn,Dm,Gu]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",f,xv,_v]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",m,xv,_v]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:De()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[dn,Gu]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":De()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",g,xv,_v]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[dn,Tt,Ct]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[dn]}],"mask-image-linear-from-pos":[{"mask-linear-from":ge()}],"mask-image-linear-to-pos":[{"mask-linear-to":ge()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":ge()}],"mask-image-t-to-pos":[{"mask-t-to":ge()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":ge()}],"mask-image-r-to-pos":[{"mask-r-to":ge()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":ge()}],"mask-image-b-to-pos":[{"mask-b-to":ge()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":ge()}],"mask-image-l-to-pos":[{"mask-l-to":ge()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":ge()}],"mask-image-x-to-pos":[{"mask-x-to":ge()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":ge()}],"mask-image-y-to-pos":[{"mask-y-to":ge()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Tt,Ct]}],"mask-image-radial-from-pos":[{"mask-radial-from":ge()}],"mask-image-radial-to-pos":[{"mask-radial-to":ge()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[dn]}],"mask-image-conic-from-pos":[{"mask-conic-from":ge()}],"mask-image-conic-to-pos":[{"mask-conic-to":ge()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Z()}],"mask-repeat":[{mask:q()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Tt,Ct]}],filter:[{filter:["","none",Tt,Ct]}],blur:[{blur:Ue()}],brightness:[{brightness:[dn,Tt,Ct]}],contrast:[{contrast:[dn,Tt,Ct]}],"drop-shadow":[{"drop-shadow":["","none",y,xv,_v]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",dn,Tt,Ct]}],"hue-rotate":[{"hue-rotate":[dn,Tt,Ct]}],invert:[{invert:["",dn,Tt,Ct]}],saturate:[{saturate:[dn,Tt,Ct]}],sepia:[{sepia:["",dn,Tt,Ct]}],"backdrop-filter":[{"backdrop-filter":["","none",Tt,Ct]}],"backdrop-blur":[{"backdrop-blur":Ue()}],"backdrop-brightness":[{"backdrop-brightness":[dn,Tt,Ct]}],"backdrop-contrast":[{"backdrop-contrast":[dn,Tt,Ct]}],"backdrop-grayscale":[{"backdrop-grayscale":["",dn,Tt,Ct]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[dn,Tt,Ct]}],"backdrop-invert":[{"backdrop-invert":["",dn,Tt,Ct]}],"backdrop-opacity":[{"backdrop-opacity":[dn,Tt,Ct]}],"backdrop-saturate":[{"backdrop-saturate":[dn,Tt,Ct]}],"backdrop-sepia":[{"backdrop-sepia":["",dn,Tt,Ct]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":O()}],"border-spacing-x":[{"border-spacing-x":O()}],"border-spacing-y":[{"border-spacing-y":O()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Tt,Ct]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[dn,"initial",Tt,Ct]}],ease:[{ease:["linear","initial",x,Tt,Ct]}],delay:[{delay:[dn,Tt,Ct]}],animate:[{animate:["none",C,Tt,Ct]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Tt,Ct]}],"perspective-origin":[{"perspective-origin":L()}],rotate:[{rotate:We()}],"rotate-x":[{"rotate-x":We()}],"rotate-y":[{"rotate-y":We()}],"rotate-z":[{"rotate-z":We()}],scale:[{scale:He()}],"scale-x":[{"scale-x":He()}],"scale-y":[{"scale-y":He()}],"scale-z":[{"scale-z":He()}],"scale-3d":["scale-3d"],skew:[{skew:rt()}],"skew-x":[{"skew-x":rt()}],"skew-y":[{"skew-y":rt()}],transform:[{transform:[Tt,Ct,"","none","gpu","cpu"]}],"transform-origin":[{origin:L()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:zt()}],"translate-x":[{"translate-x":zt()}],"translate-y":[{"translate-y":zt()}],"translate-z":[{"translate-z":zt()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Tt,Ct]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Tt,Ct]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[dn,Dm,Gu,oA]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},dO=YF(fO);function Rp(...i){return dO(c2(i))}const pO=DF("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),qo=J.forwardRef(({className:i,variant:e,size:t,asChild:n=!1,...r},s)=>{const o=n?TF:"button";return V.jsx(o,{ref:s,"data-slot":"button",className:Rp(pO({variant:e,size:t,className:i})),...r})});qo.displayName="Button";function mO(){const[i,e]=J.useState({lat:0,lon:0}),[t,n]=J.useState(7.66);return J.useEffect(()=>{const r=setInterval(()=>{e({lat:Math.sin(Date.now()/1e4)*51.6,lon:Date.now()/100%360-180}),n(7.66+(Math.random()-.5)*.1)},1e3);return()=>clearInterval(r)},[]),V.jsxs("div",{className:"hidden lg:flex items-center gap-2 bg-accent/50 px-4 py-2 rounded-lg border border-border",children:[V.jsx(fF,{className:"h-4 w-4 text-[#0B3D91] animate-pulse"}),V.jsxs("div",{className:"text-xs",children:[V.jsx("div",{className:"font-semibold",children:"ISS Position"}),V.jsxs("div",{className:"text-muted-foreground",children:[i.lat.toFixed(2),", ",i.lon.toFixed(2),"  ",t.toFixed(2)," km/s"]})]})]})}const aA=768;function gO(){const[i,e]=J.useState(void 0);return J.useEffect(()=>{const t=window.matchMedia(`(max-width: ${aA-1}px)`),n=()=>{e(window.innerWidth<aA)};return t.addEventListener("change",n),e(window.innerWidth<aA),()=>t.removeEventListener("change",n)},[]),!!i}const vO="_collapsedMenu_1ej1z_2",yO="_menuButton_1ej1z_20",_O="_navbar_1ej1z_50",xO="_navBackground_1ej1z_68",EO="_dark_1ej1z_77",AO="_backdropLayer_1ej1z_84",wO="_borderLayer_1ej1z_89",SO="_shadowLayer_1ej1z_102",MO="_navContent_1ej1z_109",CO="_logoButton_1ej1z_120",TO="_logoIcon_1ej1z_129",bO="_logoText_1ej1z_143",RO="_navLinks_1ej1z_150",IO="_navLink_1ej1z_150",PO="_active_1ej1z_163",LO="_inactive_1ej1z_169",DO="_rightControls_1ej1z_178",BO="_themeButton_1ej1z_183",NO="_mobileLinks_1ej1z_194",FO="_mobileLink_1ej1z_194",_i={collapsedMenu:vO,menuButton:yO,navbar:_O,navBackground:xO,dark:EO,backdropLayer:AO,borderLayer:wO,shadowLayer:SO,navContent:MO,logoButton:CO,logoIcon:TO,logoText:bO,navLinks:RO,navLink:IO,active:PO,inactive:LO,rightControls:DO,themeButton:BO,mobileLinks:NO,mobileLink:FO};function OO({currentPage:i,onNavigate:e,theme:t,onThemeToggle:n}){const r=gO(),[s,o]=J.useState(!0),[a,c]=J.useState(!1),h=J.useRef(null),f=[{name:"Home",id:"home"},{name:"Cupola",id:"cupola"},{name:"NBL",id:"nbl"}];return J.useEffect(()=>{const m=()=>o(!0),g=()=>{a||o(!1)},y=()=>{h.current&&clearTimeout(h.current),h.current=setTimeout(g,3e3)},_=()=>{m(),y()};return window.addEventListener("mousemove",_),window.addEventListener("click",_),window.addEventListener("keydown",_),window.addEventListener("scroll",_),y(),()=>{h.current&&clearTimeout(h.current),window.removeEventListener("mousemove",_),window.removeEventListener("click",_),window.removeEventListener("keydown",_),window.removeEventListener("scroll",_)}},[a]),V.jsxs(V.Fragment,{children:[!s&&V.jsx("div",{className:_i.collapsedMenu,onMouseEnter:()=>{c(!0),o(!0)},onMouseLeave:()=>c(!1),children:V.jsx("button",{className:_i.menuButton,onClick:()=>o(!0),children:V.jsx(oF,{className:"w-7 h-7 text-white drop-shadow-lg"})})}),s&&V.jsx("nav",{className:_i.navbar,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:V.jsxs("div",{className:"relative",children:[V.jsx("div",{className:`${_i.navBackground} ${t==="dark"?_i.dark:""}`}),V.jsx("div",{className:_i.backdropLayer}),V.jsx("div",{className:_i.borderLayer}),V.jsx("div",{className:_i.shadowLayer}),V.jsxs("div",{className:_i.navContent,children:[V.jsxs("button",{onClick:()=>e("home"),className:_i.logoButton,children:[V.jsx("div",{className:_i.logoIcon,children:V.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:V.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:"white"})})}),V.jsx("span",{className:_i.logoText,children:"Window to the World"})]}),!r&&V.jsx("div",{className:_i.navLinks,children:f.map(m=>V.jsx("button",{onClick:()=>e(m.id),className:`${_i.navLink} ${i===m.id?_i.active:_i.inactive}`,children:m.name},m.id))}),V.jsxs("div",{className:_i.rightControls,children:[V.jsx(qo,{variant:"ghost",size:"icon",onClick:n,className:_i.themeButton,children:t==="dark"?V.jsx(pF,{className:"h-5 w-5"}):V.jsx(lF,{className:"h-5 w-5"})}),V.jsx(mO,{})]})]}),r&&V.jsx("div",{className:_i.mobileLinks,children:f.map(m=>V.jsx("button",{onClick:()=>e(m.id),className:`${_i.mobileLink} ${i===m.id?_i.active:_i.inactive}`,children:m.name},m.id))})]})})]})}function kO(){return V.jsx("footer",{className:"bg-background border-t border-border mt-20",children:V.jsx("div",{className:"max-w-7xl mx-auto px-6 py-12",children:V.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-center",children:[V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("div",{className:"w-16 h-16 rounded-full bg-[#0B3D91] flex items-center justify-center",children:V.jsxs("svg",{className:"w-10 h-10",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[V.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"white",strokeWidth:"1.5"}),V.jsx("path",{d:"M8 12h8M12 8v8",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"})]})}),V.jsxs("div",{children:[V.jsx("div",{className:"font-semibold",children:"NASA"}),V.jsx("div",{className:"text-xs text-muted-foreground",children:"Educational Resources"})]})]}),V.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[V.jsx("p",{children:"This educational platform uses NASA's open data and APIs."}),V.jsx("p",{className:"mt-1",children:"Data is freely available to the public for educational purposes."}),V.jsx("p",{className:"mt-2 text-xs",children:" 2025 Window to the World  Not affiliated with NASA"})]}),V.jsxs("div",{className:"flex items-center justify-end gap-4",children:[V.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:V.jsx(QN,{className:"h-5 w-5"})}),V.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:V.jsx(yF,{className:"h-5 w-5"})}),V.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:V.jsx(nF,{className:"h-5 w-5"})})]})]})})})}function Rl({className:i,...e}){return V.jsx("div",{"data-slot":"card",className:Rp("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",i),...e})}var x2=i2();const UO=uS(x2);var zO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ba=zO.reduce((i,e)=>{const t=hS(`Primitive.${e}`),n=J.forwardRef((r,s)=>{const{asChild:o,...a}=r,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),V.jsx(c,{...a,ref:s})});return n.displayName=`Primitive.${e}`,{...i,[e]:n}},{});function GO(i,e){i&&x2.flushSync(()=>i.dispatchEvent(e))}var HO="AspectRatio",E2=J.forwardRef((i,e)=>{const{ratio:t=1/1,style:n,...r}=i;return V.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/t}%`},"data-radix-aspect-ratio-wrapper":"",children:V.jsx(Ba.div,{...r,ref:e,style:{...n,position:"absolute",top:0,right:0,bottom:0,left:0}})})});E2.displayName=HO;var VO=E2;function JC({...i}){return V.jsx(VO,{"data-slot":"aspect-ratio",...i})}function WO(){const[i,e]=J.useState(!1),[t,n]=J.useState({x:50,y:50}),r=[{aspect:"Pressure",underwater:"1-2 atmospheres",space:"Vacuum (0 atm)"},{aspect:"Movement",underwater:"Neutral buoyancy",space:"True weightlessness"},{aspect:"Duration",underwater:"6-7 hours typical",space:"6-8 hours EVA"},{aspect:"Visibility",underwater:"Limited by water clarity",space:"Crystal clear"},{aspect:"Temperature",underwater:"~30C (86F)",space:"-157C to 121C"}];return V.jsxs("div",{className:"min-h-screen pt-24 pb-12",children:[V.jsxs("div",{className:"relative h-[40vh] bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1533774121866-e73552547cfe?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxhc3Ryb25hdXQlMjB1bmRlcndhdGVyJTIwdHJhaW5pbmclMjBwb29sfGVufDF8fHx8MTc1OTU5MzU5NHww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral')"},children:[V.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0a4a7a]/80 to-background"}),V.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:V.jsxs("div",{className:"text-center text-white space-y-4 px-6",children:[V.jsx(jN,{className:"h-16 w-16 mx-auto"}),V.jsx("h1",{className:"text-5xl",children:"Neutral Buoyancy Laboratory"}),V.jsx("p",{className:"text-xl max-w-2xl",children:"Training astronauts underwater to prepare for the challenges of spacewalks"})]})})]}),V.jsx("div",{className:"max-w-7xl mx-auto px-6 -mt-12 relative z-10",children:V.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[V.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[V.jsxs(Rl,{className:"p-6 space-y-4",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsx("h2",{className:"text-2xl",children:"Astronaut Training Video"}),V.jsx("a",{href:"https://www.youtube.com/watch?v=4514z--Zbfk",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-sm text-[#0B3D91] hover:underline",children:"Watch on YouTube"})]}),V.jsx(JC,{ratio:16/9,children:V.jsx("iframe",{src:"https://www.youtube.com/embed/4514z--Zbfk?rel=0&modestbranding=1&color=white",title:"Astronaut Training Video",className:"w-full h-full rounded-lg border",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),V.jsx("p",{className:"text-sm text-muted-foreground",children:"Watch astronauts practice spacewalk procedures in the world's largest indoor pool, located at NASA's Johnson Space Center. The NBL holds 6.2 million gallons of water and contains full-scale ISS modules."})]}),V.jsxs(Rl,{className:"p-6 space-y-4",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsx("h2",{className:"text-2xl",children:"Weightless Wonders Game"}),V.jsxs("a",{href:"/futuristic-landing-page-ui/games/weightless-wonders/index.html",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-sm text-[#FFF] hover:underline px-2 py-3 bg-[#FF0000]",style:{background:"#0B3D91",padding:10,borderRadius:"12px"},children:["Open in new tab ",V.jsx(KN,{className:"h-4 w-4"})]})]}),V.jsx("p",{className:"text-sm text-muted-foreground",children:V.jsx("strong",{children:"Play directly inside the page. Use W/A/S/D or Arrow keys to move. Press P to pause."})}),V.jsx("p",{className:"text-sm text-muted-foreground",children:"Weightless Wonders is an immersive educational web game designed to teach players key concepts about gravity and movement in space."}),V.jsx("div",{className:"-mx-4 sm:-mx-6 md:-mx-8",children:V.jsx(JC,{ratio:5/4,children:V.jsx("iframe",{src:"/futuristic-landing-page-ui/games/weightless-wonders/index.html",title:"Weightless Wonders Game",className:"w-full h-full rounded-md border",allow:"autoplay; fullscreen"})})})]})]}),V.jsxs("div",{className:"space-y-6",children:[V.jsxs(Rl,{className:"p-6 space-y-4",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(xF,{className:"h-5 w-5 text-[#0B3D91]"}),V.jsx("h3",{className:"text-xl",children:"About the NBL"})]}),V.jsx("p",{className:"text-sm text-muted-foreground",children:"The Neutral Buoyancy Laboratory is NASA's premier astronaut training facility. By carefully adjusting weights on the spacesuit, trainers create a neutral buoyancy environment that closely simulates the weightlessness experienced during spacewalks."}),V.jsxs("div",{className:"space-y-2 text-sm",children:[V.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[V.jsx("span",{className:"text-muted-foreground",children:"Pool Depth"}),V.jsx("span",{children:"40 feet (12.2 m)"})]}),V.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[V.jsx("span",{className:"text-muted-foreground",children:"Water Volume"}),V.jsx("span",{children:"6.2 million gallons"})]}),V.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[V.jsx("span",{className:"text-muted-foreground",children:"Location"}),V.jsx("span",{children:"Houston, TX"})]}),V.jsxs("div",{className:"flex justify-between py-2",children:[V.jsx("span",{className:"text-muted-foreground",children:"Training Duration"}),V.jsx("span",{children:"6-7 hours typical"})]})]})]}),V.jsxs(Rl,{className:"p-6 space-y-4",children:[V.jsx("h3",{className:"text-xl",children:"Underwater vs. Space"}),V.jsx("div",{className:"space-y-2 text-sm",children:r.map((s,o)=>V.jsxs("div",{className:"grid grid-cols-3 gap-2 py-2 border-b border-border last:border-0",children:[V.jsx("span",{className:"font-semibold",children:s.aspect}),V.jsx("span",{className:"text-muted-foreground text-xs",children:s.underwater}),V.jsx("span",{className:"text-muted-foreground text-xs",children:s.space})]},o))})]})]})]})})]})}function Wc(i,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(i?.(r),t===!1||!r.defaultPrevented)return e?.(r)}}function XO(i,e){const t=J.createContext(e),n=s=>{const{children:o,...a}=s,c=J.useMemo(()=>a,Object.values(a));return V.jsx(t.Provider,{value:c,children:o})};n.displayName=i+"Provider";function r(s){const o=J.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${i}\``)}return[n,r]}function jO(i,e=[]){let t=[];function n(s,o){const a=J.createContext(o),c=t.length;t=[...t,o];const h=m=>{const{scope:g,children:y,..._}=m,S=g?.[i]?.[c]||a,A=J.useMemo(()=>_,Object.values(_));return V.jsx(S.Provider,{value:A,children:y})};h.displayName=s+"Provider";function f(m,g){const y=g?.[i]?.[c]||a,_=J.useContext(y);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${s}\``)}return[h,f]}const r=()=>{const s=t.map(o=>J.createContext(o));return function(a){const c=a?.[i]||s;return J.useMemo(()=>({[`__scope${i}`]:{...a,[i]:c}}),[a,c])}};return r.scopeName=i,[n,YO(r,...e)]}function YO(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=n.reduce((a,{useScope:c,scopeName:h})=>{const m=c(s)[`__scope${h}`];return{...a,...m}},{});return J.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var Cg=globalThis?.document?J.useLayoutEffect:()=>{},KO=s2[" useId ".trim().toString()]||(()=>{}),JO=0;function lA(i){const[e,t]=J.useState(KO());return Cg(()=>{t(n=>n??String(JO++))},[i]),i||(e?`radix-${e}`:"")}var ZO=s2[" useInsertionEffect ".trim().toString()]||Cg;function qO({prop:i,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,s,o]=QO({defaultProp:e,onChange:t}),a=i!==void 0,c=a?i:r;{const f=J.useRef(i!==void 0);J.useEffect(()=>{const m=f.current;m!==a&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,n])}const h=J.useCallback(f=>{if(a){const m=$O(f)?f(i):f;m!==i&&o.current?.(m)}else s(f)},[a,i,s,o]);return[c,h]}function QO({defaultProp:i,onChange:e}){const[t,n]=J.useState(i),r=J.useRef(t),s=J.useRef(e);return ZO(()=>{s.current=e},[e]),J.useEffect(()=>{r.current!==t&&(s.current?.(t),r.current=t)},[t,r]),[t,n,s]}function $O(i){return typeof i=="function"}function Tg(i){const e=J.useRef(i);return J.useEffect(()=>{e.current=i}),J.useMemo(()=>(...t)=>e.current?.(...t),[])}function e3(i,e=globalThis?.document){const t=Tg(i);J.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var t3="DismissableLayer",s1="dismissableLayer.update",n3="dismissableLayer.pointerDownOutside",i3="dismissableLayer.focusOutside",ZC,A2=J.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),w2=J.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=i,h=J.useContext(A2),[f,m]=J.useState(null),g=f?.ownerDocument??globalThis?.document,[,y]=J.useState({}),_=Hh(e,k=>m(k)),S=Array.from(h.layers),[A]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),x=S.indexOf(A),C=f?S.indexOf(f):-1,T=h.layersWithOutsidePointerEventsDisabled.size>0,R=C>=x,L=o3(k=>{const O=k.target,D=[...h.branches].some(N=>N.contains(O));!R||D||(r?.(k),o?.(k),k.defaultPrevented||a?.())},g),B=a3(k=>{const O=k.target;[...h.branches].some(N=>N.contains(O))||(s?.(k),o?.(k),k.defaultPrevented||a?.())},g);return e3(k=>{C===h.layers.size-1&&(n?.(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},g),J.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(ZC=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),qC(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=ZC)}},[f,g,t,h]),J.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),qC())},[f,h]),J.useEffect(()=>{const k=()=>y({});return document.addEventListener(s1,k),()=>document.removeEventListener(s1,k)},[]),V.jsx(Ba.div,{...c,ref:_,style:{pointerEvents:T?R?"auto":"none":void 0,...i.style},onFocusCapture:Wc(i.onFocusCapture,B.onFocusCapture),onBlurCapture:Wc(i.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Wc(i.onPointerDownCapture,L.onPointerDownCapture)})});w2.displayName=t3;var r3="DismissableLayerBranch",s3=J.forwardRef((i,e)=>{const t=J.useContext(A2),n=J.useRef(null),r=Hh(e,n);return J.useEffect(()=>{const s=n.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),V.jsx(Ba.div,{...i,ref:r})});s3.displayName=r3;function o3(i,e=globalThis?.document){const t=Tg(i),n=J.useRef(!1),r=J.useRef(()=>{});return J.useEffect(()=>{const s=a=>{if(a.target&&!n.current){let c=function(){S2(n3,t,h,{discrete:!0})};const h={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function a3(i,e=globalThis?.document){const t=Tg(i),n=J.useRef(!1);return J.useEffect(()=>{const r=s=>{s.target&&!n.current&&S2(i3,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function qC(){const i=new CustomEvent(s1);document.dispatchEvent(i)}function S2(i,e,t,{discrete:n}){const r=t.originalEvent.target,s=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(i,e,{once:!0}),n?GO(r,s):r.dispatchEvent(s)}var cA="focusScope.autoFocusOnMount",uA="focusScope.autoFocusOnUnmount",QC={bubbles:!1,cancelable:!0},l3="FocusScope",M2=J.forwardRef((i,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=i,[a,c]=J.useState(null),h=Tg(r),f=Tg(s),m=J.useRef(null),g=Hh(e,S=>c(S)),y=J.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;J.useEffect(()=>{if(n){let S=function(T){if(y.paused||!a)return;const R=T.target;a.contains(R)?m.current=R:Oc(m.current,{select:!0})},A=function(T){if(y.paused||!a)return;const R=T.relatedTarget;R!==null&&(a.contains(R)||Oc(m.current,{select:!0}))},x=function(T){if(document.activeElement===document.body)for(const L of T)L.removedNodes.length>0&&Oc(a)};document.addEventListener("focusin",S),document.addEventListener("focusout",A);const C=new MutationObserver(x);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",A),C.disconnect()}}},[n,a,y.paused]),J.useEffect(()=>{if(a){eT.add(y);const S=document.activeElement;if(!a.contains(S)){const x=new CustomEvent(cA,QC);a.addEventListener(cA,h),a.dispatchEvent(x),x.defaultPrevented||(c3(p3(C2(a)),{select:!0}),document.activeElement===S&&Oc(a))}return()=>{a.removeEventListener(cA,h),setTimeout(()=>{const x=new CustomEvent(uA,QC);a.addEventListener(uA,f),a.dispatchEvent(x),x.defaultPrevented||Oc(S??document.body,{select:!0}),a.removeEventListener(uA,f),eT.remove(y)},0)}}},[a,h,f,y]);const _=J.useCallback(S=>{if(!t&&!n||y.paused)return;const A=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,x=document.activeElement;if(A&&x){const C=S.currentTarget,[T,R]=u3(C);T&&R?!S.shiftKey&&x===R?(S.preventDefault(),t&&Oc(T,{select:!0})):S.shiftKey&&x===T&&(S.preventDefault(),t&&Oc(R,{select:!0})):x===C&&S.preventDefault()}},[t,n,y.paused]);return V.jsx(Ba.div,{tabIndex:-1,...o,ref:g,onKeyDown:_})});M2.displayName=l3;function c3(i,{select:e=!1}={}){const t=document.activeElement;for(const n of i)if(Oc(n,{select:e}),document.activeElement!==t)return}function u3(i){const e=C2(i),t=$C(e,i),n=$C(e.reverse(),i);return[t,n]}function C2(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function $C(i,e){for(const t of i)if(!h3(t,{upTo:e}))return t}function h3(i,{upTo:e}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(e!==void 0&&i===e)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function f3(i){return i instanceof HTMLInputElement&&"select"in i}function Oc(i,{select:e=!1}={}){if(i&&i.focus){const t=document.activeElement;i.focus({preventScroll:!0}),i!==t&&f3(i)&&e&&i.select()}}var eT=d3();function d3(){let i=[];return{add(e){const t=i[0];e!==t&&t?.pause(),i=tT(i,e),i.unshift(e)},remove(e){i=tT(i,e),i[0]?.resume()}}}function tT(i,e){const t=[...i],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function p3(i){return i.filter(e=>e.tagName!=="A")}var m3="Portal",T2=J.forwardRef((i,e)=>{const{container:t,...n}=i,[r,s]=J.useState(!1);Cg(()=>s(!0),[]);const o=t||r&&globalThis?.document?.body;return o?UO.createPortal(V.jsx(Ba.div,{...n,ref:e}),o):null});T2.displayName=m3;function g3(i,e){return J.useReducer((t,n)=>e[t][n]??t,i)}var gx=i=>{const{present:e,children:t}=i,n=v3(e),r=typeof t=="function"?t({present:n.isPresent}):J.Children.only(t),s=Hh(n.ref,y3(r));return typeof t=="function"||n.isPresent?J.cloneElement(r,{ref:s}):null};gx.displayName="Presence";function v3(i){const[e,t]=J.useState(),n=J.useRef(null),r=J.useRef(i),s=J.useRef("none"),o=i?"mounted":"unmounted",[a,c]=g3(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return J.useEffect(()=>{const h=Ev(n.current);s.current=a==="mounted"?h:"none"},[a]),Cg(()=>{const h=n.current,f=r.current;if(f!==i){const g=s.current,y=Ev(h);i?c("MOUNT"):y==="none"||h?.display==="none"?c("UNMOUNT"):c(f&&g!==y?"ANIMATION_OUT":"UNMOUNT"),r.current=i}},[i,c]),Cg(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,m=y=>{const S=Ev(n.current).includes(CSS.escape(y.animationName));if(y.target===e&&S&&(c("ANIMATION_END"),!r.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},g=y=>{y.target===e&&(s.current=Ev(n.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:J.useCallback(h=>{n.current=h?getComputedStyle(h):null,t(h)},[])}}function Ev(i){return i?.animationName||"none"}function y3(i){let e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var hA=0;function _3(){J.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??nT()),document.body.insertAdjacentElement("beforeend",i[1]??nT()),hA++,()=>{hA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),hA--}},[])}function nT(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var wa=function(){return wa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wa.apply(this,arguments)};function b2(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function x3(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}var Gy="right-scroll-bar-position",Hy="width-before-scroll-bar",E3="with-scroll-bars-hidden",A3="--removed-body-scroll-bar-size";function fA(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function w3(i,e){var t=J.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var S3=typeof window<"u"?J.useLayoutEffect:J.useEffect,iT=new WeakMap;function M3(i,e){var t=w3(null,function(n){return i.forEach(function(r){return fA(r,n)})});return S3(function(){var n=iT.get(t);if(n){var r=new Set(n),s=new Set(i),o=t.current;r.forEach(function(a){s.has(a)||fA(a,null)}),s.forEach(function(a){r.has(a)||fA(a,o)})}iT.set(t,i)},[i]),t}function C3(i){return i}function T3(i,e){e===void 0&&(e=C3);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(s){var o=e(s,n);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(n=!0;t.length;){var o=t;t=[],o.forEach(s)}t={push:function(a){return s(a)},filter:function(){return t}}},assignMedium:function(s){n=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(s),o=t}var c=function(){var f=o;o=[],f.forEach(s)},h=function(){return Promise.resolve().then(c)};h(),t={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),t}}}};return r}function b3(i){i===void 0&&(i={});var e=T3(null);return e.options=wa({async:!0,ssr:!1},i),e}var R2=function(i){var e=i.sideCar,t=b2(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return J.createElement(n,wa({},t))};R2.isSideCarExport=!0;function R3(i,e){return i.useMedium(e),R2}var I2=b3(),dA=function(){},vx=J.forwardRef(function(i,e){var t=J.useRef(null),n=J.useState({onScrollCapture:dA,onWheelCapture:dA,onTouchMoveCapture:dA}),r=n[0],s=n[1],o=i.forwardProps,a=i.children,c=i.className,h=i.removeScrollBar,f=i.enabled,m=i.shards,g=i.sideCar,y=i.noRelative,_=i.noIsolation,S=i.inert,A=i.allowPinchZoom,x=i.as,C=x===void 0?"div":x,T=i.gapMode,R=b2(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=g,B=M3([t,e]),k=wa(wa({},R),r);return J.createElement(J.Fragment,null,f&&J.createElement(L,{sideCar:I2,removeScrollBar:h,shards:m,noRelative:y,noIsolation:_,inert:S,setCallbacks:s,allowPinchZoom:!!A,lockRef:t,gapMode:T}),o?J.cloneElement(J.Children.only(a),wa(wa({},k),{ref:B})):J.createElement(C,wa({},k,{className:c,ref:B}),a))});vx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vx.classNames={fullWidth:Hy,zeroRight:Gy};var I3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function P3(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=I3();return e&&i.setAttribute("nonce",e),i}function L3(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function D3(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var B3=function(){var i=0,e=null;return{add:function(t){i==0&&(e=P3())&&(L3(e,t),D3(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},N3=function(){var i=B3();return function(e,t){J.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},P2=function(){var i=N3(),e=function(t){var n=t.styles,r=t.dynamic;return i(n,r),null};return e},F3={left:0,top:0,right:0,gap:0},pA=function(i){return parseInt(i||"",10)||0},O3=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],r=e[i==="padding"?"paddingRight":"marginRight"];return[pA(t),pA(n),pA(r)]},k3=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return F3;var e=O3(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},U3=P2(),Jd="data-scroll-locked",z3=function(i,e,t,n){var r=i.left,s=i.top,o=i.right,a=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(E3,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Jd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gy,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Hy,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Gy," .").concat(Gy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Hy," .").concat(Hy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Jd,`] {
    `).concat(A3,": ").concat(a,`px;
  }
`)},rT=function(){var i=parseInt(document.body.getAttribute(Jd)||"0",10);return isFinite(i)?i:0},G3=function(){J.useEffect(function(){return document.body.setAttribute(Jd,(rT()+1).toString()),function(){var i=rT()-1;i<=0?document.body.removeAttribute(Jd):document.body.setAttribute(Jd,i.toString())}},[])},H3=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,r=n===void 0?"margin":n;G3();var s=J.useMemo(function(){return k3(r)},[r]);return J.createElement(U3,{styles:z3(s,!e,r,t?"":"!important")})},o1=!1;if(typeof window<"u")try{var Av=Object.defineProperty({},"passive",{get:function(){return o1=!0,!0}});window.addEventListener("test",Av,Av),window.removeEventListener("test",Av,Av)}catch{o1=!1}var nd=o1?{passive:!1}:!1,V3=function(i){return i.tagName==="TEXTAREA"},L2=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!V3(i)&&t[e]==="visible")},W3=function(i){return L2(i,"overflowY")},X3=function(i){return L2(i,"overflowX")},sT=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=D2(i,n);if(r){var s=B2(i,n),o=s[1],a=s[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},j3=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},Y3=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},D2=function(i,e){return i==="v"?W3(e):X3(e)},B2=function(i,e){return i==="v"?j3(e):Y3(e)},K3=function(i,e){return i==="h"&&e==="rtl"?-1:1},J3=function(i,e,t,n,r){var s=K3(i,window.getComputedStyle(e).direction),o=s*n,a=t.target,c=e.contains(a),h=!1,f=o>0,m=0,g=0;do{if(!a)break;var y=B2(i,a),_=y[0],S=y[1],A=y[2],x=S-A-s*_;(_||x)&&D2(i,a)&&(m+=x,g+=_);var C=a.parentNode;a=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(f&&Math.abs(m)<1||!f&&Math.abs(g)<1)&&(h=!0),h},wv=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},oT=function(i){return[i.deltaX,i.deltaY]},aT=function(i){return i&&"current"in i?i.current:i},Z3=function(i,e){return i[0]===e[0]&&i[1]===e[1]},q3=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},Q3=0,id=[];function $3(i){var e=J.useRef([]),t=J.useRef([0,0]),n=J.useRef(),r=J.useState(Q3++)[0],s=J.useState(P2)[0],o=J.useRef(i);J.useEffect(function(){o.current=i},[i]),J.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(r));var S=x3([i.lockRef.current],(i.shards||[]).map(aT),!0).filter(Boolean);return S.forEach(function(A){return A.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),S.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(r))})}}},[i.inert,i.lockRef.current,i.shards]);var a=J.useCallback(function(S,A){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!o.current.allowPinchZoom;var x=wv(S),C=t.current,T="deltaX"in S?S.deltaX:C[0]-x[0],R="deltaY"in S?S.deltaY:C[1]-x[1],L,B=S.target,k=Math.abs(T)>Math.abs(R)?"h":"v";if("touches"in S&&k==="h"&&B.type==="range")return!1;var O=sT(k,B);if(!O)return!0;if(O?L=k:(L=k==="v"?"h":"v",O=sT(k,B)),!O)return!1;if(!n.current&&"changedTouches"in S&&(T||R)&&(n.current=L),!L)return!0;var D=n.current||L;return J3(D,A,S,D==="h"?T:R)},[]),c=J.useCallback(function(S){var A=S;if(!(!id.length||id[id.length-1]!==s)){var x="deltaY"in A?oT(A):wv(A),C=e.current.filter(function(L){return L.name===A.type&&(L.target===A.target||A.target===L.shadowParent)&&Z3(L.delta,x)})[0];if(C&&C.should){A.cancelable&&A.preventDefault();return}if(!C){var T=(o.current.shards||[]).map(aT).filter(Boolean).filter(function(L){return L.contains(A.target)}),R=T.length>0?a(A,T[0]):!o.current.noIsolation;R&&A.cancelable&&A.preventDefault()}}},[]),h=J.useCallback(function(S,A,x,C){var T={name:S,delta:A,target:x,should:C,shadowParent:ek(x)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(R){return R!==T})},1)},[]),f=J.useCallback(function(S){t.current=wv(S),n.current=void 0},[]),m=J.useCallback(function(S){h(S.type,oT(S),S.target,a(S,i.lockRef.current))},[]),g=J.useCallback(function(S){h(S.type,wv(S),S.target,a(S,i.lockRef.current))},[]);J.useEffect(function(){return id.push(s),i.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:g}),document.addEventListener("wheel",c,nd),document.addEventListener("touchmove",c,nd),document.addEventListener("touchstart",f,nd),function(){id=id.filter(function(S){return S!==s}),document.removeEventListener("wheel",c,nd),document.removeEventListener("touchmove",c,nd),document.removeEventListener("touchstart",f,nd)}},[]);var y=i.removeScrollBar,_=i.inert;return J.createElement(J.Fragment,null,_?J.createElement(s,{styles:q3(r)}):null,y?J.createElement(H3,{noRelative:i.noRelative,gapMode:i.gapMode}):null)}function ek(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const tk=R3(I2,$3);var N2=J.forwardRef(function(i,e){return J.createElement(vx,wa({},i,{ref:e,sideCar:tk}))});N2.classNames=vx.classNames;var nk=function(i){if(typeof document>"u")return null;var e=Array.isArray(i)?i[0]:i;return e.ownerDocument.body},rd=new WeakMap,Sv=new WeakMap,Mv={},mA=0,F2=function(i){return i&&(i.host||F2(i.parentNode))},ik=function(i,e){return e.map(function(t){if(i.contains(t))return t;var n=F2(t);return n&&i.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",i,". Doing nothing"),null)}).filter(function(t){return!!t})},rk=function(i,e,t,n){var r=ik(e,Array.isArray(i)?i:[i]);Mv[t]||(Mv[t]=new WeakMap);var s=Mv[t],o=[],a=new Set,c=new Set(r),h=function(m){!m||a.has(m)||(a.add(m),h(m.parentNode))};r.forEach(h);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(g){if(a.has(g))f(g);else try{var y=g.getAttribute(n),_=y!==null&&y!=="false",S=(rd.get(g)||0)+1,A=(s.get(g)||0)+1;rd.set(g,S),s.set(g,A),o.push(g),S===1&&_&&Sv.set(g,!0),A===1&&g.setAttribute(t,"true"),_||g.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",g,x)}})};return f(e),a.clear(),mA++,function(){o.forEach(function(m){var g=rd.get(m)-1,y=s.get(m)-1;rd.set(m,g),s.set(m,y),g||(Sv.has(m)||m.removeAttribute(n),Sv.delete(m)),y||m.removeAttribute(t)}),mA--,mA||(rd=new WeakMap,rd=new WeakMap,Sv=new WeakMap,Mv={})}},sk=function(i,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),r=nk(i);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),rk(n,r,t,"aria-hidden")):function(){return null}},yx="Dialog",[O2]=jO(yx),[ok,ra]=O2(yx),k2=i=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:s,modal:o=!0}=i,a=J.useRef(null),c=J.useRef(null),[h,f]=qO({prop:n,defaultProp:r??!1,onChange:s,caller:yx});return V.jsx(ok,{scope:e,triggerRef:a,contentRef:c,contentId:lA(),titleId:lA(),descriptionId:lA(),open:h,onOpenChange:f,onOpenToggle:J.useCallback(()=>f(m=>!m),[f]),modal:o,children:t})};k2.displayName=yx;var U2="DialogTrigger",z2=J.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=ra(U2,t),s=Hh(e,r.triggerRef);return V.jsx(Ba.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":mS(r.open),...n,ref:s,onClick:Wc(i.onClick,r.onOpenToggle)})});z2.displayName=U2;var dS="DialogPortal",[ak,G2]=O2(dS,{forceMount:void 0}),H2=i=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=i,s=ra(dS,e);return V.jsx(ak,{scope:e,forceMount:t,children:J.Children.map(n,o=>V.jsx(gx,{present:t||s.open,children:V.jsx(T2,{asChild:!0,container:r,children:o})}))})};H2.displayName=dS;var Qy="DialogOverlay",V2=J.forwardRef((i,e)=>{const t=G2(Qy,i.__scopeDialog),{forceMount:n=t.forceMount,...r}=i,s=ra(Qy,i.__scopeDialog);return s.modal?V.jsx(gx,{present:n||s.open,children:V.jsx(ck,{...r,ref:e})}):null});V2.displayName=Qy;var lk=hS("DialogOverlay.RemoveScroll"),ck=J.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=ra(Qy,t);return V.jsx(N2,{as:lk,allowPinchZoom:!0,shards:[r.contentRef],children:V.jsx(Ba.div,{"data-state":mS(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Th="DialogContent",W2=J.forwardRef((i,e)=>{const t=G2(Th,i.__scopeDialog),{forceMount:n=t.forceMount,...r}=i,s=ra(Th,i.__scopeDialog);return V.jsx(gx,{present:n||s.open,children:s.modal?V.jsx(uk,{...r,ref:e}):V.jsx(hk,{...r,ref:e})})});W2.displayName=Th;var uk=J.forwardRef((i,e)=>{const t=ra(Th,i.__scopeDialog),n=J.useRef(null),r=Hh(e,t.contentRef,n);return J.useEffect(()=>{const s=n.current;if(s)return sk(s)},[]),V.jsx(X2,{...i,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Wc(i.onCloseAutoFocus,s=>{s.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Wc(i.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:Wc(i.onFocusOutside,s=>s.preventDefault())})}),hk=J.forwardRef((i,e)=>{const t=ra(Th,i.__scopeDialog),n=J.useRef(!1),r=J.useRef(!1);return V.jsx(X2,{...i,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{i.onCloseAutoFocus?.(s),s.defaultPrevented||(n.current||t.triggerRef.current?.focus(),s.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:s=>{i.onInteractOutside?.(s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;t.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),X2=J.forwardRef((i,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,...o}=i,a=ra(Th,t),c=J.useRef(null),h=Hh(e,c);return _3(),V.jsxs(V.Fragment,{children:[V.jsx(M2,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:V.jsx(w2,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":mS(a.open),...o,ref:h,onDismiss:()=>a.onOpenChange(!1)})}),V.jsxs(V.Fragment,{children:[V.jsx(dk,{titleId:a.titleId}),V.jsx(mk,{contentRef:c,descriptionId:a.descriptionId})]})]})}),pS="DialogTitle",j2=J.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=ra(pS,t);return V.jsx(Ba.h2,{id:r.titleId,...n,ref:e})});j2.displayName=pS;var Y2="DialogDescription",fk=J.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=ra(Y2,t);return V.jsx(Ba.p,{id:r.descriptionId,...n,ref:e})});fk.displayName=Y2;var K2="DialogClose",J2=J.forwardRef((i,e)=>{const{__scopeDialog:t,...n}=i,r=ra(K2,t);return V.jsx(Ba.button,{type:"button",...n,ref:e,onClick:Wc(i.onClick,()=>r.onOpenChange(!1))})});J2.displayName=K2;function mS(i){return i?"open":"closed"}var Z2="DialogTitleWarning",[jq,q2]=XO(Z2,{contentName:Th,titleName:pS,docsSlug:"dialog"}),dk=({titleId:i})=>{const e=q2(Z2),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return J.useEffect(()=>{i&&(document.getElementById(i)||console.error(t))},[t,i]),null},pk="DialogDescriptionWarning",mk=({contentRef:i,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${q2(pk).contentName}}.`;return J.useEffect(()=>{const r=i.current?.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,i,e]),null},gk=k2,vk=z2,yk=H2,_k=V2,xk=W2,Ek=j2,Ak=J2;function wk({...i}){return V.jsx(gk,{"data-slot":"dialog",...i})}function Sk({...i}){return V.jsx(vk,{"data-slot":"dialog-trigger",...i})}function Mk({...i}){return V.jsx(yk,{"data-slot":"dialog-portal",...i})}function Ck({className:i,...e}){return V.jsx(_k,{"data-slot":"dialog-overlay",className:Rp("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",i),...e})}function Tk({className:i,children:e,...t}){return V.jsxs(Mk,{"data-slot":"dialog-portal",children:[V.jsx(Ck,{}),V.jsxs(xk,{"data-slot":"dialog-content",className:Rp("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",i),...t,children:[e,V.jsxs(Ak,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[V.jsx(AF,{}),V.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function bk({className:i,...e}){return V.jsx("div",{"data-slot":"dialog-header",className:Rp("flex flex-col gap-2 text-center sm:text-left",i),...e})}function Rk({className:i,...e}){return V.jsx(Ek,{"data-slot":"dialog-title",className:Rp("text-lg leading-none font-semibold",i),...e})}const Ik="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function Pk(i){const[e,t]=J.useState(!1),n=()=>{t(!0)},{src:r,alt:s,style:o,className:a,...c}=i;return e?V.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${a??""}`,style:o,children:V.jsx("div",{className:"flex items-center justify-center w-full h-full",children:V.jsx("img",{src:Ik,alt:"Error loading image",...c,"data-original-url":r})})}):V.jsx("img",{src:r,alt:s,className:a,style:o,...c,onError:n})}class bh{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t=this._n,n,r,s,o=0;if(t>0){for(o=e[--t];t>0&&(n=o,r=e[--t],o=n+r,s=r-(o-n),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,n=o+r,r==n-o&&(o=n))}return o}}function*Lk(i){for(const e of i)yield*e}function Q2(i){return Array.from(Lk(i))}function Vd(i,e,t){i=+i,e=+e,t=(r=arguments.length)<2?(e=i,i=0,1):r<3?1:+t;for(var n=-1,r=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(r);++n<r;)s[n]=i+n*t;return s}var Dk={value:()=>{}};function $2(){for(var i=0,e=arguments.length,t={},n;i<e;++i){if(!(n=arguments[i]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new Vy(t)}function Vy(i){this._=i}function Bk(i,e){return i.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}Vy.prototype=$2.prototype={constructor:Vy,on:function(i,e){var t=this._,n=Bk(i+"",t),r,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((r=(i=n[s]).type)&&(r=Nk(t[r],i.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(i=n[s]).type)t[r]=lT(t[r],i.name,e);else if(e==null)for(r in t)t[r]=lT(t[r],i.name,null);return this},copy:function(){var i={},e=this._;for(var t in e)i[t]=e[t].slice();return new Vy(i)},call:function(i,e){if((r=arguments.length-2)>0)for(var t=new Array(r),n=0,r,s;n<r;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(s=this._[i],n=0,r=s.length;n<r;++n)s[n].value.apply(e,t)},apply:function(i,e,t){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var n=this._[i],r=0,s=n.length;r<s;++r)n[r].value.apply(e,t)}};function Nk(i,e){for(var t=0,n=i.length,r;t<n;++t)if((r=i[t]).name===e)return r.value}function lT(i,e,t){for(var n=0,r=i.length;n<r;++n)if(i[n].name===e){i[n]=Dk,i=i.slice(0,n).concat(i.slice(n+1));break}return t!=null&&i.push({name:e,value:t}),i}var a1="http://www.w3.org/1999/xhtml";const cT={svg:"http://www.w3.org/2000/svg",xhtml:a1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _x(i){var e=i+="",t=e.indexOf(":");return t>=0&&(e=i.slice(0,t))!=="xmlns"&&(i=i.slice(t+1)),cT.hasOwnProperty(e)?{space:cT[e],local:i}:i}function Fk(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===a1&&e.documentElement.namespaceURI===a1?e.createElement(i):e.createElementNS(t,i)}}function Ok(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function eP(i){var e=_x(i);return(e.local?Ok:Fk)(e)}function kk(){}function gS(i){return i==null?kk:function(){return this.querySelector(i)}}function Uk(i){typeof i!="function"&&(i=gS(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=n[r]=new Array(o),c,h,f=0;f<o;++f)(c=s[f])&&(h=i.call(c,c.__data__,f,s))&&("__data__"in c&&(h.__data__=c.__data__),a[f]=h);return new Vs(n,this._parents)}function zk(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function Gk(){return[]}function tP(i){return i==null?Gk:function(){return this.querySelectorAll(i)}}function Hk(i){return function(){return zk(i.apply(this,arguments))}}function Vk(i){typeof i=="function"?i=Hk(i):i=tP(i);for(var e=this._groups,t=e.length,n=[],r=[],s=0;s<t;++s)for(var o=e[s],a=o.length,c,h=0;h<a;++h)(c=o[h])&&(n.push(i.call(c,c.__data__,h,o)),r.push(c));return new Vs(n,r)}function nP(i){return function(){return this.matches(i)}}function iP(i){return function(e){return e.matches(i)}}var Wk=Array.prototype.find;function Xk(i){return function(){return Wk.call(this.children,i)}}function jk(){return this.firstElementChild}function Yk(i){return this.select(i==null?jk:Xk(typeof i=="function"?i:iP(i)))}var Kk=Array.prototype.filter;function Jk(){return Array.from(this.children)}function Zk(i){return function(){return Kk.call(this.children,i)}}function qk(i){return this.selectAll(i==null?Jk:Zk(typeof i=="function"?i:iP(i)))}function Qk(i){typeof i!="function"&&(i=nP(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=n[r]=[],c,h=0;h<o;++h)(c=s[h])&&i.call(c,c.__data__,h,s)&&a.push(c);return new Vs(n,this._parents)}function rP(i){return new Array(i.length)}function $k(){return new Vs(this._enter||this._groups.map(rP),this._parents)}function $y(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}$y.prototype={constructor:$y,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function eU(i){return function(){return i}}function tU(i,e,t,n,r,s){for(var o=0,a,c=e.length,h=s.length;o<h;++o)(a=e[o])?(a.__data__=s[o],n[o]=a):t[o]=new $y(i,s[o]);for(;o<c;++o)(a=e[o])&&(r[o]=a)}function nU(i,e,t,n,r,s,o){var a,c,h=new Map,f=e.length,m=s.length,g=new Array(f),y;for(a=0;a<f;++a)(c=e[a])&&(g[a]=y=o.call(c,c.__data__,a,e)+"",h.has(y)?r[a]=c:h.set(y,c));for(a=0;a<m;++a)y=o.call(i,s[a],a,s)+"",(c=h.get(y))?(n[a]=c,c.__data__=s[a],h.delete(y)):t[a]=new $y(i,s[a]);for(a=0;a<f;++a)(c=e[a])&&h.get(g[a])===c&&(r[a]=c)}function iU(i){return i.__data__}function rU(i,e){if(!arguments.length)return Array.from(this,iU);var t=e?nU:tU,n=this._parents,r=this._groups;typeof i!="function"&&(i=eU(i));for(var s=r.length,o=new Array(s),a=new Array(s),c=new Array(s),h=0;h<s;++h){var f=n[h],m=r[h],g=m.length,y=sU(i.call(f,f&&f.__data__,h,n)),_=y.length,S=a[h]=new Array(_),A=o[h]=new Array(_),x=c[h]=new Array(g);t(f,m,S,A,x,y,e);for(var C=0,T=0,R,L;C<_;++C)if(R=S[C]){for(C>=T&&(T=C+1);!(L=A[T])&&++T<_;);R._next=L||null}}return o=new Vs(o,n),o._enter=a,o._exit=c,o}function sU(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function oU(){return new Vs(this._exit||this._groups.map(rP),this._parents)}function aU(i,e,t){var n=this.enter(),r=this,s=this.exit();return typeof i=="function"?(n=i(n),n&&(n=n.selection())):n=n.append(i+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),n&&r?n.merge(r).order():r}function lU(i){for(var e=i.selection?i.selection():i,t=this._groups,n=e._groups,r=t.length,s=n.length,o=Math.min(r,s),a=new Array(r),c=0;c<o;++c)for(var h=t[c],f=n[c],m=h.length,g=a[c]=new Array(m),y,_=0;_<m;++_)(y=h[_]||f[_])&&(g[_]=y);for(;c<r;++c)a[c]=t[c];return new Vs(a,this._parents)}function cU(){for(var i=this._groups,e=-1,t=i.length;++e<t;)for(var n=i[e],r=n.length-1,s=n[r],o;--r>=0;)(o=n[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function uU(i){i||(i=hU);function e(m,g){return m&&g?i(m.__data__,g.__data__):!m-!g}for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s){for(var o=t[s],a=o.length,c=r[s]=new Array(a),h,f=0;f<a;++f)(h=o[f])&&(c[f]=h);c.sort(e)}return new Vs(r,this._parents).order()}function hU(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function fU(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function dU(){return Array.from(this)}function pU(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],r=0,s=n.length;r<s;++r){var o=n[r];if(o)return o}return null}function mU(){let i=0;for(const e of this)++i;return i}function gU(){return!this.node()}function vU(i){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length,a;s<o;++s)(a=r[s])&&i.call(a,a.__data__,s,r);return this}function yU(i){return function(){this.removeAttribute(i)}}function _U(i){return function(){this.removeAttributeNS(i.space,i.local)}}function xU(i,e){return function(){this.setAttribute(i,e)}}function EU(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function AU(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(i):this.setAttribute(i,t)}}function wU(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,t)}}function SU(i,e){var t=_x(i);if(arguments.length<2){var n=this.node();return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}return this.each((e==null?t.local?_U:yU:typeof e=="function"?t.local?wU:AU:t.local?EU:xU)(t,e))}function sP(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function MU(i){return function(){this.style.removeProperty(i)}}function CU(i,e,t){return function(){this.style.setProperty(i,e,t)}}function TU(i,e,t){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(i):this.style.setProperty(i,n,t)}}function bU(i,e,t){return arguments.length>1?this.each((e==null?MU:typeof e=="function"?TU:CU)(i,e,t??"")):op(this.node(),i)}function op(i,e){return i.style.getPropertyValue(e)||sP(i).getComputedStyle(i,null).getPropertyValue(e)}function RU(i){return function(){delete this[i]}}function IU(i,e){return function(){this[i]=e}}function PU(i,e){return function(){var t=e.apply(this,arguments);t==null?delete this[i]:this[i]=t}}function LU(i,e){return arguments.length>1?this.each((e==null?RU:typeof e=="function"?PU:IU)(i,e)):this.node()[i]}function oP(i){return i.trim().split(/^|\s+/)}function vS(i){return i.classList||new aP(i)}function aP(i){this._node=i,this._names=oP(i.getAttribute("class")||"")}aP.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function lP(i,e){for(var t=vS(i),n=-1,r=e.length;++n<r;)t.add(e[n])}function cP(i,e){for(var t=vS(i),n=-1,r=e.length;++n<r;)t.remove(e[n])}function DU(i){return function(){lP(this,i)}}function BU(i){return function(){cP(this,i)}}function NU(i,e){return function(){(e.apply(this,arguments)?lP:cP)(this,i)}}function FU(i,e){var t=oP(i+"");if(arguments.length<2){for(var n=vS(this.node()),r=-1,s=t.length;++r<s;)if(!n.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?NU:e?DU:BU)(t,e))}function OU(){this.textContent=""}function kU(i){return function(){this.textContent=i}}function UU(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function zU(i){return arguments.length?this.each(i==null?OU:(typeof i=="function"?UU:kU)(i)):this.node().textContent}function GU(){this.innerHTML=""}function HU(i){return function(){this.innerHTML=i}}function VU(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function WU(i){return arguments.length?this.each(i==null?GU:(typeof i=="function"?VU:HU)(i)):this.node().innerHTML}function XU(){this.nextSibling&&this.parentNode.appendChild(this)}function jU(){return this.each(XU)}function YU(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function KU(){return this.each(YU)}function JU(i){var e=typeof i=="function"?i:eP(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ZU(){return null}function qU(i,e){var t=typeof i=="function"?i:eP(i),n=e==null?ZU:typeof e=="function"?e:gS(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})}function QU(){var i=this.parentNode;i&&i.removeChild(this)}function $U(){return this.each(QU)}function ez(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function tz(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function nz(i){return this.select(i?tz:ez)}function iz(i){return arguments.length?this.property("__data__",i):this.node().__data__}function rz(i){return function(e){i.call(this,e,this.__data__)}}function sz(i){return i.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function oz(i){return function(){var e=this.__on;if(e){for(var t=0,n=-1,r=e.length,s;t<r;++t)s=e[t],(!i.type||s.type===i.type)&&s.name===i.name?this.removeEventListener(s.type,s.listener,s.options):e[++n]=s;++n?e.length=n:delete this.__on}}}function az(i,e,t){return function(){var n=this.__on,r,s=rz(e);if(n){for(var o=0,a=n.length;o<a;++o)if((r=n[o]).type===i.type&&r.name===i.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(i.type,s,t),r={type:i.type,name:i.name,value:e,listener:s,options:t},n?n.push(r):this.__on=[r]}}function lz(i,e,t){var n=sz(i+""),r,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,h=a.length,f;c<h;++c)for(r=0,f=a[c];r<s;++r)if((o=n[r]).type===f.type&&o.name===f.name)return f.value}return}for(a=e?az:oz,r=0;r<s;++r)this.each(a(n[r],e,t));return this}function uP(i,e,t){var n=sP(i),r=n.CustomEvent;typeof r=="function"?r=new r(e,t):(r=n.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),i.dispatchEvent(r)}function cz(i,e){return function(){return uP(this,i,e)}}function uz(i,e){return function(){return uP(this,i,e.apply(this,arguments))}}function hz(i,e){return this.each((typeof e=="function"?uz:cz)(i,e))}function*fz(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var n=i[e],r=0,s=n.length,o;r<s;++r)(o=n[r])&&(yield o)}var hP=[null];function Vs(i,e){this._groups=i,this._parents=e}function t0(){return new Vs([[document.documentElement]],hP)}function dz(){return this}Vs.prototype=t0.prototype={constructor:Vs,select:Uk,selectAll:Vk,selectChild:Yk,selectChildren:qk,filter:Qk,data:rU,enter:$k,exit:oU,join:aU,merge:lU,selection:dz,order:cU,sort:uU,call:fU,nodes:dU,node:pU,size:mU,empty:gU,each:vU,attr:SU,style:bU,property:LU,classed:FU,text:zU,html:WU,raise:jU,lower:KU,append:JU,insert:qU,remove:$U,clone:nz,datum:iz,on:lz,dispatch:hz,[Symbol.iterator]:fz};function uT(i){return typeof i=="string"?new Vs([[document.querySelector(i)]],[document.documentElement]):new Vs([[i]],hP)}function yS(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function fP(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function n0(){}var bg=.7,e_=1/bg,Zd="\\s*([+-]?\\d+)\\s*",Rg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pz=/^#([0-9a-f]{3,8})$/,mz=new RegExp(`^rgb\\(${Zd},${Zd},${Zd}\\)$`),gz=new RegExp(`^rgb\\(${Ra},${Ra},${Ra}\\)$`),vz=new RegExp(`^rgba\\(${Zd},${Zd},${Zd},${Rg}\\)$`),yz=new RegExp(`^rgba\\(${Ra},${Ra},${Ra},${Rg}\\)$`),_z=new RegExp(`^hsl\\(${Rg},${Ra},${Ra}\\)$`),xz=new RegExp(`^hsla\\(${Rg},${Ra},${Ra},${Rg}\\)$`),hT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yS(n0,Ig,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:fT,formatHex:fT,formatHex8:Ez,formatHsl:Az,formatRgb:dT,toString:dT});function fT(){return this.rgb().formatHex()}function Ez(){return this.rgb().formatHex8()}function Az(){return dP(this).formatHsl()}function dT(){return this.rgb().formatRgb()}function Ig(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=pz.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?pT(e):t===3?new _s(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Cv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Cv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mz.exec(i))?new _s(e[1],e[2],e[3],1):(e=gz.exec(i))?new _s(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vz.exec(i))?Cv(e[1],e[2],e[3],e[4]):(e=yz.exec(i))?Cv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=_z.exec(i))?vT(e[1],e[2]/100,e[3]/100,1):(e=xz.exec(i))?vT(e[1],e[2]/100,e[3]/100,e[4]):hT.hasOwnProperty(i)?pT(hT[i]):i==="transparent"?new _s(NaN,NaN,NaN,0):null}function pT(i){return new _s(i>>16&255,i>>8&255,i&255,1)}function Cv(i,e,t,n){return n<=0&&(i=e=t=NaN),new _s(i,e,t,n)}function wz(i){return i instanceof n0||(i=Ig(i)),i?(i=i.rgb(),new _s(i.r,i.g,i.b,i.opacity)):new _s}function l1(i,e,t,n){return arguments.length===1?wz(i):new _s(i,e,t,n??1)}function _s(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}yS(_s,l1,fP(n0,{brighter(i){return i=i==null?e_:Math.pow(e_,i),new _s(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?bg:Math.pow(bg,i),new _s(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new _s(xh(this.r),xh(this.g),xh(this.b),t_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mT,formatHex:mT,formatHex8:Sz,formatRgb:gT,toString:gT}));function mT(){return`#${uh(this.r)}${uh(this.g)}${uh(this.b)}`}function Sz(){return`#${uh(this.r)}${uh(this.g)}${uh(this.b)}${uh((isNaN(this.opacity)?1:this.opacity)*255)}`}function gT(){const i=t_(this.opacity);return`${i===1?"rgb(":"rgba("}${xh(this.r)}, ${xh(this.g)}, ${xh(this.b)}${i===1?")":`, ${i})`}`}function t_(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function xh(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function uh(i){return i=xh(i),(i<16?"0":"")+i.toString(16)}function vT(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new $o(i,e,t,n)}function dP(i){if(i instanceof $o)return new $o(i.h,i.s,i.l,i.opacity);if(i instanceof n0||(i=Ig(i)),!i)return new $o;if(i instanceof $o)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,r=Math.min(e,t,n),s=Math.max(e,t,n),o=NaN,a=s-r,c=(s+r)/2;return a?(e===s?o=(t-n)/a+(t<n)*6:t===s?o=(n-e)/a+2:o=(e-t)/a+4,a/=c<.5?s+r:2-s-r,o*=60):a=c>0&&c<1?0:o,new $o(o,a,c,i.opacity)}function Mz(i,e,t,n){return arguments.length===1?dP(i):new $o(i,e,t,n??1)}function $o(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}yS($o,Mz,fP(n0,{brighter(i){return i=i==null?e_:Math.pow(e_,i),new $o(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?bg:Math.pow(bg,i),new $o(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,r=2*t-n;return new _s(gA(i>=240?i-240:i+120,r,n),gA(i,r,n),gA(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new $o(yT(this.h),Tv(this.s),Tv(this.l),t_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=t_(this.opacity);return`${i===1?"hsl(":"hsla("}${yT(this.h)}, ${Tv(this.s)*100}%, ${Tv(this.l)*100}%${i===1?")":`, ${i})`}`}}));function yT(i){return i=(i||0)%360,i<0?i+360:i}function Tv(i){return Math.max(0,Math.min(1,i||0))}function gA(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const pP=i=>()=>i;function Cz(i,e){return function(t){return i+t*e}}function Tz(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function bz(i){return(i=+i)==1?mP:function(e,t){return t-e?Tz(e,t,i):pP(isNaN(e)?t:e)}}function mP(i,e){var t=e-i;return t?Cz(i,t):pP(isNaN(i)?e:i)}const _T=(function i(e){var t=bz(e);function n(r,s){var o=t((r=l1(r)).r,(s=l1(s)).r),a=t(r.g,s.g),c=t(r.b,s.b),h=mP(r.opacity,s.opacity);return function(f){return r.r=o(f),r.g=a(f),r.b=c(f),r.opacity=h(f),r+""}}return n.gamma=i,n})(1);function zc(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}var c1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vA=new RegExp(c1.source,"g");function Rz(i){return function(){return i}}function Iz(i){return function(e){return i(e)+""}}function Pz(i,e){var t=c1.lastIndex=vA.lastIndex=0,n,r,s,o=-1,a=[],c=[];for(i=i+"",e=e+"";(n=c1.exec(i))&&(r=vA.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:zc(n,r)})),t=vA.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?Iz(c[0].x):Rz(e):(e=c.length,function(h){for(var f=0,m;f<e;++f)a[(m=c[f]).i]=m.x(h);return a.join("")})}var xT=180/Math.PI,u1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gP(i,e,t,n,r,s){var o,a,c;return(o=Math.sqrt(i*i+e*e))&&(i/=o,e/=o),(c=i*t+e*n)&&(t-=i*c,n-=e*c),(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a,c/=a),i*n<e*t&&(i=-i,e=-e,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,i)*xT,skewX:Math.atan(c)*xT,scaleX:o,scaleY:a}}var bv;function Lz(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?u1:gP(e.a,e.b,e.c,e.d,e.e,e.f)}function Dz(i){return i==null||(bv||(bv=document.createElementNS("http://www.w3.org/2000/svg","g")),bv.setAttribute("transform",i),!(i=bv.transform.baseVal.consolidate()))?u1:(i=i.matrix,gP(i.a,i.b,i.c,i.d,i.e,i.f))}function vP(i,e,t,n){function r(h){return h.length?h.pop()+" ":""}function s(h,f,m,g,y,_){if(h!==m||f!==g){var S=y.push("translate(",null,e,null,t);_.push({i:S-4,x:zc(h,m)},{i:S-2,x:zc(f,g)})}else(m||g)&&y.push("translate("+m+e+g+t)}function o(h,f,m,g){h!==f?(h-f>180?f+=360:f-h>180&&(h+=360),g.push({i:m.push(r(m)+"rotate(",null,n)-2,x:zc(h,f)})):f&&m.push(r(m)+"rotate("+f+n)}function a(h,f,m,g){h!==f?g.push({i:m.push(r(m)+"skewX(",null,n)-2,x:zc(h,f)}):f&&m.push(r(m)+"skewX("+f+n)}function c(h,f,m,g,y,_){if(h!==m||f!==g){var S=y.push(r(y)+"scale(",null,",",null,")");_.push({i:S-4,x:zc(h,m)},{i:S-2,x:zc(f,g)})}else(m!==1||g!==1)&&y.push(r(y)+"scale("+m+","+g+")")}return function(h,f){var m=[],g=[];return h=i(h),f=i(f),s(h.translateX,h.translateY,f.translateX,f.translateY,m,g),o(h.rotate,f.rotate,m,g),a(h.skewX,f.skewX,m,g),c(h.scaleX,h.scaleY,f.scaleX,f.scaleY,m,g),h=f=null,function(y){for(var _=-1,S=g.length,A;++_<S;)m[(A=g[_]).i]=A.x(y);return m.join("")}}}var Bz=vP(Lz,"px, ","px)","deg)"),Nz=vP(Dz,", ",")",")"),ap=0,eg=0,Bm=0,yP=1e3,n_,tg,i_=0,Rh=0,xx=0,Pg=typeof performance=="object"&&performance.now?performance:Date,_P=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function _S(){return Rh||(_P(Fz),Rh=Pg.now()+xx)}function Fz(){Rh=0}function r_(){this._call=this._time=this._next=null}r_.prototype=xS.prototype={constructor:r_,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?_S():+t)+(e==null?0:+e),!this._next&&tg!==this&&(tg?tg._next=this:n_=this,tg=this),this._call=i,this._time=t,h1()},stop:function(){this._call&&(this._call=null,this._time=1/0,h1())}};function xS(i,e,t){var n=new r_;return n.restart(i,e,t),n}function Oz(){_S(),++ap;for(var i=n_,e;i;)(e=Rh-i._time)>=0&&i._call.call(void 0,e),i=i._next;--ap}function ET(){Rh=(i_=Pg.now())+xx,ap=eg=0;try{Oz()}finally{ap=0,Uz(),Rh=0}}function kz(){var i=Pg.now(),e=i-i_;e>yP&&(xx-=e,i_=i)}function Uz(){for(var i,e=n_,t,n=1/0;e;)e._call?(n>e._time&&(n=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:n_=t);tg=i,h1(n)}function h1(i){if(!ap){eg&&(eg=clearTimeout(eg));var e=i-Rh;e>24?(i<1/0&&(eg=setTimeout(ET,i-Pg.now()-xx)),Bm&&(Bm=clearInterval(Bm))):(Bm||(i_=Pg.now(),Bm=setInterval(kz,yP)),ap=1,_P(ET))}}function AT(i,e,t){var n=new r_;return e=e==null?0:+e,n.restart(r=>{n.stop(),i(r+e)},e,t),n}var zz=$2("start","end","cancel","interrupt"),Gz=[],xP=0,wT=1,f1=2,Wy=3,ST=4,d1=5,Xy=6;function Ex(i,e,t,n,r,s){var o=i.__transition;if(!o)i.__transition={};else if(t in o)return;Hz(i,t,{name:e,index:n,group:r,on:zz,tween:Gz,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:xP})}function ES(i,e){var t=sa(i,e);if(t.state>xP)throw new Error("too late; already scheduled");return t}function Na(i,e){var t=sa(i,e);if(t.state>Wy)throw new Error("too late; already running");return t}function sa(i,e){var t=i.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Hz(i,e,t){var n=i.__transition,r;n[e]=t,t.timer=xS(s,0,t.time);function s(h){t.state=wT,t.timer.restart(o,t.delay,t.time),t.delay<=h&&o(h-t.delay)}function o(h){var f,m,g,y;if(t.state!==wT)return c();for(f in n)if(y=n[f],y.name===t.name){if(y.state===Wy)return AT(o);y.state===ST?(y.state=Xy,y.timer.stop(),y.on.call("interrupt",i,i.__data__,y.index,y.group),delete n[f]):+f<e&&(y.state=Xy,y.timer.stop(),y.on.call("cancel",i,i.__data__,y.index,y.group),delete n[f])}if(AT(function(){t.state===Wy&&(t.state=ST,t.timer.restart(a,t.delay,t.time),a(h))}),t.state=f1,t.on.call("start",i,i.__data__,t.index,t.group),t.state===f1){for(t.state=Wy,r=new Array(g=t.tween.length),f=0,m=-1;f<g;++f)(y=t.tween[f].value.call(i,i.__data__,t.index,t.group))&&(r[++m]=y);r.length=m+1}}function a(h){for(var f=h<t.duration?t.ease.call(null,h/t.duration):(t.timer.restart(c),t.state=d1,1),m=-1,g=r.length;++m<g;)r[m].call(i,f);t.state===d1&&(t.on.call("end",i,i.__data__,t.index,t.group),c())}function c(){t.state=Xy,t.timer.stop(),delete n[e];for(var h in n)return;delete i.__transition}}function Vz(i,e){var t=i.__transition,n,r,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((n=t[o]).name!==e){s=!1;continue}r=n.state>f1&&n.state<d1,n.state=Xy,n.timer.stop(),n.on.call(r?"interrupt":"cancel",i,i.__data__,n.index,n.group),delete t[o]}s&&delete i.__transition}}function Wz(i){return this.each(function(){Vz(this,i)})}function Xz(i,e){var t,n;return function(){var r=Na(this,i),s=r.tween;if(s!==t){n=t=s;for(var o=0,a=n.length;o<a;++o)if(n[o].name===e){n=n.slice(),n.splice(o,1);break}}r.tween=n}}function jz(i,e,t){var n,r;if(typeof t!="function")throw new Error;return function(){var s=Na(this,i),o=s.tween;if(o!==n){r=(n=o).slice();for(var a={name:e,value:t},c=0,h=r.length;c<h;++c)if(r[c].name===e){r[c]=a;break}c===h&&r.push(a)}s.tween=r}}function Yz(i,e){var t=this._id;if(i+="",arguments.length<2){for(var n=sa(this.node(),t).tween,r=0,s=n.length,o;r<s;++r)if((o=n[r]).name===i)return o.value;return null}return this.each((e==null?Xz:jz)(t,i,e))}function AS(i,e,t){var n=i._id;return i.each(function(){var r=Na(this,n);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return sa(r,n).value[e]}}function EP(i,e){var t;return(typeof e=="number"?zc:e instanceof Ig?_T:(t=Ig(e))?(e=t,_T):Pz)(i,e)}function Kz(i){return function(){this.removeAttribute(i)}}function Jz(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Zz(i,e,t){var n,r=t+"",s;return function(){var o=this.getAttribute(i);return o===r?null:o===n?s:s=e(n=o,t)}}function qz(i,e,t){var n,r=t+"",s;return function(){var o=this.getAttributeNS(i.space,i.local);return o===r?null:o===n?s:s=e(n=o,t)}}function Qz(i,e,t){var n,r,s;return function(){var o,a=t(this),c;return a==null?void this.removeAttribute(i):(o=this.getAttribute(i),c=a+"",o===c?null:o===n&&c===r?s:(r=c,s=e(n=o,a)))}}function $z(i,e,t){var n,r,s;return function(){var o,a=t(this),c;return a==null?void this.removeAttributeNS(i.space,i.local):(o=this.getAttributeNS(i.space,i.local),c=a+"",o===c?null:o===n&&c===r?s:(r=c,s=e(n=o,a)))}}function eG(i,e){var t=_x(i),n=t==="transform"?Nz:EP;return this.attrTween(i,typeof e=="function"?(t.local?$z:Qz)(t,n,AS(this,"attr."+i,e)):e==null?(t.local?Jz:Kz)(t):(t.local?qz:Zz)(t,n,e))}function tG(i,e){return function(t){this.setAttribute(i,e.call(this,t))}}function nG(i,e){return function(t){this.setAttributeNS(i.space,i.local,e.call(this,t))}}function iG(i,e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&nG(i,s)),t}return r._value=e,r}function rG(i,e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&tG(i,s)),t}return r._value=e,r}function sG(i,e){var t="attr."+i;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var n=_x(i);return this.tween(t,(n.local?iG:rG)(n,e))}function oG(i,e){return function(){ES(this,i).delay=+e.apply(this,arguments)}}function aG(i,e){return e=+e,function(){ES(this,i).delay=e}}function lG(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?oG:aG)(e,i)):sa(this.node(),e).delay}function cG(i,e){return function(){Na(this,i).duration=+e.apply(this,arguments)}}function uG(i,e){return e=+e,function(){Na(this,i).duration=e}}function hG(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?cG:uG)(e,i)):sa(this.node(),e).duration}function fG(i,e){if(typeof e!="function")throw new Error;return function(){Na(this,i).ease=e}}function dG(i){var e=this._id;return arguments.length?this.each(fG(e,i)):sa(this.node(),e).ease}function pG(i,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Na(this,i).ease=t}}function mG(i){if(typeof i!="function")throw new Error;return this.each(pG(this._id,i))}function gG(i){typeof i!="function"&&(i=nP(i));for(var e=this._groups,t=e.length,n=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,a=n[r]=[],c,h=0;h<o;++h)(c=s[h])&&i.call(c,c.__data__,h,s)&&a.push(c);return new kl(n,this._parents,this._name,this._id)}function vG(i){if(i._id!==this._id)throw new Error;for(var e=this._groups,t=i._groups,n=e.length,r=t.length,s=Math.min(n,r),o=new Array(n),a=0;a<s;++a)for(var c=e[a],h=t[a],f=c.length,m=o[a]=new Array(f),g,y=0;y<f;++y)(g=c[y]||h[y])&&(m[y]=g);for(;a<n;++a)o[a]=e[a];return new kl(o,this._parents,this._name,this._id)}function yG(i){return(i+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function _G(i,e,t){var n,r,s=yG(e)?ES:Na;return function(){var o=s(this,i),a=o.on;a!==n&&(r=(n=a).copy()).on(e,t),o.on=r}}function xG(i,e){var t=this._id;return arguments.length<2?sa(this.node(),t).on.on(i):this.each(_G(t,i,e))}function EG(i){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==i)return;e&&e.removeChild(this)}}function AG(){return this.on("end.remove",EG(this._id))}function wG(i){var e=this._name,t=this._id;typeof i!="function"&&(i=gS(i));for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o)for(var a=n[o],c=a.length,h=s[o]=new Array(c),f,m,g=0;g<c;++g)(f=a[g])&&(m=i.call(f,f.__data__,g,a))&&("__data__"in f&&(m.__data__=f.__data__),h[g]=m,Ex(h[g],e,t,g,h,sa(f,t)));return new kl(s,this._parents,e,t)}function SG(i){var e=this._name,t=this._id;typeof i!="function"&&(i=tP(i));for(var n=this._groups,r=n.length,s=[],o=[],a=0;a<r;++a)for(var c=n[a],h=c.length,f,m=0;m<h;++m)if(f=c[m]){for(var g=i.call(f,f.__data__,m,c),y,_=sa(f,t),S=0,A=g.length;S<A;++S)(y=g[S])&&Ex(y,e,t,S,g,_);s.push(g),o.push(f)}return new kl(s,o,e,t)}var MG=t0.prototype.constructor;function CG(){return new MG(this._groups,this._parents)}function TG(i,e){var t,n,r;return function(){var s=op(this,i),o=(this.style.removeProperty(i),op(this,i));return s===o?null:s===t&&o===n?r:r=e(t=s,n=o)}}function AP(i){return function(){this.style.removeProperty(i)}}function bG(i,e,t){var n,r=t+"",s;return function(){var o=op(this,i);return o===r?null:o===n?s:s=e(n=o,t)}}function RG(i,e,t){var n,r,s;return function(){var o=op(this,i),a=t(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(i),op(this,i))),o===c?null:o===n&&c===r?s:(r=c,s=e(n=o,a))}}function IG(i,e){var t,n,r,s="style."+e,o="end."+s,a;return function(){var c=Na(this,i),h=c.on,f=c.value[s]==null?a||(a=AP(e)):void 0;(h!==t||r!==f)&&(n=(t=h).copy()).on(o,r=f),c.on=n}}function PG(i,e,t){var n=(i+="")=="transform"?Bz:EP;return e==null?this.styleTween(i,TG(i,n)).on("end.style."+i,AP(i)):typeof e=="function"?this.styleTween(i,RG(i,n,AS(this,"style."+i,e))).each(IG(this._id,i)):this.styleTween(i,bG(i,n,e),t).on("end.style."+i,null)}function LG(i,e,t){return function(n){this.style.setProperty(i,e.call(this,n),t)}}function DG(i,e,t){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&LG(i,o,t)),n}return s._value=e,s}function BG(i,e,t){var n="style."+(i+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,DG(i,e,t??""))}function NG(i){return function(){this.textContent=i}}function FG(i){return function(){var e=i(this);this.textContent=e??""}}function OG(i){return this.tween("text",typeof i=="function"?FG(AS(this,"text",i)):NG(i==null?"":i+""))}function kG(i){return function(e){this.textContent=i.call(this,e)}}function UG(i){var e,t;function n(){var r=i.apply(this,arguments);return r!==t&&(e=(t=r)&&kG(r)),e}return n._value=i,n}function zG(i){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;return this.tween(e,UG(i))}function GG(){for(var i=this._name,e=this._id,t=wP(),n=this._groups,r=n.length,s=0;s<r;++s)for(var o=n[s],a=o.length,c,h=0;h<a;++h)if(c=o[h]){var f=sa(c,e);Ex(c,i,t,h,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new kl(n,this._parents,i,t)}function HG(){var i,e,t=this,n=t._id,r=t.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--r===0&&s()}};t.each(function(){var h=Na(this,n),f=h.on;f!==i&&(e=(i=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),h.on=e}),r===0&&s()})}var VG=0;function kl(i,e,t,n){this._groups=i,this._parents=e,this._name=t,this._id=n}function wP(){return++VG}var vl=t0.prototype;kl.prototype={constructor:kl,select:wG,selectAll:SG,selectChild:vl.selectChild,selectChildren:vl.selectChildren,filter:gG,merge:vG,selection:CG,transition:GG,call:vl.call,nodes:vl.nodes,node:vl.node,size:vl.size,empty:vl.empty,each:vl.each,on:xG,attr:eG,attrTween:sG,style:PG,styleTween:BG,text:OG,textTween:zG,remove:AG,tween:Yz,delay:lG,duration:hG,ease:dG,easeVarying:mG,end:HG,[Symbol.iterator]:vl[Symbol.iterator]};function WG(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var XG={time:null,delay:0,duration:250,ease:WG};function jG(i,e){for(var t;!(t=i.__transition)||!(t=t[e]);)if(!(i=i.parentNode))throw new Error(`transition ${e} not found`);return t}function YG(i){var e,t;i instanceof kl?(e=i._id,i=i._name):(e=wP(),(t=XG).time=_S(),i=i==null?null:i+"");for(var n=this._groups,r=n.length,s=0;s<r;++s)for(var o=n[s],a=o.length,c,h=0;h<a;++h)(c=o[h])&&Ex(c,i,e,h,o,t||jG(c,e));return new kl(n,this._parents,i,e)}t0.prototype.interrupt=Wz;t0.prototype.transition=YG;function KG(i){if(!i.ok)throw new Error(i.status+" "+i.statusText);if(!(i.status===204||i.status===205))return i.json()}function JG(i,e){return fetch(i,e).then(KG)}var wn=1e-6,Rn=Math.PI,co=Rn/2,MT=Rn/4,go=Rn*2,yl=180/Rn,Fs=Rn/180,ti=Math.abs,ZG=Math.atan,lp=Math.atan2,di=Math.cos,Rv=Math.ceil,oi=Math.sin,qG=Math.sign||function(i){return i>0?1:i<0?-1:0},qc=Math.sqrt;function QG(i){return i>1?0:i<-1?Rn:Math.acos(i)}function Ih(i){return i>1?co:i<-1?-co:Math.asin(i)}function uo(){}function s_(i,e){i&&TT.hasOwnProperty(i.type)&&TT[i.type](i,e)}var CT={Feature:function(i,e){s_(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)s_(t[n].geometry,e)}},TT={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)i=t[n],e.point(i[0],i[1],i[2])},LineString:function(i,e){p1(i.coordinates,e,0)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)p1(t[n],e,0)},Polygon:function(i,e){bT(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)bT(t[n],e)},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)s_(t[n],e)}};function p1(i,e,t){var n=-1,r=i.length-t,s;for(e.lineStart();++n<r;)s=i[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function bT(i,e){var t=-1,n=i.length;for(e.polygonStart();++t<n;)p1(i[t],e,1);e.polygonEnd()}function Od(i,e){i&&CT.hasOwnProperty(i.type)?CT[i.type](i,e):s_(i,e)}function m1(i){return[lp(i[1],i[0]),Ih(i[2])]}function cp(i){var e=i[0],t=i[1],n=di(t);return[n*di(e),n*oi(e),oi(t)]}function Iv(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function o_(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function yA(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function Pv(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function g1(i){var e=qc(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}function v1(i,e){function t(n,r){return n=i(n,r),e(n[0],n[1])}return i.invert&&e.invert&&(t.invert=function(n,r){return n=e.invert(n,r),n&&i.invert(n[0],n[1])}),t}function y1(i,e){return ti(i)>Rn&&(i-=Math.round(i/go)*go),[i,e]}y1.invert=y1;function $G(i,e,t){return(i%=go)?e||t?v1(IT(i),PT(e,t)):IT(i):e||t?PT(e,t):y1}function RT(i){return function(e,t){return e+=i,ti(e)>Rn&&(e-=Math.round(e/go)*go),[e,t]}}function IT(i){var e=RT(i);return e.invert=RT(-i),e}function PT(i,e){var t=di(i),n=oi(i),r=di(e),s=oi(e);function o(a,c){var h=di(c),f=di(a)*h,m=oi(a)*h,g=oi(c),y=g*t+f*n;return[lp(m*r-y*s,f*t-g*n),Ih(y*r+m*s)]}return o.invert=function(a,c){var h=di(c),f=di(a)*h,m=oi(a)*h,g=oi(c),y=g*r-m*s;return[lp(m*r+g*s,f*t+y*n),Ih(y*t-f*n)]},o}function eH(i,e,t,n,r,s){if(t){var o=di(e),a=oi(e),c=n*t;r==null?(r=e+n*go,s=e-c/2):(r=LT(o,r),s=LT(o,s),(n>0?r<s:r>s)&&(r+=n*go));for(var h,f=r;n>0?f>s:f<s;f-=c)h=m1([o,-a*di(f),-a*oi(f)]),i.point(h[0],h[1])}}function LT(i,e){e=cp(e),e[0]-=i,g1(e);var t=QG(-e[1]);return((-e[2]<0?-t:t)+go-wn)%go}function SP(){var i=[],e;return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){i.push(e=[])},lineEnd:uo,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var t=i;return i=[],e=null,t}}}function jy(i,e){return ti(i[0]-e[0])<wn&&ti(i[1]-e[1])<wn}function Lv(i,e,t,n){this.x=i,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function MP(i,e,t,n,r){var s=[],o=[],a,c;if(i.forEach(function(_){if(!((S=_.length-1)<=0)){var S,A=_[0],x=_[S],C;if(jy(A,x)){if(!A[2]&&!x[2]){for(r.lineStart(),a=0;a<S;++a)r.point((A=_[a])[0],A[1]);r.lineEnd();return}x[0]+=2*wn}s.push(C=new Lv(A,_,null,!0)),o.push(C.o=new Lv(A,null,C,!1)),s.push(C=new Lv(x,_,null,!1)),o.push(C.o=new Lv(x,null,C,!0))}}),!!s.length){for(o.sort(e),DT(s),DT(o),a=0,c=o.length;a<c;++a)o[a].e=t=!t;for(var h=s[0],f,m;;){for(var g=h,y=!0;g.v;)if((g=g.n)===h)return;f=g.z,r.lineStart();do{if(g.v=g.o.v=!0,g.e){if(y)for(a=0,c=f.length;a<c;++a)r.point((m=f[a])[0],m[1]);else n(g.x,g.n.x,1,r);g=g.n}else{if(y)for(f=g.p.z,a=f.length-1;a>=0;--a)r.point((m=f[a])[0],m[1]);else n(g.x,g.p.x,-1,r);g=g.p}g=g.o,f=g.z,y=!y}while(!g.v);r.lineEnd()}}}function DT(i){if(e=i.length){for(var e,t=0,n=i[0],r;++t<e;)n.n=r=i[t],r.p=n,n=r;n.n=r=i[0],r.p=n}}function _A(i){return ti(i[0])<=Rn?i[0]:qG(i[0])*((ti(i[0])+Rn)%go-Rn)}function tH(i,e){var t=_A(e),n=e[1],r=oi(n),s=[oi(t),-di(t),0],o=0,a=0,c=new bh;r===1?n=co+wn:r===-1&&(n=-co-wn);for(var h=0,f=i.length;h<f;++h)if(g=(m=i[h]).length)for(var m,g,y=m[g-1],_=_A(y),S=y[1]/2+MT,A=oi(S),x=di(S),C=0;C<g;++C,_=R,A=B,x=k,y=T){var T=m[C],R=_A(T),L=T[1]/2+MT,B=oi(L),k=di(L),O=R-_,D=O>=0?1:-1,N=D*O,z=N>Rn,ee=A*B;if(c.add(lp(ee*D*oi(N),x*k+ee*di(N))),o+=z?O+D*go:O,z^_>=t^R>=t){var te=o_(cp(y),cp(T));g1(te);var ce=o_(s,te);g1(ce);var K=(z^O>=0?-1:1)*Ih(ce[2]);(n>K||n===K&&(te[0]||te[1]))&&(a+=z^O>=0?1:-1)}}return(o<-wn||o<wn&&c<-1e-12)^a&1}function CP(i,e,t,n){return function(r){var s=e(r),o=SP(),a=e(o),c=!1,h,f,m,g={point:y,lineStart:S,lineEnd:A,polygonStart:function(){g.point=x,g.lineStart=C,g.lineEnd=T,f=[],h=[]},polygonEnd:function(){g.point=y,g.lineStart=S,g.lineEnd=A,f=Q2(f);var R=tH(h,n);f.length?(c||(r.polygonStart(),c=!0),MP(f,iH,R,t,r)):R&&(c||(r.polygonStart(),c=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),f=h=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(R,L){i(R,L)&&r.point(R,L)}function _(R,L){s.point(R,L)}function S(){g.point=_,s.lineStart()}function A(){g.point=y,s.lineEnd()}function x(R,L){m.push([R,L]),a.point(R,L)}function C(){a.lineStart(),m=[]}function T(){x(m[0][0],m[0][1]),a.lineEnd();var R=a.clean(),L=o.result(),B,k=L.length,O,D,N;if(m.pop(),h.push(m),m=null,!!k){if(R&1){if(D=L[0],(O=D.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),B=0;B<O;++B)r.point((N=D[B])[0],N[1]);r.lineEnd()}return}k>1&&R&2&&L.push(L.pop().concat(L.shift())),f.push(L.filter(nH))}}return g}}function nH(i){return i.length>1}function iH(i,e){return((i=i.x)[0]<0?i[1]-co-wn:co-i[1])-((e=e.x)[0]<0?e[1]-co-wn:co-e[1])}const BT=CP(function(){return!0},rH,oH,[-Rn,-co]);function rH(i){var e=NaN,t=NaN,n=NaN,r;return{lineStart:function(){i.lineStart(),r=1},point:function(s,o){var a=s>0?Rn:-Rn,c=ti(s-e);ti(c-Rn)<wn?(i.point(e,t=(t+o)/2>0?co:-co),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(a,t),i.point(s,t),r=0):n!==a&&c>=Rn&&(ti(e-n)<wn&&(e-=n*wn),ti(s-a)<wn&&(s-=a*wn),t=sH(e,t,s,o),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(a,t),r=0),i.point(e=s,t=o),n=a},lineEnd:function(){i.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function sH(i,e,t,n){var r,s,o=oi(i-t);return ti(o)>wn?ZG((oi(e)*(s=di(n))*oi(t)-oi(n)*(r=di(e))*oi(i))/(r*s*o)):(e+n)/2}function oH(i,e,t,n){var r;if(i==null)r=t*co,n.point(-Rn,r),n.point(0,r),n.point(Rn,r),n.point(Rn,0),n.point(Rn,-r),n.point(0,-r),n.point(-Rn,-r),n.point(-Rn,0),n.point(-Rn,r);else if(ti(i[0]-e[0])>wn){var s=i[0]<e[0]?Rn:-Rn;r=t*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function aH(i){var e=di(i),t=2*Fs,n=e>0,r=ti(e)>wn;function s(f,m,g,y){eH(y,i,t,g,f,m)}function o(f,m){return di(f)*di(m)>e}function a(f){var m,g,y,_,S;return{lineStart:function(){_=y=!1,S=1},point:function(A,x){var C=[A,x],T,R=o(A,x),L=n?R?0:h(A,x):R?h(A+(A<0?Rn:-Rn),x):0;if(!m&&(_=y=R)&&f.lineStart(),R!==y&&(T=c(m,C),(!T||jy(m,T)||jy(C,T))&&(C[2]=1)),R!==y)S=0,R?(f.lineStart(),T=c(C,m),f.point(T[0],T[1])):(T=c(m,C),f.point(T[0],T[1],2),f.lineEnd()),m=T;else if(r&&m&&n^R){var B;!(L&g)&&(B=c(C,m,!0))&&(S=0,n?(f.lineStart(),f.point(B[0][0],B[0][1]),f.point(B[1][0],B[1][1]),f.lineEnd()):(f.point(B[1][0],B[1][1]),f.lineEnd(),f.lineStart(),f.point(B[0][0],B[0][1],3)))}R&&(!m||!jy(m,C))&&f.point(C[0],C[1]),m=C,y=R,g=L},lineEnd:function(){y&&f.lineEnd(),m=null},clean:function(){return S|(_&&y)<<1}}}function c(f,m,g){var y=cp(f),_=cp(m),S=[1,0,0],A=o_(y,_),x=Iv(A,A),C=A[0],T=x-C*C;if(!T)return!g&&f;var R=e*x/T,L=-e*C/T,B=o_(S,A),k=Pv(S,R),O=Pv(A,L);yA(k,O);var D=B,N=Iv(k,D),z=Iv(D,D),ee=N*N-z*(Iv(k,k)-1);if(!(ee<0)){var te=qc(ee),ce=Pv(D,(-N-te)/z);if(yA(ce,k),ce=m1(ce),!g)return ce;var K=f[0],oe=m[0],ae=f[1],U=m[1],Z;oe<K&&(Z=K,K=oe,oe=Z);var q=oe-K,W=ti(q-Rn)<wn,se=W||q<wn;if(!W&&U<ae&&(Z=ae,ae=U,U=Z),se?W?ae+U>0^ce[1]<(ti(ce[0]-K)<wn?ae:U):ae<=ce[1]&&ce[1]<=U:q>Rn^(K<=ce[0]&&ce[0]<=oe)){var _e=Pv(D,(-N+te)/z);return yA(_e,k),[ce,m1(_e)]}}}function h(f,m){var g=n?i:Rn-i,y=0;return f<-g?y|=1:f>g&&(y|=2),m<-g?y|=4:m>g&&(y|=8),y}return CP(o,a,s,n?[0,-i]:[-Rn,i-Rn])}function lH(i,e,t,n,r,s){var o=i[0],a=i[1],c=e[0],h=e[1],f=0,m=1,g=c-o,y=h-a,_;if(_=t-o,!(!g&&_>0)){if(_/=g,g<0){if(_<f)return;_<m&&(m=_)}else if(g>0){if(_>m)return;_>f&&(f=_)}if(_=r-o,!(!g&&_<0)){if(_/=g,g<0){if(_>m)return;_>f&&(f=_)}else if(g>0){if(_<f)return;_<m&&(m=_)}if(_=n-a,!(!y&&_>0)){if(_/=y,y<0){if(_<f)return;_<m&&(m=_)}else if(y>0){if(_>m)return;_>f&&(f=_)}if(_=s-a,!(!y&&_<0)){if(_/=y,y<0){if(_>m)return;_>f&&(f=_)}else if(y>0){if(_<f)return;_<m&&(m=_)}return f>0&&(i[0]=o+f*g,i[1]=a+f*y),m<1&&(e[0]=o+m*g,e[1]=a+m*y),!0}}}}}var ng=1e9,Dv=-ng;function cH(i,e,t,n){function r(h,f){return i<=h&&h<=t&&e<=f&&f<=n}function s(h,f,m,g){var y=0,_=0;if(h==null||(y=o(h,m))!==(_=o(f,m))||c(h,f)<0^m>0)do g.point(y===0||y===3?i:t,y>1?n:e);while((y=(y+m+4)%4)!==_);else g.point(f[0],f[1])}function o(h,f){return ti(h[0]-i)<wn?f>0?0:3:ti(h[0]-t)<wn?f>0?2:1:ti(h[1]-e)<wn?f>0?1:0:f>0?3:2}function a(h,f){return c(h.x,f.x)}function c(h,f){var m=o(h,1),g=o(f,1);return m!==g?m-g:m===0?f[1]-h[1]:m===1?h[0]-f[0]:m===2?h[1]-f[1]:f[0]-h[0]}return function(h){var f=h,m=SP(),g,y,_,S,A,x,C,T,R,L,B,k={point:O,lineStart:ee,lineEnd:te,polygonStart:N,polygonEnd:z};function O(K,oe){r(K,oe)&&f.point(K,oe)}function D(){for(var K=0,oe=0,ae=y.length;oe<ae;++oe)for(var U=y[oe],Z=1,q=U.length,W=U[0],se,_e,De=W[0],ze=W[1];Z<q;++Z)se=De,_e=ze,W=U[Z],De=W[0],ze=W[1],_e<=n?ze>n&&(De-se)*(n-_e)>(ze-_e)*(i-se)&&++K:ze<=n&&(De-se)*(n-_e)<(ze-_e)*(i-se)&&--K;return K}function N(){f=m,g=[],y=[],B=!0}function z(){var K=D(),oe=B&&K,ae=(g=Q2(g)).length;(oe||ae)&&(h.polygonStart(),oe&&(h.lineStart(),s(null,null,1,h),h.lineEnd()),ae&&MP(g,a,K,s,h),h.polygonEnd()),f=h,g=y=_=null}function ee(){k.point=ce,y&&y.push(_=[]),L=!0,R=!1,C=T=NaN}function te(){g&&(ce(S,A),x&&R&&m.rejoin(),g.push(m.result())),k.point=O,R&&f.lineEnd()}function ce(K,oe){var ae=r(K,oe);if(y&&_.push([K,oe]),L)S=K,A=oe,x=ae,L=!1,ae&&(f.lineStart(),f.point(K,oe));else if(ae&&R)f.point(K,oe);else{var U=[C=Math.max(Dv,Math.min(ng,C)),T=Math.max(Dv,Math.min(ng,T))],Z=[K=Math.max(Dv,Math.min(ng,K)),oe=Math.max(Dv,Math.min(ng,oe))];lH(U,Z,i,e,t,n)?(R||(f.lineStart(),f.point(U[0],U[1])),f.point(Z[0],Z[1]),ae||f.lineEnd(),B=!1):ae&&(f.lineStart(),f.point(K,oe),B=!1)}C=K,T=oe,R=ae}return k}}function NT(i,e,t){var n=Vd(i,e-wn,t).concat(e);return function(r){return n.map(function(s){return[r,s]})}}function FT(i,e,t){var n=Vd(i,e-wn,t).concat(e);return function(r){return n.map(function(s){return[s,r]})}}function uH(){var i,e,t,n,r,s,o,a,c=10,h=c,f=90,m=360,g,y,_,S,A=2.5;function x(){return{type:"MultiLineString",coordinates:C()}}function C(){return Vd(Rv(n/f)*f,t,f).map(_).concat(Vd(Rv(a/m)*m,o,m).map(S)).concat(Vd(Rv(e/c)*c,i,c).filter(function(T){return ti(T%f)>wn}).map(g)).concat(Vd(Rv(s/h)*h,r,h).filter(function(T){return ti(T%m)>wn}).map(y))}return x.lines=function(){return C().map(function(T){return{type:"LineString",coordinates:T}})},x.outline=function(){return{type:"Polygon",coordinates:[_(n).concat(S(o).slice(1),_(t).reverse().slice(1),S(a).reverse().slice(1))]}},x.extent=function(T){return arguments.length?x.extentMajor(T).extentMinor(T):x.extentMinor()},x.extentMajor=function(T){return arguments.length?(n=+T[0][0],t=+T[1][0],a=+T[0][1],o=+T[1][1],n>t&&(T=n,n=t,t=T),a>o&&(T=a,a=o,o=T),x.precision(A)):[[n,a],[t,o]]},x.extentMinor=function(T){return arguments.length?(e=+T[0][0],i=+T[1][0],s=+T[0][1],r=+T[1][1],e>i&&(T=e,e=i,i=T),s>r&&(T=s,s=r,r=T),x.precision(A)):[[e,s],[i,r]]},x.step=function(T){return arguments.length?x.stepMajor(T).stepMinor(T):x.stepMinor()},x.stepMajor=function(T){return arguments.length?(f=+T[0],m=+T[1],x):[f,m]},x.stepMinor=function(T){return arguments.length?(c=+T[0],h=+T[1],x):[c,h]},x.precision=function(T){return arguments.length?(A=+T,g=NT(s,r,90),y=FT(e,i,A),_=NT(a,o,90),S=FT(n,t,A),x):A},x.extentMajor([[-180,-90+wn],[180,90-wn]]).extentMinor([[-180,-80-wn],[180,80+wn]])}const _1=i=>i;var xA=new bh,x1=new bh,TP,bP,E1,A1,Il={point:uo,lineStart:uo,lineEnd:uo,polygonStart:function(){Il.lineStart=hH,Il.lineEnd=dH},polygonEnd:function(){Il.lineStart=Il.lineEnd=Il.point=uo,xA.add(ti(x1)),x1=new bh},result:function(){var i=xA/2;return xA=new bh,i}};function hH(){Il.point=fH}function fH(i,e){Il.point=RP,TP=E1=i,bP=A1=e}function RP(i,e){x1.add(A1*i-E1*e),E1=i,A1=e}function dH(){RP(TP,bP)}var up=1/0,a_=up,Lg=-up,l_=Lg,c_={point:pH,lineStart:uo,lineEnd:uo,polygonStart:uo,polygonEnd:uo,result:function(){var i=[[up,a_],[Lg,l_]];return Lg=l_=-(a_=up=1/0),i}};function pH(i,e){i<up&&(up=i),i>Lg&&(Lg=i),e<a_&&(a_=e),e>l_&&(l_=e)}var w1=0,S1=0,ig=0,u_=0,h_=0,Wd=0,M1=0,C1=0,rg=0,IP,PP,Sa,Ma,lo={point:Ph,lineStart:OT,lineEnd:kT,polygonStart:function(){lo.lineStart=vH,lo.lineEnd=yH},polygonEnd:function(){lo.point=Ph,lo.lineStart=OT,lo.lineEnd=kT},result:function(){var i=rg?[M1/rg,C1/rg]:Wd?[u_/Wd,h_/Wd]:ig?[w1/ig,S1/ig]:[NaN,NaN];return w1=S1=ig=u_=h_=Wd=M1=C1=rg=0,i}};function Ph(i,e){w1+=i,S1+=e,++ig}function OT(){lo.point=mH}function mH(i,e){lo.point=gH,Ph(Sa=i,Ma=e)}function gH(i,e){var t=i-Sa,n=e-Ma,r=qc(t*t+n*n);u_+=r*(Sa+i)/2,h_+=r*(Ma+e)/2,Wd+=r,Ph(Sa=i,Ma=e)}function kT(){lo.point=Ph}function vH(){lo.point=_H}function yH(){LP(IP,PP)}function _H(i,e){lo.point=LP,Ph(IP=Sa=i,PP=Ma=e)}function LP(i,e){var t=i-Sa,n=e-Ma,r=qc(t*t+n*n);u_+=r*(Sa+i)/2,h_+=r*(Ma+e)/2,Wd+=r,r=Ma*i-Sa*e,M1+=r*(Sa+i),C1+=r*(Ma+e),rg+=r*3,Ph(Sa=i,Ma=e)}function DP(i){this._context=i}DP.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(i,e){switch(this._point){case 0:{this._context.moveTo(i,e),this._point=1;break}case 1:{this._context.lineTo(i,e);break}default:{this._context.moveTo(i+this._radius,e),this._context.arc(i,e,this._radius,0,go);break}}},result:uo};var T1=new bh,EA,BP,NP,sg,og,Dg={point:uo,lineStart:function(){Dg.point=xH},lineEnd:function(){EA&&FP(BP,NP),Dg.point=uo},polygonStart:function(){EA=!0},polygonEnd:function(){EA=null},result:function(){var i=+T1;return T1=new bh,i}};function xH(i,e){Dg.point=FP,BP=sg=i,NP=og=e}function FP(i,e){sg-=i,og-=e,T1.add(qc(sg*sg+og*og)),sg=i,og=e}let UT,f_,zT,GT;class HT{constructor(e){this._append=e==null?OP:EH(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:{this._append`M${e},${t}`,this._point=1;break}case 1:{this._append`L${e},${t}`;break}default:{if(this._append`M${e},${t}`,this._radius!==zT||this._append!==f_){const n=this._radius,r=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,zT=n,f_=this._append,GT=this._,this._=r}this._+=GT;break}}}result(){const e=this._;return this._="",e.length?e:null}}function OP(i){let e=1;this._+=i[0];for(const t=i.length;e<t;++e)this._+=arguments[e]+i[e]}function EH(i){const e=Math.floor(i);if(!(e>=0))throw new RangeError(`invalid digits: ${i}`);if(e>15)return OP;if(e!==UT){const t=10**e;UT=e,f_=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*t)/t+r[s]}}return f_}function AH(i,e){let t=3,n=4.5,r,s;function o(a){return a&&(typeof n=="function"&&s.pointRadius(+n.apply(this,arguments)),Od(a,r(s))),s.result()}return o.area=function(a){return Od(a,r(Il)),Il.result()},o.measure=function(a){return Od(a,r(Dg)),Dg.result()},o.bounds=function(a){return Od(a,r(c_)),c_.result()},o.centroid=function(a){return Od(a,r(lo)),lo.result()},o.projection=function(a){return arguments.length?(r=a==null?(i=null,_1):(i=a).stream,o):i},o.context=function(a){return arguments.length?(s=a==null?(e=null,new HT(t)):new DP(e=a),typeof n!="function"&&s.pointRadius(n),o):e},o.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(s.pointRadius(+a),+a),o):n},o.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const c=Math.floor(a);if(!(c>=0))throw new RangeError(`invalid digits: ${a}`);t=c}return e===null&&(s=new HT(t)),o},o.projection(i).digits(t).context(e)}function wS(i){return function(e){var t=new b1;for(var n in i)t[n]=i[n];return t.stream=e,t}}function b1(){}b1.prototype={constructor:b1,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function SS(i,e,t){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),Od(t,i.stream(c_)),e(c_.result()),n!=null&&i.clipExtent(n),i}function kP(i,e,t){return SS(i,function(n){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,c=+e[0][1]+(s-o*(n[1][1]+n[0][1]))/2;i.scale(150*o).translate([a,c])},t)}function wH(i,e,t){return kP(i,[[0,0],e],t)}function SH(i,e,t){return SS(i,function(n){var r=+e,s=r/(n[1][0]-n[0][0]),o=(r-s*(n[1][0]+n[0][0]))/2,a=-s*n[0][1];i.scale(150*s).translate([o,a])},t)}function MH(i,e,t){return SS(i,function(n){var r=+e,s=r/(n[1][1]-n[0][1]),o=-s*n[0][0],a=(r-s*(n[1][1]+n[0][1]))/2;i.scale(150*s).translate([o,a])},t)}var VT=16,CH=di(30*Fs);function WT(i,e){return+e?bH(i,e):TH(i)}function TH(i){return wS({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}})}function bH(i,e){function t(n,r,s,o,a,c,h,f,m,g,y,_,S,A){var x=h-n,C=f-r,T=x*x+C*C;if(T>4*e&&S--){var R=o+g,L=a+y,B=c+_,k=qc(R*R+L*L+B*B),O=Ih(B/=k),D=ti(ti(B)-1)<wn||ti(s-m)<wn?(s+m)/2:lp(L,R),N=i(D,O),z=N[0],ee=N[1],te=z-n,ce=ee-r,K=C*te-x*ce;(K*K/T>e||ti((x*te+C*ce)/T-.5)>.3||o*g+a*y+c*_<CH)&&(t(n,r,s,o,a,c,z,ee,D,R/=k,L/=k,B,S,A),A.point(z,ee),t(z,ee,D,R,L,B,h,f,m,g,y,_,S,A))}}return function(n){var r,s,o,a,c,h,f,m,g,y,_,S,A={point:x,lineStart:C,lineEnd:R,polygonStart:function(){n.polygonStart(),A.lineStart=L},polygonEnd:function(){n.polygonEnd(),A.lineStart=C}};function x(O,D){O=i(O,D),n.point(O[0],O[1])}function C(){m=NaN,A.point=T,n.lineStart()}function T(O,D){var N=cp([O,D]),z=i(O,D);t(m,g,f,y,_,S,m=z[0],g=z[1],f=O,y=N[0],_=N[1],S=N[2],VT,n),n.point(m,g)}function R(){A.point=x,n.lineEnd()}function L(){C(),A.point=B,A.lineEnd=k}function B(O,D){T(r=O,D),s=m,o=g,a=y,c=_,h=S,A.point=T}function k(){t(m,g,f,y,_,S,s,o,r,a,c,h,VT,n),A.lineEnd=R,R()}return A}}var RH=wS({point:function(i,e){this.stream.point(i*Fs,e*Fs)}});function IH(i){return wS({point:function(e,t){var n=i(e,t);return this.stream.point(n[0],n[1])}})}function PH(i,e,t,n,r){function s(o,a){return o*=n,a*=r,[e+i*o,t-i*a]}return s.invert=function(o,a){return[(o-e)/i*n,(t-a)/i*r]},s}function XT(i,e,t,n,r,s){if(!s)return PH(i,e,t,n,r);var o=di(s),a=oi(s),c=o*i,h=a*i,f=o/i,m=a/i,g=(a*t-o*e)/i,y=(a*e+o*t)/i;function _(S,A){return S*=n,A*=r,[c*S-h*A+e,t-h*S-c*A]}return _.invert=function(S,A){return[n*(f*S-m*A+g),r*(y-m*S-f*A)]},_}function LH(i){return DH(function(){return i})()}function DH(i){var e,t=150,n=480,r=250,s=0,o=0,a=0,c=0,h=0,f,m=0,g=1,y=1,_=null,S=BT,A=null,x,C,T,R=_1,L=.5,B,k,O,D,N;function z(K){return O(K[0]*Fs,K[1]*Fs)}function ee(K){return K=O.invert(K[0],K[1]),K&&[K[0]*yl,K[1]*yl]}z.stream=function(K){return D&&N===K?D:D=RH(IH(f)(S(B(R(N=K)))))},z.preclip=function(K){return arguments.length?(S=K,_=void 0,ce()):S},z.postclip=function(K){return arguments.length?(R=K,A=x=C=T=null,ce()):R},z.clipAngle=function(K){return arguments.length?(S=+K?aH(_=K*Fs):(_=null,BT),ce()):_*yl},z.clipExtent=function(K){return arguments.length?(R=K==null?(A=x=C=T=null,_1):cH(A=+K[0][0],x=+K[0][1],C=+K[1][0],T=+K[1][1]),ce()):A==null?null:[[A,x],[C,T]]},z.scale=function(K){return arguments.length?(t=+K,te()):t},z.translate=function(K){return arguments.length?(n=+K[0],r=+K[1],te()):[n,r]},z.center=function(K){return arguments.length?(s=K[0]%360*Fs,o=K[1]%360*Fs,te()):[s*yl,o*yl]},z.rotate=function(K){return arguments.length?(a=K[0]%360*Fs,c=K[1]%360*Fs,h=K.length>2?K[2]%360*Fs:0,te()):[a*yl,c*yl,h*yl]},z.angle=function(K){return arguments.length?(m=K%360*Fs,te()):m*yl},z.reflectX=function(K){return arguments.length?(g=K?-1:1,te()):g<0},z.reflectY=function(K){return arguments.length?(y=K?-1:1,te()):y<0},z.precision=function(K){return arguments.length?(B=WT(k,L=K*K),ce()):qc(L)},z.fitExtent=function(K,oe){return kP(z,K,oe)},z.fitSize=function(K,oe){return wH(z,K,oe)},z.fitWidth=function(K,oe){return SH(z,K,oe)},z.fitHeight=function(K,oe){return MH(z,K,oe)};function te(){var K=XT(t,0,0,g,y,m).apply(null,e(s,o)),oe=XT(t,n-K[0],r-K[1],g,y,m);return f=$G(a,c,h),k=v1(e,oe),O=v1(f,k),B=WT(k,L),ce()}function ce(){return D=N=null,z}return function(){return e=i.apply(this,arguments),z.invert=e.invert&&ee,te()}}function BH(i){return function(e,t){var n=qc(e*e+t*t),r=i(n),s=oi(r),o=di(r);return[lp(e*s,n*o),Ih(n&&t*s/n)]}}function UP(i,e){return[di(e)*oi(i),oi(e)]}UP.invert=BH(Ih);function NH(){return LH(UP).scale(249.5).clipAngle(90+wn)}function ag(i,e,t){this.k=i,this.x=e,this.y=t}ag.prototype={constructor:ag,scale:function(i){return i===1?this:new ag(this.k*i,this.x,this.y)},translate:function(i,e){return i===0&e===0?this:new ag(this.k,this.x+this.k*i,this.y+this.k*e)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ag.prototype;function FH(i){return i}function OH(i){if(i==null)return FH;var e,t,n=i.scale[0],r=i.scale[1],s=i.translate[0],o=i.translate[1];return function(a,c){c||(e=t=0);var h=2,f=a.length,m=new Array(f);for(m[0]=(e+=a[0])*n+s,m[1]=(t+=a[1])*r+o;h<f;)m[h]=a[h],++h;return m}}function kH(i,e){for(var t,n=i.length,r=n-e;r<--n;)t=i[r],i[r++]=i[n],i[n]=t}function UH(i,e){return typeof e=="string"&&(e=i.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return jT(i,t)})}:jT(i,e)}function jT(i,e){var t=e.id,n=e.bbox,r=e.properties==null?{}:e.properties,s=zH(i,e);return t==null&&n==null?{type:"Feature",properties:r,geometry:s}:n==null?{type:"Feature",id:t,properties:r,geometry:s}:{type:"Feature",id:t,bbox:n,properties:r,geometry:s}}function zH(i,e){var t=OH(i.transform),n=i.arcs;function r(f,m){m.length&&m.pop();for(var g=n[f<0?~f:f],y=0,_=g.length;y<_;++y)m.push(t(g[y],y));f<0&&kH(m,_)}function s(f){return t(f)}function o(f){for(var m=[],g=0,y=f.length;g<y;++g)r(f[g],m);return m.length<2&&m.push(m[0]),m}function a(f){for(var m=o(f);m.length<4;)m.push(m[0]);return m}function c(f){return f.map(a)}function h(f){var m=f.type,g;switch(m){case"GeometryCollection":return{type:m,geometries:f.geometries.map(h)};case"Point":g=s(f.coordinates);break;case"MultiPoint":g=f.coordinates.map(s);break;case"LineString":g=o(f.arcs);break;case"MultiLineString":g=f.arcs.map(o);break;case"Polygon":g=c(f.arcs);break;case"MultiPolygon":g=f.arcs.map(c);break;default:return null}return{type:m,coordinates:g}}return h(e)}function GH(){const i=J.useRef(null);return J.useEffect(()=>{if(!i.current)return;uT(i.current).selectAll("*").remove();const n=NH().scale(180).translate([400/2,400/2]).clipAngle(90),r=AH().projection(n),s=uH(),o=uT(i.current).attr("width",400).attr("height",400).style("background","radial-gradient(circle at 30% 30%, #001a33, #000)").style("border-radius","50%").style("box-shadow","0 0 30px rgba(0, 150, 255, 0.3)");o.append("path").datum({type:"Sphere"}).attr("fill","#022b52").attr("stroke","#0099ff").attr("stroke-width",.5).attr("d",r),o.append("path").datum(s()).attr("fill","none").attr("stroke","#00bfff").attr("stroke-width",.4).attr("opacity",.5).attr("d",r);const a=o.append("path").attr("fill","#0066cc").attr("stroke","#003366").attr("stroke-width",.3);JG("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json").then(f=>{if(!f)return;const m=UH(f,f.objects.countries);a.datum(m).attr("d",r)});let c=[0,0];const h=xS(()=>{c[0]+=.15,n.rotate(c),o.selectAll("path").attr("d",r)});return()=>{h.stop()}},[]),V.jsxs("div",{className:"flex flex-col items-center justify-center",children:[V.jsx("svg",{ref:i}),V.jsx("p",{className:"text-sm text-white/70 mt-2",children:"Simulated Earth Grid (Cupola View)"})]})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const i0="180",sh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},oh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zP=0,R1=1,GP=2,HH=3,HP=0,Ax=1,vg=2,Zo=3,La=0,Nr=1,ks=2,Nl=0,Eh=1,I1=2,P1=3,L1=4,VP=5,Hc=100,WP=101,XP=102,jP=103,YP=104,KP=200,JP=201,ZP=202,qP=203,d_=204,p_=205,QP=206,$P=207,eL=208,tL=209,nL=210,iL=211,rL=212,sL=213,oL=214,m_=0,g_=1,v_=2,Lh=3,y_=4,__=5,x_=6,E_=7,r0=0,aL=1,lL=2,Ia=0,cL=1,uL=2,hL=3,wx=4,fL=5,dL=6,pL=7,D1="attached",mL="detached",Sx=300,Ul=301,Yc=302,Bg=303,Ng=304,Ip=306,Kc=1e3,Us=1001,hp=1002,or=1003,Mx=1004,VH=1004,hh=1005,WH=1005,Ti=1006,qd=1007,XH=1007,ho=1008,jH=1008,vo=1009,MS=1010,CS=1011,fp=1012,Cx=1013,zl=1014,xs=1015,Pp=1016,Tx=1017,bx=1018,dp=1020,TS=35902,bS=35899,RS=1021,IS=1022,Br=1023,pp=1026,mp=1027,Rx=1028,s0=1029,PS=1030,Ix=1031,YH=1032,Px=1033,yg=33776,_g=33777,xg=33778,Eg=33779,A_=35840,w_=35841,S_=35842,M_=35843,C_=36196,T_=37492,b_=37496,R_=37808,I_=37809,P_=37810,L_=37811,D_=37812,B_=37813,N_=37814,F_=37815,O_=37816,k_=37817,U_=37818,z_=37819,G_=37820,H_=37821,V_=36492,W_=36494,X_=36495,j_=36283,Y_=36284,K_=36285,J_=36286,gL=2200,vL=2201,yL=2202,gp=2300,vp=2301,Yy=2302,fh=2400,dh=2401,Fg=2402,Lx=2500,LS=2501,_L=0,DS=1,Z_=2,xL=3200,EL=3201,KH=3202,JH=3203,Qc=0,AL=1,Pl="",ms="srgb",Dh="srgb-linear",Og="linear",zn="srgb",ZH=0,ah=7680,qH=7681,QH=7682,$H=7683,e4=34055,t4=34056,n4=5386,i4=512,r4=513,s4=514,o4=515,a4=516,l4=517,c4=518,B1=519,wL=512,SL=513,ML=514,BS=515,CL=516,TL=517,bL=518,RL=519,kg=35044,u4=35048,h4=35040,f4=35045,d4=35049,p4=35041,m4=35046,g4=35050,v4=35042,y4="100",N1="300 es",zs=2e3,yp=2001,_4={COMPUTE:"compute",RENDER:"render"},x4={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},E4={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Fa=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const Ir=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let YT=1234567;const Ah=Math.PI/180,_p=180/Math.PI;function Hs(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ir[i&255]+Ir[i>>8&255]+Ir[i>>16&255]+Ir[i>>24&255]+"-"+Ir[e&255]+Ir[e>>8&255]+"-"+Ir[e>>16&15|64]+Ir[e>>24&255]+"-"+Ir[t&63|128]+Ir[t>>8&255]+"-"+Ir[t>>16&255]+Ir[t>>24&255]+Ir[n&255]+Ir[n>>8&255]+Ir[n>>16&255]+Ir[n>>24&255]).toLowerCase()}function Yt(i,e,t){return Math.max(e,Math.min(t,i))}function NS(i,e){return(i%e+e)%e}function A4(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function w4(i,e,t){return i!==e?(t-i)/(e-i):0}function Ag(i,e,t){return(1-t)*i+t*e}function S4(i,e,t,n){return Ag(i,e,1-Math.exp(-t*n))}function M4(i,e=1){return e-Math.abs(NS(i,e*2)-e)}function C4(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function T4(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function b4(i,e){return i+Math.floor(Math.random()*(e-i+1))}function R4(i,e){return i+Math.random()*(e-i)}function I4(i){return i*(.5-Math.random())}function P4(i){i!==void 0&&(YT=i);let e=YT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function L4(i){return i*Ah}function D4(i){return i*_p}function B4(i){return(i&i-1)===0&&i!==0}function N4(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function F4(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function O4(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),h=s((e+n)/2),f=o((e+n)/2),m=s((e-n)/2),g=o((e-n)/2),y=s((n-e)/2),_=o((n-e)/2);switch(r){case"XYX":i.set(a*f,c*m,c*g,a*h);break;case"YZY":i.set(c*g,a*f,c*m,a*h);break;case"ZXZ":i.set(c*m,c*g,a*f,a*h);break;case"XZX":i.set(a*f,c*_,c*y,a*h);break;case"YXY":i.set(c*y,a*f,c*_,a*h);break;case"ZYZ":i.set(c*_,c*y,a*f,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function $r(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function cn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const IL={DEG2RAD:Ah,RAD2DEG:_p,generateUUID:Hs,clamp:Yt,euclideanModulo:NS,mapLinear:A4,inverseLerp:w4,lerp:Ag,damp:S4,pingpong:M4,smoothstep:C4,smootherstep:T4,randInt:b4,randFloat:R4,randFloatSpread:I4,seededRandom:P4,degToRad:L4,radToDeg:D4,isPowerOfTwo:B4,ceilPowerOfTwo:N4,floorPowerOfTwo:F4,setQuaternionFromProperEuler:O4,normalize:cn,denormalize:$r};class Be{constructor(e=0,t=0){Be.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Yt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Yt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ar{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let c=n[r+0],h=n[r+1],f=n[r+2],m=n[r+3];const g=s[o+0],y=s[o+1],_=s[o+2],S=s[o+3];if(a===0){e[t+0]=c,e[t+1]=h,e[t+2]=f,e[t+3]=m;return}if(a===1){e[t+0]=g,e[t+1]=y,e[t+2]=_,e[t+3]=S;return}if(m!==S||c!==g||h!==y||f!==_){let A=1-a;const x=c*g+h*y+f*_+m*S,C=x>=0?1:-1,T=1-x*x;if(T>Number.EPSILON){const L=Math.sqrt(T),B=Math.atan2(L,x*C);A=Math.sin(A*B)/L,a=Math.sin(a*B)/L}const R=a*C;if(c=c*A+g*R,h=h*A+y*R,f=f*A+_*R,m=m*A+S*R,A===1-a){const L=1/Math.sqrt(c*c+h*h+f*f+m*m);c*=L,h*=L,f*=L,m*=L}}e[t]=c,e[t+1]=h,e[t+2]=f,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],c=n[r+1],h=n[r+2],f=n[r+3],m=s[o],g=s[o+1],y=s[o+2],_=s[o+3];return e[t]=a*_+f*m+c*y-h*g,e[t+1]=c*_+f*g+h*m-a*y,e[t+2]=h*_+f*y+a*g-c*m,e[t+3]=f*_-a*m-c*g-h*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,h=a(n/2),f=a(r/2),m=a(s/2),g=c(n/2),y=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=g*f*m+h*y*_,this._y=h*y*m-g*f*_,this._z=h*f*_+g*y*m,this._w=h*f*m-g*y*_;break;case"YXZ":this._x=g*f*m+h*y*_,this._y=h*y*m-g*f*_,this._z=h*f*_-g*y*m,this._w=h*f*m+g*y*_;break;case"ZXY":this._x=g*f*m-h*y*_,this._y=h*y*m+g*f*_,this._z=h*f*_+g*y*m,this._w=h*f*m-g*y*_;break;case"ZYX":this._x=g*f*m-h*y*_,this._y=h*y*m+g*f*_,this._z=h*f*_-g*y*m,this._w=h*f*m+g*y*_;break;case"YZX":this._x=g*f*m+h*y*_,this._y=h*y*m+g*f*_,this._z=h*f*_-g*y*m,this._w=h*f*m-g*y*_;break;case"XZY":this._x=g*f*m-h*y*_,this._y=h*y*m-g*f*_,this._z=h*f*_+g*y*m,this._w=h*f*m+g*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],h=t[2],f=t[6],m=t[10],g=n+a+m;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(f-c)*y,this._y=(s-h)*y,this._z=(o-r)*y}else if(n>a&&n>m){const y=2*Math.sqrt(1+n-a-m);this._w=(f-c)/y,this._x=.25*y,this._y=(r+o)/y,this._z=(s+h)/y}else if(a>m){const y=2*Math.sqrt(1+a-n-m);this._w=(s-h)/y,this._x=(r+o)/y,this._y=.25*y,this._z=(c+f)/y}else{const y=2*Math.sqrt(1+m-n-a);this._w=(o-r)/y,this._x=(s+h)/y,this._y=(c+f)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,h=t._z,f=t._w;return this._x=n*f+o*a+r*h-s*c,this._y=r*f+o*c+s*a-n*h,this._z=s*f+o*h+n*c-r*a,this._w=o*f-n*a-r*c-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*n+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const h=Math.sqrt(c),f=Math.atan2(h,a),m=Math.sin((1-t)*f)/h,g=Math.sin(t*f)/h;return this._w=o*m+this._w*g,this._x=n*m+this._x*g,this._y=r*m+this._y*g,this._z=s*m+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,n=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(KT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(KT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,h=2*(o*r-a*n),f=2*(a*t-s*r),m=2*(s*n-o*t);return this.x=t+c*h+o*m-a*f,this.y=n+c*f+a*h-s*m,this.z=r+c*m+s*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this.z=Yt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this.z=Yt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Yt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-n*c,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return AA.copy(this).projectOnVector(e),this.sub(AA)}reflect(e){return this.sub(AA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Yt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const AA=new j,KT=new ar;class on{constructor(e,t,n,r,s,o,a,c,h){on.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,c,h)}set(e,t,n,r,s,o,a,c,h){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=c,f[6]=n,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],c=n[6],h=n[1],f=n[4],m=n[7],g=n[2],y=n[5],_=n[8],S=r[0],A=r[3],x=r[6],C=r[1],T=r[4],R=r[7],L=r[2],B=r[5],k=r[8];return s[0]=o*S+a*C+c*L,s[3]=o*A+a*T+c*B,s[6]=o*x+a*R+c*k,s[1]=h*S+f*C+m*L,s[4]=h*A+f*T+m*B,s[7]=h*x+f*R+m*k,s[2]=g*S+y*C+_*L,s[5]=g*A+y*T+_*B,s[8]=g*x+y*R+_*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8];return t*o*f-t*a*h-n*s*f+n*a*c+r*s*h-r*o*c}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8],m=f*o-a*h,g=a*c-f*s,y=h*s-o*c,_=t*m+n*g+r*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/_;return e[0]=m*S,e[1]=(r*h-f*n)*S,e[2]=(a*n-r*o)*S,e[3]=g*S,e[4]=(f*t-r*c)*S,e[5]=(r*s-a*t)*S,e[6]=y*S,e[7]=(n*c-h*t)*S,e[8]=(o*t-n*s)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const c=Math.cos(s),h=Math.sin(s);return this.set(n*c,n*h,-n*(c*o+h*a)+o+e,-r*h,r*c,-r*(-h*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(wA.makeScale(e,t)),this}rotate(e){return this.premultiply(wA.makeRotation(-e)),this}translate(e,t){return this.premultiply(wA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const wA=new on;function PL(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const k4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Xd(i,e){return new k4[i](e)}function Ug(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function LL(){const i=Ug("canvas");return i.style.display="block",i}const JT={};function zg(i){i in JT||(JT[i]=!0,console.warn(i))}function U4(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}const ZT=new on().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),qT=new on().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function z4(){const i={enabled:!0,workingColorSpace:Dh,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===zn&&(r.r=Fl(r.r),r.g=Fl(r.g),r.b=Fl(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===zn&&(r.r=Qd(r.r),r.g=Qd(r.g),r.b=Qd(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Pl?Og:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return zg("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return zg("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Dh]:{primaries:e,whitePoint:n,transfer:Og,toXYZ:ZT,fromXYZ:qT,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ms},outputColorSpaceConfig:{drawingBufferColorSpace:ms}},[ms]:{primaries:e,whitePoint:n,transfer:zn,toXYZ:ZT,fromXYZ:qT,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ms}}}),i}const Tn=z4();function Fl(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Qd(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let sd;class DL{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{sd===void 0&&(sd=Ug("canvas")),sd.width=e.width,sd.height=e.height;const r=sd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=sd}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ug("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Fl(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Fl(t[n]/255)*255):t[n]=Fl(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let G4=0,Vc=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:G4++}),this.uuid=Hs(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(SA(r[o].image)):s.push(SA(r[o]))}else s=SA(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function SA(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?DL.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let H4=0;const MA=new j;class li extends Fa{constructor(e=li.DEFAULT_IMAGE,t=li.DEFAULT_MAPPING,n=Us,r=Us,s=Ti,o=ho,a=Br,c=vo,h=li.DEFAULT_ANISOTROPY,f=Pl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:H4++}),this.uuid=Hs(),this.name="",this.source=new Vc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Be(0,0),this.repeat=new Be(1,1),this.center=new Be(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(MA).x}get height(){return this.source.getSize(MA).y}get depth(){return this.source.getSize(MA).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Sx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kc:e.x=e.x-Math.floor(e.x);break;case Us:e.x=e.x<0?0:1;break;case hp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Kc:e.y=e.y-Math.floor(e.y);break;case Us:e.y=e.y<0?0:1;break;case hp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}li.DEFAULT_IMAGE=null;li.DEFAULT_MAPPING=Sx;li.DEFAULT_ANISOTROPY=1;class In{constructor(e=0,t=0,n=0,r=1){In.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const c=e.elements,h=c[0],f=c[4],m=c[8],g=c[1],y=c[5],_=c[9],S=c[2],A=c[6],x=c[10];if(Math.abs(f-g)<.01&&Math.abs(m-S)<.01&&Math.abs(_-A)<.01){if(Math.abs(f+g)<.1&&Math.abs(m+S)<.1&&Math.abs(_+A)<.1&&Math.abs(h+y+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const T=(h+1)/2,R=(y+1)/2,L=(x+1)/2,B=(f+g)/4,k=(m+S)/4,O=(_+A)/4;return T>R&&T>L?T<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(T),r=B/n,s=k/n):R>L?R<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(R),n=B/r,s=O/r):L<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(L),n=k/s,r=O/s),this.set(n,r,s,t),this}let C=Math.sqrt((A-_)*(A-_)+(m-S)*(m-S)+(g-f)*(g-f));return Math.abs(C)<.001&&(C=1),this.x=(A-_)/C,this.y=(m-S)/C,this.z=(g-f)/C,this.w=Math.acos((h+y+x-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Yt(this.x,e.x,t.x),this.y=Yt(this.y,e.y,t.y),this.z=Yt(this.z,e.z,t.z),this.w=Yt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Yt(this.x,e,t),this.y=Yt(this.y,e,t),this.z=Yt(this.z,e,t),this.w=Yt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Yt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class FS extends Fa{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ti,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new In(0,0,e,t),this.scissorTest=!1,this.viewport=new In(0,0,e,t);const r={width:e,height:t,depth:n.depth},s=new li(r);this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Ti,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Vc(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Da extends FS{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Dx extends li{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=or,this.minFilter=or,this.wrapR=Us,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class V4 extends Da{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Dx(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Bx extends li{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=or,this.minFilter=or,this.wrapR=Us,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class W4 extends Da{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Bx(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Ar{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(jo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(jo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=jo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,jo):jo.fromBufferAttribute(s,o),jo.applyMatrix4(e.matrixWorld),this.expandByPoint(jo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Bv.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Bv.copy(n.boundingBox)),Bv.applyMatrix4(e.matrixWorld),this.union(Bv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,jo),jo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Nm),Nv.subVectors(this.max,Nm),od.subVectors(e.a,Nm),ad.subVectors(e.b,Nm),ld.subVectors(e.c,Nm),Cc.subVectors(ad,od),Tc.subVectors(ld,ad),Hu.subVectors(od,ld);let t=[0,-Cc.z,Cc.y,0,-Tc.z,Tc.y,0,-Hu.z,Hu.y,Cc.z,0,-Cc.x,Tc.z,0,-Tc.x,Hu.z,0,-Hu.x,-Cc.y,Cc.x,0,-Tc.y,Tc.x,0,-Hu.y,Hu.x,0];return!CA(t,od,ad,ld,Nv)||(t=[1,0,0,0,1,0,0,0,1],!CA(t,od,ad,ld,Nv))?!1:(Fv.crossVectors(Cc,Tc),t=[Fv.x,Fv.y,Fv.z],CA(t,od,ad,ld,Nv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(jo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_l[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_l[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_l[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_l[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_l[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_l[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_l[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_l[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_l),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const _l=[new j,new j,new j,new j,new j,new j,new j,new j],jo=new j,Bv=new Ar,od=new j,ad=new j,ld=new j,Cc=new j,Tc=new j,Hu=new j,Nm=new j,Nv=new j,Fv=new j,Vu=new j;function CA(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Vu.fromArray(i,s);const a=r.x*Math.abs(Vu.x)+r.y*Math.abs(Vu.y)+r.z*Math.abs(Vu.z),c=e.dot(Vu),h=t.dot(Vu),f=n.dot(Vu);if(Math.max(-Math.max(c,h,f),Math.min(c,h,f))>a)return!1}return!0}const X4=new Ar,Fm=new j,TA=new j;class lr{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):X4.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Fm.subVectors(e,this.center);const t=Fm.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Fm,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(TA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Fm.copy(e.center).add(TA)),this.expandByPoint(Fm.copy(e.center).sub(TA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const xl=new j,bA=new j,Ov=new j,bc=new j,RA=new j,kv=new j,IA=new j;class Vh{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=xl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(xl.copy(this.origin).addScaledVector(this.direction,t),xl.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){bA.copy(e).add(t).multiplyScalar(.5),Ov.copy(t).sub(e).normalize(),bc.copy(this.origin).sub(bA);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Ov),a=bc.dot(this.direction),c=-bc.dot(Ov),h=bc.lengthSq(),f=Math.abs(1-o*o);let m,g,y,_;if(f>0)if(m=o*c-a,g=o*a-c,_=s*f,m>=0)if(g>=-_)if(g<=_){const S=1/f;m*=S,g*=S,y=m*(m+o*g+2*a)+g*(o*m+g+2*c)+h}else g=s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+h;else g=-s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+h;else g<=-_?(m=Math.max(0,-(-o*s+a)),g=m>0?-s:Math.min(Math.max(-s,-c),s),y=-m*m+g*(g+2*c)+h):g<=_?(m=0,g=Math.min(Math.max(-s,-c),s),y=g*(g+2*c)+h):(m=Math.max(0,-(o*s+a)),g=m>0?s:Math.min(Math.max(-s,-c),s),y=-m*m+g*(g+2*c)+h);else g=o>0?-s:s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(bA).addScaledVector(Ov,g),y}intersectSphere(e,t){xl.subVectors(e.center,this.origin);const n=xl.dot(this.direction),r=xl.dot(xl)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,c=n+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,c;const h=1/this.direction.x,f=1/this.direction.y,m=1/this.direction.z,g=this.origin;return h>=0?(n=(e.min.x-g.x)*h,r=(e.max.x-g.x)*h):(n=(e.max.x-g.x)*h,r=(e.min.x-g.x)*h),f>=0?(s=(e.min.y-g.y)*f,o=(e.max.y-g.y)*f):(s=(e.max.y-g.y)*f,o=(e.min.y-g.y)*f),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),m>=0?(a=(e.min.z-g.z)*m,c=(e.max.z-g.z)*m):(a=(e.max.z-g.z)*m,c=(e.min.z-g.z)*m),n>c||a>r)||((a>n||n!==n)&&(n=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,xl)!==null}intersectTriangle(e,t,n,r,s){RA.subVectors(t,e),kv.subVectors(n,e),IA.crossVectors(RA,kv);let o=this.direction.dot(IA),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;bc.subVectors(this.origin,e);const c=a*this.direction.dot(kv.crossVectors(bc,kv));if(c<0)return null;const h=a*this.direction.dot(RA.cross(bc));if(h<0||c+h>o)return null;const f=-a*bc.dot(IA);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class jt{constructor(e,t,n,r,s,o,a,c,h,f,m,g,y,_,S,A){jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,c,h,f,m,g,y,_,S,A)}set(e,t,n,r,s,o,a,c,h,f,m,g,y,_,S,A){const x=this.elements;return x[0]=e,x[4]=t,x[8]=n,x[12]=r,x[1]=s,x[5]=o,x[9]=a,x[13]=c,x[2]=h,x[6]=f,x[10]=m,x[14]=g,x[3]=y,x[7]=_,x[11]=S,x[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new jt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/cd.setFromMatrixColumn(e,0).length(),s=1/cd.setFromMatrixColumn(e,1).length(),o=1/cd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),c=Math.cos(r),h=Math.sin(r),f=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const g=o*f,y=o*m,_=a*f,S=a*m;t[0]=c*f,t[4]=-c*m,t[8]=h,t[1]=y+_*h,t[5]=g-S*h,t[9]=-a*c,t[2]=S-g*h,t[6]=_+y*h,t[10]=o*c}else if(e.order==="YXZ"){const g=c*f,y=c*m,_=h*f,S=h*m;t[0]=g+S*a,t[4]=_*a-y,t[8]=o*h,t[1]=o*m,t[5]=o*f,t[9]=-a,t[2]=y*a-_,t[6]=S+g*a,t[10]=o*c}else if(e.order==="ZXY"){const g=c*f,y=c*m,_=h*f,S=h*m;t[0]=g-S*a,t[4]=-o*m,t[8]=_+y*a,t[1]=y+_*a,t[5]=o*f,t[9]=S-g*a,t[2]=-o*h,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const g=o*f,y=o*m,_=a*f,S=a*m;t[0]=c*f,t[4]=_*h-y,t[8]=g*h+S,t[1]=c*m,t[5]=S*h+g,t[9]=y*h-_,t[2]=-h,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const g=o*c,y=o*h,_=a*c,S=a*h;t[0]=c*f,t[4]=S-g*m,t[8]=_*m+y,t[1]=m,t[5]=o*f,t[9]=-a*f,t[2]=-h*f,t[6]=y*m+_,t[10]=g-S*m}else if(e.order==="XZY"){const g=o*c,y=o*h,_=a*c,S=a*h;t[0]=c*f,t[4]=-m,t[8]=h*f,t[1]=g*m+S,t[5]=o*f,t[9]=y*m-_,t[2]=_*m-y,t[6]=a*f,t[10]=S*m+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(j4,e,Y4)}lookAt(e,t,n){const r=this.elements;return Bs.subVectors(e,t),Bs.lengthSq()===0&&(Bs.z=1),Bs.normalize(),Rc.crossVectors(n,Bs),Rc.lengthSq()===0&&(Math.abs(n.z)===1?Bs.x+=1e-4:Bs.z+=1e-4,Bs.normalize(),Rc.crossVectors(n,Bs)),Rc.normalize(),Uv.crossVectors(Bs,Rc),r[0]=Rc.x,r[4]=Uv.x,r[8]=Bs.x,r[1]=Rc.y,r[5]=Uv.y,r[9]=Bs.y,r[2]=Rc.z,r[6]=Uv.z,r[10]=Bs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],c=n[8],h=n[12],f=n[1],m=n[5],g=n[9],y=n[13],_=n[2],S=n[6],A=n[10],x=n[14],C=n[3],T=n[7],R=n[11],L=n[15],B=r[0],k=r[4],O=r[8],D=r[12],N=r[1],z=r[5],ee=r[9],te=r[13],ce=r[2],K=r[6],oe=r[10],ae=r[14],U=r[3],Z=r[7],q=r[11],W=r[15];return s[0]=o*B+a*N+c*ce+h*U,s[4]=o*k+a*z+c*K+h*Z,s[8]=o*O+a*ee+c*oe+h*q,s[12]=o*D+a*te+c*ae+h*W,s[1]=f*B+m*N+g*ce+y*U,s[5]=f*k+m*z+g*K+y*Z,s[9]=f*O+m*ee+g*oe+y*q,s[13]=f*D+m*te+g*ae+y*W,s[2]=_*B+S*N+A*ce+x*U,s[6]=_*k+S*z+A*K+x*Z,s[10]=_*O+S*ee+A*oe+x*q,s[14]=_*D+S*te+A*ae+x*W,s[3]=C*B+T*N+R*ce+L*U,s[7]=C*k+T*z+R*K+L*Z,s[11]=C*O+T*ee+R*oe+L*q,s[15]=C*D+T*te+R*ae+L*W,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],h=e[13],f=e[2],m=e[6],g=e[10],y=e[14],_=e[3],S=e[7],A=e[11],x=e[15];return _*(+s*c*m-r*h*m-s*a*g+n*h*g+r*a*y-n*c*y)+S*(+t*c*y-t*h*g+s*o*g-r*o*y+r*h*f-s*c*f)+A*(+t*h*m-t*a*y-s*o*m+n*o*y+s*a*f-n*h*f)+x*(-r*a*f-t*c*m+t*a*g+r*o*m-n*o*g+n*c*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8],m=e[9],g=e[10],y=e[11],_=e[12],S=e[13],A=e[14],x=e[15],C=m*A*h-S*g*h+S*c*y-a*A*y-m*c*x+a*g*x,T=_*g*h-f*A*h-_*c*y+o*A*y+f*c*x-o*g*x,R=f*S*h-_*m*h+_*a*y-o*S*y-f*a*x+o*m*x,L=_*m*c-f*S*c-_*a*g+o*S*g+f*a*A-o*m*A,B=t*C+n*T+r*R+s*L;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/B;return e[0]=C*k,e[1]=(S*g*s-m*A*s-S*r*y+n*A*y+m*r*x-n*g*x)*k,e[2]=(a*A*s-S*c*s+S*r*h-n*A*h-a*r*x+n*c*x)*k,e[3]=(m*c*s-a*g*s-m*r*h+n*g*h+a*r*y-n*c*y)*k,e[4]=T*k,e[5]=(f*A*s-_*g*s+_*r*y-t*A*y-f*r*x+t*g*x)*k,e[6]=(_*c*s-o*A*s-_*r*h+t*A*h+o*r*x-t*c*x)*k,e[7]=(o*g*s-f*c*s+f*r*h-t*g*h-o*r*y+t*c*y)*k,e[8]=R*k,e[9]=(_*m*s-f*S*s-_*n*y+t*S*y+f*n*x-t*m*x)*k,e[10]=(o*S*s-_*a*s+_*n*h-t*S*h-o*n*x+t*a*x)*k,e[11]=(f*a*s-o*m*s-f*n*h+t*m*h+o*n*y-t*a*y)*k,e[12]=L*k,e[13]=(f*S*r-_*m*r+_*n*g-t*S*g-f*n*A+t*m*A)*k,e[14]=(_*a*r-o*S*r-_*n*c+t*S*c+o*n*A-t*a*A)*k,e[15]=(o*m*r-f*a*r+f*n*c-t*m*c-o*n*g+t*a*g)*k,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,c=e.z,h=s*o,f=s*a;return this.set(h*o+n,h*a-r*c,h*c+r*a,0,h*a+r*c,f*a+n,f*c-r*o,0,h*c-r*a,f*c+r*o,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,h=s+s,f=o+o,m=a+a,g=s*h,y=s*f,_=s*m,S=o*f,A=o*m,x=a*m,C=c*h,T=c*f,R=c*m,L=n.x,B=n.y,k=n.z;return r[0]=(1-(S+x))*L,r[1]=(y+R)*L,r[2]=(_-T)*L,r[3]=0,r[4]=(y-R)*B,r[5]=(1-(g+x))*B,r[6]=(A+C)*B,r[7]=0,r[8]=(_+T)*k,r[9]=(A-C)*k,r[10]=(1-(g+S))*k,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=cd.set(r[0],r[1],r[2]).length();const o=cd.set(r[4],r[5],r[6]).length(),a=cd.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Yo.copy(this);const h=1/s,f=1/o,m=1/a;return Yo.elements[0]*=h,Yo.elements[1]*=h,Yo.elements[2]*=h,Yo.elements[4]*=f,Yo.elements[5]*=f,Yo.elements[6]*=f,Yo.elements[8]*=m,Yo.elements[9]*=m,Yo.elements[10]*=m,t.setFromRotationMatrix(Yo),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=zs,c=!1){const h=this.elements,f=2*s/(t-e),m=2*s/(n-r),g=(t+e)/(t-e),y=(n+r)/(n-r);let _,S;if(c)_=s/(o-s),S=o*s/(o-s);else if(a===zs)_=-(o+s)/(o-s),S=-2*o*s/(o-s);else if(a===yp)_=-o/(o-s),S=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return h[0]=f,h[4]=0,h[8]=g,h[12]=0,h[1]=0,h[5]=m,h[9]=y,h[13]=0,h[2]=0,h[6]=0,h[10]=_,h[14]=S,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=zs,c=!1){const h=this.elements,f=2/(t-e),m=2/(n-r),g=-(t+e)/(t-e),y=-(n+r)/(n-r);let _,S;if(c)_=1/(o-s),S=o/(o-s);else if(a===zs)_=-2/(o-s),S=-(o+s)/(o-s);else if(a===yp)_=-1/(o-s),S=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return h[0]=f,h[4]=0,h[8]=0,h[12]=g,h[1]=0,h[5]=m,h[9]=0,h[13]=y,h[2]=0,h[6]=0,h[10]=_,h[14]=S,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const cd=new j,Yo=new jt,j4=new j(0,0,0),Y4=new j(1,1,1),Rc=new j,Uv=new j,Bs=new j,QT=new jt,$T=new ar;class ws{constructor(e=0,t=0,n=0,r=ws.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],c=r[1],h=r[5],f=r[9],m=r[2],g=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(Yt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Yt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,y),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Yt(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Yt(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(Yt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-Yt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,h),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return QT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(QT,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return $T.setFromEuler(this),this.setFromQuaternion($T,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ws.DEFAULT_ORDER="XYZ";class wh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let K4=0;const eb=new j,ud=new ar,El=new jt,zv=new j,Om=new j,J4=new j,Z4=new ar,tb=new j(1,0,0),nb=new j(0,1,0),ib=new j(0,0,1),rb={type:"added"},q4={type:"removed"},hd={type:"childadded",child:null},PA={type:"childremoved",child:null};class Sn extends Fa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:K4++}),this.uuid=Hs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sn.DEFAULT_UP.clone();const e=new j,t=new ws,n=new ar,r=new j(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new jt},normalMatrix:{value:new on}}),this.matrix=new jt,this.matrixWorld=new jt,this.matrixAutoUpdate=Sn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new wh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ud.setFromAxisAngle(e,t),this.quaternion.multiply(ud),this}rotateOnWorldAxis(e,t){return ud.setFromAxisAngle(e,t),this.quaternion.premultiply(ud),this}rotateX(e){return this.rotateOnAxis(tb,e)}rotateY(e){return this.rotateOnAxis(nb,e)}rotateZ(e){return this.rotateOnAxis(ib,e)}translateOnAxis(e,t){return eb.copy(e).applyQuaternion(this.quaternion),this.position.add(eb.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(tb,e)}translateY(e){return this.translateOnAxis(nb,e)}translateZ(e){return this.translateOnAxis(ib,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(El.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?zv.copy(e):zv.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Om.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?El.lookAt(Om,zv,this.up):El.lookAt(zv,Om,this.up),this.quaternion.setFromRotationMatrix(El),r&&(El.extractRotation(r.matrixWorld),ud.setFromRotationMatrix(El),this.quaternion.premultiply(ud.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(rb),hd.child=e,this.dispatchEvent(hd),hd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(q4),PA.child=e,this.dispatchEvent(PA),PA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),El.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),El.multiply(e.parent.matrixWorld)),e.applyMatrix4(El),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(rb),hd.child=e,this.dispatchEvent(hd),hd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Om,e,J4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Om,Z4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let h=0,f=c.length;h<f;h++){const m=c[h];s(e.shapes,m)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,h=this.material.length;c<h;c++)a.push(s(e.materials,this.material[c]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];r.animations.push(s(e.animations,c))}}if(t){const a=o(e.geometries),c=o(e.materials),h=o(e.textures),f=o(e.images),m=o(e.shapes),g=o(e.skeletons),y=o(e.animations),_=o(e.nodes);a.length>0&&(n.geometries=a),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),f.length>0&&(n.images=f),m.length>0&&(n.shapes=m),g.length>0&&(n.skeletons=g),y.length>0&&(n.animations=y),_.length>0&&(n.nodes=_)}return n.object=r,n;function o(a){const c=[];for(const h in a){const f=a[h];delete f.metadata,c.push(f)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Sn.DEFAULT_UP=new j(0,1,0);Sn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ko=new j,Al=new j,LA=new j,wl=new j,fd=new j,dd=new j,sb=new j,DA=new j,BA=new j,NA=new j,FA=new In,OA=new In,kA=new In;class vs{constructor(e=new j,t=new j,n=new j){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Ko.subVectors(e,t),r.cross(Ko);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Ko.subVectors(r,t),Al.subVectors(n,t),LA.subVectors(e,t);const o=Ko.dot(Ko),a=Ko.dot(Al),c=Ko.dot(LA),h=Al.dot(Al),f=Al.dot(LA),m=o*h-a*a;if(m===0)return s.set(0,0,0),null;const g=1/m,y=(h*c-a*f)*g,_=(o*f-a*c)*g;return s.set(1-y-_,_,y)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,wl)===null?!1:wl.x>=0&&wl.y>=0&&wl.x+wl.y<=1}static getInterpolation(e,t,n,r,s,o,a,c){return this.getBarycoord(e,t,n,r,wl)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,wl.x),c.addScaledVector(o,wl.y),c.addScaledVector(a,wl.z),c)}static getInterpolatedAttribute(e,t,n,r,s,o){return FA.setScalar(0),OA.setScalar(0),kA.setScalar(0),FA.fromBufferAttribute(e,t),OA.fromBufferAttribute(e,n),kA.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(FA,s.x),o.addScaledVector(OA,s.y),o.addScaledVector(kA,s.z),o}static isFrontFacing(e,t,n,r){return Ko.subVectors(n,t),Al.subVectors(e,t),Ko.cross(Al).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ko.subVectors(this.c,this.b),Al.subVectors(this.a,this.b),Ko.cross(Al).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return vs.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return vs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;fd.subVectors(r,n),dd.subVectors(s,n),DA.subVectors(e,n);const c=fd.dot(DA),h=dd.dot(DA);if(c<=0&&h<=0)return t.copy(n);BA.subVectors(e,r);const f=fd.dot(BA),m=dd.dot(BA);if(f>=0&&m<=f)return t.copy(r);const g=c*m-f*h;if(g<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(n).addScaledVector(fd,o);NA.subVectors(e,s);const y=fd.dot(NA),_=dd.dot(NA);if(_>=0&&y<=_)return t.copy(s);const S=y*h-c*_;if(S<=0&&h>=0&&_<=0)return a=h/(h-_),t.copy(n).addScaledVector(dd,a);const A=f*_-y*m;if(A<=0&&m-f>=0&&y-_>=0)return sb.subVectors(s,r),a=(m-f)/(m-f+(y-_)),t.copy(r).addScaledVector(sb,a);const x=1/(A+S+g);return o=S*x,a=g*x,t.copy(n).addScaledVector(fd,o).addScaledVector(dd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const BL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ic={h:0,s:0,l:0},Gv={h:0,s:0,l:0};function UA(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class ft{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ms){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=Tn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Tn.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=Tn.workingColorSpace){if(e=NS(e,1),t=Yt(t,0,1),n=Yt(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=UA(o,s,e+1/3),this.g=UA(o,s,e),this.b=UA(o,s,e-1/3)}return Tn.colorSpaceToWorking(this,r),this}setStyle(e,t=ms){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ms){const n=BL[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fl(e.r),this.g=Fl(e.g),this.b=Fl(e.b),this}copyLinearToSRGB(e){return this.r=Qd(e.r),this.g=Qd(e.g),this.b=Qd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ms){return Tn.workingToColorSpace(Pr.copy(this),e),Math.round(Yt(Pr.r*255,0,255))*65536+Math.round(Yt(Pr.g*255,0,255))*256+Math.round(Yt(Pr.b*255,0,255))}getHexString(e=ms){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Tn.workingColorSpace){Tn.workingToColorSpace(Pr.copy(this),t);const n=Pr.r,r=Pr.g,s=Pr.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let c,h;const f=(a+o)/2;if(a===o)c=0,h=0;else{const m=o-a;switch(h=f<=.5?m/(o+a):m/(2-o-a),o){case n:c=(r-s)/m+(r<s?6:0);break;case r:c=(s-n)/m+2;break;case s:c=(n-r)/m+4;break}c/=6}return e.h=c,e.s=h,e.l=f,e}getRGB(e,t=Tn.workingColorSpace){return Tn.workingToColorSpace(Pr.copy(this),t),e.r=Pr.r,e.g=Pr.g,e.b=Pr.b,e}getStyle(e=ms){Tn.workingToColorSpace(Pr.copy(this),e);const t=Pr.r,n=Pr.g,r=Pr.b;return e!==ms?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(Ic),this.setHSL(Ic.h+e,Ic.s+t,Ic.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ic),e.getHSL(Gv);const n=Ag(Ic.h,Gv.h,t),r=Ag(Ic.s,Gv.s,t),s=Ag(Ic.l,Gv.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pr=new ft;ft.NAMES=BL;let Q4=0;class Ki extends Fa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Q4++}),this.uuid=Hs(),this.name="",this.type="Material",this.blending=Eh,this.side=La,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=d_,this.blendDst=p_,this.blendEquation=Hc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ft(0,0,0),this.blendAlpha=0,this.depthFunc=Lh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=B1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ah,this.stencilZFail=ah,this.stencilZPass=ah,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Eh&&(n.blending=this.blending),this.side!==La&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==d_&&(n.blendSrc=this.blendSrc),this.blendDst!==p_&&(n.blendDst=this.blendDst),this.blendEquation!==Hc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Lh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==B1&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ah&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ah&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ah&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Gs extends Ki{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ws,this.combine=r0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ll=$4();function $4(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(n[c]=0,n[c|256]=32768,r[c]=24,r[c|256]=24):h<-14?(n[c]=1024>>-h-14,n[c|256]=1024>>-h-14|32768,r[c]=-h-1,r[c|256]=-h-1):h<=15?(n[c]=h+15<<10,n[c|256]=h+15<<10|32768,r[c]=13,r[c|256]=13):h<128?(n[c]=31744,n[c|256]=64512,r[c]=24,r[c|256]=24):(n[c]=31744,n[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,f=0;for(;(h&8388608)===0;)h<<=1,f-=8388608;h&=-8388609,f+=947912704,s[c]=h|f}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function ps(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Yt(i,-65504,65504),Ll.floatView[0]=i;const e=Ll.uint32View[0],t=e>>23&511;return Ll.baseTable[t]+((e&8388607)>>Ll.shiftTable[t])}function lg(i){const e=i>>10;return Ll.uint32View[0]=Ll.mantissaTable[Ll.offsetTable[e]+(i&1023)]+Ll.exponentTable[e],Ll.floatView[0]}class e5{static toHalfFloat(e){return ps(e)}static fromHalfFloat(e){return lg(e)}}const Oi=new j,Hv=new Be;let t5=0;class Pn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:t5++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=kg,this.updateRanges=[],this.gpuType=xs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Hv.fromBufferAttribute(this,t),Hv.applyMatrix3(e),this.setXY(t,Hv.x,Hv.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix3(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Oi.fromBufferAttribute(this,t),Oi.applyMatrix4(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Oi.fromBufferAttribute(this,t),Oi.applyNormalMatrix(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Oi.fromBufferAttribute(this,t),Oi.transformDirection(e),this.setXYZ(t,Oi.x,Oi.y,Oi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=$r(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=$r(t,this.array)),t}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=$r(t,this.array)),t}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=$r(t,this.array)),t}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=$r(t,this.array)),t}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),r=cn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),r=cn(r,this.array),s=cn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==kg&&(e.usage=this.usage),e}}class n5 extends Pn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class i5 extends Pn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class r5 extends Pn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class s5 extends Pn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class OS extends Pn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class o5 extends Pn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class kS extends Pn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class a5 extends Pn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=lg(this.array[e*this.itemSize]);return this.normalized&&(t=$r(t,this.array)),t}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize]=ps(t),this}getY(e){let t=lg(this.array[e*this.itemSize+1]);return this.normalized&&(t=$r(t,this.array)),t}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+1]=ps(t),this}getZ(e){let t=lg(this.array[e*this.itemSize+2]);return this.normalized&&(t=$r(t,this.array)),t}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+2]=ps(t),this}getW(e){let t=lg(this.array[e*this.itemSize+3]);return this.normalized&&(t=$r(t,this.array)),t}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+3]=ps(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array)),this.array[e+0]=ps(t),this.array[e+1]=ps(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),r=cn(r,this.array)),this.array[e+0]=ps(t),this.array[e+1]=ps(n),this.array[e+2]=ps(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),r=cn(r,this.array),s=cn(s,this.array)),this.array[e+0]=ps(t),this.array[e+1]=ps(n),this.array[e+2]=ps(r),this.array[e+3]=ps(s),this}}class St extends Pn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let l5=0;const ro=new jt,zA=new Sn,pd=new j,Ns=new Ar,km=new Ar,sr=new j;class Qt extends Fa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:l5++}),this.uuid=Hs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(PL(e)?kS:OS)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new on().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ro.makeRotationFromQuaternion(e),this.applyMatrix4(ro),this}rotateX(e){return ro.makeRotationX(e),this.applyMatrix4(ro),this}rotateY(e){return ro.makeRotationY(e),this.applyMatrix4(ro),this}rotateZ(e){return ro.makeRotationZ(e),this.applyMatrix4(ro),this}translate(e,t,n){return ro.makeTranslation(e,t,n),this.applyMatrix4(ro),this}scale(e,t,n){return ro.makeScale(e,t,n),this.applyMatrix4(ro),this}lookAt(e){return zA.lookAt(e),zA.updateMatrix(),this.applyMatrix4(zA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pd).negate(),this.translate(pd.x,pd.y,pd.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new St(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ar);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];Ns.setFromBufferAttribute(s),this.morphTargetsRelative?(sr.addVectors(this.boundingBox.min,Ns.min),this.boundingBox.expandByPoint(sr),sr.addVectors(this.boundingBox.max,Ns.max),this.boundingBox.expandByPoint(sr)):(this.boundingBox.expandByPoint(Ns.min),this.boundingBox.expandByPoint(Ns.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new lr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(e){const n=this.boundingSphere.center;if(Ns.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];km.setFromBufferAttribute(a),this.morphTargetsRelative?(sr.addVectors(Ns.min,km.min),Ns.expandByPoint(sr),sr.addVectors(Ns.max,km.max),Ns.expandByPoint(sr)):(Ns.expandByPoint(km.min),Ns.expandByPoint(km.max))}Ns.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)sr.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(sr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let h=0,f=a.count;h<f;h++)sr.fromBufferAttribute(a,h),c&&(pd.fromBufferAttribute(e,h),sr.add(pd)),r=Math.max(r,n.distanceToSquared(sr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pn(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],c=[];for(let O=0;O<n.count;O++)a[O]=new j,c[O]=new j;const h=new j,f=new j,m=new j,g=new Be,y=new Be,_=new Be,S=new j,A=new j;function x(O,D,N){h.fromBufferAttribute(n,O),f.fromBufferAttribute(n,D),m.fromBufferAttribute(n,N),g.fromBufferAttribute(s,O),y.fromBufferAttribute(s,D),_.fromBufferAttribute(s,N),f.sub(h),m.sub(h),y.sub(g),_.sub(g);const z=1/(y.x*_.y-_.x*y.y);isFinite(z)&&(S.copy(f).multiplyScalar(_.y).addScaledVector(m,-y.y).multiplyScalar(z),A.copy(m).multiplyScalar(y.x).addScaledVector(f,-_.x).multiplyScalar(z),a[O].add(S),a[D].add(S),a[N].add(S),c[O].add(A),c[D].add(A),c[N].add(A))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let O=0,D=C.length;O<D;++O){const N=C[O],z=N.start,ee=N.count;for(let te=z,ce=z+ee;te<ce;te+=3)x(e.getX(te+0),e.getX(te+1),e.getX(te+2))}const T=new j,R=new j,L=new j,B=new j;function k(O){L.fromBufferAttribute(r,O),B.copy(L);const D=a[O];T.copy(D),T.sub(L.multiplyScalar(L.dot(D))).normalize(),R.crossVectors(B,D);const z=R.dot(c[O])<0?-1:1;o.setXYZW(O,T.x,T.y,T.z,z)}for(let O=0,D=C.length;O<D;++O){const N=C[O],z=N.start,ee=N.count;for(let te=z,ce=z+ee;te<ce;te+=3)k(e.getX(te+0)),k(e.getX(te+1)),k(e.getX(te+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Pn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let g=0,y=n.count;g<y;g++)n.setXYZ(g,0,0,0);const r=new j,s=new j,o=new j,a=new j,c=new j,h=new j,f=new j,m=new j;if(e)for(let g=0,y=e.count;g<y;g+=3){const _=e.getX(g+0),S=e.getX(g+1),A=e.getX(g+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,S),o.fromBufferAttribute(t,A),f.subVectors(o,s),m.subVectors(r,s),f.cross(m),a.fromBufferAttribute(n,_),c.fromBufferAttribute(n,S),h.fromBufferAttribute(n,A),a.add(f),c.add(f),h.add(f),n.setXYZ(_,a.x,a.y,a.z),n.setXYZ(S,c.x,c.y,c.z),n.setXYZ(A,h.x,h.y,h.z)}else for(let g=0,y=t.count;g<y;g+=3)r.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),f.subVectors(o,s),m.subVectors(r,s),f.cross(m),n.setXYZ(g+0,f.x,f.y,f.z),n.setXYZ(g+1,f.x,f.y,f.z),n.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)sr.fromBufferAttribute(e,t),sr.normalize(),e.setXYZ(t,sr.x,sr.y,sr.z)}toNonIndexed(){function e(a,c){const h=a.array,f=a.itemSize,m=a.normalized,g=new h.constructor(c.length*f);let y=0,_=0;for(let S=0,A=c.length;S<A;S++){a.isInterleavedBufferAttribute?y=c[S]*a.data.stride+a.offset:y=c[S]*f;for(let x=0;x<f;x++)g[_++]=h[y++]}return new Pn(g,f,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Qt,n=this.index.array,r=this.attributes;for(const a in r){const c=r[a],h=e(c,n);t.setAttribute(a,h)}const s=this.morphAttributes;for(const a in s){const c=[],h=s[a];for(let f=0,m=h.length;f<m;f++){const g=h[f],y=e(g,n);c.push(y)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const h=o[a];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const h=n[c];e.data.attributes[c]=h.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],f=[];for(let m=0,g=h.length;m<g;m++){const y=h[m];f.push(y.toJSON(e.data))}f.length>0&&(r[c]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const h in r){const f=r[h];this.setAttribute(h,f.clone(t))}const s=e.morphAttributes;for(const h in s){const f=[],m=s[h];for(let g=0,y=m.length;g<y;g++)f.push(m[g].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h<f;h++){const m=o[h];this.addGroup(m.start,m.count,m.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ob=new jt,Wu=new Vh,Vv=new lr,ab=new j,Wv=new j,Xv=new j,jv=new j,GA=new j,Yv=new j,lb=new j,Kv=new j;class mi extends Sn{constructor(e=new Qt,t=new Gs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Yv.set(0,0,0);for(let c=0,h=s.length;c<h;c++){const f=a[c],m=s[c];f!==0&&(GA.fromBufferAttribute(m,e),o?Yv.addScaledVector(GA,f):Yv.addScaledVector(GA.sub(t),f))}t.add(Yv)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Vv.copy(n.boundingSphere),Vv.applyMatrix4(s),Wu.copy(e.ray).recast(e.near),!(Vv.containsPoint(Wu.origin)===!1&&(Wu.intersectSphere(Vv,ab)===null||Wu.origin.distanceToSquared(ab)>(e.far-e.near)**2))&&(ob.copy(s).invert(),Wu.copy(e.ray).applyMatrix4(ob),!(n.boundingBox!==null&&Wu.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Wu)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,h=s.attributes.uv,f=s.attributes.uv1,m=s.attributes.normal,g=s.groups,y=s.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,S=g.length;_<S;_++){const A=g[_],x=o[A.materialIndex],C=Math.max(A.start,y.start),T=Math.min(a.count,Math.min(A.start+A.count,y.start+y.count));for(let R=C,L=T;R<L;R+=3){const B=a.getX(R),k=a.getX(R+1),O=a.getX(R+2);r=Jv(this,x,e,n,h,f,m,B,k,O),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=A.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),S=Math.min(a.count,y.start+y.count);for(let A=_,x=S;A<x;A+=3){const C=a.getX(A),T=a.getX(A+1),R=a.getX(A+2);r=Jv(this,o,e,n,h,f,m,C,T,R),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let _=0,S=g.length;_<S;_++){const A=g[_],x=o[A.materialIndex],C=Math.max(A.start,y.start),T=Math.min(c.count,Math.min(A.start+A.count,y.start+y.count));for(let R=C,L=T;R<L;R+=3){const B=R,k=R+1,O=R+2;r=Jv(this,x,e,n,h,f,m,B,k,O),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=A.materialIndex,t.push(r))}}else{const _=Math.max(0,y.start),S=Math.min(c.count,y.start+y.count);for(let A=_,x=S;A<x;A+=3){const C=A,T=A+1,R=A+2;r=Jv(this,o,e,n,h,f,m,C,T,R),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}}}function c5(i,e,t,n,r,s,o,a){let c;if(e.side===Nr?c=n.intersectTriangle(o,s,r,!0,a):c=n.intersectTriangle(r,s,o,e.side===La,a),c===null)return null;Kv.copy(a),Kv.applyMatrix4(i.matrixWorld);const h=t.ray.origin.distanceTo(Kv);return h<t.near||h>t.far?null:{distance:h,point:Kv.clone(),object:i}}function Jv(i,e,t,n,r,s,o,a,c,h){i.getVertexPosition(a,Wv),i.getVertexPosition(c,Xv),i.getVertexPosition(h,jv);const f=c5(i,e,t,n,Wv,Xv,jv,lb);if(f){const m=new j;vs.getBarycoord(lb,Wv,Xv,jv,m),r&&(f.uv=vs.getInterpolatedAttribute(r,a,c,h,m,new Be)),s&&(f.uv1=vs.getInterpolatedAttribute(s,a,c,h,m,new Be)),o&&(f.normal=vs.getInterpolatedAttribute(o,a,c,h,m,new j),f.normal.dot(n.direction)>0&&f.normal.multiplyScalar(-1));const g={a,b:c,c:h,normal:new j,materialIndex:0};vs.getNormal(Wv,Xv,jv,g.normal),f.face=g,f.barycoord=m}return f}class Wh extends Qt{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],h=[],f=[],m=[];let g=0,y=0;_("z","y","x",-1,-1,n,t,e,o,s,0),_("z","y","x",1,-1,n,t,-e,o,s,1),_("x","z","y",1,1,e,n,t,r,o,2),_("x","z","y",1,-1,e,n,-t,r,o,3),_("x","y","z",1,-1,e,t,n,r,s,4),_("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(c),this.setAttribute("position",new St(h,3)),this.setAttribute("normal",new St(f,3)),this.setAttribute("uv",new St(m,2));function _(S,A,x,C,T,R,L,B,k,O,D){const N=R/k,z=L/O,ee=R/2,te=L/2,ce=B/2,K=k+1,oe=O+1;let ae=0,U=0;const Z=new j;for(let q=0;q<oe;q++){const W=q*z-te;for(let se=0;se<K;se++){const _e=se*N-ee;Z[S]=_e*C,Z[A]=W*T,Z[x]=ce,h.push(Z.x,Z.y,Z.z),Z[S]=0,Z[A]=0,Z[x]=B>0?1:-1,f.push(Z.x,Z.y,Z.z),m.push(se/k),m.push(1-q/O),ae+=1}}for(let q=0;q<O;q++)for(let W=0;W<k;W++){const se=g+W+K*q,_e=g+W+K*(q+1),De=g+(W+1)+K*(q+1),ze=g+(W+1)+K*q;c.push(se,_e,ze),c.push(_e,De,ze),U+=6}a.addGroup(y,U,D),y+=U,g+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function xp(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function qr(i){const e={};for(let t=0;t<i.length;t++){const n=xp(i[t]);for(const r in n)e[r]=n[r]}return e}function u5(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function NL(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Tn.workingColorSpace}const FL={clone:xp,merge:qr};var h5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,f5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yo extends Ki{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=h5,this.fragmentShader=f5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=xp(e.uniforms),this.uniformsGroups=u5(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class o0 extends Sn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new jt,this.projectionMatrix=new jt,this.projectionMatrixInverse=new jt,this.coordinateSystem=zs,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Pc=new j,cb=new Be,ub=new Be;class ei extends o0{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_p*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ah*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _p*2*Math.atan(Math.tan(Ah*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Pc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Pc.x,Pc.y).multiplyScalar(-e/Pc.z),Pc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Pc.x,Pc.y).multiplyScalar(-e/Pc.z)}getViewSize(e,t){return this.getViewBounds(e,cb,ub),t.subVectors(ub,cb)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ah*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,h=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*n/h,r*=o.width/c,n*=o.height/h}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const md=-90,gd=1;class OL extends Sn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ei(md,gd,e,t);r.layers=this.layers,this.add(r);const s=new ei(md,gd,e,t);s.layers=this.layers,this.add(s);const o=new ei(md,gd,e,t);o.layers=this.layers,this.add(o);const a=new ei(md,gd,e,t);a.layers=this.layers,this.add(a);const c=new ei(md,gd,e,t);c.layers=this.layers,this.add(c);const h=new ei(md,gd,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,c]=t;for(const h of t)this.remove(h);if(e===zs)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===yp)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,h,f]=this.children,m=e.getRenderTarget(),g=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const S=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,c),e.setRenderTarget(n,4,r),e.render(t,h),n.texture.generateMipmaps=S,e.setRenderTarget(n,5,r),e.render(t,f),e.setRenderTarget(m,g,y),e.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}class a0 extends li{constructor(e=[],t=Ul,n,r,s,o,a,c,h,f){super(e,t,n,r,s,o,a,c,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class kL extends Da{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new a0(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Wh(5,5,5),s=new yo({name:"CubemapFromEquirect",uniforms:xp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Nr,blending:Nl});s.uniforms.tEquirect.value=t;const o=new mi(r,s),a=t.minFilter;return t.minFilter===ho&&(t.minFilter=Ti),new OL(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}class Dl extends Sn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const d5={type:"move"};class Ky{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Dl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Dl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Dl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){o=!0;for(const S of e.hand.values()){const A=t.getJointPose(S,n),x=this._getHandJoint(h,S);A!==null&&(x.matrix.fromArray(A.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=A.radius),x.visible=A!==null}const f=h.joints["index-finger-tip"],m=h.joints["thumb-tip"],g=f.position.distanceTo(m.position),y=.02,_=.005;h.inputState.pinching&&g>y+_?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&g<=y-_&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(d5)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Dl;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Nx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ft(e),this.density=t}clone(){return new Nx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fx{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ft(e),this.near=t,this.far=n}clone(){return new Fx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Ox extends Sn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ws,this.environmentIntensity=1,this.environmentRotation=new ws,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class l0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=kg,this.updateRanges=[],this.version=0,this.uuid=Hs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Zr=new j;class Jc{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Zr.fromBufferAttribute(this,t),Zr.applyMatrix4(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Zr.fromBufferAttribute(this,t),Zr.applyNormalMatrix(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Zr.fromBufferAttribute(this,t),Zr.transformDirection(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=$r(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=$r(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=$r(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=$r(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=$r(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),r=cn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),r=cn(r,this.array),s=cn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Pn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Jc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class US extends Ki{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let vd;const Um=new j,yd=new j,_d=new j,xd=new Be,zm=new Be,UL=new jt,Zv=new j,Gm=new j,qv=new j,hb=new Be,HA=new Be,fb=new Be;class zL extends Sn{constructor(e=new US){if(super(),this.isSprite=!0,this.type="Sprite",vd===void 0){vd=new Qt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new l0(t,5);vd.setIndex([0,1,2,0,2,3]),vd.setAttribute("position",new Jc(n,3,0,!1)),vd.setAttribute("uv",new Jc(n,2,3,!1))}this.geometry=vd,this.material=e,this.center=new Be(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),yd.setFromMatrixScale(this.matrixWorld),UL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_d.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&yd.multiplyScalar(-_d.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;Qv(Zv.set(-.5,-.5,0),_d,o,yd,r,s),Qv(Gm.set(.5,-.5,0),_d,o,yd,r,s),Qv(qv.set(.5,.5,0),_d,o,yd,r,s),hb.set(0,0),HA.set(1,0),fb.set(1,1);let a=e.ray.intersectTriangle(Zv,Gm,qv,!1,Um);if(a===null&&(Qv(Gm.set(-.5,.5,0),_d,o,yd,r,s),HA.set(0,1),a=e.ray.intersectTriangle(Zv,qv,Gm,!1,Um),a===null))return;const c=e.ray.origin.distanceTo(Um);c<e.near||c>e.far||t.push({distance:c,point:Um.clone(),uv:vs.getInterpolation(Um,Zv,Gm,qv,hb,HA,fb,new Be),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Qv(i,e,t,n,r,s){xd.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(zm.x=s*xd.x-r*xd.y,zm.y=r*xd.x+s*xd.y):zm.copy(xd),i.copy(e),i.x+=zm.x,i.y+=zm.y,i.applyMatrix4(UL)}const $v=new j,db=new j;class GL extends Sn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){$v.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo($v);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){$v.setFromMatrixPosition(e.matrixWorld),db.setFromMatrixPosition(this.matrixWorld);const n=$v.distanceTo(db)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const pb=new j,mb=new In,gb=new In,p5=new j,vb=new jt,ey=new j,VA=new lr,yb=new jt,WA=new Vh;class zS extends mi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=D1,this.bindMatrix=new jt,this.bindMatrixInverse=new jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ar),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,ey),this.boundingBox.expandByPoint(ey)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new lr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,ey),this.boundingSphere.expandByPoint(ey)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),VA.copy(this.boundingSphere),VA.applyMatrix4(r),e.ray.intersectsSphere(VA)!==!1&&(yb.copy(r).invert(),WA.copy(e.ray).applyMatrix4(yb),!(this.boundingBox!==null&&WA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,WA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new In,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===D1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===mL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;mb.fromBufferAttribute(r.attributes.skinIndex,e),gb.fromBufferAttribute(r.attributes.skinWeight,e),pb.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=gb.getComponent(s);if(o!==0){const a=mb.getComponent(s);vb.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(p5.copy(pb).applyMatrix4(vb),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class kx extends Sn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Pa extends li{constructor(e=null,t=1,n=1,r,s,o,a,c,h=or,f=or,m,g){super(null,o,a,c,h,f,r,s,m,g),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _b=new jt,m5=new jt;class c0{constructor(e=[],t=[]){this.uuid=Hs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new jt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:m5;_b.multiplyMatrices(a,t[s]),_b.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new c0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Pa(t,e,e,Br,xs);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new kx),this.bones.push(o),this.boneInverses.push(new jt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class Bh extends Pn{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ed=new jt,xb=new jt,ty=[],Eb=new Ar,g5=new jt,Hm=new mi,Vm=new lr;class GS extends mi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Bh(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,g5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ar),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ed),Eb.copy(e.boundingBox).applyMatrix4(Ed),this.boundingBox.union(Eb)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new lr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ed),Vm.copy(e.boundingSphere).applyMatrix4(Ed),this.boundingSphere.union(Vm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Hm.geometry=this.geometry,Hm.material=this.material,Hm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Vm.copy(this.boundingSphere),Vm.applyMatrix4(n),e.ray.intersectsSphere(Vm)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Ed),xb.multiplyMatrices(n,Ed),Hm.matrixWorld=xb,Hm.raycast(e,ty);for(let o=0,a=ty.length;o<a;o++){const c=ty[o];c.instanceId=s,c.object=this,t.push(c)}ty.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Bh(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new Pa(new Float32Array(r*this.count),r,this.count,Rx,xs));const s=this.morphTexture.source.data.data;let o=0;for(let h=0;h<n.length;h++)o+=n[h];const a=this.geometry.morphTargetsRelative?1:1-o,c=r*e;s[c]=a,s.set(n,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const XA=new j,v5=new j,y5=new on;class Tl{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=XA.subVectors(n,t).cross(v5.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(XA),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||y5.getNormalMatrix(e),r=this.coplanarPoint(XA).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Xu=new lr,_5=new Be(.5,.5),ny=new j;class Lp{constructor(e=new Tl,t=new Tl,n=new Tl,r=new Tl,s=new Tl,o=new Tl){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=zs,n=!1){const r=this.planes,s=e.elements,o=s[0],a=s[1],c=s[2],h=s[3],f=s[4],m=s[5],g=s[6],y=s[7],_=s[8],S=s[9],A=s[10],x=s[11],C=s[12],T=s[13],R=s[14],L=s[15];if(r[0].setComponents(h-o,y-f,x-_,L-C).normalize(),r[1].setComponents(h+o,y+f,x+_,L+C).normalize(),r[2].setComponents(h+a,y+m,x+S,L+T).normalize(),r[3].setComponents(h-a,y-m,x-S,L-T).normalize(),n)r[4].setComponents(c,g,A,R).normalize(),r[5].setComponents(h-c,y-g,x-A,L-R).normalize();else if(r[4].setComponents(h-c,y-g,x-A,L-R).normalize(),t===zs)r[5].setComponents(h+c,y+g,x+A,L+R).normalize();else if(t===yp)r[5].setComponents(c,g,A,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Xu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Xu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Xu)}intersectsSprite(e){Xu.center.set(0,0,0);const t=_5.distanceTo(e.center);return Xu.radius=.7071067811865476+t,Xu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xu)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(ny.x=r.normal.x>0?e.max.x:e.min.x,ny.y=r.normal.y>0?e.max.y:e.min.y,ny.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ny)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Ea=new jt,Aa=new Lp;class Ux{constructor(){this.coordinateSystem=zs}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Ea.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Aa.setFromProjectionMatrix(Ea,r.coordinateSystem,r.reversedDepth),Aa.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Ea.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Aa.setFromProjectionMatrix(Ea,r.coordinateSystem,r.reversedDepth),Aa.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Ea.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Aa.setFromProjectionMatrix(Ea,r.coordinateSystem,r.reversedDepth),Aa.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Ea.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Aa.setFromProjectionMatrix(Ea,r.coordinateSystem,r.reversedDepth),Aa.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Ea.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Aa.setFromProjectionMatrix(Ea,r.coordinateSystem,r.reversedDepth),Aa.containsPoint(e))return!0}return!1}clone(){return new Ux}}function jA(i,e){return i-e}function x5(i,e){return i.z-e.z}function E5(i,e){return e.z-i.z}class A5{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=n,a.index=r}reset(){this.list.length=0,this.index=0}}const ds=new jt,w5=new ft(1,1,1),Ab=new Lp,S5=new Ux,iy=new Ar,ju=new lr,Wm=new j,wb=new j,M5=new j,YA=new A5,Lr=new mi,ry=[];function C5(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function Yu(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class HL extends mi{constructor(e,t,n=t*2,r){super(new Qt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Pa(t,e,e,Br,xs);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Pa(t,e,e,s0,zl);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Pa(t,e,e,Br,xs);n.colorSpace=Tn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:c,normalized:h}=o,f=new a.constructor(n*c),m=new Pn(f,c,h);t.setAttribute(s,m)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Pn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ar);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,ds),this.getBoundingBoxAt(s,iy).applyMatrix4(ds),e.union(iy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new lr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,ds),this.getBoundingSphereAt(s,ju).applyMatrix4(ds),e.union(ju)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(jA),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;ds.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(w5.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?o.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(jA),c=this._availableGeometryIds.shift(),s[c]=r):(c=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(c,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=a.vertexStart,h=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const f in n.attributes){const m=t.getAttribute(f),g=n.getAttribute(f);C5(m,g,c);const y=m.itemSize;for(let _=m.count,S=h;_<S;_++){const A=c+_;for(let x=0;x<y;x++)g.setComponent(A,x,0)}g.needsUpdate=!0,g.addUpdateRange(c*y,h*y)}if(r){const f=a.indexStart,m=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let g=0;g<o.count;g++)s.setX(f+g,c+o.getX(g));for(let g=o.count,y=m;g<y;g++)s.setX(f+g,c);s.needsUpdate=!0,s.addUpdateRange(f,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((o,a)=>a).sort((o,a)=>n[o].vertexStart-n[a].vertexStart),s=this.geometry;for(let o=0,a=n.length;o<a;o++){const c=r[o],h=n[c];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:f,vertexStart:m,reservedIndexCount:g}=h,y=s.index,_=y.array,S=e-m;for(let A=f;A<f+g;A++)_[A]=_[A]+S;y.array.copyWithin(t,f,f+g),y.addUpdateRange(t,g),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:f,reservedVertexCount:m}=h,g=s.attributes;for(const y in g){const _=g[y],{array:S,itemSize:A}=_;S.copyWithin(e*A,f*A,(f+m)*A),_.addUpdateRange(e*A,m*A)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Ar,o=n.index,a=n.attributes.position;for(let c=r.start,h=r.start+r.count;c<h;c++){let f=c;o&&(f=o.getX(f)),s.expandByPoint(Wm.fromBufferAttribute(a,f))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new lr;this.getBoundingBoxAt(e,iy),iy.getCenter(s.center);const o=n.index,a=n.attributes.position;let c=0;for(let h=r.start,f=r.start+r.count;h<f;h++){let m=h;o&&(m=o.getX(m)),Wm.fromBufferAttribute(a,m),c=Math.max(c,s.center.distanceToSquared(Wm))}s.radius=Math.sqrt(c),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(jA);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Yu(this._multiDrawCounts,r),Yu(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,c=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Yu(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Yu(a.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),Yu(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...n.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Qt,this._initializeGeometry(s));const o=this.geometry;s.index&&Yu(s.index.array,o.index.array);for(const a in s.attributes)Yu(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Lr.material=this.material,Lr.geometry.index=o.index,Lr.geometry.attributes=o.attributes,Lr.geometry.boundingBox===null&&(Lr.geometry.boundingBox=new Ar),Lr.geometry.boundingSphere===null&&(Lr.geometry.boundingSphere=new lr);for(let a=0,c=n.length;a<c;a++){if(!n[a].visible||!n[a].active)continue;const h=n[a].geometryIndex,f=r[h];Lr.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(a,Lr.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,Lr.geometry.boundingBox),this.getBoundingSphereAt(h,Lr.geometry.boundingSphere),Lr.raycast(e,ry);for(let m=0,g=ry.length;m<g;m++){const y=ry[m];y.object=this,y.batchId=a,t.push(y)}ry.length=0}Lr.material=null,Lr.geometry.index=null,Lr.geometry.attributes={},Lr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._instanceInfo,h=this._multiDrawStarts,f=this._multiDrawCounts,m=this._geometryInfo,g=this.perObjectFrustumCulled,y=this._indirectTexture,_=y.image.data,S=n.isArrayCamera?S5:Ab;g&&!n.isArrayCamera&&(ds.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Ab.setFromProjectionMatrix(ds,n.coordinateSystem,n.reversedDepth));let A=0;if(this.sortObjects){ds.copy(this.matrixWorld).invert(),Wm.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ds),wb.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ds);for(let T=0,R=c.length;T<R;T++)if(c[T].visible&&c[T].active){const L=c[T].geometryIndex;this.getMatrixAt(T,ds),this.getBoundingSphereAt(L,ju).applyMatrix4(ds);let B=!1;if(g&&(B=!S.intersectsSphere(ju,n)),!B){const k=m[L],O=M5.subVectors(ju.center,Wm).dot(wb);YA.push(k.start,k.count,O,T)}}const x=YA.list,C=this.customSort;C===null?x.sort(s.transparent?E5:x5):C.call(this,x,n);for(let T=0,R=x.length;T<R;T++){const L=x[T];h[A]=L.start*a,f[A]=L.count,_[A]=L.index,A++}YA.reset()}else for(let x=0,C=c.length;x<C;x++)if(c[x].visible&&c[x].active){const T=c[x].geometryIndex;let R=!1;if(g&&(this.getMatrixAt(x,ds),this.getBoundingSphereAt(T,ju).applyMatrix4(ds),R=!S.intersectsSphere(ju,n)),!R){const L=m[T];h[A]=L.start*a,f[A]=L.count,_[A]=x,A++}}y.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Fr extends Ki{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ft(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const q_=new j,Q_=new j,Sb=new jt,Xm=new Vh,sy=new lr,KA=new j,Mb=new j;class Gl extends Sn{constructor(e=new Qt,t=new Fr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)q_.fromBufferAttribute(t,r-1),Q_.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=q_.distanceTo(Q_);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),sy.copy(n.boundingSphere),sy.applyMatrix4(r),sy.radius+=s,e.ray.intersectsSphere(sy)===!1)return;Sb.copy(r).invert(),Xm.copy(e.ray).applyMatrix4(Sb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,h=this.isLineSegments?2:1,f=n.index,g=n.attributes.position;if(f!==null){const y=Math.max(0,o.start),_=Math.min(f.count,o.start+o.count);for(let S=y,A=_-1;S<A;S+=h){const x=f.getX(S),C=f.getX(S+1),T=oy(this,e,Xm,c,x,C,S);T&&t.push(T)}if(this.isLineLoop){const S=f.getX(_-1),A=f.getX(y),x=oy(this,e,Xm,c,S,A,_-1);x&&t.push(x)}}else{const y=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let S=y,A=_-1;S<A;S+=h){const x=oy(this,e,Xm,c,S,S+1,S);x&&t.push(x)}if(this.isLineLoop){const S=oy(this,e,Xm,c,_-1,y,_-1);S&&t.push(S)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function oy(i,e,t,n,r,s,o){const a=i.geometry.attributes.position;if(q_.fromBufferAttribute(a,r),Q_.fromBufferAttribute(a,s),t.distanceSqToSegment(q_,Q_,KA,Mb)>n)return;KA.applyMatrix4(i.matrixWorld);const h=e.ray.origin.distanceTo(KA);if(!(h<e.near||h>e.far))return{distance:h,point:Mb.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const Cb=new j,Tb=new j;class oa extends Gl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)Cb.fromBufferAttribute(t,r),Tb.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+Cb.distanceTo(Tb);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class HS extends Gl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class u0 extends Ki{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const bb=new jt,F1=new Vh,ay=new lr,ly=new j;class zx extends Sn{constructor(e=new Qt,t=new u0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),ay.copy(n.boundingSphere),ay.applyMatrix4(r),ay.radius+=s,e.ray.intersectsSphere(ay)===!1)return;bb.copy(r).invert(),F1.copy(e.ray).applyMatrix4(bb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,h=n.index,m=n.attributes.position;if(h!==null){const g=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);for(let _=g,S=y;_<S;_++){const A=h.getX(_);ly.fromBufferAttribute(m,A),Rb(ly,A,c,r,e,t,this)}}else{const g=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let _=g,S=y;_<S;_++)ly.fromBufferAttribute(m,_),Rb(ly,_,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Rb(i,e,t,n,r,s,o){const a=F1.distanceSqToPoint(i);if(a<t){const c=new j;F1.closestPointToPoint(i,c),c.applyMatrix4(n);const h=r.ray.origin.distanceTo(c);if(h<r.near||h>r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class VL extends li{constructor(e,t,n,r,s=Ti,o=Ti,a,c,h){super(e,t,n,r,s,o,a,c,h),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const f=this;function m(){f.needsUpdate=!0,f._requestVideoFrameCallbackId=e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(m))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class T5 extends VL{constructor(e,t,n,r,s,o,a,c){super({},e,t,n,r,s,o,a,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class b5 extends li{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=or,this.minFilter=or,this.generateMipmaps=!1,this.needsUpdate=!0}}class Gx extends li{constructor(e,t,n,r,s,o,a,c,h,f,m,g){super(null,o,a,c,h,f,r,s,m,g),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class R5 extends Gx{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Us,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class I5 extends Gx{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ul),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class P5 extends li{constructor(e,t,n,r,s,o,a,c,h){super(e,t,n,r,s,o,a,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class VS extends li{constructor(e,t,n=zl,r,s,o,a=or,c=or,h,f=pp,m=1){if(f!==pp&&f!==mp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const g={width:e,height:t,depth:m};super(g,r,s,o,a,c,f,n,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Vc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class WS extends li{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Hx extends Qt{constructor(e=1,t=1,n=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],a=[],c=[],h=[],f=t/2,m=Math.PI/2*e,g=t,y=2*m+g,_=n*2+s,S=r+1,A=new j,x=new j;for(let C=0;C<=_;C++){let T=0,R=0,L=0,B=0;if(C<=n){const D=C/n,N=D*Math.PI/2;R=-f-e*Math.cos(N),L=e*Math.sin(N),B=-e*Math.cos(N),T=D*m}else if(C<=n+s){const D=(C-n)/s;R=-f+D*t,L=e,B=0,T=m+D*g}else{const D=(C-n-s)/n,N=D*Math.PI/2;R=f+e*Math.sin(N),L=e*Math.cos(N),B=e*Math.sin(N),T=m+g+D*m}const k=Math.max(0,Math.min(1,T/y));let O=0;C===0?O=.5/r:C===_&&(O=-.5/r);for(let D=0;D<=r;D++){const N=D/r,z=N*Math.PI*2,ee=Math.sin(z),te=Math.cos(z);x.x=-L*te,x.y=R,x.z=L*ee,a.push(x.x,x.y,x.z),A.set(-L*te,B,L*ee),A.normalize(),c.push(A.x,A.y,A.z),h.push(N+O,k)}if(C>0){const D=(C-1)*S;for(let N=0;N<r;N++){const z=D+N,ee=D+N+1,te=C*S+N,ce=C*S+N+1;o.push(z,ee,te),o.push(ee,ce,te)}}}this.setIndex(o),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(c,3)),this.setAttribute("uv",new St(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hx(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Vx extends Qt{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],c=[],h=new j,f=new Be;o.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let m=0,g=3;m<=t;m++,g+=3){const y=n+m/t*r;h.x=e*Math.cos(y),h.y=e*Math.sin(y),o.push(h.x,h.y,h.z),a.push(0,0,1),f.x=(o[g]/e+1)/2,f.y=(o[g+1]/e+1)/2,c.push(f.x,f.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new St(o,3)),this.setAttribute("normal",new St(a,3)),this.setAttribute("uv",new St(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class h0 extends Qt{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c};const h=this;r=Math.floor(r),s=Math.floor(s);const f=[],m=[],g=[],y=[];let _=0;const S=[],A=n/2;let x=0;C(),o===!1&&(e>0&&T(!0),t>0&&T(!1)),this.setIndex(f),this.setAttribute("position",new St(m,3)),this.setAttribute("normal",new St(g,3)),this.setAttribute("uv",new St(y,2));function C(){const R=new j,L=new j;let B=0;const k=(t-e)/n;for(let O=0;O<=s;O++){const D=[],N=O/s,z=N*(t-e)+e;for(let ee=0;ee<=r;ee++){const te=ee/r,ce=te*c+a,K=Math.sin(ce),oe=Math.cos(ce);L.x=z*K,L.y=-N*n+A,L.z=z*oe,m.push(L.x,L.y,L.z),R.set(K,k,oe).normalize(),g.push(R.x,R.y,R.z),y.push(te,1-N),D.push(_++)}S.push(D)}for(let O=0;O<r;O++)for(let D=0;D<s;D++){const N=S[D][O],z=S[D+1][O],ee=S[D+1][O+1],te=S[D][O+1];(e>0||D!==0)&&(f.push(N,z,te),B+=3),(t>0||D!==s-1)&&(f.push(z,ee,te),B+=3)}h.addGroup(x,B,0),x+=B}function T(R){const L=_,B=new Be,k=new j;let O=0;const D=R===!0?e:t,N=R===!0?1:-1;for(let ee=1;ee<=r;ee++)m.push(0,A*N,0),g.push(0,N,0),y.push(.5,.5),_++;const z=_;for(let ee=0;ee<=r;ee++){const ce=ee/r*c+a,K=Math.cos(ce),oe=Math.sin(ce);k.x=D*oe,k.y=A*N,k.z=D*K,m.push(k.x,k.y,k.z),g.push(0,N,0),B.x=K*.5+.5,B.y=oe*.5*N+.5,y.push(B.x,B.y),_++}for(let ee=0;ee<r;ee++){const te=L+ee,ce=z+ee;R===!0?f.push(ce,ce+1,te):f.push(ce+1,ce,te),O+=3}h.addGroup(x,O,R===!0?1:2),x+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class f0 extends h0{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new f0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $c extends Qt{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];a(r),h(n),f(),this.setAttribute("position",new St(s,3)),this.setAttribute("normal",new St(s.slice(),3)),this.setAttribute("uv",new St(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(C){const T=new j,R=new j,L=new j;for(let B=0;B<t.length;B+=3)y(t[B+0],T),y(t[B+1],R),y(t[B+2],L),c(T,R,L,C)}function c(C,T,R,L){const B=L+1,k=[];for(let O=0;O<=B;O++){k[O]=[];const D=C.clone().lerp(R,O/B),N=T.clone().lerp(R,O/B),z=B-O;for(let ee=0;ee<=z;ee++)ee===0&&O===B?k[O][ee]=D:k[O][ee]=D.clone().lerp(N,ee/z)}for(let O=0;O<B;O++)for(let D=0;D<2*(B-O)-1;D++){const N=Math.floor(D/2);D%2===0?(g(k[O][N+1]),g(k[O+1][N]),g(k[O][N])):(g(k[O][N+1]),g(k[O+1][N+1]),g(k[O+1][N]))}}function h(C){const T=new j;for(let R=0;R<s.length;R+=3)T.x=s[R+0],T.y=s[R+1],T.z=s[R+2],T.normalize().multiplyScalar(C),s[R+0]=T.x,s[R+1]=T.y,s[R+2]=T.z}function f(){const C=new j;for(let T=0;T<s.length;T+=3){C.x=s[T+0],C.y=s[T+1],C.z=s[T+2];const R=A(C)/2/Math.PI+.5,L=x(C)/Math.PI+.5;o.push(R,1-L)}_(),m()}function m(){for(let C=0;C<o.length;C+=6){const T=o[C+0],R=o[C+2],L=o[C+4],B=Math.max(T,R,L),k=Math.min(T,R,L);B>.9&&k<.1&&(T<.2&&(o[C+0]+=1),R<.2&&(o[C+2]+=1),L<.2&&(o[C+4]+=1))}}function g(C){s.push(C.x,C.y,C.z)}function y(C,T){const R=C*3;T.x=e[R+0],T.y=e[R+1],T.z=e[R+2]}function _(){const C=new j,T=new j,R=new j,L=new j,B=new Be,k=new Be,O=new Be;for(let D=0,N=0;D<s.length;D+=9,N+=6){C.set(s[D+0],s[D+1],s[D+2]),T.set(s[D+3],s[D+4],s[D+5]),R.set(s[D+6],s[D+7],s[D+8]),B.set(o[N+0],o[N+1]),k.set(o[N+2],o[N+3]),O.set(o[N+4],o[N+5]),L.copy(C).add(T).add(R).divideScalar(3);const z=A(L);S(B,N+0,C,z),S(k,N+2,T,z),S(O,N+4,R,z)}}function S(C,T,R,L){L<0&&C.x===1&&(o[T]=C.x-1),R.x===0&&R.z===0&&(o[T]=L/2/Math.PI+.5)}function A(C){return Math.atan2(C.z,-C.x)}function x(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $c(e.vertices,e.indices,e.radius,e.details)}}class Wx extends $c{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wx(e.radius,e.detail)}}const cy=new j,uy=new j,JA=new j,hy=new vs;class WL extends Qt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Ah*t),o=e.getIndex(),a=e.getAttribute("position"),c=o?o.count:a.count,h=[0,0,0],f=["a","b","c"],m=new Array(3),g={},y=[];for(let _=0;_<c;_+=3){o?(h[0]=o.getX(_),h[1]=o.getX(_+1),h[2]=o.getX(_+2)):(h[0]=_,h[1]=_+1,h[2]=_+2);const{a:S,b:A,c:x}=hy;if(S.fromBufferAttribute(a,h[0]),A.fromBufferAttribute(a,h[1]),x.fromBufferAttribute(a,h[2]),hy.getNormal(JA),m[0]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,m[1]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,m[2]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let C=0;C<3;C++){const T=(C+1)%3,R=m[C],L=m[T],B=hy[f[C]],k=hy[f[T]],O=`${R}_${L}`,D=`${L}_${R}`;D in g&&g[D]?(JA.dot(g[D].normal)<=s&&(y.push(B.x,B.y,B.z),y.push(k.x,k.y,k.z)),g[D]=null):O in g||(g[O]={index0:h[C],index1:h[T],normal:JA.clone()})}}for(const _ in g)if(g[_]){const{index0:S,index1:A}=g[_];cy.fromBufferAttribute(a,S),uy.fromBufferAttribute(a,A),y.push(cy.x,cy.y,cy.z),y.push(uy.x,uy.y,uy.z)}this.setAttribute("position",new St(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class aa{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,c=s-1,h;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),h=n[r]-o,h<0)a=r+1;else if(h>0)c=r-1;else{c=r;break}if(r=c,n[r]===o)return r/(s-1);const f=n[r],g=n[r+1]-f,y=(o-f)/g;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new Be:new j);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new j,r=[],s=[],o=[],a=new j,c=new jt;for(let y=0;y<=e;y++){const _=y/e;r[y]=this.getTangentAt(_,new j)}s[0]=new j,o[0]=new j;let h=Number.MAX_VALUE;const f=Math.abs(r[0].x),m=Math.abs(r[0].y),g=Math.abs(r[0].z);f<=h&&(h=f,n.set(1,0,0)),m<=h&&(h=m,n.set(0,1,0)),g<=h&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),a.crossVectors(r[y-1],r[y]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(Yt(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(a,_))}o[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(Yt(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(y=-y);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(r[_],y*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Xx extends aa{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t=new Be){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),h=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),m=Math.sin(this.aRotation),g=c-this.aX,y=h-this.aY;c=g*f-y*m+this.aX,h=g*m+y*f+this.aY}return n.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class XL extends Xx{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function XS(){let i=0,e=0,t=0,n=0;function r(s,o,a,c){i=s,e=a,t=-3*s+3*o-2*a-c,n=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,h){r(o,a,h*(a-s),h*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,h,f,m){let g=(o-s)/h-(a-s)/(h+f)+(a-o)/f,y=(a-o)/f-(c-o)/(f+m)+(c-a)/m;g*=f,y*=f,r(o,a,g,y)},calc:function(s){const o=s*s,a=o*s;return i+e*s+t*o+n*a}}}const fy=new j,ZA=new XS,qA=new XS,QA=new XS;class jL extends aa{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new j){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let h,f;this.closed||a>0?h=r[(a-1)%s]:(fy.subVectors(r[0],r[1]).add(r[0]),h=fy);const m=r[a%s],g=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(fy.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=fy),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(h.distanceToSquared(m),y),S=Math.pow(m.distanceToSquared(g),y),A=Math.pow(g.distanceToSquared(f),y);S<1e-4&&(S=1),_<1e-4&&(_=S),A<1e-4&&(A=S),ZA.initNonuniformCatmullRom(h.x,m.x,g.x,f.x,_,S,A),qA.initNonuniformCatmullRom(h.y,m.y,g.y,f.y,_,S,A),QA.initNonuniformCatmullRom(h.z,m.z,g.z,f.z,_,S,A)}else this.curveType==="catmullrom"&&(ZA.initCatmullRom(h.x,m.x,g.x,f.x,this.tension),qA.initCatmullRom(h.y,m.y,g.y,f.y,this.tension),QA.initCatmullRom(h.z,m.z,g.z,f.z,this.tension));return n.set(ZA.calc(c),qA.calc(c),QA.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new j().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ib(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,a=i*i,c=i*a;return(2*t-2*n+s+o)*c+(-3*t+3*n-2*s-o)*a+s*i+t}function L5(i,e){const t=1-i;return t*t*e}function D5(i,e){return 2*(1-i)*i*e}function B5(i,e){return i*i*e}function wg(i,e,t,n){return L5(i,e)+D5(i,t)+B5(i,n)}function N5(i,e){const t=1-i;return t*t*t*e}function F5(i,e){const t=1-i;return 3*t*t*i*e}function O5(i,e){return 3*(1-i)*i*i*e}function k5(i,e){return i*i*i*e}function Sg(i,e,t,n,r){return N5(i,e)+F5(i,t)+O5(i,n)+k5(i,r)}class jS extends aa{constructor(e=new Be,t=new Be,n=new Be,r=new Be){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Be){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Sg(e,r.x,s.x,o.x,a.x),Sg(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YL extends aa{constructor(e=new j,t=new j,n=new j,r=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new j){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Sg(e,r.x,s.x,o.x,a.x),Sg(e,r.y,s.y,o.y,a.y),Sg(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YS extends aa{constructor(e=new Be,t=new Be){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Be){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Be){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KL extends aa{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KS extends aa{constructor(e=new Be,t=new Be,n=new Be){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Be){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(wg(e,r.x,s.x,o.x),wg(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JS extends aa{constructor(e=new j,t=new j,n=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new j){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(wg(e,r.x,s.x,o.x),wg(e,r.y,s.y,o.y),wg(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZS extends aa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Be){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[o===0?o:o-1],h=r[o],f=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return n.set(Ib(a,c.x,h.x,f.x,m.x),Ib(a,c.y,h.y,f.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Be().fromArray(r))}return this}}var $_=Object.freeze({__proto__:null,ArcCurve:XL,CatmullRomCurve3:jL,CubicBezierCurve:jS,CubicBezierCurve3:YL,EllipseCurve:Xx,LineCurve:YS,LineCurve3:KL,QuadraticBezierCurve:KS,QuadraticBezierCurve3:JS,SplineCurve:ZS});class JL extends aa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new $_[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],c=a.getLength(),h=c===0?0:1-o/c;return a.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let h=0;h<c.length;h++){const f=c[h];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new $_[r.type]().fromJSON(r))}return this}}class ex extends JL{constructor(e){super(),this.type="Path",this.currentPoint=new Be,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new YS(this.currentPoint.clone(),new Be(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new KS(this.currentPoint.clone(),new Be(e,t),new Be(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new jS(this.currentPoint.clone(),new Be(e,t),new Be(n,r),new Be(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new ZS(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,c){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,n,r,s,o,a,c),this}absellipse(e,t,n,r,s,o,a,c){const h=new Xx(e,t,n,r,s,o,a,c);if(this.curves.length>0){const m=h.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Sh extends ex{constructor(e){super(e),this.uuid=Hs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new ex().fromJSON(r))}return this}}function U5(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=ZL(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,h;if(n&&(s=W5(i,e,s,t)),i.length>80*t){a=1/0,c=1/0;let f=-1/0,m=-1/0;for(let g=t;g<r;g+=t){const y=i[g],_=i[g+1];y<a&&(a=y),_<c&&(c=_),y>f&&(f=y),_>m&&(m=_)}h=Math.max(f-a,m-c),h=h!==0?32767/h:0}return Gg(s,o,t,a,c,h,0),o}function ZL(i,e,t,n,r){let s;if(r===tV(i,e,t,n)>0)for(let o=e;o<t;o+=n)s=Pb(o/n|0,i[o],i[o+1],s);else for(let o=t-n;o>=e;o-=n)s=Pb(o/n|0,i[o],i[o+1],s);return s&&Ep(s,s.next)&&(Vg(s),s=s.next),s}function Nh(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Ep(t,t.next)||pi(t.prev,t,t.next)===0)){if(Vg(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Gg(i,e,t,n,r,s,o){if(!i)return;!o&&s&&J5(i,n,r,s);let a=i;for(;i.prev!==i.next;){const c=i.prev,h=i.next;if(s?G5(i,n,r,s):z5(i)){e.push(c.i,i.i,h.i),Vg(i),i=h.next,a=h.next;continue}if(i=h,i===a){o?o===1?(i=H5(Nh(i),e),Gg(i,e,t,n,r,s,2)):o===2&&V5(i,e,t,n,r,s):Gg(Nh(i),e,t,n,r,s,1);break}}}function z5(i){const e=i.prev,t=i,n=i.next;if(pi(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,c=t.y,h=n.y,f=Math.min(r,s,o),m=Math.min(a,c,h),g=Math.max(r,s,o),y=Math.max(a,c,h);let _=n.next;for(;_!==e;){if(_.x>=f&&_.x<=g&&_.y>=m&&_.y<=y&&cg(r,a,s,c,o,h,_.x,_.y)&&pi(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function G5(i,e,t,n){const r=i.prev,s=i,o=i.next;if(pi(r,s,o)>=0)return!1;const a=r.x,c=s.x,h=o.x,f=r.y,m=s.y,g=o.y,y=Math.min(a,c,h),_=Math.min(f,m,g),S=Math.max(a,c,h),A=Math.max(f,m,g),x=O1(y,_,e,t,n),C=O1(S,A,e,t,n);let T=i.prevZ,R=i.nextZ;for(;T&&T.z>=x&&R&&R.z<=C;){if(T.x>=y&&T.x<=S&&T.y>=_&&T.y<=A&&T!==r&&T!==o&&cg(a,f,c,m,h,g,T.x,T.y)&&pi(T.prev,T,T.next)>=0||(T=T.prevZ,R.x>=y&&R.x<=S&&R.y>=_&&R.y<=A&&R!==r&&R!==o&&cg(a,f,c,m,h,g,R.x,R.y)&&pi(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;T&&T.z>=x;){if(T.x>=y&&T.x<=S&&T.y>=_&&T.y<=A&&T!==r&&T!==o&&cg(a,f,c,m,h,g,T.x,T.y)&&pi(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;R&&R.z<=C;){if(R.x>=y&&R.x<=S&&R.y>=_&&R.y<=A&&R!==r&&R!==o&&cg(a,f,c,m,h,g,R.x,R.y)&&pi(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function H5(i,e){let t=i;do{const n=t.prev,r=t.next.next;!Ep(n,r)&&QL(n,t,t.next,r)&&Hg(n,r)&&Hg(r,n)&&(e.push(n.i,t.i,r.i),Vg(t),Vg(t.next),t=i=r),t=t.next}while(t!==i);return Nh(t)}function V5(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Q5(o,a)){let c=$L(o,a);o=Nh(o,o.next),c=Nh(c,c.next),Gg(o,e,t,n,r,s,0),Gg(c,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function W5(i,e,t,n){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*n,c=s<o-1?e[s+1]*n:i.length,h=ZL(i,a,c,n,!1);h===h.next&&(h.steiner=!0),r.push(q5(h))}r.sort(X5);for(let s=0;s<r.length;s++)t=j5(r[s],t);return t}function X5(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function j5(i,e){const t=Y5(i,e);if(!t)return e;const n=$L(t,i);return Nh(n,n.next),Nh(t,t.next)}function Y5(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,o;if(Ep(i,t))return t;do{if(Ep(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const m=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=n&&m>s&&(s=m,o=t.x<t.next.x?t:t.next,m===n))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,c=o.x,h=o.y;let f=1/0;t=o;do{if(n>=t.x&&t.x>=c&&n!==t.x&&qL(r<h?n:s,r,c,h,r<h?s:n,r,t.x,t.y)){const m=Math.abs(r-t.y)/(n-t.x);Hg(t,i)&&(m<f||m===f&&(t.x>o.x||t.x===o.x&&K5(o,t)))&&(o=t,f=m)}t=t.next}while(t!==a);return o}function K5(i,e){return pi(i.prev,i,e.prev)<0&&pi(e.next,i,i.next)<0}function J5(i,e,t,n){let r=i;do r.z===0&&(r.z=O1(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,Z5(r)}function Z5(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let o=n,a=0;for(let h=0;h<t&&(a++,o=o.nextZ,!!o);h++);let c=t;for(;a>0||c>0&&o;)a!==0&&(c===0||!o||n.z<=o.z)?(r=n,n=n.nextZ,a--):(r=o,o=o.nextZ,c--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=o}s.nextZ=null,t*=2}while(e>1);return i}function O1(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function q5(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function qL(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function cg(i,e,t,n,r,s,o,a){return!(i===o&&e===a)&&qL(i,e,t,n,r,s,o,a)}function Q5(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!$5(i,e)&&(Hg(i,e)&&Hg(e,i)&&eV(i,e)&&(pi(i.prev,i,e.prev)||pi(i,e.prev,e))||Ep(i,e)&&pi(i.prev,i,i.next)>0&&pi(e.prev,e,e.next)>0)}function pi(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Ep(i,e){return i.x===e.x&&i.y===e.y}function QL(i,e,t,n){const r=py(pi(i,e,t)),s=py(pi(i,e,n)),o=py(pi(t,n,i)),a=py(pi(t,n,e));return!!(r!==s&&o!==a||r===0&&dy(i,t,e)||s===0&&dy(i,n,e)||o===0&&dy(t,i,n)||a===0&&dy(t,e,n))}function dy(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function py(i){return i>0?1:i<0?-1:0}function $5(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&QL(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function Hg(i,e){return pi(i.prev,i,i.next)<0?pi(i,e,i.next)>=0&&pi(i,i.prev,e)>=0:pi(i,e,i.prev)<0||pi(i,i.next,e)<0}function eV(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function $L(i,e){const t=k1(i.i,i.x,i.y),n=k1(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Pb(i,e,t,n){const r=k1(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Vg(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function k1(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function tV(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class nV{static triangulate(e,t,n=2){return U5(e,t,n)}}class ta{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return ta.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];Lb(e),Db(n,e);let o=e.length;t.forEach(Lb);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,Db(n,t[c]);const a=nV.triangulate(n,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function Lb(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function Db(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class jx extends Qt{constructor(e=new Sh([new Be(.5,.5),new Be(-.5,.5),new Be(-.5,-.5),new Be(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++){const h=e[a];o(h)}this.setAttribute("position",new St(r,3)),this.setAttribute("uv",new St(s,2)),this.computeVertexNormals();function o(a){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:y-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:iV;let T,R=!1,L,B,k,O;x&&(T=x.getSpacedPoints(f),R=!0,g=!1,L=x.computeFrenetFrames(f,!1),B=new j,k=new j,O=new j),g||(A=0,y=0,_=0,S=0);const D=a.extractPoints(h);let N=D.shape;const z=D.holes;if(!ta.isClockWise(N)){N=N.reverse();for(let Oe=0,Le=z.length;Oe<Le;Oe++){const Pe=z[Oe];ta.isClockWise(Pe)&&(z[Oe]=Pe.reverse())}}function te(Oe){const Pe=10000000000000001e-36;let Re=Oe[0];for(let Qe=1;Qe<=Oe.length;Qe++){const Ve=Qe%Oe.length,je=Oe[Ve],Rt=je.x-Re.x,Dt=je.y-Re.y,Y=Rt*Rt+Dt*Dt,H=Math.max(Math.abs(je.x),Math.abs(je.y),Math.abs(Re.x),Math.abs(Re.y)),ve=Pe*H*H;if(Y<=ve){Oe.splice(Ve,1),Qe--;continue}Re=je}}te(N),z.forEach(te);const ce=z.length,K=N;for(let Oe=0;Oe<ce;Oe++){const Le=z[Oe];N=N.concat(Le)}function oe(Oe,Le,Pe){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),Oe.clone().addScaledVector(Le,Pe)}const ae=N.length;function U(Oe,Le,Pe){let Re,Qe,Ve;const je=Oe.x-Le.x,Rt=Oe.y-Le.y,Dt=Pe.x-Oe.x,Y=Pe.y-Oe.y,H=je*je+Rt*Rt,ve=je*Y-Rt*Dt;if(Math.abs(ve)>Number.EPSILON){const Ce=Math.sqrt(H),Fe=Math.sqrt(Dt*Dt+Y*Y),be=Le.x-Rt/Ce,Et=Le.y+je/Ce,et=Pe.x-Y/Fe,gt=Pe.y+Dt/Fe,At=((et-be)*Y-(gt-Et)*Dt)/(je*Y-Rt*Dt);Re=be+je*At-Oe.x,Qe=Et+Rt*At-Oe.y;const Ke=Re*Re+Qe*Qe;if(Ke<=2)return new Be(Re,Qe);Ve=Math.sqrt(Ke/2)}else{let Ce=!1;je>Number.EPSILON?Dt>Number.EPSILON&&(Ce=!0):je<-Number.EPSILON?Dt<-Number.EPSILON&&(Ce=!0):Math.sign(Rt)===Math.sign(Y)&&(Ce=!0),Ce?(Re=-Rt,Qe=je,Ve=Math.sqrt(H)):(Re=je,Qe=Rt,Ve=Math.sqrt(H/2))}return new Be(Re/Ve,Qe/Ve)}const Z=[];for(let Oe=0,Le=K.length,Pe=Le-1,Re=Oe+1;Oe<Le;Oe++,Pe++,Re++)Pe===Le&&(Pe=0),Re===Le&&(Re=0),Z[Oe]=U(K[Oe],K[Pe],K[Re]);const q=[];let W,se=Z.concat();for(let Oe=0,Le=ce;Oe<Le;Oe++){const Pe=z[Oe];W=[];for(let Re=0,Qe=Pe.length,Ve=Qe-1,je=Re+1;Re<Qe;Re++,Ve++,je++)Ve===Qe&&(Ve=0),je===Qe&&(je=0),W[Re]=U(Pe[Re],Pe[Ve],Pe[je]);q.push(W),se=se.concat(W)}let _e;if(A===0)_e=ta.triangulateShape(K,z);else{const Oe=[],Le=[];for(let Pe=0;Pe<A;Pe++){const Re=Pe/A,Qe=y*Math.cos(Re*Math.PI/2),Ve=_*Math.sin(Re*Math.PI/2)+S;for(let je=0,Rt=K.length;je<Rt;je++){const Dt=oe(K[je],Z[je],Ve);We(Dt.x,Dt.y,-Qe),Re===0&&Oe.push(Dt)}for(let je=0,Rt=ce;je<Rt;je++){const Dt=z[je];W=q[je];const Y=[];for(let H=0,ve=Dt.length;H<ve;H++){const Ce=oe(Dt[H],W[H],Ve);We(Ce.x,Ce.y,-Qe),Re===0&&Y.push(Ce)}Re===0&&Le.push(Y)}}_e=ta.triangulateShape(Oe,Le)}const De=_e.length,ze=_+S;for(let Oe=0;Oe<ae;Oe++){const Le=g?oe(N[Oe],se[Oe],ze):N[Oe];R?(k.copy(L.normals[0]).multiplyScalar(Le.x),B.copy(L.binormals[0]).multiplyScalar(Le.y),O.copy(T[0]).add(k).add(B),We(O.x,O.y,O.z)):We(Le.x,Le.y,0)}for(let Oe=1;Oe<=f;Oe++)for(let Le=0;Le<ae;Le++){const Pe=g?oe(N[Le],se[Le],ze):N[Le];R?(k.copy(L.normals[Oe]).multiplyScalar(Pe.x),B.copy(L.binormals[Oe]).multiplyScalar(Pe.y),O.copy(T[Oe]).add(k).add(B),We(O.x,O.y,O.z)):We(Pe.x,Pe.y,m/f*Oe)}for(let Oe=A-1;Oe>=0;Oe--){const Le=Oe/A,Pe=y*Math.cos(Le*Math.PI/2),Re=_*Math.sin(Le*Math.PI/2)+S;for(let Qe=0,Ve=K.length;Qe<Ve;Qe++){const je=oe(K[Qe],Z[Qe],Re);We(je.x,je.y,m+Pe)}for(let Qe=0,Ve=z.length;Qe<Ve;Qe++){const je=z[Qe];W=q[Qe];for(let Rt=0,Dt=je.length;Rt<Dt;Rt++){const Y=oe(je[Rt],W[Rt],Re);R?We(Y.x,Y.y+T[f-1].y,T[f-1].x+Pe):We(Y.x,Y.y,m+Pe)}}}de(),ge();function de(){const Oe=r.length/3;if(g){let Le=0,Pe=ae*Le;for(let Re=0;Re<De;Re++){const Qe=_e[Re];He(Qe[2]+Pe,Qe[1]+Pe,Qe[0]+Pe)}Le=f+A*2,Pe=ae*Le;for(let Re=0;Re<De;Re++){const Qe=_e[Re];He(Qe[0]+Pe,Qe[1]+Pe,Qe[2]+Pe)}}else{for(let Le=0;Le<De;Le++){const Pe=_e[Le];He(Pe[2],Pe[1],Pe[0])}for(let Le=0;Le<De;Le++){const Pe=_e[Le];He(Pe[0]+ae*f,Pe[1]+ae*f,Pe[2]+ae*f)}}n.addGroup(Oe,r.length/3-Oe,0)}function ge(){const Oe=r.length/3;let Le=0;Ue(K,Le),Le+=K.length;for(let Pe=0,Re=z.length;Pe<Re;Pe++){const Qe=z[Pe];Ue(Qe,Le),Le+=Qe.length}n.addGroup(Oe,r.length/3-Oe,1)}function Ue(Oe,Le){let Pe=Oe.length;for(;--Pe>=0;){const Re=Pe;let Qe=Pe-1;Qe<0&&(Qe=Oe.length-1);for(let Ve=0,je=f+A*2;Ve<je;Ve++){const Rt=ae*Ve,Dt=ae*(Ve+1),Y=Le+Re+Rt,H=Le+Qe+Rt,ve=Le+Qe+Dt,Ce=Le+Re+Dt;rt(Y,H,ve,Ce)}}}function We(Oe,Le,Pe){c.push(Oe),c.push(Le),c.push(Pe)}function He(Oe,Le,Pe){zt(Oe),zt(Le),zt(Pe);const Re=r.length/3,Qe=C.generateTopUV(n,r,Re-3,Re-2,Re-1);Q(Qe[0]),Q(Qe[1]),Q(Qe[2])}function rt(Oe,Le,Pe,Re){zt(Oe),zt(Le),zt(Re),zt(Le),zt(Pe),zt(Re);const Qe=r.length/3,Ve=C.generateSideWallUV(n,r,Qe-6,Qe-3,Qe-2,Qe-1);Q(Ve[0]),Q(Ve[1]),Q(Ve[3]),Q(Ve[1]),Q(Ve[2]),Q(Ve[3])}function zt(Oe){r.push(c[Oe*3+0]),r.push(c[Oe*3+1]),r.push(c[Oe*3+2])}function Q(Oe){s.push(Oe.x),s.push(Oe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return rV(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new $_[r.type]().fromJSON(r)),new jx(n,e.options)}}const iV={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],a=e[n*3],c=e[n*3+1],h=e[r*3],f=e[r*3+1];return[new Be(s,o),new Be(a,c),new Be(h,f)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],a=e[t*3+1],c=e[t*3+2],h=e[n*3],f=e[n*3+1],m=e[n*3+2],g=e[r*3],y=e[r*3+1],_=e[r*3+2],S=e[s*3],A=e[s*3+1],x=e[s*3+2];return Math.abs(a-f)<Math.abs(o-h)?[new Be(o,1-c),new Be(h,1-m),new Be(g,1-_),new Be(S,1-x)]:[new Be(a,1-c),new Be(f,1-m),new Be(y,1-_),new Be(A,1-x)]}};function rV(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Yx extends $c{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yx(e.radius,e.detail)}}class Kx extends Qt{constructor(e=[new Be(0,-.5),new Be(.5,0),new Be(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Yt(r,0,Math.PI*2);const s=[],o=[],a=[],c=[],h=[],f=1/t,m=new j,g=new Be,y=new j,_=new j,S=new j;let A=0,x=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:A=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,y.x=x*1,y.y=-A,y.z=x*0,S.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(S.x,S.y,S.z);break;default:A=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,y.x=x*1,y.y=-A,y.z=x*0,_.copy(y),y.x+=S.x,y.y+=S.y,y.z+=S.z,y.normalize(),c.push(y.x,y.y,y.z),S.copy(_)}for(let C=0;C<=t;C++){const T=n+C*f*r,R=Math.sin(T),L=Math.cos(T);for(let B=0;B<=e.length-1;B++){m.x=e[B].x*R,m.y=e[B].y,m.z=e[B].x*L,o.push(m.x,m.y,m.z),g.x=C/t,g.y=B/(e.length-1),a.push(g.x,g.y);const k=c[3*B+0]*R,O=c[3*B+1],D=c[3*B+0]*L;h.push(k,O,D)}}for(let C=0;C<t;C++)for(let T=0;T<e.length-1;T++){const R=T+C*e.length,L=R,B=R+e.length,k=R+e.length+1,O=R+1;s.push(L,B,O),s.push(k,O,B)}this.setIndex(s),this.setAttribute("position",new St(o,3)),this.setAttribute("uv",new St(a,2)),this.setAttribute("normal",new St(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kx(e.points,e.segments,e.phiStart,e.phiLength)}}class d0 extends $c{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new d0(e.radius,e.detail)}}class Dp extends Qt{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),c=Math.floor(r),h=a+1,f=c+1,m=e/a,g=t/c,y=[],_=[],S=[],A=[];for(let x=0;x<f;x++){const C=x*g-o;for(let T=0;T<h;T++){const R=T*m-s;_.push(R,-C,0),S.push(0,0,1),A.push(T/a),A.push(1-x/c)}}for(let x=0;x<c;x++)for(let C=0;C<a;C++){const T=C+h*x,R=C+h*(x+1),L=C+1+h*(x+1),B=C+1+h*x;y.push(T,R,B),y.push(R,L,B)}this.setIndex(y),this.setAttribute("position",new St(_,3)),this.setAttribute("normal",new St(S,3)),this.setAttribute("uv",new St(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dp(e.width,e.height,e.widthSegments,e.heightSegments)}}class Jx extends Qt{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],c=[],h=[],f=[];let m=e;const g=(t-e)/r,y=new j,_=new Be;for(let S=0;S<=r;S++){for(let A=0;A<=n;A++){const x=s+A/n*o;y.x=m*Math.cos(x),y.y=m*Math.sin(x),c.push(y.x,y.y,y.z),h.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,f.push(_.x,_.y)}m+=g}for(let S=0;S<r;S++){const A=S*(n+1);for(let x=0;x<n;x++){const C=x+A,T=C,R=C+n+1,L=C+n+2,B=C+1;a.push(T,R,B),a.push(R,L,B)}}this.setIndex(a),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(h,3)),this.setAttribute("uv",new St(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Zx extends Qt{constructor(e=new Sh([new Be(0,.5),new Be(-.5,-.5),new Be(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f<e.length;f++)h(e[f]),this.addGroup(a,c,f),a+=c,c=0;this.setIndex(n),this.setAttribute("position",new St(r,3)),this.setAttribute("normal",new St(s,3)),this.setAttribute("uv",new St(o,2));function h(f){const m=r.length/3,g=f.extractPoints(t);let y=g.shape;const _=g.holes;ta.isClockWise(y)===!1&&(y=y.reverse());for(let A=0,x=_.length;A<x;A++){const C=_[A];ta.isClockWise(C)===!0&&(_[A]=C.reverse())}const S=ta.triangulateShape(y,_);for(let A=0,x=_.length;A<x;A++){const C=_[A];y=y.concat(C)}for(let A=0,x=y.length;A<x;A++){const C=y[A];r.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let A=0,x=S.length;A<x;A++){const C=S[A],T=C[0]+m,R=C[1]+m,L=C[2]+m;n.push(T,R,L),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return sV(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new Zx(n,e.curveSegments)}}function sV(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class Fh extends Qt{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(o+a,Math.PI);let h=0;const f=[],m=new j,g=new j,y=[],_=[],S=[],A=[];for(let x=0;x<=n;x++){const C=[],T=x/n;let R=0;x===0&&o===0?R=.5/t:x===n&&c===Math.PI&&(R=-.5/t);for(let L=0;L<=t;L++){const B=L/t;m.x=-e*Math.cos(r+B*s)*Math.sin(o+T*a),m.y=e*Math.cos(o+T*a),m.z=e*Math.sin(r+B*s)*Math.sin(o+T*a),_.push(m.x,m.y,m.z),g.copy(m).normalize(),S.push(g.x,g.y,g.z),A.push(B+R,1-T),C.push(h++)}f.push(C)}for(let x=0;x<n;x++)for(let C=0;C<t;C++){const T=f[x][C+1],R=f[x][C],L=f[x+1][C],B=f[x+1][C+1];(x!==0||o>0)&&y.push(T,R,B),(x!==n-1||c<Math.PI)&&y.push(R,L,B)}this.setIndex(y),this.setAttribute("position",new St(_,3)),this.setAttribute("normal",new St(S,3)),this.setAttribute("uv",new St(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class qx extends $c{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qx(e.radius,e.detail)}}class Qx extends Qt{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],c=[],h=[],f=new j,m=new j,g=new j;for(let y=0;y<=n;y++)for(let _=0;_<=r;_++){const S=_/r*s,A=y/n*Math.PI*2;m.x=(e+t*Math.cos(A))*Math.cos(S),m.y=(e+t*Math.cos(A))*Math.sin(S),m.z=t*Math.sin(A),a.push(m.x,m.y,m.z),f.x=e*Math.cos(S),f.y=e*Math.sin(S),g.subVectors(m,f).normalize(),c.push(g.x,g.y,g.z),h.push(_/r),h.push(y/n)}for(let y=1;y<=n;y++)for(let _=1;_<=r;_++){const S=(r+1)*y+_-1,A=(r+1)*(y-1)+_-1,x=(r+1)*(y-1)+_,C=(r+1)*y+_;o.push(S,A,C),o.push(A,x,C)}this.setIndex(o),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(c,3)),this.setAttribute("uv",new St(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class $x extends Qt{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],c=[],h=[],f=[],m=new j,g=new j,y=new j,_=new j,S=new j,A=new j,x=new j;for(let T=0;T<=n;++T){const R=T/n*s*Math.PI*2;C(R,s,o,e,y),C(R+.01,s,o,e,_),A.subVectors(_,y),x.addVectors(_,y),S.crossVectors(A,x),x.crossVectors(S,A),S.normalize(),x.normalize();for(let L=0;L<=r;++L){const B=L/r*Math.PI*2,k=-t*Math.cos(B),O=t*Math.sin(B);m.x=y.x+(k*x.x+O*S.x),m.y=y.y+(k*x.y+O*S.y),m.z=y.z+(k*x.z+O*S.z),c.push(m.x,m.y,m.z),g.subVectors(m,y).normalize(),h.push(g.x,g.y,g.z),f.push(T/n),f.push(L/r)}}for(let T=1;T<=n;T++)for(let R=1;R<=r;R++){const L=(r+1)*(T-1)+(R-1),B=(r+1)*T+(R-1),k=(r+1)*T+R,O=(r+1)*(T-1)+R;a.push(L,B,O),a.push(B,k,O)}this.setIndex(a),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(h,3)),this.setAttribute("uv",new St(f,2));function C(T,R,L,B,k){const O=Math.cos(T),D=Math.sin(T),N=L/R*T,z=Math.cos(N);k.x=B*(2+z)*.5*O,k.y=B*(2+z)*D*.5,k.z=B*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $x(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class eE extends Qt{constructor(e=new JS(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new j,c=new j,h=new Be;let f=new j;const m=[],g=[],y=[],_=[];S(),this.setIndex(_),this.setAttribute("position",new St(m,3)),this.setAttribute("normal",new St(g,3)),this.setAttribute("uv",new St(y,2));function S(){for(let T=0;T<t;T++)A(T);A(s===!1?t:0),C(),x()}function A(T){f=e.getPointAt(T/t,f);const R=o.normals[T],L=o.binormals[T];for(let B=0;B<=r;B++){const k=B/r*Math.PI*2,O=Math.sin(k),D=-Math.cos(k);c.x=D*R.x+O*L.x,c.y=D*R.y+O*L.y,c.z=D*R.z+O*L.z,c.normalize(),g.push(c.x,c.y,c.z),a.x=f.x+n*c.x,a.y=f.y+n*c.y,a.z=f.z+n*c.z,m.push(a.x,a.y,a.z)}}function x(){for(let T=1;T<=t;T++)for(let R=1;R<=r;R++){const L=(r+1)*(T-1)+(R-1),B=(r+1)*T+(R-1),k=(r+1)*T+R,O=(r+1)*(T-1)+R;_.push(L,B,O),_.push(B,k,O)}}function C(){for(let T=0;T<=t;T++)for(let R=0;R<=r;R++)h.x=T/t,h.y=R/r,y.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new eE(new $_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class eD extends Qt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new j,s=new j;if(e.index!==null){const o=e.attributes.position,a=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let h=0,f=c.length;h<f;++h){const m=c[h],g=m.start,y=m.count;for(let _=g,S=g+y;_<S;_+=3)for(let A=0;A<3;A++){const x=a.getX(_+A),C=a.getX(_+(A+1)%3);r.fromBufferAttribute(o,x),s.fromBufferAttribute(o,C),Bb(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,c=o.count/3;a<c;a++)for(let h=0;h<3;h++){const f=3*a+h,m=3*a+(h+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,m),Bb(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new St(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Bb(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var Nb=Object.freeze({__proto__:null,BoxGeometry:Wh,CapsuleGeometry:Hx,CircleGeometry:Vx,ConeGeometry:f0,CylinderGeometry:h0,DodecahedronGeometry:Wx,EdgesGeometry:WL,ExtrudeGeometry:jx,IcosahedronGeometry:Yx,LatheGeometry:Kx,OctahedronGeometry:d0,PlaneGeometry:Dp,PolyhedronGeometry:$c,RingGeometry:Jx,ShapeGeometry:Zx,SphereGeometry:Fh,TetrahedronGeometry:qx,TorusGeometry:Qx,TorusKnotGeometry:$x,TubeGeometry:eE,WireframeGeometry:eD});class tD extends Ki{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ft(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nD extends yo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Zc extends Ki{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ft(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ws,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xo extends Zc{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Be(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ft(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ft(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ft(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class iD extends Ki{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ft(16777215),this.specular=new ft(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ws,this.combine=r0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rD extends Ki{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ft(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class sD extends Ki{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class oD extends Ki{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ws,this.combine=r0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qS extends Ki{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=xL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class QS extends Ki{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class aD extends Ki{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ft(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qc,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lD extends Fr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ph(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function cD(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function uD(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function U1(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=i[a+c]}return r}function $S(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push(...o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function oV(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const h=s.tracks[c],f=h.getValueSize(),m=[],g=[];for(let y=0;y<h.times.length;++y){const _=h.times[y]*r;if(!(_<t||_>=n)){m.push(h.times[y]);for(let S=0;S<f;++S)g.push(h.values[y*f+S])}}m.length!==0&&(h.times=ph(m,h.times.constructor),h.values=ph(g,h.values.constructor),o.push(h))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s}function aV(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const h=i.tracks.find(function(x){return x.name===a.name&&x.ValueTypeName===c});if(h===void 0)continue;let f=0;const m=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);let g=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const _=a.times.length-1;let S;if(s<=a.times[0]){const x=f,C=m-f;S=a.values.slice(x,C)}else if(s>=a.times[_]){const x=_*m+f,C=x+m-f;S=a.values.slice(x,C)}else{const x=a.createInterpolant(),C=f,T=m-f;x.evaluate(s),S=x.resultBuffer.slice(C,T)}c==="quaternion"&&new ar().fromArray(S).normalize().conjugate().toArray(S);const A=h.times.length;for(let x=0;x<A;++x){const C=x*y+g;if(c==="quaternion")ar.multiplyQuaternionsFlat(h.values,C,S,0,h.values,C);else{const T=y-g*2;for(let R=0;R<T;++R)h.values[C+R]-=S[R]}}}return i.blendMode=LS,i}class lV{static convertArray(e,t){return ph(e,t)}static isTypedArray(e){return cD(e)}static getKeyframeOrder(e){return uD(e)}static sortedArray(e,t,n){return U1(e,t,n)}static flattenJSON(e,t,n,r){$S(e,t,n,r)}static subclip(e,t,n,r,s=30){return oV(e,t,n,r,s)}static makeClipAdditive(e,t=0,n=e,r=30){return aV(e,t,n,r)}}class Bp{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hD extends Bp{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fh,endingEnd:fh}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case dh:s=e,a=2*t-n;break;case Fg:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(c===void 0)switch(this.getSettings_().endingEnd){case dh:o=e,c=2*n-t;break;case Fg:o=1,c=n+r[1]-r[0];break;default:o=e-1,c=t}const h=(n-t)*.5,f=this.valueSize;this._weightPrev=h/(t-a),this._weightNext=h/(c-n),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,h=c-a,f=this._offsetPrev,m=this._offsetNext,g=this._weightPrev,y=this._weightNext,_=(n-t)/(r-t),S=_*_,A=S*_,x=-g*A+2*g*S-g*_,C=(1+g)*A+(-1.5-2*g)*S+(-.5+g)*_+1,T=(-1-y)*A+(1.5+y)*S+.5*_,R=y*A-y*S;for(let L=0;L!==a;++L)s[L]=x*o[f+L]+C*o[h+L]+T*o[c+L]+R*o[m+L];return s}}class eM extends Bp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,h=c-a,f=(n-t)/(r-t),m=1-f;for(let g=0;g!==a;++g)s[g]=o[h+g]*m+o[c+g]*f;return s}}class fD extends Bp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Eo{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ph(t,this.TimeBufferType),this.values=ph(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ph(e.times,Array),values:ph(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new fD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new eM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case gp:t=this.InterpolantFactoryMethodDiscrete;break;case vp:t=this.InterpolantFactoryMethodLinear;break;case Yy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return gp;case this.InterpolantFactoryMethodLinear:return vp;case this.InterpolantFactoryMethodSmooth:return Yy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=n[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(r!==void 0&&cD(r))for(let a=0,c=r.length;a!==c;++a){const h=r[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Yy,s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const h=e[a],f=e[a+1];if(h!==f&&(a!==1||h!==e[0]))if(r)c=!0;else{const m=a*n,g=m-n,y=m+n;for(let _=0;_!==n;++_){const S=t[m+_];if(S!==t[g+_]||S!==t[y+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const m=a*n,g=o*n;for(let y=0;y!==n;++y)t[g+y]=t[m+y]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,c=o*n,h=0;h!==n;++h)t[c+h]=t[a+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Eo.prototype.ValueTypeName="";Eo.prototype.TimeBufferType=Float32Array;Eo.prototype.ValueBufferType=Float32Array;Eo.prototype.DefaultInterpolation=vp;class Xh extends Eo{constructor(e,t,n){super(e,t,n)}}Xh.prototype.ValueTypeName="bool";Xh.prototype.ValueBufferType=Array;Xh.prototype.DefaultInterpolation=gp;Xh.prototype.InterpolantFactoryMethodLinear=void 0;Xh.prototype.InterpolantFactoryMethodSmooth=void 0;class tM extends Eo{constructor(e,t,n,r){super(e,t,n,r)}}tM.prototype.ValueTypeName="color";class Oh extends Eo{constructor(e,t,n,r){super(e,t,n,r)}}Oh.prototype.ValueTypeName="number";class dD extends Bp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(n-t)/(r-t);let h=e*a;for(let f=h+a;h!==f;h+=4)ar.slerpFlat(s,0,o,h-a,o,h,c);return s}}class kh extends Eo{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new dD(this.times,this.values,this.getValueSize(),e)}}kh.prototype.ValueTypeName="quaternion";kh.prototype.InterpolantFactoryMethodSmooth=void 0;class jh extends Eo{constructor(e,t,n){super(e,t,n)}}jh.prototype.ValueTypeName="string";jh.prototype.ValueBufferType=Array;jh.prototype.DefaultInterpolation=gp;jh.prototype.InterpolantFactoryMethodLinear=void 0;jh.prototype.InterpolantFactoryMethodSmooth=void 0;class Uh extends Eo{constructor(e,t,n,r){super(e,t,n,r)}}Uh.prototype.ValueTypeName="vector";class Ap{constructor(e="",t=-1,n=[],r=Lx){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Hs(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(uV(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,o=n.length;s!==o;++s)t.push(Eo.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],h=[];c.push((a+s-1)%s,a,(a+1)%s),h.push(0,1,0);const f=uD(c);c=U1(c,1,f),h=U1(h,1,f),!r&&c[0]===0&&(c.push(s),h.push(h[0])),o.push(new Oh(".morphTargetInfluences["+t[a].name+"]",c,h).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const h=e[a],f=h.name.match(s);if(f&&f.length>1){const m=f[1];let g=r[m];g||(r[m]=g=[]),g.push(h)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,g,y,_,S){if(y.length!==0){const A=[],x=[];$S(y,A,x,_),A.length!==0&&S.push(new m(g,A,x))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let m=0;m<h.length;m++){const g=h[m].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let _;for(_=0;_<g.length;_++)if(g[_].morphTargets)for(let S=0;S<g[_].morphTargets.length;S++)y[g[_].morphTargets[S]]=-1;for(const S in y){const A=[],x=[];for(let C=0;C!==g[_].morphTargets.length;++C){const T=g[_];A.push(T.time),x.push(T.morphTarget===S?1:0)}r.push(new Oh(".morphTargetInfluence["+S+"]",A,x))}c=y.length*o}else{const y=".bones["+t[m].name+"]";n(Uh,y+".position",g,"pos",r),n(kh,y+".quaternion",g,"rot",r),n(Uh,y+".scale",g,"scl",r)}}return r.length===0?null:new this(s,c,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function cV(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Oh;case"vector":case"vector2":case"vector3":case"vector4":return Uh;case"color":return tM;case"quaternion":return kh;case"bool":case"boolean":return Xh;case"string":return jh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function uV(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=cV(i.type);if(i.times===void 0){const t=[],n=[];$S(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Ta={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class nM{constructor(e,t,n){const r=this;let s=!1,o=0,a=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this},this.addHandler=function(f,m){return h.push(f,m),this},this.removeHandler=function(f){const m=h.indexOf(f);return m!==-1&&h.splice(m,2),this},this.getHandler=function(f){for(let m=0,g=h.length;m<g;m+=2){const y=h[m],_=h[m+1];if(y.global&&(y.lastIndex=0),y.test(f))return _}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const pD=new nM;class Or{constructor(e){this.manager=e!==void 0?e:pD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Or.DEFAULT_MATERIAL_NAME="__DEFAULT";const Sl={};class hV extends Error{constructor(e,t){super(e),this.response=t}}class Ws extends Or{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ta.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Sl[e]!==void 0){Sl[e].push({onLoad:t,onProgress:n,onError:r});return}Sl[e]=[],Sl[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,c=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const f=Sl[e],m=h.body.getReader(),g=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),y=g?parseInt(g):0,_=y!==0;let S=0;const A=new ReadableStream({start(x){C();function C(){m.read().then(({done:T,value:R})=>{if(T)x.close();else{S+=R.byteLength;const L=new ProgressEvent("progress",{lengthComputable:_,loaded:S,total:y});for(let B=0,k=f.length;B<k;B++){const O=f[B];O.onProgress&&O.onProgress(L)}x.enqueue(R),C()}},T=>{x.error(T)})}}});return new Response(A)}else throw new hV(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return h.json();default:if(a==="")return h.text();{const m=/charset="?([^;"\s]*)"?/i.exec(a),g=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(g);return h.arrayBuffer().then(_=>y.decode(_))}}}).then(h=>{Ta.add(`file:${e}`,h);const f=Sl[e];delete Sl[e];for(let m=0,g=f.length;m<g;m++){const y=f[m];y.onLoad&&y.onLoad(h)}}).catch(h=>{const f=Sl[e];if(f===void 0)throw this.manager.itemError(e),h;delete Sl[e];for(let m=0,g=f.length;m<g;m++){const y=f[m];y.onError&&y.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class fV extends Or{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Ws(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Ap.parse(e[n]);t.push(r)}return t}}class dV extends Or{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],a=new Gx,c=new Ws(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let h=0;function f(m){c.load(e[m],function(g){const y=s.parse(g,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},h+=1,h===6&&(y.mipmapCount===1&&(a.minFilter=Ti),a.image=o,a.format=y.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let m=0,g=e.length;m<g;++m)f(m);else c.load(e,function(m){const g=s.parse(m,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let _=0;_<y;_++){o[_]={mipmaps:[]};for(let S=0;S<g.mipmapCount;S++)o[_].mipmaps.push(g.mipmaps[_*g.mipmapCount+S]),o[_].format=g.format,o[_].width=g.width,o[_].height=g.height}a.image=o}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=Ti),a.format=g.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}}const Ad=new WeakMap;class Wg extends Or{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ta.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let m=Ad.get(o);m===void 0&&(m=[],Ad.set(o,m)),m.push({onLoad:t,onError:r})}return o}const a=Ug("img");function c(){f(),t&&t(this);const m=Ad.get(this)||[];for(let g=0;g<m.length;g++){const y=m[g];y.onLoad&&y.onLoad(this)}Ad.delete(this),s.manager.itemEnd(e)}function h(m){f(),r&&r(m),Ta.remove(`image:${e}`);const g=Ad.get(this)||[];for(let y=0;y<g.length;y++){const _=g[y];_.onError&&_.onError(m)}Ad.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",c,!1),a.removeEventListener("error",h,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),Ta.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class pV extends Or{constructor(e){super(e)}load(e,t,n,r){const s=new a0;s.colorSpace=ms;const o=new Wg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(h){o.load(e[h],function(f){s.images[h]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let h=0;h<e.length;++h)c(h);return s}}class mV extends Or{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Pa,a=new Ws(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){let h;try{h=s.parse(c)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&&(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:Us,o.wrapT=h.wrapT!==void 0?h.wrapT:Us,o.magFilter=h.magFilter!==void 0?h.magFilter:Ti,o.minFilter=h.minFilter!==void 0?h.minFilter:Ti,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(o.colorSpace=h.colorSpace),h.flipY!==void 0&&(o.flipY=h.flipY),h.format!==void 0&&(o.format=h.format),h.type!==void 0&&(o.type=h.type),h.mipmaps!==void 0&&(o.mipmaps=h.mipmaps,o.minFilter=ho),h.mipmapCount===1&&(o.minFilter=Ti),h.generateMipmaps!==void 0&&(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&&t(o,h)},n,r),o}}class Xg extends Or{constructor(e){super(e)}load(e,t,n,r){const s=new li,o=new Wg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class eu extends Sn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ft(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class mD extends eu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ft(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const $A=new jt,Fb=new j,Ob=new j;class iM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Be(512,512),this.mapType=vo,this.map=null,this.mapPass=null,this.matrix=new jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lp,this._frameExtents=new Be(1,1),this._viewportCount=1,this._viewports=[new In(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Fb.setFromMatrixPosition(e.matrixWorld),t.position.copy(Fb),Ob.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ob),t.updateMatrixWorld(),$A.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix($A,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply($A)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gV extends iM{constructor(){super(new ei(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=_p*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class rM extends eu{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new gV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const kb=new jt,jm=new j,ew=new j;class vV extends iM{constructor(){super(new ei(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Be(4,2),this._viewportCount=6,this._viewports=[new In(2,1,1,1),new In(0,1,1,1),new In(3,1,1,1),new In(1,1,1,1),new In(3,0,1,1),new In(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),jm.setFromMatrixPosition(e.matrixWorld),n.position.copy(jm),ew.copy(n.position),ew.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ew),n.updateMatrixWorld(),r.makeTranslation(-jm.x,-jm.y,-jm.z),kb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kb,n.coordinateSystem,n.reversedDepth)}}class sM extends eu{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new vV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class na extends o0{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,a-=f*this.view.offsetY,c=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class yV extends iM{constructor(){super(new na(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jg extends eu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.shadow=new yV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class oM extends eu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class gD extends eu{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class vD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class yD extends eu{constructor(e=new vD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class tE extends Or{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new Ws(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ft().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new ft().setHex(o.value);break;case"v2":r.uniforms[s].value=new Be().fromArray(o.value);break;case"v3":r.uniforms[s].value=new j().fromArray(o.value);break;case"v4":r.uniforms[s].value=new In().fromArray(o.value);break;case"m3":r.uniforms[s].value=new on().fromArray(o.value);break;case"m4":r.uniforms[s].value=new jt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Be().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Be().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return tE.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:tD,SpriteMaterial:US,RawShaderMaterial:nD,ShaderMaterial:yo,PointsMaterial:u0,MeshPhysicalMaterial:xo,MeshStandardMaterial:Zc,MeshPhongMaterial:iD,MeshToonMaterial:rD,MeshNormalMaterial:sD,MeshLambertMaterial:oD,MeshDepthMaterial:qS,MeshDistanceMaterial:QS,MeshBasicMaterial:Gs,MeshMatcapMaterial:aD,LineDashedMaterial:lD,LineBasicMaterial:Fr,Material:Ki};return new t[e]}}class Xc{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class _D extends Qt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class xD extends Or{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Ws(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(y,_){if(t[_]!==void 0)return t[_];const A=y.interleavedBuffers[_],x=s(y,A.buffer),C=Xd(A.type,x),T=new l0(C,A.stride);return T.uuid=A.uuid,t[_]=T,T}function s(y,_){if(n[_]!==void 0)return n[_];const A=y.arrayBuffers[_],x=new Uint32Array(A).buffer;return n[_]=x,x}const o=e.isInstancedBufferGeometry?new _D:new Qt,a=e.data.index;if(a!==void 0){const y=Xd(a.type,a.array);o.setIndex(new Pn(y,1))}const c=e.data.attributes;for(const y in c){const _=c[y];let S;if(_.isInterleavedBufferAttribute){const A=r(e.data,_.data);S=new Jc(A,_.itemSize,_.offset,_.normalized)}else{const A=Xd(_.type,_.array),x=_.isInstancedBufferAttribute?Bh:Pn;S=new x(A,_.itemSize,_.normalized)}_.name!==void 0&&(S.name=_.name),_.usage!==void 0&&S.setUsage(_.usage),o.setAttribute(y,S)}const h=e.data.morphAttributes;if(h)for(const y in h){const _=h[y],S=[];for(let A=0,x=_.length;A<x;A++){const C=_[A];let T;if(C.isInterleavedBufferAttribute){const R=r(e.data,C.data);T=new Jc(R,C.itemSize,C.offset,C.normalized)}else{const R=Xd(C.type,C.array);T=new Pn(R,C.itemSize,C.normalized)}C.name!==void 0&&(T.name=C.name),S.push(T)}o.morphAttributes[y]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,_=m.length;y!==_;++y){const S=m[y];o.addGroup(S.start,S.count,S.materialIndex)}const g=e.data.boundingSphere;return g!==void 0&&(o.boundingSphere=new lr().fromJSON(g)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class _V extends Or{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?Xc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ws(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){let h=null;try{h=JSON.parse(c)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?Xc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ws(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(h)}),a=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,a),h=this.parseObject(e.object,s,c,a,n),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),this.bindLightTargets(h),t!==void 0){let m=!1;for(const g in o)if(o[g].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,a,o,t),h=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,h),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new Sh().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new c0().fromJSON(e[s],r);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new xD;for(let s=0,o=e.length;s<o;s++){let a;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(c);break;default:c.type in Nb?a=Nb[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),n[c.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new tE;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const c=e[o];n[c.uuid]===void 0&&(n[c.uuid]=s.parse(c)),r[c.uuid]=n[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=Ap.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(c){return n.manager.itemStart(c),s.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){const h=c,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return o(f)}else return c.data?{data:Xd(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new nM(t);s=new Wg(c),s.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h<f;h++){const m=e[h],g=m.url;if(Array.isArray(g)){const y=[];for(let _=0,S=g.length;_<S;_++){const A=g[_],x=a(A);x!==null&&(x instanceof HTMLImageElement?y.push(x):y.push(new Pa(x.data,x.width,x.height)))}r[m.uuid]=new Vc(y)}else{const y=a(m.url);r[m.uuid]=new Vc(y)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const a=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(c)}else return o.data?{data:Xd(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Wg(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const c=e[o],h=c.url;if(Array.isArray(h)){const f=[];for(let m=0,g=h.length;m<g;m++){const y=h[m],_=await s(y);_!==null&&(_ instanceof HTMLImageElement?f.push(_):f.push(new Pa(_.data,_.width,_.height)))}n[c.uuid]=new Vc(f)}else{const f=await s(c.url);n[c.uuid]=new Vc(f)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const c=t[a.image],h=c.data;let f;Array.isArray(h)?(f=new a0,h.length===6&&(f.needsUpdate=!0)):(h&&h.data?f=new Pa:f=new li,h&&(f.needsUpdate=!0)),f.source=c,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=n(a.mapping,xV)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=n(a.wrap[0],Ub),f.wrapT=n(a.wrap[1],Ub)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.minFilter!==void 0&&(f.minFilter=n(a.minFilter,zb)),a.magFilter!==void 0&&(f.magFilter=n(a.magFilter,zb)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,n,r,s){let o;function a(g){return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),t[g]}function c(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let _=0,S=g.length;_<S;_++){const A=g[_];n[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),y.push(n[A])}return y}return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),n[g]}}function h(g){return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),r[g]}let f,m;switch(e.type){case"Scene":o=new Ox,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ft(e.background):o.background=h(e.background)),e.environment!==void 0&&(o.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Fx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Nx(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new ei(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new na(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new oM(e.color,e.intensity);break;case"DirectionalLight":o=new jg(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new sM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new gD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new rM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new mD(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new yD().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),m=c(e.material),o=new zS(f,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),m=c(e.material),o=new mi(f,m);break;case"InstancedMesh":f=a(e.geometry),m=c(e.material);const g=e.count,y=e.instanceMatrix,_=e.instanceColor;o=new GS(f,m,g),o.instanceMatrix=new Bh(new Float32Array(y.array),16),_!==void 0&&(o.instanceColor=new Bh(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":f=a(e.geometry),m=c(e.material),o=new HL(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(S=>{let A=null,x=null;return S.boundingBox!==void 0&&(A=new Ar().fromJSON(S.boundingBox)),S.boundingSphere!==void 0&&(x=new lr().fromJSON(S.boundingSphere)),{...S,boundingBox:A,boundingSphere:x}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=h(e.matricesTexture.uuid),o._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new lr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new Ar().fromJSON(e.boundingBox));break;case"LOD":o=new GL;break;case"Line":o=new Gl(a(e.geometry),c(e.material));break;case"LineLoop":o=new HS(a(e.geometry),c(e.material));break;case"LineSegments":o=new oa(a(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new zx(a(e.geometry),c(e.material));break;case"Sprite":o=new zL(c(e.material));break;case"Group":o=new Dl;break;case"Bone":o=new kx;break;default:o=new Sn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)o.add(this.parseObject(g[y],t,n,r,s))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const _=g[y];o.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const _=g[y],S=o.getObjectByProperty("uuid",_.object);S!==void 0&&o.addLevel(S,_.distance,_.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new Sn}})}}const xV={UVMapping:Sx,CubeReflectionMapping:Ul,CubeRefractionMapping:Yc,EquirectangularReflectionMapping:Bg,EquirectangularRefractionMapping:Ng,CubeUVReflectionMapping:Ip},Ub={RepeatWrapping:Kc,ClampToEdgeWrapping:Us,MirroredRepeatWrapping:hp},zb={NearestFilter:or,NearestMipmapNearestFilter:Mx,NearestMipmapLinearFilter:hh,LinearFilter:Ti,LinearMipmapNearestFilter:qd,LinearMipmapLinearFilter:ho},tw=new WeakMap;class ED extends Or{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ta.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(h=>{if(tw.has(o)===!0)r&&r(tw.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(h),s.manager.itemEnd(e),h});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const c=fetch(e,a).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return Ta.add(`image-bitmap:${e}`,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){r&&r(h),tw.set(c,h),Ta.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});Ta.add(`image-bitmap:${e}`,c),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let my;class aM{static getContext(){return my===void 0&&(my=new(window.AudioContext||window.webkitAudioContext)),my}static setContext(e){my=e}}class EV extends Or{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Ws(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const h=c.slice(0);aM.getContext().decodeAudioData(h,function(m){t(m)}).catch(a)}catch(h){a(h)}},n,r);function a(c){r?r(c):console.error(c),s.manager.itemError(e)}}}const Gb=new jt,Hb=new jt,Ku=new jt;class AV{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ei,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ei,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ku.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Ah*t.fov*.5)/t.zoom;let a,c;Hb.elements[12]=-r,Gb.elements[12]=r,a=-o*t.aspect+s,c=o*t.aspect+s,Ku.elements[0]=2*t.near/(c-a),Ku.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(Ku),a=-o*t.aspect-s,c=o*t.aspect-s,Ku.elements[0]=2*t.near/(c-a),Ku.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(Ku)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Hb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Gb)}}class AD extends ei{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class lM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Ju=new j,nw=new ar,wV=new j,Zu=new j,qu=new j;class SV extends Sn{constructor(){super(),this.type="AudioListener",this.context=aM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new lM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ju,nw,wV),Zu.set(0,0,-1).applyQuaternion(nw),qu.set(0,1,0).applyQuaternion(nw),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ju.x,n),t.positionY.linearRampToValueAtTime(Ju.y,n),t.positionZ.linearRampToValueAtTime(Ju.z,n),t.forwardX.linearRampToValueAtTime(Zu.x,n),t.forwardY.linearRampToValueAtTime(Zu.y,n),t.forwardZ.linearRampToValueAtTime(Zu.z,n),t.upX.linearRampToValueAtTime(qu.x,n),t.upY.linearRampToValueAtTime(qu.y,n),t.upZ.linearRampToValueAtTime(qu.z,n)}else t.setPosition(Ju.x,Ju.y,Ju.z),t.setOrientation(Zu.x,Zu.y,Zu.z,qu.x,qu.y,qu.z)}}class wD extends Sn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Qu=new j,Vb=new ar,MV=new j,$u=new j;class CV extends wD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Qu,Vb,MV),$u.set(0,0,1).applyQuaternion(Vb);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Qu.x,n),t.positionY.linearRampToValueAtTime(Qu.y,n),t.positionZ.linearRampToValueAtTime(Qu.z,n),t.orientationX.linearRampToValueAtTime($u.x,n),t.orientationY.linearRampToValueAtTime($u.y,n),t.orientationZ.linearRampToValueAtTime($u.z,n)}else t.setPosition(Qu.x,Qu.y,Qu.z),t.setOrientation($u.x,$u.y,$u.z)}}class TV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class SD{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(n,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(n[c]!==n[c+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){ar.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;ar.multiplyQuaternionsFlat(e,o,e,t,e,n),ar.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const cM="\\[\\]\\.:\\/",bV=new RegExp("["+cM+"]","g"),uM="[^"+cM+"]",RV="[^"+cM.replace("\\.","")+"]",IV=/((?:WC+[\/:])*)/.source.replace("WC",uM),PV=/(WCOD+)?/.source.replace("WCOD",RV),LV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uM),DV=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uM),BV=new RegExp("^"+IV+PV+LV+DV+"$"),NV=["material","materials","bones","map"];class FV{constructor(e,t,n){const r=n||Cn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Cn{constructor(e,t,n){this.path=t,this.parsedPath=n||Cn.parseTrackName(t),this.node=Cn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Cn.Composite(e,t,n):new Cn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(bV,"")}static parseTrackName(e){const t=BV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);NV.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const c=n(a.children);if(c)return c}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Cn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const o=e[r];if(o===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Cn.Composite=FV;Cn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Cn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Cn.prototype.GetterByBindingType=[Cn.prototype._getValue_direct,Cn.prototype._getValue_array,Cn.prototype._getValue_arrayElement,Cn.prototype._getValue_toArray];Cn.prototype.SetterByBindingTypeAndVersioning=[[Cn.prototype._setValue_direct,Cn.prototype._setValue_direct_setNeedsUpdate,Cn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_array,Cn.prototype._setValue_array_setNeedsUpdate,Cn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_arrayElement,Cn.prototype._setValue_arrayElement_setNeedsUpdate,Cn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Cn.prototype._setValue_fromArray,Cn.prototype._setValue_fromArray_setNeedsUpdate,Cn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class OV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Hs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,c=e.length,h=this.nCachedObjects_;for(let f=0,m=arguments.length;f!==m;++f){const g=arguments[f],y=g.uuid;let _=t[y];if(_===void 0){_=c++,t[y]=_,e.push(g);for(let S=0,A=o;S!==A;++S)s[S].push(new Cn(g,n[S],r[S]))}else if(_<h){a=e[_];const S=--h,A=e[S];t[A.uuid]=_,e[_]=A,t[y]=S,e[S]=g;for(let x=0,C=o;x!==C;++x){const T=s[x],R=T[S];let L=T[_];T[_]=R,L===void 0&&(L=new Cn(g,n[x],r[x])),T[S]=L}}else e[_]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const c=arguments[o],h=c.uuid,f=t[h];if(f!==void 0&&f>=s){const m=s++,g=e[m];t[g.uuid]=f,e[f]=g,t[h]=m,e[m]=c;for(let y=0,_=r;y!==_;++y){const S=n[y],A=S[m],x=S[f];S[f]=A,S[m]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,c=arguments.length;a!==c;++a){const h=arguments[a],f=h.uuid,m=t[f];if(m!==void 0)if(delete t[f],m<s){const g=--s,y=e[g],_=--o,S=e[_];t[y.uuid]=m,e[m]=y,t[S.uuid]=g,e[g]=S,e.pop();for(let A=0,x=r;A!==x;++A){const C=n[A],T=C[g],R=C[_];C[m]=T,C[g]=R,C.pop()}}else{const g=--o,y=e[g];g>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let _=0,S=r;_!==S;++_){const A=n[_];A[m]=A[g],A.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,c=this._objects,h=c.length,f=this.nCachedObjects_,m=new Array(h);r=s.length,n[e]=r,o.push(e),a.push(t),s.push(m);for(let g=f,y=c.length;g!==y;++g){const _=c[g];m[g]=new Cn(_,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,c=o[a],h=e[a];t[h]=n,o[n]=c,o.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class MD{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:fh,endingEnd:fh};for(let h=0;h!==o;++h){const f=s[h].createInterpolant(null);a[h]=f,f.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,h=a.sampleValues;return c[0]=s,c[1]=s+n,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case LS:for(let f=0,m=c.length;f!==m;++f)c[f].evaluate(o),h[f].accumulateAdditive(a);break;case Lx:default:for(let f=0,m=c.length;f!==m;++f)c[f].evaluate(o),h[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===yL;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===gL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=dh,r.endingEnd=dh):(e?r.endingStart=this.zeroSlopeAtStart?dh:fh:r.endingStart=Fg,t?r.endingEnd=this.zeroSlopeAtEnd?dh:fh:r.endingEnd=Fg)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=n,this}}const kV=new Float32Array(1);class UV extends Fa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,c=n.uuid,h=this._bindingsByRootAndName;let f=h[c];f===void 0&&(f={},h[c]=f);for(let m=0;m!==s;++m){const g=r[m],y=g.name;let _=f[y];if(_!==void 0)++_.referenceCount,o[m]=_;else{if(_=o[m],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,y));continue}const S=t&&t._propertyBindings[m].binding.parsedPath;_=new SD(Cn.create(n,y,S),g.ValueTypeName,g.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,y),o[m]=_}a[m].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,h=c[c.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,c[f]=h,c.pop(),e._byClipCacheIndex=null;const m=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete m[g],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new eM(new Float32Array(2),new Float32Array(2),1,kV),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Ap.findByName(r,e):e;const a=o!==null?o.uuid:e,c=this._actionsByClip[a];let h=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Lx),c!==void 0){const m=c.actionByRoot[s];if(m!==void 0&&m.blendMode===n)return m;h=c.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const f=new MD(this,o,t,n);return this._bindAction(f,h),this._addInactiveAction(f,a,s),f}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?Ap.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(r,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)a[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const h=o[a];this._deactivateAction(h);const f=h._cacheIndex,m=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,m._cacheIndex=f,t[f]=m,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,c=a[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class zV extends FS{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Bx(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class hM{constructor(e){this.value=e}clone(){return new hM(this.value.clone===void 0?this.value:this.value.clone())}}let GV=0;class HV extends Fa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:GV++}),this.name="",this.usage=kg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class VV extends l0{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class WV{constructor(e,t,n,r,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Wb=new jt;class fM{constructor(e,t,n=0,r=1/0){this.ray=new Vh(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new wh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Wb.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Wb),this}intersectObject(e,t=!0,n=[]){return z1(e,this,n,t),n.sort(Xb),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)z1(e[r],this,n,t);return n.sort(Xb),n}}function Xb(i,e){return i.distance-e.distance}function z1(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,a=s.length;o<a;o++)z1(s[o],e,t,!0)}}class XV{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=jV.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function jV(){this._document.hidden===!1&&this.reset()}class G1{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Yt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Yt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class YV{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class dM{constructor(e,t,n,r){dM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const jb=new Be;class KV{constructor(e=new Be(1/0,1/0),t=new Be(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=jb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jb).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Yb=new j,gy=new j,wd=new j,Sd=new j,iw=new j,JV=new j,ZV=new j;class qV{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Yb.subVectors(e,this.start),gy.subVectors(this.end,this.start);const n=gy.dot(gy);let s=gy.dot(Yb)/n;return t&&(s=Yt(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=JV,n=ZV){const r=10000000000000001e-32;let s,o;const a=this.start,c=e.start,h=this.end,f=e.end;wd.subVectors(h,a),Sd.subVectors(f,c),iw.subVectors(a,c);const m=wd.dot(wd),g=Sd.dot(Sd),y=Sd.dot(iw);if(m<=r&&g<=r)return t.copy(a),n.copy(c),t.sub(n),t.dot(t);if(m<=r)s=0,o=y/g,o=Yt(o,0,1);else{const _=wd.dot(iw);if(g<=r)o=0,s=Yt(-_/m,0,1);else{const S=wd.dot(Sd),A=m*g-S*S;A!==0?s=Yt((S*y-_*g)/A,0,1):s=0,o=(S*s+y)/g,o<0?(o=0,s=Yt(-_/m,0,1)):o>1&&(o=1,s=Yt((S-_)/m,0,1))}}return t.copy(a).add(wd.multiplyScalar(s)),n.copy(c).add(Sd.multiplyScalar(o)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Kb=new j;class QV extends Sn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Qt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,c=32;o<c;o++,a++){const h=o/c*Math.PI*2,f=a/c*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}n.setAttribute("position",new St(r,3));const s=new Fr({fog:!1,toneMapped:!1});this.cone=new oa(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Kb.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Kb),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Lc=new j,vy=new jt,rw=new jt;class $V extends oa{constructor(e){const t=CD(e),n=new Qt,r=[],s=[];for(let h=0;h<t.length;h++){const f=t[h];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new St(r,3)),n.setAttribute("color",new St(s,3));const o=new Fr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new ft(255),c=new ft(65280);this.setColors(a,c)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");rw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(vy.multiplyMatrices(rw,a.matrixWorld),Lc.setFromMatrixPosition(vy),r.setXYZ(o,Lc.x,Lc.y,Lc.z),vy.multiplyMatrices(rw,a.parent.matrixWorld),Lc.setFromMatrixPosition(vy),r.setXYZ(o+1,Lc.x,Lc.y,Lc.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function CD(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...CD(i.children[t]));return e}class e8 extends mi{constructor(e,t,n){const r=new Fh(t,4,2),s=new Gs({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const t8=new j,Jb=new ft,Zb=new ft;class n8 extends Sn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new d0(t);r.rotateY(Math.PI*.5),this.material=new Gs({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Pn(o,3)),this.add(new mi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Jb.copy(this.light.color),Zb.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?Jb:Zb;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(t8.setFromMatrixPosition(this.light.matrixWorld).negate())}}class i8 extends oa{constructor(e=10,t=10,n=4473924,r=8947848){n=new ft(n),r=new ft(r);const s=t/2,o=e/t,a=e/2,c=[],h=[];for(let g=0,y=0,_=-a;g<=t;g++,_+=o){c.push(-a,0,_,a,0,_),c.push(_,0,-a,_,0,a);const S=g===s?n:r;S.toArray(h,y),y+=3,S.toArray(h,y),y+=3,S.toArray(h,y),y+=3,S.toArray(h,y),y+=3}const f=new Qt;f.setAttribute("position",new St(c,3)),f.setAttribute("color",new St(h,3));const m=new Fr({vertexColors:!0,toneMapped:!1});super(f,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class r8 extends oa{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new ft(s),o=new ft(o);const a=[],c=[];if(t>1)for(let m=0;m<t;m++){const g=m/t*(Math.PI*2),y=Math.sin(g)*e,_=Math.cos(g)*e;a.push(0,0,0),a.push(y,0,_);const S=m&1?s:o;c.push(S.r,S.g,S.b),c.push(S.r,S.g,S.b)}for(let m=0;m<n;m++){const g=m&1?s:o,y=e-e/n*m;for(let _=0;_<r;_++){let S=_/r*(Math.PI*2),A=Math.sin(S)*y,x=Math.cos(S)*y;a.push(A,0,x),c.push(g.r,g.g,g.b),S=(_+1)/r*(Math.PI*2),A=Math.sin(S)*y,x=Math.cos(S)*y,a.push(A,0,x),c.push(g.r,g.g,g.b)}}const h=new Qt;h.setAttribute("position",new St(a,3)),h.setAttribute("color",new St(c,3));const f=new Fr({vertexColors:!0,toneMapped:!1});super(h,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const qb=new j,yy=new j,Qb=new j;class s8 extends Sn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Qt;r.setAttribute("position",new St([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Fr({fog:!1,toneMapped:!1});this.lightPlane=new Gl(r,s),this.add(this.lightPlane),r=new Qt,r.setAttribute("position",new St([0,0,0,0,0,1],3)),this.targetLine=new Gl(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),qb.setFromMatrixPosition(this.light.matrixWorld),yy.setFromMatrixPosition(this.light.target.matrixWorld),Qb.subVectors(yy,qb),this.lightPlane.lookAt(yy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(yy),this.targetLine.scale.z=Qb.length()}}const _y=new j,xi=new o0;class o8 extends oa{constructor(e){const t=new Qt,n=new Fr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(_,S){c(_),c(S)}function c(_){r.push(0,0,0),s.push(0,0,0),o[_]===void 0&&(o[_]=[]),o[_].push(r.length/3-1)}t.setAttribute("position",new St(r,3)),t.setAttribute("color",new St(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new ft(16755200),f=new ft(16711680),m=new ft(43775),g=new ft(16777215),y=new ft(3355443);this.setColors(h,f,m,g,y)}setColors(e,t,n,r,s){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;let s,o;if(xi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===zs)s=-1,o=1;else if(this.camera.coordinateSystem===yp)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Ci("c",t,e,xi,0,0,s),Ci("t",t,e,xi,0,0,o),Ci("n1",t,e,xi,-n,-r,s),Ci("n2",t,e,xi,n,-r,s),Ci("n3",t,e,xi,-n,r,s),Ci("n4",t,e,xi,n,r,s),Ci("f1",t,e,xi,-n,-r,o),Ci("f2",t,e,xi,n,-r,o),Ci("f3",t,e,xi,-n,r,o),Ci("f4",t,e,xi,n,r,o),Ci("u1",t,e,xi,n*.7,r*1.1,s),Ci("u2",t,e,xi,-n*.7,r*1.1,s),Ci("u3",t,e,xi,0,r*2,s),Ci("cf1",t,e,xi,-n,0,o),Ci("cf2",t,e,xi,n,0,o),Ci("cf3",t,e,xi,0,-r,o),Ci("cf4",t,e,xi,0,r,o),Ci("cn1",t,e,xi,-n,0,s),Ci("cn2",t,e,xi,n,0,s),Ci("cn3",t,e,xi,0,-r,s),Ci("cn4",t,e,xi,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ci(i,e,t,n,r,s,o){_y.set(r,s,o).unproject(n);const a=e[i];if(a!==void 0){const c=t.getAttribute("position");for(let h=0,f=a.length;h<f;h++)c.setXYZ(a[h],_y.x,_y.y,_y.z)}}const xy=new Ar;class a8 extends oa{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new Qt;s.setIndex(new Pn(n,1)),s.setAttribute("position",new Pn(r,3)),super(s,new Fr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&xy.setFromObject(this.object),xy.isEmpty())return;const e=xy.min,t=xy.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class l8 extends oa{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Qt;s.setIndex(new Pn(n,1)),s.setAttribute("position",new St(r,3)),super(s,new Fr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class c8 extends Gl{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Qt;o.setAttribute("position",new St(s,3)),o.computeBoundingSphere(),super(o,new Fr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Qt;c.setAttribute("position",new St(a,3)),c.computeBoundingSphere(),this.add(new mi(c,new Gs({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const $b=new j;let Ey,sw;class u8 extends Sn{constructor(e=new j(0,0,1),t=new j(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Ey===void 0&&(Ey=new Qt,Ey.setAttribute("position",new St([0,0,0,0,1,0],3)),sw=new f0(.5,1,5,1),sw.translate(0,-.5,0)),this.position.copy(t),this.line=new Gl(Ey,new Fr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mi(sw,new Gs({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$b.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle($b,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class h8 extends oa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Qt;r.setAttribute("position",new St(t,3)),r.setAttribute("color",new St(n,3));const s=new Fr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new ft,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class f8{constructor(){this.type="ShapePath",this.color=new ft,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new ex,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const C=[];for(let T=0,R=x.length;T<R;T++){const L=x[T],B=new Sh;B.curves=L.curves,C.push(B)}return C}function n(x,C){const T=C.length;let R=!1;for(let L=T-1,B=0;B<T;L=B++){let k=C[L],O=C[B],D=O.x-k.x,N=O.y-k.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(k=C[B],D=-D,O=C[L],N=-N),x.y<k.y||x.y>O.y)continue;if(x.y===k.y){if(x.x===k.x)return!0}else{const z=N*(x.x-k.x)-D*(x.y-k.y);if(z===0)return!0;if(z<0)continue;R=!R}}else{if(x.y!==k.y)continue;if(O.x<=x.x&&x.x<=k.x||k.x<=x.x&&x.x<=O.x)return!0}}return R}const r=ta.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,c;const h=[];if(s.length===1)return a=s[0],c=new Sh,c.curves=a.curves,h.push(c),h;let f=!r(s[0].getPoints());f=e?!f:f;const m=[],g=[];let y=[],_=0,S;g[_]=void 0,y[_]=[];for(let x=0,C=s.length;x<C;x++)a=s[x],S=a.getPoints(),o=r(S),o=e?!o:o,o?(!f&&g[_]&&_++,g[_]={s:new Sh,p:S},g[_].s.curves=a.curves,f&&_++,y[_]=[]):y[_].push({h:a,p:S[0]});if(!g[0])return t(s);if(g.length>1){let x=!1,C=0;for(let T=0,R=g.length;T<R;T++)m[T]=[];for(let T=0,R=g.length;T<R;T++){const L=y[T];for(let B=0;B<L.length;B++){const k=L[B];let O=!0;for(let D=0;D<g.length;D++)n(k.p,g[D].p)&&(T!==D&&C++,O?(O=!1,m[D].push(k)):x=!0);O&&m[T].push(k)}}C>0&&x===!1&&(y=m)}let A;for(let x=0,C=g.length;x<C;x++){c=g[x].s,h.push(c),A=y[x];for(let T=0,R=A.length;T<R;T++)c.holes.push(A[T].h)}return h}}class d8 extends Fa{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function p8(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function m8(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function g8(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function H1(i,e,t,n){const r=v8(n);switch(t){case RS:return i*e;case Rx:return i*e/r.components*r.byteLength;case s0:return i*e/r.components*r.byteLength;case PS:return i*e*2/r.components*r.byteLength;case Ix:return i*e*2/r.components*r.byteLength;case IS:return i*e*3/r.components*r.byteLength;case Br:return i*e*4/r.components*r.byteLength;case Px:return i*e*4/r.components*r.byteLength;case yg:case _g:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case xg:case Eg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case w_:case M_:return Math.max(i,16)*Math.max(e,8)/4;case A_:case S_:return Math.max(i,8)*Math.max(e,8)/2;case C_:case T_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case b_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case R_:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case I_:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case P_:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case L_:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case D_:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case B_:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case N_:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case F_:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case O_:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case k_:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case U_:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case z_:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case G_:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case H_:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case V_:case W_:case X_:return Math.ceil(i/4)*Math.ceil(e/4)*16;case j_:case Y_:return Math.ceil(i/4)*Math.ceil(e/4)*8;case K_:case J_:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function v8(i){switch(i){case vo:case MS:return{byteLength:1,components:1};case fp:case CS:case Pp:return{byteLength:2,components:1};case Tx:case bx:return{byteLength:2,components:4};case zl:case Cx:case xs:return{byteLength:4,components:1};case TS:case bS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class y8{static contain(e,t){return p8(e,t)}static cover(e,t){return m8(e,t)}static fill(e){return g8(e)}static getByteLength(e,t,n,r){return H1(e,t,n,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function TD(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function _8(i){const e=new WeakMap;function t(a,c){const h=a.array,f=a.usage,m=h.byteLength,g=i.createBuffer();i.bindBuffer(c,g),i.bufferData(c,h,f),a.onUploadCallback();let y;if(h instanceof Float32Array)y=i.FLOAT;else if(typeof Float16Array<"u"&&h instanceof Float16Array)y=i.HALF_FLOAT;else if(h instanceof Uint16Array)a.isFloat16BufferAttribute?y=i.HALF_FLOAT:y=i.UNSIGNED_SHORT;else if(h instanceof Int16Array)y=i.SHORT;else if(h instanceof Uint32Array)y=i.UNSIGNED_INT;else if(h instanceof Int32Array)y=i.INT;else if(h instanceof Int8Array)y=i.BYTE;else if(h instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:g,type:y,bytesPerElement:h.BYTES_PER_ELEMENT,version:a.version,size:m}}function n(a,c,h){const f=c.array,m=c.updateRanges;if(i.bindBuffer(h,a),m.length===0)i.bufferSubData(h,0,f);else{m.sort((y,_)=>y.start-_.start);let g=0;for(let y=1;y<m.length;y++){const _=m[g],S=m[y];S.start<=_.start+_.count+1?_.count=Math.max(_.count,S.start+S.count-_.start):(++g,m[g]=S)}m.length=g+1;for(let y=0,_=m.length;y<_;y++){const S=m[y];i.bufferSubData(h,S.start*f.BYTES_PER_ELEMENT,f,S.start,S.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(i.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const h=e.get(a);if(h===void 0)e.set(a,t(a,c));else if(h.version<a.version){if(h.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(h.buffer,a,c),h.version=a.version}}return{get:r,remove:s,update:o}}var x8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,E8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,A8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,w8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,S8=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,M8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,C8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,T8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,b8=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,R8=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,I8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,P8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,L8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,D8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,B8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,N8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,F8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,O8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,k8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,U8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,z8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,G8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,H8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,V8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,W8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,X8=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,j8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Y8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,K8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,J8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Z8="gl_FragColor = linearToOutputTexel( gl_FragColor );",q8=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Q8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,e9=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,t9=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,n9=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,i9=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,r9=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,s9=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,o9=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,a9=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,l9=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,c9=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,u9=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,h9=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,f9=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,d9=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,p9=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,m9=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,g9=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,v9=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,y9=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_9=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,x9=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,E9=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,A9=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,w9=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,S9=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,M9=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,C9=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,T9=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,b9=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,R9=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,I9=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,P9=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,L9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,D9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,B9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,N9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,F9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,O9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,k9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,U9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,z9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,G9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,H9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,V9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,W9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,X9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,j9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Y9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,K9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,J9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Z9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,q9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Q9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,$9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,nW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,iW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,rW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,oW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,aW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cW=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,hW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,fW=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,dW=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,pW=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,mW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vW=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,yW=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const _W=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xW=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AW=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,SW=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CW=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,TW=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,bW=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,RW=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,IW=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PW=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,DW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,BW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,kW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,WW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,KW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JW=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:x8,alphahash_pars_fragment:E8,alphamap_fragment:A8,alphamap_pars_fragment:w8,alphatest_fragment:S8,alphatest_pars_fragment:M8,aomap_fragment:C8,aomap_pars_fragment:T8,batching_pars_vertex:b8,batching_vertex:R8,begin_vertex:I8,beginnormal_vertex:P8,bsdfs:L8,iridescence_fragment:D8,bumpmap_pars_fragment:B8,clipping_planes_fragment:N8,clipping_planes_pars_fragment:F8,clipping_planes_pars_vertex:O8,clipping_planes_vertex:k8,color_fragment:U8,color_pars_fragment:z8,color_pars_vertex:G8,color_vertex:H8,common:V8,cube_uv_reflection_fragment:W8,defaultnormal_vertex:X8,displacementmap_pars_vertex:j8,displacementmap_vertex:Y8,emissivemap_fragment:K8,emissivemap_pars_fragment:J8,colorspace_fragment:Z8,colorspace_pars_fragment:q8,envmap_fragment:Q8,envmap_common_pars_fragment:$8,envmap_pars_fragment:e9,envmap_pars_vertex:t9,envmap_physical_pars_fragment:f9,envmap_vertex:n9,fog_vertex:i9,fog_pars_vertex:r9,fog_fragment:s9,fog_pars_fragment:o9,gradientmap_pars_fragment:a9,lightmap_pars_fragment:l9,lights_lambert_fragment:c9,lights_lambert_pars_fragment:u9,lights_pars_begin:h9,lights_toon_fragment:d9,lights_toon_pars_fragment:p9,lights_phong_fragment:m9,lights_phong_pars_fragment:g9,lights_physical_fragment:v9,lights_physical_pars_fragment:y9,lights_fragment_begin:_9,lights_fragment_maps:x9,lights_fragment_end:E9,logdepthbuf_fragment:A9,logdepthbuf_pars_fragment:w9,logdepthbuf_pars_vertex:S9,logdepthbuf_vertex:M9,map_fragment:C9,map_pars_fragment:T9,map_particle_fragment:b9,map_particle_pars_fragment:R9,metalnessmap_fragment:I9,metalnessmap_pars_fragment:P9,morphinstance_vertex:L9,morphcolor_vertex:D9,morphnormal_vertex:B9,morphtarget_pars_vertex:N9,morphtarget_vertex:F9,normal_fragment_begin:O9,normal_fragment_maps:k9,normal_pars_fragment:U9,normal_pars_vertex:z9,normal_vertex:G9,normalmap_pars_fragment:H9,clearcoat_normal_fragment_begin:V9,clearcoat_normal_fragment_maps:W9,clearcoat_pars_fragment:X9,iridescence_pars_fragment:j9,opaque_fragment:Y9,packing:K9,premultiplied_alpha_fragment:J9,project_vertex:Z9,dithering_fragment:q9,dithering_pars_fragment:Q9,roughnessmap_fragment:$9,roughnessmap_pars_fragment:eW,shadowmap_pars_fragment:tW,shadowmap_pars_vertex:nW,shadowmap_vertex:iW,shadowmask_pars_fragment:rW,skinbase_vertex:sW,skinning_pars_vertex:oW,skinning_vertex:aW,skinnormal_vertex:lW,specularmap_fragment:cW,specularmap_pars_fragment:uW,tonemapping_fragment:hW,tonemapping_pars_fragment:fW,transmission_fragment:dW,transmission_pars_fragment:pW,uv_pars_fragment:mW,uv_pars_vertex:gW,uv_vertex:vW,worldpos_vertex:yW,background_vert:_W,background_frag:xW,backgroundCube_vert:EW,backgroundCube_frag:AW,cube_vert:wW,cube_frag:SW,depth_vert:MW,depth_frag:CW,distanceRGBA_vert:TW,distanceRGBA_frag:bW,equirect_vert:RW,equirect_frag:IW,linedashed_vert:PW,linedashed_frag:LW,meshbasic_vert:DW,meshbasic_frag:BW,meshlambert_vert:NW,meshlambert_frag:FW,meshmatcap_vert:OW,meshmatcap_frag:kW,meshnormal_vert:UW,meshnormal_frag:zW,meshphong_vert:GW,meshphong_frag:HW,meshphysical_vert:VW,meshphysical_frag:WW,meshtoon_vert:XW,meshtoon_frag:jW,points_vert:YW,points_frag:KW,shadow_vert:JW,shadow_frag:ZW,sprite_vert:qW,sprite_frag:QW},ht={common:{diffuse:{value:new ft(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},envMapRotation:{value:new on},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new Be(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ft(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ft(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new ft(16777215)},opacity:{value:1},center:{value:new Be(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},Qo={basic:{uniforms:qr([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:qr([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new ft(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:qr([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new ft(0)},specular:{value:new ft(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:qr([ht.common,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.roughnessmap,ht.metalnessmap,ht.fog,ht.lights,{emissive:{value:new ft(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:qr([ht.common,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.gradientmap,ht.fog,ht.lights,{emissive:{value:new ft(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:qr([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:qr([ht.points,ht.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:qr([ht.common,ht.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:qr([ht.common,ht.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:qr([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:qr([ht.sprite,ht.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new on}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:qr([ht.common,ht.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:qr([ht.lights,ht.fog,{color:{value:new ft(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};Qo.physical={uniforms:qr([Qo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new Be(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new ft(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new Be},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new ft(0)},specularColor:{value:new ft(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new Be},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const Ay={r:0,b:0,g:0},eh=new ws,$W=new jt;function e6(i,e,t,n,r,s,o){const a=new ft(0);let c=s===!0?0:1,h,f,m=null,g=0,y=null;function _(T){let R=T.isScene===!0?T.background:null;return R&&R.isTexture&&(R=(T.backgroundBlurriness>0?t:e).get(R)),R}function S(T){let R=!1;const L=_(T);L===null?x(a,c):L&&L.isColor&&(x(L,1),R=!0);const B=i.xr.getEnvironmentBlendMode();B==="additive"?n.buffers.color.setClear(0,0,0,1,o):B==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||R)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function A(T,R){const L=_(R);L&&(L.isCubeTexture||L.mapping===Ip)?(f===void 0&&(f=new mi(new Wh(1,1,1),new yo({name:"BackgroundCubeMaterial",uniforms:xp(Qo.backgroundCube.uniforms),vertexShader:Qo.backgroundCube.vertexShader,fragmentShader:Qo.backgroundCube.fragmentShader,side:Nr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(B,k,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),eh.copy(R.backgroundRotation),eh.x*=-1,eh.y*=-1,eh.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(eh.y*=-1,eh.z*=-1),f.material.uniforms.envMap.value=L,f.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=R.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4($W.makeRotationFromEuler(eh)),f.material.toneMapped=Tn.getTransfer(L.colorSpace)!==zn,(m!==L||g!==L.version||y!==i.toneMapping)&&(f.material.needsUpdate=!0,m=L,g=L.version,y=i.toneMapping),f.layers.enableAll(),T.unshift(f,f.geometry,f.material,0,0,null)):L&&L.isTexture&&(h===void 0&&(h=new mi(new Dp(2,2),new yo({name:"BackgroundMaterial",uniforms:xp(Qo.background.uniforms),vertexShader:Qo.background.vertexShader,fragmentShader:Qo.background.fragmentShader,side:La,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=L,h.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,h.material.toneMapped=Tn.getTransfer(L.colorSpace)!==zn,L.matrixAutoUpdate===!0&&L.updateMatrix(),h.material.uniforms.uvTransform.value.copy(L.matrix),(m!==L||g!==L.version||y!==i.toneMapping)&&(h.material.needsUpdate=!0,m=L,g=L.version,y=i.toneMapping),h.layers.enableAll(),T.unshift(h,h.geometry,h.material,0,0,null))}function x(T,R){T.getRGB(Ay,NL(i)),n.buffers.color.setClear(Ay.r,Ay.g,Ay.b,R,o)}function C(){f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return a},setClearColor:function(T,R=1){a.set(T),c=R,x(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(T){c=T,x(a,c)},render:S,addToRenderList:A,dispose:C}}function t6(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=g(null);let s=r,o=!1;function a(N,z,ee,te,ce){let K=!1;const oe=m(te,ee,z);s!==oe&&(s=oe,h(s.object)),K=y(N,te,ee,ce),K&&_(N,te,ee,ce),ce!==null&&e.update(ce,i.ELEMENT_ARRAY_BUFFER),(K||o)&&(o=!1,R(N,z,ee,te),ce!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ce).buffer))}function c(){return i.createVertexArray()}function h(N){return i.bindVertexArray(N)}function f(N){return i.deleteVertexArray(N)}function m(N,z,ee){const te=ee.wireframe===!0;let ce=n[N.id];ce===void 0&&(ce={},n[N.id]=ce);let K=ce[z.id];K===void 0&&(K={},ce[z.id]=K);let oe=K[te];return oe===void 0&&(oe=g(c()),K[te]=oe),oe}function g(N){const z=[],ee=[],te=[];for(let ce=0;ce<t;ce++)z[ce]=0,ee[ce]=0,te[ce]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:ee,attributeDivisors:te,object:N,attributes:{},index:null}}function y(N,z,ee,te){const ce=s.attributes,K=z.attributes;let oe=0;const ae=ee.getAttributes();for(const U in ae)if(ae[U].location>=0){const q=ce[U];let W=K[U];if(W===void 0&&(U==="instanceMatrix"&&N.instanceMatrix&&(W=N.instanceMatrix),U==="instanceColor"&&N.instanceColor&&(W=N.instanceColor)),q===void 0||q.attribute!==W||W&&q.data!==W.data)return!0;oe++}return s.attributesNum!==oe||s.index!==te}function _(N,z,ee,te){const ce={},K=z.attributes;let oe=0;const ae=ee.getAttributes();for(const U in ae)if(ae[U].location>=0){let q=K[U];q===void 0&&(U==="instanceMatrix"&&N.instanceMatrix&&(q=N.instanceMatrix),U==="instanceColor"&&N.instanceColor&&(q=N.instanceColor));const W={};W.attribute=q,q&&q.data&&(W.data=q.data),ce[U]=W,oe++}s.attributes=ce,s.attributesNum=oe,s.index=te}function S(){const N=s.newAttributes;for(let z=0,ee=N.length;z<ee;z++)N[z]=0}function A(N){x(N,0)}function x(N,z){const ee=s.newAttributes,te=s.enabledAttributes,ce=s.attributeDivisors;ee[N]=1,te[N]===0&&(i.enableVertexAttribArray(N),te[N]=1),ce[N]!==z&&(i.vertexAttribDivisor(N,z),ce[N]=z)}function C(){const N=s.newAttributes,z=s.enabledAttributes;for(let ee=0,te=z.length;ee<te;ee++)z[ee]!==N[ee]&&(i.disableVertexAttribArray(ee),z[ee]=0)}function T(N,z,ee,te,ce,K,oe){oe===!0?i.vertexAttribIPointer(N,z,ee,ce,K):i.vertexAttribPointer(N,z,ee,te,ce,K)}function R(N,z,ee,te){S();const ce=te.attributes,K=ee.getAttributes(),oe=z.defaultAttributeValues;for(const ae in K){const U=K[ae];if(U.location>=0){let Z=ce[ae];if(Z===void 0&&(ae==="instanceMatrix"&&N.instanceMatrix&&(Z=N.instanceMatrix),ae==="instanceColor"&&N.instanceColor&&(Z=N.instanceColor)),Z!==void 0){const q=Z.normalized,W=Z.itemSize,se=e.get(Z);if(se===void 0)continue;const _e=se.buffer,De=se.type,ze=se.bytesPerElement,de=De===i.INT||De===i.UNSIGNED_INT||Z.gpuType===Cx;if(Z.isInterleavedBufferAttribute){const ge=Z.data,Ue=ge.stride,We=Z.offset;if(ge.isInstancedInterleavedBuffer){for(let He=0;He<U.locationSize;He++)x(U.location+He,ge.meshPerAttribute);N.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let He=0;He<U.locationSize;He++)A(U.location+He);i.bindBuffer(i.ARRAY_BUFFER,_e);for(let He=0;He<U.locationSize;He++)T(U.location+He,W/U.locationSize,De,q,Ue*ze,(We+W/U.locationSize*He)*ze,de)}else{if(Z.isInstancedBufferAttribute){for(let ge=0;ge<U.locationSize;ge++)x(U.location+ge,Z.meshPerAttribute);N.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let ge=0;ge<U.locationSize;ge++)A(U.location+ge);i.bindBuffer(i.ARRAY_BUFFER,_e);for(let ge=0;ge<U.locationSize;ge++)T(U.location+ge,W/U.locationSize,De,q,W*ze,W/U.locationSize*ge*ze,de)}}else if(oe!==void 0){const q=oe[ae];if(q!==void 0)switch(q.length){case 2:i.vertexAttrib2fv(U.location,q);break;case 3:i.vertexAttrib3fv(U.location,q);break;case 4:i.vertexAttrib4fv(U.location,q);break;default:i.vertexAttrib1fv(U.location,q)}}}}C()}function L(){O();for(const N in n){const z=n[N];for(const ee in z){const te=z[ee];for(const ce in te)f(te[ce].object),delete te[ce];delete z[ee]}delete n[N]}}function B(N){if(n[N.id]===void 0)return;const z=n[N.id];for(const ee in z){const te=z[ee];for(const ce in te)f(te[ce].object),delete te[ce];delete z[ee]}delete n[N.id]}function k(N){for(const z in n){const ee=n[z];if(ee[N.id]===void 0)continue;const te=ee[N.id];for(const ce in te)f(te[ce].object),delete te[ce];delete ee[N.id]}}function O(){D(),o=!0,s!==r&&(s=r,h(s.object))}function D(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:O,resetDefaultState:D,dispose:L,releaseStatesOfGeometry:B,releaseStatesOfProgram:k,initAttributes:S,enableAttribute:A,disableUnusedAttributes:C}}function n6(i,e,t){let n;function r(h){n=h}function s(h,f){i.drawArrays(n,h,f),t.update(f,n,1)}function o(h,f,m){m!==0&&(i.drawArraysInstanced(n,h,f,m),t.update(f,n,m))}function a(h,f,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,h,0,f,0,m);let y=0;for(let _=0;_<m;_++)y+=f[_];t.update(y,n,1)}function c(h,f,m,g){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<h.length;_++)o(h[_],f[_],g[_]);else{y.multiDrawArraysInstancedWEBGL(n,h,0,f,0,g,0,m);let _=0;for(let S=0;S<m;S++)_+=f[S]*g[S];t.update(_,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function i6(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(k){return!(k!==Br&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(k){const O=k===Pp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==vo&&n.convert(k)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==xs&&!O)}function c(k){if(k==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const f=c(h);f!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",f,"instead."),h=f);const m=t.logarithmicDepthBuffer===!0,g=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),y=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),_=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=i.getParameter(i.MAX_TEXTURE_SIZE),A=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),x=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),T=i.getParameter(i.MAX_VARYING_VECTORS),R=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),L=_>0,B=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:h,logarithmicDepthBuffer:m,reversedDepthBuffer:g,maxTextures:y,maxVertexTextures:_,maxTextureSize:S,maxCubemapSize:A,maxAttributes:x,maxVertexUniforms:C,maxVaryings:T,maxFragmentUniforms:R,vertexTextures:L,maxSamples:B}}function r6(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Tl,a=new on,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,g){const y=m.length!==0||g||n!==0||r;return r=g,n=m.length,y},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,g){t=f(m,g,0)},this.setState=function(m,g,y){const _=m.clippingPlanes,S=m.clipIntersection,A=m.clipShadows,x=i.get(m);if(!r||_===null||_.length===0||s&&!A)s?f(null):h();else{const C=s?0:n,T=C*4;let R=x.clippingState||null;c.value=R,R=f(_,g,T,y);for(let L=0;L!==T;++L)R[L]=t[L];x.clippingState=R,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=C}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(m,g,y,_){const S=m!==null?m.length:0;let A=null;if(S!==0){if(A=c.value,_!==!0||A===null){const x=y+S*4,C=g.matrixWorldInverse;a.getNormalMatrix(C),(A===null||A.length<x)&&(A=new Float32Array(x));for(let T=0,R=y;T!==S;++T,R+=4)o.copy(m[T]).applyMatrix4(C,a),o.normal.toArray(A,R),A[R+3]=o.constant}c.value=A,c.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,A}}function s6(i){let e=new WeakMap;function t(o,a){return a===Bg?o.mapping=Ul:a===Ng&&(o.mapping=Yc),o}function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===Bg||a===Ng)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const h=new kL(c.height);return h.fromEquirectangularTexture(i,o),e.set(o,h),o.addEventListener("dispose",r),t(h.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const jd=4,eR=[.125,.215,.35,.446,.526,.582],ch=20,ow=new na,tR=new ft;let aw=null,lw=0,cw=0,uw=!1;const lh=(1+Math.sqrt(5))/2,Md=1/lh,nR=[new j(-lh,Md,0),new j(lh,Md,0),new j(-Md,0,lh),new j(Md,0,lh),new j(0,lh,-Md),new j(0,lh,Md),new j(-1,1,-1),new j(1,1,-1),new j(-1,1,1),new j(1,1,1)],o6=new j;class V1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:o=256,position:a=o6}=s;aw=this._renderer.getRenderTarget(),lw=this._renderer.getActiveCubeFace(),cw=this._renderer.getActiveMipmapLevel(),uw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,r,c,a),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=sR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=rR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(aw,lw,cw),this._renderer.xr.enabled=uw,e.scissorTest=!1,wy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ul||e.mapping===Yc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),aw=this._renderer.getRenderTarget(),lw=this._renderer.getActiveCubeFace(),cw=this._renderer.getActiveMipmapLevel(),uw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ti,minFilter:Ti,generateMipmaps:!1,type:Pp,format:Br,colorSpace:Dh,depthBuffer:!1},r=iR(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=iR(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=a6(s)),this._blurMaterial=l6(s,e,t)}return r}_compileMaterial(e){const t=new mi(this._lodPlanes[0],e);this._renderer.compile(t,ow)}_sceneToCubeUV(e,t,n,r,s){const c=new ei(90,1,t,n),h=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],m=this._renderer,g=m.autoClear,y=m.toneMapping;m.getClearColor(tR),m.toneMapping=Ia,m.autoClear=!1,m.state.buffers.depth.getReversed()&&(m.setRenderTarget(r),m.clearDepth(),m.setRenderTarget(null));const S=new Gs({name:"PMREM.Background",side:Nr,depthWrite:!1,depthTest:!1}),A=new mi(new Wh,S);let x=!1;const C=e.background;C?C.isColor&&(S.color.copy(C),e.background=null,x=!0):(S.color.copy(tR),x=!0);for(let T=0;T<6;T++){const R=T%3;R===0?(c.up.set(0,h[T],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+f[T],s.y,s.z)):R===1?(c.up.set(0,0,h[T]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+f[T],s.z)):(c.up.set(0,h[T],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+f[T]));const L=this._cubeSize;wy(r,R*L,T>2?L:0,L,L),m.setRenderTarget(r),x&&m.render(A,c),m.render(e,c)}A.geometry.dispose(),A.material.dispose(),m.toneMapping=y,m.autoClear=g,e.background=C}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Ul||e.mapping===Yc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=sR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=rR());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new mi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const c=this._cubeSize;wy(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(o,ow)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=nR[(r-s-1)%nR.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const c=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,m=new mi(this._lodPlanes[r],h),g=h.uniforms,y=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*ch-1),S=s/_,A=isFinite(s)?1+Math.floor(f*S):ch;A>ch&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${ch}`);const x=[];let C=0;for(let k=0;k<ch;++k){const O=k/S,D=Math.exp(-O*O/2);x.push(D),k===0?C+=D:k<A&&(C+=2*D)}for(let k=0;k<x.length;k++)x[k]=x[k]/C;g.envMap.value=e.texture,g.samples.value=A,g.weights.value=x,g.latitudinal.value=o==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:T}=this;g.dTheta.value=_,g.mipInt.value=T-n;const R=this._sizeLods[r],L=3*R*(r>T-jd?r-T+jd:0),B=4*(this._cubeSize-R);wy(t,L,B,3*R,2*R),c.setRenderTarget(t),c.render(m,ow)}}function a6(i){const e=[],t=[],n=[];let r=i;const s=i-jd+1+eR.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>i-jd?c=eR[o-i+jd-1]:o===0&&(c=0),n.push(c);const h=1/(a-2),f=-h,m=1+h,g=[f,f,m,f,m,m,f,f,m,m,f,m],y=6,_=6,S=3,A=2,x=1,C=new Float32Array(S*_*y),T=new Float32Array(A*_*y),R=new Float32Array(x*_*y);for(let B=0;B<y;B++){const k=B%3*2/3-1,O=B>2?0:-1,D=[k,O,0,k+2/3,O,0,k+2/3,O+1,0,k,O,0,k+2/3,O+1,0,k,O+1,0];C.set(D,S*_*B),T.set(g,A*_*B);const N=[B,B,B,B,B,B];R.set(N,x*_*B)}const L=new Qt;L.setAttribute("position",new Pn(C,S)),L.setAttribute("uv",new Pn(T,A)),L.setAttribute("faceIndex",new Pn(R,x)),e.push(L),r>jd&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function iR(i,e,t){const n=new Da(i,e,t);return n.texture.mapping=Ip,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function wy(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function l6(i,e,t){const n=new Float32Array(ch),r=new j(0,1,0);return new yo({name:"SphericalGaussianBlur",defines:{n:ch,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:pM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function rR(){return new yo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:pM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function sR(){return new yo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:pM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function pM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function c6(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const c=a.mapping,h=c===Bg||c===Ng,f=c===Ul||c===Yc;if(h||f){let m=e.get(a);const g=m!==void 0?m.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==g)return t===null&&(t=new V1(i)),m=h?t.fromEquirectangular(a,m):t.fromCubemap(a,m),m.texture.pmremVersion=a.pmremVersion,e.set(a,m),m.texture;if(m!==void 0)return m.texture;{const y=a.image;return h&&y&&y.height>0||f&&y&&r(y)?(t===null&&(t=new V1(i)),m=h?t.fromEquirectangular(a):t.fromCubemap(a),m.texture.pmremVersion=a.pmremVersion,e.set(a,m),a.addEventListener("dispose",s),m.texture):null}}}return a}function r(a){let c=0;const h=6;for(let f=0;f<h;f++)a[f]!==void 0&&c++;return c===h}function s(a){const c=a.target;c.removeEventListener("dispose",s);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function u6(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&zg("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function h6(i,e,t,n){const r={},s=new WeakMap;function o(m){const g=m.target;g.index!==null&&e.remove(g.index);for(const _ in g.attributes)e.remove(g.attributes[_]);g.removeEventListener("dispose",o),delete r[g.id];const y=s.get(g);y&&(e.remove(y),s.delete(g)),n.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function a(m,g){return r[g.id]===!0||(g.addEventListener("dispose",o),r[g.id]=!0,t.memory.geometries++),g}function c(m){const g=m.attributes;for(const y in g)e.update(g[y],i.ARRAY_BUFFER)}function h(m){const g=[],y=m.index,_=m.attributes.position;let S=0;if(y!==null){const C=y.array;S=y.version;for(let T=0,R=C.length;T<R;T+=3){const L=C[T+0],B=C[T+1],k=C[T+2];g.push(L,B,B,k,k,L)}}else if(_!==void 0){const C=_.array;S=_.version;for(let T=0,R=C.length/3-1;T<R;T+=3){const L=T+0,B=T+1,k=T+2;g.push(L,B,B,k,k,L)}}else return;const A=new(PL(g)?kS:OS)(g,1);A.version=S;const x=s.get(m);x&&e.remove(x),s.set(m,A)}function f(m){const g=s.get(m);if(g){const y=m.index;y!==null&&g.version<y.version&&h(m)}else h(m);return s.get(m)}return{get:a,update:c,getWireframeAttribute:f}}function f6(i,e,t){let n;function r(g){n=g}let s,o;function a(g){s=g.type,o=g.bytesPerElement}function c(g,y){i.drawElements(n,y,s,g*o),t.update(y,n,1)}function h(g,y,_){_!==0&&(i.drawElementsInstanced(n,y,s,g*o,_),t.update(y,n,_))}function f(g,y,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,s,g,0,_);let A=0;for(let x=0;x<_;x++)A+=y[x];t.update(A,n,1)}function m(g,y,_,S){if(_===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let x=0;x<g.length;x++)h(g[x]/o,y[x],S[x]);else{A.multiDrawElementsInstancedWEBGL(n,y,0,s,g,0,S,0,_);let x=0;for(let C=0;C<_;C++)x+=y[C]*S[C];t.update(x,n,1)}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=h,this.renderMultiDraw=f,this.renderMultiDrawInstances=m}function d6(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(s/3);break;case i.LINES:t.lines+=a*(s/2);break;case i.LINE_STRIP:t.lines+=a*(s-1);break;case i.LINE_LOOP:t.lines+=a*s;break;case i.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function p6(i,e,t){const n=new WeakMap,r=new In;function s(o,a,c){const h=o.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,m=f!==void 0?f.length:0;let g=n.get(a);if(g===void 0||g.count!==m){let N=function(){O.dispose(),n.delete(a),a.removeEventListener("dispose",N)};var y=N;g!==void 0&&g.texture.dispose();const _=a.morphAttributes.position!==void 0,S=a.morphAttributes.normal!==void 0,A=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],C=a.morphAttributes.normal||[],T=a.morphAttributes.color||[];let R=0;_===!0&&(R=1),S===!0&&(R=2),A===!0&&(R=3);let L=a.attributes.position.count*R,B=1;L>e.maxTextureSize&&(B=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const k=new Float32Array(L*B*4*m),O=new Dx(k,L,B,m);O.type=xs,O.needsUpdate=!0;const D=R*4;for(let z=0;z<m;z++){const ee=x[z],te=C[z],ce=T[z],K=L*B*4*z;for(let oe=0;oe<ee.count;oe++){const ae=oe*D;_===!0&&(r.fromBufferAttribute(ee,oe),k[K+ae+0]=r.x,k[K+ae+1]=r.y,k[K+ae+2]=r.z,k[K+ae+3]=0),S===!0&&(r.fromBufferAttribute(te,oe),k[K+ae+4]=r.x,k[K+ae+5]=r.y,k[K+ae+6]=r.z,k[K+ae+7]=0),A===!0&&(r.fromBufferAttribute(ce,oe),k[K+ae+8]=r.x,k[K+ae+9]=r.y,k[K+ae+10]=r.z,k[K+ae+11]=ce.itemSize===4?r.w:1)}}g={count:m,texture:O,size:new Be(L,B)},n.set(a,g),a.addEventListener("dispose",N)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let _=0;for(let A=0;A<h.length;A++)_+=h[A];const S=a.morphTargetsRelative?1:1-_;c.getUniforms().setValue(i,"morphTargetBaseInfluence",S),c.getUniforms().setValue(i,"morphTargetInfluences",h)}c.getUniforms().setValue(i,"morphTargetsTexture",g.texture,t),c.getUniforms().setValue(i,"morphTargetsTextureSize",g.size)}return{update:s}}function m6(i,e,t,n){let r=new WeakMap;function s(c){const h=n.render.frame,f=c.geometry,m=e.get(c,f);if(r.get(m)!==h&&(e.update(m),r.set(m,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==h&&(t.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,i.ARRAY_BUFFER),r.set(c,h))),c.isSkinnedMesh){const g=c.skeleton;r.get(g)!==h&&(g.update(),r.set(g,h))}return m}function o(){r=new WeakMap}function a(c){const h=c.target;h.removeEventListener("dispose",a),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:o}}const bD=new li,oR=new VS(1,1),RD=new Dx,ID=new Bx,PD=new a0,aR=[],lR=[],cR=new Float32Array(16),uR=new Float32Array(9),hR=new Float32Array(4);function Np(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=aR[r];if(s===void 0&&(s=new Float32Array(r),aR[r]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function Ji(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Zi(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function nE(i,e){let t=lR[e];t===void 0&&(t=new Int32Array(e),lR[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function g6(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function v6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;i.uniform2fv(this.addr,e),Zi(t,e)}}function y6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ji(t,e))return;i.uniform3fv(this.addr,e),Zi(t,e)}}function _6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;i.uniform4fv(this.addr,e),Zi(t,e)}}function x6(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ji(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Zi(t,e)}else{if(Ji(t,n))return;hR.set(n),i.uniformMatrix2fv(this.addr,!1,hR),Zi(t,n)}}function E6(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ji(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Zi(t,e)}else{if(Ji(t,n))return;uR.set(n),i.uniformMatrix3fv(this.addr,!1,uR),Zi(t,n)}}function A6(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ji(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Zi(t,e)}else{if(Ji(t,n))return;cR.set(n),i.uniformMatrix4fv(this.addr,!1,cR),Zi(t,n)}}function w6(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function S6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;i.uniform2iv(this.addr,e),Zi(t,e)}}function M6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ji(t,e))return;i.uniform3iv(this.addr,e),Zi(t,e)}}function C6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;i.uniform4iv(this.addr,e),Zi(t,e)}}function T6(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function b6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;i.uniform2uiv(this.addr,e),Zi(t,e)}}function R6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ji(t,e))return;i.uniform3uiv(this.addr,e),Zi(t,e)}}function I6(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;i.uniform4uiv(this.addr,e),Zi(t,e)}}function P6(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(oR.compareFunction=BS,s=oR):s=bD,t.setTexture2D(e||s,r)}function L6(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||ID,r)}function D6(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||PD,r)}function B6(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||RD,r)}function N6(i){switch(i){case 5126:return g6;case 35664:return v6;case 35665:return y6;case 35666:return _6;case 35674:return x6;case 35675:return E6;case 35676:return A6;case 5124:case 35670:return w6;case 35667:case 35671:return S6;case 35668:case 35672:return M6;case 35669:case 35673:return C6;case 5125:return T6;case 36294:return b6;case 36295:return R6;case 36296:return I6;case 35678:case 36198:case 36298:case 36306:case 35682:return P6;case 35679:case 36299:case 36307:return L6;case 35680:case 36300:case 36308:case 36293:return D6;case 36289:case 36303:case 36311:case 36292:return B6}}function F6(i,e){i.uniform1fv(this.addr,e)}function O6(i,e){const t=Np(e,this.size,2);i.uniform2fv(this.addr,t)}function k6(i,e){const t=Np(e,this.size,3);i.uniform3fv(this.addr,t)}function U6(i,e){const t=Np(e,this.size,4);i.uniform4fv(this.addr,t)}function z6(i,e){const t=Np(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function G6(i,e){const t=Np(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function H6(i,e){const t=Np(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function V6(i,e){i.uniform1iv(this.addr,e)}function W6(i,e){i.uniform2iv(this.addr,e)}function X6(i,e){i.uniform3iv(this.addr,e)}function j6(i,e){i.uniform4iv(this.addr,e)}function Y6(i,e){i.uniform1uiv(this.addr,e)}function K6(i,e){i.uniform2uiv(this.addr,e)}function J6(i,e){i.uniform3uiv(this.addr,e)}function Z6(i,e){i.uniform4uiv(this.addr,e)}function q6(i,e,t){const n=this.cache,r=e.length,s=nE(t,r);Ji(n,s)||(i.uniform1iv(this.addr,s),Zi(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||bD,s[o])}function Q6(i,e,t){const n=this.cache,r=e.length,s=nE(t,r);Ji(n,s)||(i.uniform1iv(this.addr,s),Zi(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||ID,s[o])}function $6(i,e,t){const n=this.cache,r=e.length,s=nE(t,r);Ji(n,s)||(i.uniform1iv(this.addr,s),Zi(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||PD,s[o])}function eX(i,e,t){const n=this.cache,r=e.length,s=nE(t,r);Ji(n,s)||(i.uniform1iv(this.addr,s),Zi(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||RD,s[o])}function tX(i){switch(i){case 5126:return F6;case 35664:return O6;case 35665:return k6;case 35666:return U6;case 35674:return z6;case 35675:return G6;case 35676:return H6;case 5124:case 35670:return V6;case 35667:case 35671:return W6;case 35668:case 35672:return X6;case 35669:case 35673:return j6;case 5125:return Y6;case 36294:return K6;case 36295:return J6;case 36296:return Z6;case 35678:case 36198:case 36298:case 36306:case 35682:return q6;case 35679:case 36299:case 36307:return Q6;case 35680:case 36300:case 36308:case 36293:return $6;case 36289:case 36303:case 36311:case 36292:return eX}}class nX{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=N6(t.type)}}class iX{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=tX(t.type)}}class rX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const hw=/(\w+)(\])?(\[|\.)?/g;function fR(i,e){i.seq.push(e),i.map[e.id]=e}function sX(i,e,t){const n=i.name,r=n.length;for(hw.lastIndex=0;;){const s=hw.exec(n),o=hw.lastIndex;let a=s[1];const c=s[2]==="]",h=s[3];if(c&&(a=a|0),h===void 0||h==="["&&o+2===r){fR(t,h===void 0?new nX(a,i,e):new iX(a,i,e));break}else{let m=t.map[a];m===void 0&&(m=new rX(a),fR(t,m)),t=m}}}class Jy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);sX(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=n[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function dR(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const oX=37297;let aX=0;function lX(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}const pR=new on;function cX(i){Tn._getMatrix(pR,Tn.workingColorSpace,i);const e=`mat3( ${pR.elements.map(t=>t.toFixed(4))} )`;switch(Tn.getTransfer(i)){case Og:return[e,"LinearTransferOETF"];case zn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function mR(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=(i.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+lX(i.getShaderSource(e),a)}else return s}function uX(i,e){const t=cX(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function hX(i,e){let t;switch(e){case cL:t="Linear";break;case uL:t="Reinhard";break;case hL:t="Cineon";break;case wx:t="ACESFilmic";break;case dL:t="AgX";break;case pL:t="Neutral";break;case fL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Sy=new j;function fX(){Tn.getLuminanceCoefficients(Sy);const i=Sy.x.toFixed(4),e=Sy.y.toFixed(4),t=Sy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function dX(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ug).join(`
`)}function pX(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function mX(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function ug(i){return i!==""}function gR(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vR(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const gX=/^[ \t]*#include +<([\w\d./]+)>/gm;function W1(i){return i.replace(gX,yX)}const vX=new Map;function yX(i,e){let t=fn[e];if(t===void 0){const n=vX.get(e);if(n!==void 0)t=fn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return W1(t)}const _X=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yR(i){return i.replace(_X,xX)}function xX(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function _R(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function EX(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Ax?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===vg?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Zo&&(e="SHADOWMAP_TYPE_VSM"),e}function AX(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Ul:case Yc:e="ENVMAP_TYPE_CUBE";break;case Ip:e="ENVMAP_TYPE_CUBE_UV";break}return e}function wX(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Yc:e="ENVMAP_MODE_REFRACTION";break}return e}function SX(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case r0:e="ENVMAP_BLENDING_MULTIPLY";break;case aL:e="ENVMAP_BLENDING_MIX";break;case lL:e="ENVMAP_BLENDING_ADD";break}return e}function MX(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function CX(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=EX(t),h=AX(t),f=wX(t),m=SX(t),g=MX(t),y=dX(t),_=pX(s),S=r.createProgram();let A,x,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(ug).join(`
`),A.length>0&&(A+=`
`),x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(ug).join(`
`),x.length>0&&(x+=`
`)):(A=[_R(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ug).join(`
`),x=[_R(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+m:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ia?"#define TONE_MAPPING":"",t.toneMapping!==Ia?fn.tonemapping_pars_fragment:"",t.toneMapping!==Ia?hX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,uX("linearToOutputTexel",t.outputColorSpace),fX(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ug).join(`
`)),o=W1(o),o=gR(o,t),o=vR(o,t),a=W1(a),a=gR(a,t),a=vR(a,t),o=yR(o),a=yR(a),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,A=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,x=["#define varying in",t.glslVersion===N1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===N1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const T=C+A+o,R=C+x+a,L=dR(r,r.VERTEX_SHADER,T),B=dR(r,r.FRAGMENT_SHADER,R);r.attachShader(S,L),r.attachShader(S,B),t.index0AttributeName!==void 0?r.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(S,0,"position"),r.linkProgram(S);function k(z){if(i.debug.checkShaderErrors){const ee=r.getProgramInfoLog(S)||"",te=r.getShaderInfoLog(L)||"",ce=r.getShaderInfoLog(B)||"",K=ee.trim(),oe=te.trim(),ae=ce.trim();let U=!0,Z=!0;if(r.getProgramParameter(S,r.LINK_STATUS)===!1)if(U=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,S,L,B);else{const q=mR(r,L,"vertex"),W=mR(r,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(S,r.VALIDATE_STATUS)+`

Material Name: `+z.name+`
Material Type: `+z.type+`

Program Info Log: `+K+`
`+q+`
`+W)}else K!==""?console.warn("THREE.WebGLProgram: Program Info Log:",K):(oe===""||ae==="")&&(Z=!1);Z&&(z.diagnostics={runnable:U,programLog:K,vertexShader:{log:oe,prefix:A},fragmentShader:{log:ae,prefix:x}})}r.deleteShader(L),r.deleteShader(B),O=new Jy(r,S),D=mX(r,S)}let O;this.getUniforms=function(){return O===void 0&&k(this),O};let D;this.getAttributes=function(){return D===void 0&&k(this),D};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=r.getProgramParameter(S,oX)),N},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(S),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=aX++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=L,this.fragmentShader=B,this}let TX=0;class bX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new RX(e),t.set(e,n)),n}}class RX{constructor(e){this.id=TX++,this.code=e,this.usedTimes=0}}function IX(i,e,t,n,r,s,o){const a=new wh,c=new bX,h=new Set,f=[],m=r.logarithmicDepthBuffer,g=r.vertexTextures;let y=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(D){return h.add(D),D===0?"uv":`uv${D}`}function A(D,N,z,ee,te){const ce=ee.fog,K=te.geometry,oe=D.isMeshStandardMaterial?ee.environment:null,ae=(D.isMeshStandardMaterial?t:e).get(D.envMap||oe),U=ae&&ae.mapping===Ip?ae.image.height:null,Z=_[D.type];D.precision!==null&&(y=r.getMaxPrecision(D.precision),y!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",y,"instead."));const q=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,W=q!==void 0?q.length:0;let se=0;K.morphAttributes.position!==void 0&&(se=1),K.morphAttributes.normal!==void 0&&(se=2),K.morphAttributes.color!==void 0&&(se=3);let _e,De,ze,de;if(Z){const nn=Qo[Z];_e=nn.vertexShader,De=nn.fragmentShader}else _e=D.vertexShader,De=D.fragmentShader,c.update(D),ze=c.getVertexShaderID(D),de=c.getFragmentShaderID(D);const ge=i.getRenderTarget(),Ue=i.state.buffers.depth.getReversed(),We=te.isInstancedMesh===!0,He=te.isBatchedMesh===!0,rt=!!D.map,zt=!!D.matcap,Q=!!ae,Oe=!!D.aoMap,Le=!!D.lightMap,Pe=!!D.bumpMap,Re=!!D.normalMap,Qe=!!D.displacementMap,Ve=!!D.emissiveMap,je=!!D.metalnessMap,Rt=!!D.roughnessMap,Dt=D.anisotropy>0,Y=D.clearcoat>0,H=D.dispersion>0,ve=D.iridescence>0,Ce=D.sheen>0,Fe=D.transmission>0,be=Dt&&!!D.anisotropyMap,Et=Y&&!!D.clearcoatMap,et=Y&&!!D.clearcoatNormalMap,gt=Y&&!!D.clearcoatRoughnessMap,At=ve&&!!D.iridescenceMap,Ke=ve&&!!D.iridescenceThicknessMap,lt=Ce&&!!D.sheenColorMap,Ot=Ce&&!!D.sheenRoughnessMap,ie=!!D.specularMap,xe=!!D.specularColorMap,tt=!!D.specularIntensityMap,re=Fe&&!!D.transmissionMap,Ge=Fe&&!!D.thicknessMap,Je=!!D.gradientMap,ot=!!D.alphaMap,qe=D.alphaTest>0,ke=!!D.alphaHash,ct=!!D.extensions;let Bt=Ia;D.toneMapped&&(ge===null||ge.isXRRenderTarget===!0)&&(Bt=i.toneMapping);const mn={shaderID:Z,shaderType:D.type,shaderName:D.name,vertexShader:_e,fragmentShader:De,defines:D.defines,customVertexShaderID:ze,customFragmentShaderID:de,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:y,batching:He,batchingColor:He&&te._colorsTexture!==null,instancing:We,instancingColor:We&&te.instanceColor!==null,instancingMorph:We&&te.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:ge===null?i.outputColorSpace:ge.isXRRenderTarget===!0?ge.texture.colorSpace:Dh,alphaToCoverage:!!D.alphaToCoverage,map:rt,matcap:zt,envMap:Q,envMapMode:Q&&ae.mapping,envMapCubeUVHeight:U,aoMap:Oe,lightMap:Le,bumpMap:Pe,normalMap:Re,displacementMap:g&&Qe,emissiveMap:Ve,normalMapObjectSpace:Re&&D.normalMapType===AL,normalMapTangentSpace:Re&&D.normalMapType===Qc,metalnessMap:je,roughnessMap:Rt,anisotropy:Dt,anisotropyMap:be,clearcoat:Y,clearcoatMap:Et,clearcoatNormalMap:et,clearcoatRoughnessMap:gt,dispersion:H,iridescence:ve,iridescenceMap:At,iridescenceThicknessMap:Ke,sheen:Ce,sheenColorMap:lt,sheenRoughnessMap:Ot,specularMap:ie,specularColorMap:xe,specularIntensityMap:tt,transmission:Fe,transmissionMap:re,thicknessMap:Ge,gradientMap:Je,opaque:D.transparent===!1&&D.blending===Eh&&D.alphaToCoverage===!1,alphaMap:ot,alphaTest:qe,alphaHash:ke,combine:D.combine,mapUv:rt&&S(D.map.channel),aoMapUv:Oe&&S(D.aoMap.channel),lightMapUv:Le&&S(D.lightMap.channel),bumpMapUv:Pe&&S(D.bumpMap.channel),normalMapUv:Re&&S(D.normalMap.channel),displacementMapUv:Qe&&S(D.displacementMap.channel),emissiveMapUv:Ve&&S(D.emissiveMap.channel),metalnessMapUv:je&&S(D.metalnessMap.channel),roughnessMapUv:Rt&&S(D.roughnessMap.channel),anisotropyMapUv:be&&S(D.anisotropyMap.channel),clearcoatMapUv:Et&&S(D.clearcoatMap.channel),clearcoatNormalMapUv:et&&S(D.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:gt&&S(D.clearcoatRoughnessMap.channel),iridescenceMapUv:At&&S(D.iridescenceMap.channel),iridescenceThicknessMapUv:Ke&&S(D.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&S(D.sheenColorMap.channel),sheenRoughnessMapUv:Ot&&S(D.sheenRoughnessMap.channel),specularMapUv:ie&&S(D.specularMap.channel),specularColorMapUv:xe&&S(D.specularColorMap.channel),specularIntensityMapUv:tt&&S(D.specularIntensityMap.channel),transmissionMapUv:re&&S(D.transmissionMap.channel),thicknessMapUv:Ge&&S(D.thicknessMap.channel),alphaMapUv:ot&&S(D.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(Re||Dt),vertexColors:D.vertexColors,vertexAlphas:D.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,pointsUvs:te.isPoints===!0&&!!K.attributes.uv&&(rt||ot),fog:!!ce,useFog:D.fog===!0,fogExp2:!!ce&&ce.isFogExp2,flatShading:D.flatShading===!0&&D.wireframe===!1,sizeAttenuation:D.sizeAttenuation===!0,logarithmicDepthBuffer:m,reversedDepthBuffer:Ue,skinning:te.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:se,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:D.dithering,shadowMapEnabled:i.shadowMap.enabled&&z.length>0,shadowMapType:i.shadowMap.type,toneMapping:Bt,decodeVideoTexture:rt&&D.map.isVideoTexture===!0&&Tn.getTransfer(D.map.colorSpace)===zn,decodeVideoTextureEmissive:Ve&&D.emissiveMap.isVideoTexture===!0&&Tn.getTransfer(D.emissiveMap.colorSpace)===zn,premultipliedAlpha:D.premultipliedAlpha,doubleSided:D.side===ks,flipSided:D.side===Nr,useDepthPacking:D.depthPacking>=0,depthPacking:D.depthPacking||0,index0AttributeName:D.index0AttributeName,extensionClipCullDistance:ct&&D.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ct&&D.extensions.multiDraw===!0||He)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:D.customProgramCacheKey()};return mn.vertexUv1s=h.has(1),mn.vertexUv2s=h.has(2),mn.vertexUv3s=h.has(3),h.clear(),mn}function x(D){const N=[];if(D.shaderID?N.push(D.shaderID):(N.push(D.customVertexShaderID),N.push(D.customFragmentShaderID)),D.defines!==void 0)for(const z in D.defines)N.push(z),N.push(D.defines[z]);return D.isRawShaderMaterial===!1&&(C(N,D),T(N,D),N.push(i.outputColorSpace)),N.push(D.customProgramCacheKey),N.join()}function C(D,N){D.push(N.precision),D.push(N.outputColorSpace),D.push(N.envMapMode),D.push(N.envMapCubeUVHeight),D.push(N.mapUv),D.push(N.alphaMapUv),D.push(N.lightMapUv),D.push(N.aoMapUv),D.push(N.bumpMapUv),D.push(N.normalMapUv),D.push(N.displacementMapUv),D.push(N.emissiveMapUv),D.push(N.metalnessMapUv),D.push(N.roughnessMapUv),D.push(N.anisotropyMapUv),D.push(N.clearcoatMapUv),D.push(N.clearcoatNormalMapUv),D.push(N.clearcoatRoughnessMapUv),D.push(N.iridescenceMapUv),D.push(N.iridescenceThicknessMapUv),D.push(N.sheenColorMapUv),D.push(N.sheenRoughnessMapUv),D.push(N.specularMapUv),D.push(N.specularColorMapUv),D.push(N.specularIntensityMapUv),D.push(N.transmissionMapUv),D.push(N.thicknessMapUv),D.push(N.combine),D.push(N.fogExp2),D.push(N.sizeAttenuation),D.push(N.morphTargetsCount),D.push(N.morphAttributeCount),D.push(N.numDirLights),D.push(N.numPointLights),D.push(N.numSpotLights),D.push(N.numSpotLightMaps),D.push(N.numHemiLights),D.push(N.numRectAreaLights),D.push(N.numDirLightShadows),D.push(N.numPointLightShadows),D.push(N.numSpotLightShadows),D.push(N.numSpotLightShadowsWithMaps),D.push(N.numLightProbes),D.push(N.shadowMapType),D.push(N.toneMapping),D.push(N.numClippingPlanes),D.push(N.numClipIntersection),D.push(N.depthPacking)}function T(D,N){a.disableAll(),N.supportsVertexTextures&&a.enable(0),N.instancing&&a.enable(1),N.instancingColor&&a.enable(2),N.instancingMorph&&a.enable(3),N.matcap&&a.enable(4),N.envMap&&a.enable(5),N.normalMapObjectSpace&&a.enable(6),N.normalMapTangentSpace&&a.enable(7),N.clearcoat&&a.enable(8),N.iridescence&&a.enable(9),N.alphaTest&&a.enable(10),N.vertexColors&&a.enable(11),N.vertexAlphas&&a.enable(12),N.vertexUv1s&&a.enable(13),N.vertexUv2s&&a.enable(14),N.vertexUv3s&&a.enable(15),N.vertexTangents&&a.enable(16),N.anisotropy&&a.enable(17),N.alphaHash&&a.enable(18),N.batching&&a.enable(19),N.dispersion&&a.enable(20),N.batchingColor&&a.enable(21),N.gradientMap&&a.enable(22),D.push(a.mask),a.disableAll(),N.fog&&a.enable(0),N.useFog&&a.enable(1),N.flatShading&&a.enable(2),N.logarithmicDepthBuffer&&a.enable(3),N.reversedDepthBuffer&&a.enable(4),N.skinning&&a.enable(5),N.morphTargets&&a.enable(6),N.morphNormals&&a.enable(7),N.morphColors&&a.enable(8),N.premultipliedAlpha&&a.enable(9),N.shadowMapEnabled&&a.enable(10),N.doubleSided&&a.enable(11),N.flipSided&&a.enable(12),N.useDepthPacking&&a.enable(13),N.dithering&&a.enable(14),N.transmission&&a.enable(15),N.sheen&&a.enable(16),N.opaque&&a.enable(17),N.pointsUvs&&a.enable(18),N.decodeVideoTexture&&a.enable(19),N.decodeVideoTextureEmissive&&a.enable(20),N.alphaToCoverage&&a.enable(21),D.push(a.mask)}function R(D){const N=_[D.type];let z;if(N){const ee=Qo[N];z=FL.clone(ee.uniforms)}else z=D.uniforms;return z}function L(D,N){let z;for(let ee=0,te=f.length;ee<te;ee++){const ce=f[ee];if(ce.cacheKey===N){z=ce,++z.usedTimes;break}}return z===void 0&&(z=new CX(i,N,D,s),f.push(z)),z}function B(D){if(--D.usedTimes===0){const N=f.indexOf(D);f[N]=f[f.length-1],f.pop(),D.destroy()}}function k(D){c.remove(D)}function O(){c.dispose()}return{getParameters:A,getProgramCacheKey:x,getUniforms:R,acquireProgram:L,releaseProgram:B,releaseShaderCache:k,programs:f,dispose:O}}function PX(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let a=i.get(o);return a===void 0&&(a={},i.set(o,a)),a}function n(o){i.delete(o)}function r(o,a,c){i.get(o)[a]=c}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function LX(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function xR(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function ER(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(m,g,y,_,S,A){let x=i[e];return x===void 0?(x={id:m.id,object:m,geometry:g,material:y,groupOrder:_,renderOrder:m.renderOrder,z:S,group:A},i[e]=x):(x.id=m.id,x.object=m,x.geometry=g,x.material=y,x.groupOrder=_,x.renderOrder=m.renderOrder,x.z=S,x.group=A),e++,x}function a(m,g,y,_,S,A){const x=o(m,g,y,_,S,A);y.transmission>0?n.push(x):y.transparent===!0?r.push(x):t.push(x)}function c(m,g,y,_,S,A){const x=o(m,g,y,_,S,A);y.transmission>0?n.unshift(x):y.transparent===!0?r.unshift(x):t.unshift(x)}function h(m,g){t.length>1&&t.sort(m||LX),n.length>1&&n.sort(g||xR),r.length>1&&r.sort(g||xR)}function f(){for(let m=e,g=i.length;m<g;m++){const y=i[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:a,unshift:c,finish:f,sort:h}}function DX(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new ER,i.set(n,[o])):r>=s.length?(o=new ER,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function BX(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new ft};break;case"SpotLight":t={position:new j,direction:new j,color:new ft,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new ft,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new ft,groundColor:new ft};break;case"RectAreaLight":t={color:new ft,position:new j,halfWidth:new j,halfHeight:new j};break}return i[e.id]=t,t}}}function NX(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let FX=0;function OX(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function kX(i){const e=new BX,t=NX(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)n.probe.push(new j);const r=new j,s=new jt,o=new jt;function a(h){let f=0,m=0,g=0;for(let D=0;D<9;D++)n.probe[D].set(0,0,0);let y=0,_=0,S=0,A=0,x=0,C=0,T=0,R=0,L=0,B=0,k=0;h.sort(OX);for(let D=0,N=h.length;D<N;D++){const z=h[D],ee=z.color,te=z.intensity,ce=z.distance,K=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)f+=ee.r*te,m+=ee.g*te,g+=ee.b*te;else if(z.isLightProbe){for(let oe=0;oe<9;oe++)n.probe[oe].addScaledVector(z.sh.coefficients[oe],te);k++}else if(z.isDirectionalLight){const oe=e.get(z);if(oe.color.copy(z.color).multiplyScalar(z.intensity),z.castShadow){const ae=z.shadow,U=t.get(z);U.shadowIntensity=ae.intensity,U.shadowBias=ae.bias,U.shadowNormalBias=ae.normalBias,U.shadowRadius=ae.radius,U.shadowMapSize=ae.mapSize,n.directionalShadow[y]=U,n.directionalShadowMap[y]=K,n.directionalShadowMatrix[y]=z.shadow.matrix,C++}n.directional[y]=oe,y++}else if(z.isSpotLight){const oe=e.get(z);oe.position.setFromMatrixPosition(z.matrixWorld),oe.color.copy(ee).multiplyScalar(te),oe.distance=ce,oe.coneCos=Math.cos(z.angle),oe.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),oe.decay=z.decay,n.spot[S]=oe;const ae=z.shadow;if(z.map&&(n.spotLightMap[L]=z.map,L++,ae.updateMatrices(z),z.castShadow&&B++),n.spotLightMatrix[S]=ae.matrix,z.castShadow){const U=t.get(z);U.shadowIntensity=ae.intensity,U.shadowBias=ae.bias,U.shadowNormalBias=ae.normalBias,U.shadowRadius=ae.radius,U.shadowMapSize=ae.mapSize,n.spotShadow[S]=U,n.spotShadowMap[S]=K,R++}S++}else if(z.isRectAreaLight){const oe=e.get(z);oe.color.copy(ee).multiplyScalar(te),oe.halfWidth.set(z.width*.5,0,0),oe.halfHeight.set(0,z.height*.5,0),n.rectArea[A]=oe,A++}else if(z.isPointLight){const oe=e.get(z);if(oe.color.copy(z.color).multiplyScalar(z.intensity),oe.distance=z.distance,oe.decay=z.decay,z.castShadow){const ae=z.shadow,U=t.get(z);U.shadowIntensity=ae.intensity,U.shadowBias=ae.bias,U.shadowNormalBias=ae.normalBias,U.shadowRadius=ae.radius,U.shadowMapSize=ae.mapSize,U.shadowCameraNear=ae.camera.near,U.shadowCameraFar=ae.camera.far,n.pointShadow[_]=U,n.pointShadowMap[_]=K,n.pointShadowMatrix[_]=z.shadow.matrix,T++}n.point[_]=oe,_++}else if(z.isHemisphereLight){const oe=e.get(z);oe.skyColor.copy(z.color).multiplyScalar(te),oe.groundColor.copy(z.groundColor).multiplyScalar(te),n.hemi[x]=oe,x++}}A>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ht.LTC_FLOAT_1,n.rectAreaLTC2=ht.LTC_FLOAT_2):(n.rectAreaLTC1=ht.LTC_HALF_1,n.rectAreaLTC2=ht.LTC_HALF_2)),n.ambient[0]=f,n.ambient[1]=m,n.ambient[2]=g;const O=n.hash;(O.directionalLength!==y||O.pointLength!==_||O.spotLength!==S||O.rectAreaLength!==A||O.hemiLength!==x||O.numDirectionalShadows!==C||O.numPointShadows!==T||O.numSpotShadows!==R||O.numSpotMaps!==L||O.numLightProbes!==k)&&(n.directional.length=y,n.spot.length=S,n.rectArea.length=A,n.point.length=_,n.hemi.length=x,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=T,n.pointShadowMap.length=T,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=T,n.spotLightMatrix.length=R+L-B,n.spotLightMap.length=L,n.numSpotLightShadowsWithMaps=B,n.numLightProbes=k,O.directionalLength=y,O.pointLength=_,O.spotLength=S,O.rectAreaLength=A,O.hemiLength=x,O.numDirectionalShadows=C,O.numPointShadows=T,O.numSpotShadows=R,O.numSpotMaps=L,O.numLightProbes=k,n.version=FX++)}function c(h,f){let m=0,g=0,y=0,_=0,S=0;const A=f.matrixWorldInverse;for(let x=0,C=h.length;x<C;x++){const T=h[x];if(T.isDirectionalLight){const R=n.directional[m];R.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(A),m++}else if(T.isSpotLight){const R=n.spot[y];R.position.setFromMatrixPosition(T.matrixWorld),R.position.applyMatrix4(A),R.direction.setFromMatrixPosition(T.matrixWorld),r.setFromMatrixPosition(T.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(A),y++}else if(T.isRectAreaLight){const R=n.rectArea[_];R.position.setFromMatrixPosition(T.matrixWorld),R.position.applyMatrix4(A),o.identity(),s.copy(T.matrixWorld),s.premultiply(A),o.extractRotation(s),R.halfWidth.set(T.width*.5,0,0),R.halfHeight.set(0,T.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),_++}else if(T.isPointLight){const R=n.point[g];R.position.setFromMatrixPosition(T.matrixWorld),R.position.applyMatrix4(A),g++}else if(T.isHemisphereLight){const R=n.hemi[S];R.direction.setFromMatrixPosition(T.matrixWorld),R.direction.transformDirection(A),S++}}}return{setup:a,setupView:c,state:n}}function AR(i){const e=new kX(i),t=[],n=[];function r(f){h.camera=f,t.length=0,n.length=0}function s(f){t.push(f)}function o(f){n.push(f)}function a(){e.setup(t)}function c(f){e.setupView(t,f)}const h={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function UX(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new AR(i),e.set(r,[a])):s>=o.length?(a=new AR(i),o.push(a)):a=o[s],a}function n(){e=new WeakMap}return{get:t,dispose:n}}const zX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,GX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function HX(i,e,t){let n=new Lp;const r=new Be,s=new Be,o=new In,a=new qS({depthPacking:EL}),c=new QS,h={},f=t.maxTextureSize,m={[La]:Nr,[Nr]:La,[ks]:ks},g=new yo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Be},radius:{value:4}},vertexShader:zX,fragmentShader:GX}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const _=new Qt;_.setAttribute("position",new Pn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new mi(_,g),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ax;let x=this.type;this.render=function(B,k,O){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||B.length===0)return;const D=i.getRenderTarget(),N=i.getActiveCubeFace(),z=i.getActiveMipmapLevel(),ee=i.state;ee.setBlending(Nl),ee.buffers.depth.getReversed()===!0?ee.buffers.color.setClear(0,0,0,0):ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const te=x!==Zo&&this.type===Zo,ce=x===Zo&&this.type!==Zo;for(let K=0,oe=B.length;K<oe;K++){const ae=B[K],U=ae.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);const Z=U.getFrameExtents();if(r.multiply(Z),s.copy(U.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/Z.x),r.x=s.x*Z.x,U.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/Z.y),r.y=s.y*Z.y,U.mapSize.y=s.y)),U.map===null||te===!0||ce===!0){const W=this.type!==Zo?{minFilter:or,magFilter:or}:{};U.map!==null&&U.map.dispose(),U.map=new Da(r.x,r.y,W),U.map.texture.name=ae.name+".shadowMap",U.camera.updateProjectionMatrix()}i.setRenderTarget(U.map),i.clear();const q=U.getViewportCount();for(let W=0;W<q;W++){const se=U.getViewport(W);o.set(s.x*se.x,s.y*se.y,s.x*se.z,s.y*se.w),ee.viewport(o),U.updateMatrices(ae,W),n=U.getFrustum(),R(k,O,U.camera,ae,this.type)}U.isPointLightShadow!==!0&&this.type===Zo&&C(U,O),U.needsUpdate=!1}x=this.type,A.needsUpdate=!1,i.setRenderTarget(D,N,z)};function C(B,k){const O=e.update(S);g.defines.VSM_SAMPLES!==B.blurSamples&&(g.defines.VSM_SAMPLES=B.blurSamples,y.defines.VSM_SAMPLES=B.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Da(r.x,r.y)),g.uniforms.shadow_pass.value=B.map.texture,g.uniforms.resolution.value=B.mapSize,g.uniforms.radius.value=B.radius,i.setRenderTarget(B.mapPass),i.clear(),i.renderBufferDirect(k,null,O,g,S,null),y.uniforms.shadow_pass.value=B.mapPass.texture,y.uniforms.resolution.value=B.mapSize,y.uniforms.radius.value=B.radius,i.setRenderTarget(B.map),i.clear(),i.renderBufferDirect(k,null,O,y,S,null)}function T(B,k,O,D){let N=null;const z=O.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(z!==void 0)N=z;else if(N=O.isPointLight===!0?c:a,i.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const ee=N.uuid,te=k.uuid;let ce=h[ee];ce===void 0&&(ce={},h[ee]=ce);let K=ce[te];K===void 0&&(K=N.clone(),ce[te]=K,k.addEventListener("dispose",L)),N=K}if(N.visible=k.visible,N.wireframe=k.wireframe,D===Zo?N.side=k.shadowSide!==null?k.shadowSide:k.side:N.side=k.shadowSide!==null?k.shadowSide:m[k.side],N.alphaMap=k.alphaMap,N.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,N.map=k.map,N.clipShadows=k.clipShadows,N.clippingPlanes=k.clippingPlanes,N.clipIntersection=k.clipIntersection,N.displacementMap=k.displacementMap,N.displacementScale=k.displacementScale,N.displacementBias=k.displacementBias,N.wireframeLinewidth=k.wireframeLinewidth,N.linewidth=k.linewidth,O.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const ee=i.properties.get(N);ee.light=O}return N}function R(B,k,O,D,N){if(B.visible===!1)return;if(B.layers.test(k.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&N===Zo)&&(!B.frustumCulled||n.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,B.matrixWorld);const te=e.update(B),ce=B.material;if(Array.isArray(ce)){const K=te.groups;for(let oe=0,ae=K.length;oe<ae;oe++){const U=K[oe],Z=ce[U.materialIndex];if(Z&&Z.visible){const q=T(B,Z,D,N);B.onBeforeShadow(i,B,k,O,te,q,U),i.renderBufferDirect(O,null,te,q,B,U),B.onAfterShadow(i,B,k,O,te,q,U)}}}else if(ce.visible){const K=T(B,ce,D,N);B.onBeforeShadow(i,B,k,O,te,K,null),i.renderBufferDirect(O,null,te,K,B,null),B.onAfterShadow(i,B,k,O,te,K,null)}}const ee=B.children;for(let te=0,ce=ee.length;te<ce;te++)R(ee[te],k,O,D,N)}function L(B){B.target.removeEventListener("dispose",L);for(const O in h){const D=h[O],N=B.target.uuid;N in D&&(D[N].dispose(),delete D[N])}}}const VX={[m_]:g_,[v_]:x_,[y_]:E_,[Lh]:__,[g_]:m_,[x_]:v_,[E_]:y_,[__]:Lh};function WX(i,e){function t(){let re=!1;const Ge=new In;let Je=null;const ot=new In(0,0,0,0);return{setMask:function(qe){Je!==qe&&!re&&(i.colorMask(qe,qe,qe,qe),Je=qe)},setLocked:function(qe){re=qe},setClear:function(qe,ke,ct,Bt,mn){mn===!0&&(qe*=Bt,ke*=Bt,ct*=Bt),Ge.set(qe,ke,ct,Bt),ot.equals(Ge)===!1&&(i.clearColor(qe,ke,ct,Bt),ot.copy(Ge))},reset:function(){re=!1,Je=null,ot.set(-1,0,0,0)}}}function n(){let re=!1,Ge=!1,Je=null,ot=null,qe=null;return{setReversed:function(ke){if(Ge!==ke){const ct=e.get("EXT_clip_control");ke?ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.ZERO_TO_ONE_EXT):ct.clipControlEXT(ct.LOWER_LEFT_EXT,ct.NEGATIVE_ONE_TO_ONE_EXT),Ge=ke;const Bt=qe;qe=null,this.setClear(Bt)}},getReversed:function(){return Ge},setTest:function(ke){ke?ge(i.DEPTH_TEST):Ue(i.DEPTH_TEST)},setMask:function(ke){Je!==ke&&!re&&(i.depthMask(ke),Je=ke)},setFunc:function(ke){if(Ge&&(ke=VX[ke]),ot!==ke){switch(ke){case m_:i.depthFunc(i.NEVER);break;case g_:i.depthFunc(i.ALWAYS);break;case v_:i.depthFunc(i.LESS);break;case Lh:i.depthFunc(i.LEQUAL);break;case y_:i.depthFunc(i.EQUAL);break;case __:i.depthFunc(i.GEQUAL);break;case x_:i.depthFunc(i.GREATER);break;case E_:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ot=ke}},setLocked:function(ke){re=ke},setClear:function(ke){qe!==ke&&(Ge&&(ke=1-ke),i.clearDepth(ke),qe=ke)},reset:function(){re=!1,Je=null,ot=null,qe=null,Ge=!1}}}function r(){let re=!1,Ge=null,Je=null,ot=null,qe=null,ke=null,ct=null,Bt=null,mn=null;return{setTest:function(nn){re||(nn?ge(i.STENCIL_TEST):Ue(i.STENCIL_TEST))},setMask:function(nn){Ge!==nn&&!re&&(i.stencilMask(nn),Ge=nn)},setFunc:function(nn,Ai,ci){(Je!==nn||ot!==Ai||qe!==ci)&&(i.stencilFunc(nn,Ai,ci),Je=nn,ot=Ai,qe=ci)},setOp:function(nn,Ai,ci){(ke!==nn||ct!==Ai||Bt!==ci)&&(i.stencilOp(nn,Ai,ci),ke=nn,ct=Ai,Bt=ci)},setLocked:function(nn){re=nn},setClear:function(nn){mn!==nn&&(i.clearStencil(nn),mn=nn)},reset:function(){re=!1,Ge=null,Je=null,ot=null,qe=null,ke=null,ct=null,Bt=null,mn=null}}}const s=new t,o=new n,a=new r,c=new WeakMap,h=new WeakMap;let f={},m={},g=new WeakMap,y=[],_=null,S=!1,A=null,x=null,C=null,T=null,R=null,L=null,B=null,k=new ft(0,0,0),O=0,D=!1,N=null,z=null,ee=null,te=null,ce=null;const K=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let oe=!1,ae=0;const U=i.getParameter(i.VERSION);U.indexOf("WebGL")!==-1?(ae=parseFloat(/^WebGL (\d)/.exec(U)[1]),oe=ae>=1):U.indexOf("OpenGL ES")!==-1&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),oe=ae>=2);let Z=null,q={};const W=i.getParameter(i.SCISSOR_BOX),se=i.getParameter(i.VIEWPORT),_e=new In().fromArray(W),De=new In().fromArray(se);function ze(re,Ge,Je,ot){const qe=new Uint8Array(4),ke=i.createTexture();i.bindTexture(re,ke),i.texParameteri(re,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(re,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ct=0;ct<Je;ct++)re===i.TEXTURE_3D||re===i.TEXTURE_2D_ARRAY?i.texImage3D(Ge,0,i.RGBA,1,1,ot,0,i.RGBA,i.UNSIGNED_BYTE,qe):i.texImage2D(Ge+ct,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,qe);return ke}const de={};de[i.TEXTURE_2D]=ze(i.TEXTURE_2D,i.TEXTURE_2D,1),de[i.TEXTURE_CUBE_MAP]=ze(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),de[i.TEXTURE_2D_ARRAY]=ze(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),de[i.TEXTURE_3D]=ze(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ge(i.DEPTH_TEST),o.setFunc(Lh),Pe(!1),Re(R1),ge(i.CULL_FACE),Oe(Nl);function ge(re){f[re]!==!0&&(i.enable(re),f[re]=!0)}function Ue(re){f[re]!==!1&&(i.disable(re),f[re]=!1)}function We(re,Ge){return m[re]!==Ge?(i.bindFramebuffer(re,Ge),m[re]=Ge,re===i.DRAW_FRAMEBUFFER&&(m[i.FRAMEBUFFER]=Ge),re===i.FRAMEBUFFER&&(m[i.DRAW_FRAMEBUFFER]=Ge),!0):!1}function He(re,Ge){let Je=y,ot=!1;if(re){Je=g.get(Ge),Je===void 0&&(Je=[],g.set(Ge,Je));const qe=re.textures;if(Je.length!==qe.length||Je[0]!==i.COLOR_ATTACHMENT0){for(let ke=0,ct=qe.length;ke<ct;ke++)Je[ke]=i.COLOR_ATTACHMENT0+ke;Je.length=qe.length,ot=!0}}else Je[0]!==i.BACK&&(Je[0]=i.BACK,ot=!0);ot&&i.drawBuffers(Je)}function rt(re){return _!==re?(i.useProgram(re),_=re,!0):!1}const zt={[Hc]:i.FUNC_ADD,[WP]:i.FUNC_SUBTRACT,[XP]:i.FUNC_REVERSE_SUBTRACT};zt[jP]=i.MIN,zt[YP]=i.MAX;const Q={[KP]:i.ZERO,[JP]:i.ONE,[ZP]:i.SRC_COLOR,[d_]:i.SRC_ALPHA,[nL]:i.SRC_ALPHA_SATURATE,[eL]:i.DST_COLOR,[QP]:i.DST_ALPHA,[qP]:i.ONE_MINUS_SRC_COLOR,[p_]:i.ONE_MINUS_SRC_ALPHA,[tL]:i.ONE_MINUS_DST_COLOR,[$P]:i.ONE_MINUS_DST_ALPHA,[iL]:i.CONSTANT_COLOR,[rL]:i.ONE_MINUS_CONSTANT_COLOR,[sL]:i.CONSTANT_ALPHA,[oL]:i.ONE_MINUS_CONSTANT_ALPHA};function Oe(re,Ge,Je,ot,qe,ke,ct,Bt,mn,nn){if(re===Nl){S===!0&&(Ue(i.BLEND),S=!1);return}if(S===!1&&(ge(i.BLEND),S=!0),re!==VP){if(re!==A||nn!==D){if((x!==Hc||R!==Hc)&&(i.blendEquation(i.FUNC_ADD),x=Hc,R=Hc),nn)switch(re){case Eh:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case I1:i.blendFunc(i.ONE,i.ONE);break;case P1:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case L1:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case Eh:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case I1:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case P1:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case L1:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}C=null,T=null,L=null,B=null,k.set(0,0,0),O=0,A=re,D=nn}return}qe=qe||Ge,ke=ke||Je,ct=ct||ot,(Ge!==x||qe!==R)&&(i.blendEquationSeparate(zt[Ge],zt[qe]),x=Ge,R=qe),(Je!==C||ot!==T||ke!==L||ct!==B)&&(i.blendFuncSeparate(Q[Je],Q[ot],Q[ke],Q[ct]),C=Je,T=ot,L=ke,B=ct),(Bt.equals(k)===!1||mn!==O)&&(i.blendColor(Bt.r,Bt.g,Bt.b,mn),k.copy(Bt),O=mn),A=re,D=!1}function Le(re,Ge){re.side===ks?Ue(i.CULL_FACE):ge(i.CULL_FACE);let Je=re.side===Nr;Ge&&(Je=!Je),Pe(Je),re.blending===Eh&&re.transparent===!1?Oe(Nl):Oe(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.blendColor,re.blendAlpha,re.premultipliedAlpha),o.setFunc(re.depthFunc),o.setTest(re.depthTest),o.setMask(re.depthWrite),s.setMask(re.colorWrite);const ot=re.stencilWrite;a.setTest(ot),ot&&(a.setMask(re.stencilWriteMask),a.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),a.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),Ve(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?ge(i.SAMPLE_ALPHA_TO_COVERAGE):Ue(i.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(re){N!==re&&(re?i.frontFace(i.CW):i.frontFace(i.CCW),N=re)}function Re(re){re!==zP?(ge(i.CULL_FACE),re!==z&&(re===R1?i.cullFace(i.BACK):re===GP?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ue(i.CULL_FACE),z=re}function Qe(re){re!==ee&&(oe&&i.lineWidth(re),ee=re)}function Ve(re,Ge,Je){re?(ge(i.POLYGON_OFFSET_FILL),(te!==Ge||ce!==Je)&&(i.polygonOffset(Ge,Je),te=Ge,ce=Je)):Ue(i.POLYGON_OFFSET_FILL)}function je(re){re?ge(i.SCISSOR_TEST):Ue(i.SCISSOR_TEST)}function Rt(re){re===void 0&&(re=i.TEXTURE0+K-1),Z!==re&&(i.activeTexture(re),Z=re)}function Dt(re,Ge,Je){Je===void 0&&(Z===null?Je=i.TEXTURE0+K-1:Je=Z);let ot=q[Je];ot===void 0&&(ot={type:void 0,texture:void 0},q[Je]=ot),(ot.type!==re||ot.texture!==Ge)&&(Z!==Je&&(i.activeTexture(Je),Z=Je),i.bindTexture(re,Ge||de[re]),ot.type=re,ot.texture=Ge)}function Y(){const re=q[Z];re!==void 0&&re.type!==void 0&&(i.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function H(){try{i.compressedTexImage2D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ve(){try{i.compressedTexImage3D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ce(){try{i.texSubImage2D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Fe(){try{i.texSubImage3D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function be(){try{i.compressedTexSubImage2D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Et(){try{i.compressedTexSubImage3D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function et(){try{i.texStorage2D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function gt(){try{i.texStorage3D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function At(){try{i.texImage2D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ke(){try{i.texImage3D(...arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function lt(re){_e.equals(re)===!1&&(i.scissor(re.x,re.y,re.z,re.w),_e.copy(re))}function Ot(re){De.equals(re)===!1&&(i.viewport(re.x,re.y,re.z,re.w),De.copy(re))}function ie(re,Ge){let Je=h.get(Ge);Je===void 0&&(Je=new WeakMap,h.set(Ge,Je));let ot=Je.get(re);ot===void 0&&(ot=i.getUniformBlockIndex(Ge,re.name),Je.set(re,ot))}function xe(re,Ge){const ot=h.get(Ge).get(re);c.get(Ge)!==ot&&(i.uniformBlockBinding(Ge,ot,re.__bindingPointIndex),c.set(Ge,ot))}function tt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),f={},Z=null,q={},m={},g=new WeakMap,y=[],_=null,S=!1,A=null,x=null,C=null,T=null,R=null,L=null,B=null,k=new ft(0,0,0),O=0,D=!1,N=null,z=null,ee=null,te=null,ce=null,_e.set(0,0,i.canvas.width,i.canvas.height),De.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ge,disable:Ue,bindFramebuffer:We,drawBuffers:He,useProgram:rt,setBlending:Oe,setMaterial:Le,setFlipSided:Pe,setCullFace:Re,setLineWidth:Qe,setPolygonOffset:Ve,setScissorTest:je,activeTexture:Rt,bindTexture:Dt,unbindTexture:Y,compressedTexImage2D:H,compressedTexImage3D:ve,texImage2D:At,texImage3D:Ke,updateUBOMapping:ie,uniformBlockBinding:xe,texStorage2D:et,texStorage3D:gt,texSubImage2D:Ce,texSubImage3D:Fe,compressedTexSubImage2D:be,compressedTexSubImage3D:Et,scissor:lt,viewport:Ot,reset:tt}}function XX(i,e,t,n,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Be,f=new WeakMap;let m;const g=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(Y,H){return y?new OffscreenCanvas(Y,H):Ug("canvas")}function S(Y,H,ve){let Ce=1;const Fe=Dt(Y);if((Fe.width>ve||Fe.height>ve)&&(Ce=ve/Math.max(Fe.width,Fe.height)),Ce<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){const be=Math.floor(Ce*Fe.width),Et=Math.floor(Ce*Fe.height);m===void 0&&(m=_(be,Et));const et=H?_(be,Et):m;return et.width=be,et.height=Et,et.getContext("2d").drawImage(Y,0,0,be,Et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Fe.width+"x"+Fe.height+") to ("+be+"x"+Et+")."),et}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Fe.width+"x"+Fe.height+")."),Y;return Y}function A(Y){return Y.generateMipmaps}function x(Y){i.generateMipmap(Y)}function C(Y){return Y.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Y.isWebGL3DRenderTarget?i.TEXTURE_3D:Y.isWebGLArrayRenderTarget||Y.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function T(Y,H,ve,Ce,Fe=!1){if(Y!==null){if(i[Y]!==void 0)return i[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let be=H;if(H===i.RED&&(ve===i.FLOAT&&(be=i.R32F),ve===i.HALF_FLOAT&&(be=i.R16F),ve===i.UNSIGNED_BYTE&&(be=i.R8)),H===i.RED_INTEGER&&(ve===i.UNSIGNED_BYTE&&(be=i.R8UI),ve===i.UNSIGNED_SHORT&&(be=i.R16UI),ve===i.UNSIGNED_INT&&(be=i.R32UI),ve===i.BYTE&&(be=i.R8I),ve===i.SHORT&&(be=i.R16I),ve===i.INT&&(be=i.R32I)),H===i.RG&&(ve===i.FLOAT&&(be=i.RG32F),ve===i.HALF_FLOAT&&(be=i.RG16F),ve===i.UNSIGNED_BYTE&&(be=i.RG8)),H===i.RG_INTEGER&&(ve===i.UNSIGNED_BYTE&&(be=i.RG8UI),ve===i.UNSIGNED_SHORT&&(be=i.RG16UI),ve===i.UNSIGNED_INT&&(be=i.RG32UI),ve===i.BYTE&&(be=i.RG8I),ve===i.SHORT&&(be=i.RG16I),ve===i.INT&&(be=i.RG32I)),H===i.RGB_INTEGER&&(ve===i.UNSIGNED_BYTE&&(be=i.RGB8UI),ve===i.UNSIGNED_SHORT&&(be=i.RGB16UI),ve===i.UNSIGNED_INT&&(be=i.RGB32UI),ve===i.BYTE&&(be=i.RGB8I),ve===i.SHORT&&(be=i.RGB16I),ve===i.INT&&(be=i.RGB32I)),H===i.RGBA_INTEGER&&(ve===i.UNSIGNED_BYTE&&(be=i.RGBA8UI),ve===i.UNSIGNED_SHORT&&(be=i.RGBA16UI),ve===i.UNSIGNED_INT&&(be=i.RGBA32UI),ve===i.BYTE&&(be=i.RGBA8I),ve===i.SHORT&&(be=i.RGBA16I),ve===i.INT&&(be=i.RGBA32I)),H===i.RGB&&(ve===i.UNSIGNED_INT_5_9_9_9_REV&&(be=i.RGB9_E5),ve===i.UNSIGNED_INT_10F_11F_11F_REV&&(be=i.R11F_G11F_B10F)),H===i.RGBA){const Et=Fe?Og:Tn.getTransfer(Ce);ve===i.FLOAT&&(be=i.RGBA32F),ve===i.HALF_FLOAT&&(be=i.RGBA16F),ve===i.UNSIGNED_BYTE&&(be=Et===zn?i.SRGB8_ALPHA8:i.RGBA8),ve===i.UNSIGNED_SHORT_4_4_4_4&&(be=i.RGBA4),ve===i.UNSIGNED_SHORT_5_5_5_1&&(be=i.RGB5_A1)}return(be===i.R16F||be===i.R32F||be===i.RG16F||be===i.RG32F||be===i.RGBA16F||be===i.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function R(Y,H){let ve;return Y?H===null||H===zl||H===dp?ve=i.DEPTH24_STENCIL8:H===xs?ve=i.DEPTH32F_STENCIL8:H===fp&&(ve=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):H===null||H===zl||H===dp?ve=i.DEPTH_COMPONENT24:H===xs?ve=i.DEPTH_COMPONENT32F:H===fp&&(ve=i.DEPTH_COMPONENT16),ve}function L(Y,H){return A(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==or&&Y.minFilter!==Ti?Math.log2(Math.max(H.width,H.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?H.mipmaps.length:1}function B(Y){const H=Y.target;H.removeEventListener("dispose",B),O(H),H.isVideoTexture&&f.delete(H)}function k(Y){const H=Y.target;H.removeEventListener("dispose",k),N(H)}function O(Y){const H=n.get(Y);if(H.__webglInit===void 0)return;const ve=Y.source,Ce=g.get(ve);if(Ce){const Fe=Ce[H.__cacheKey];Fe.usedTimes--,Fe.usedTimes===0&&D(Y),Object.keys(Ce).length===0&&g.delete(ve)}n.remove(Y)}function D(Y){const H=n.get(Y);i.deleteTexture(H.__webglTexture);const ve=Y.source,Ce=g.get(ve);delete Ce[H.__cacheKey],o.memory.textures--}function N(Y){const H=n.get(Y);if(Y.depthTexture&&(Y.depthTexture.dispose(),n.remove(Y.depthTexture)),Y.isWebGLCubeRenderTarget)for(let Ce=0;Ce<6;Ce++){if(Array.isArray(H.__webglFramebuffer[Ce]))for(let Fe=0;Fe<H.__webglFramebuffer[Ce].length;Fe++)i.deleteFramebuffer(H.__webglFramebuffer[Ce][Fe]);else i.deleteFramebuffer(H.__webglFramebuffer[Ce]);H.__webglDepthbuffer&&i.deleteRenderbuffer(H.__webglDepthbuffer[Ce])}else{if(Array.isArray(H.__webglFramebuffer))for(let Ce=0;Ce<H.__webglFramebuffer.length;Ce++)i.deleteFramebuffer(H.__webglFramebuffer[Ce]);else i.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&i.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&i.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let Ce=0;Ce<H.__webglColorRenderbuffer.length;Ce++)H.__webglColorRenderbuffer[Ce]&&i.deleteRenderbuffer(H.__webglColorRenderbuffer[Ce]);H.__webglDepthRenderbuffer&&i.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const ve=Y.textures;for(let Ce=0,Fe=ve.length;Ce<Fe;Ce++){const be=n.get(ve[Ce]);be.__webglTexture&&(i.deleteTexture(be.__webglTexture),o.memory.textures--),n.remove(ve[Ce])}n.remove(Y)}let z=0;function ee(){z=0}function te(){const Y=z;return Y>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+r.maxTextures),z+=1,Y}function ce(Y){const H=[];return H.push(Y.wrapS),H.push(Y.wrapT),H.push(Y.wrapR||0),H.push(Y.magFilter),H.push(Y.minFilter),H.push(Y.anisotropy),H.push(Y.internalFormat),H.push(Y.format),H.push(Y.type),H.push(Y.generateMipmaps),H.push(Y.premultiplyAlpha),H.push(Y.flipY),H.push(Y.unpackAlignment),H.push(Y.colorSpace),H.join()}function K(Y,H){const ve=n.get(Y);if(Y.isVideoTexture&&je(Y),Y.isRenderTargetTexture===!1&&Y.isExternalTexture!==!0&&Y.version>0&&ve.__version!==Y.version){const Ce=Y.image;if(Ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(ve,Y,H);return}}else Y.isExternalTexture&&(ve.__webglTexture=Y.sourceTexture?Y.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,ve.__webglTexture,i.TEXTURE0+H)}function oe(Y,H){const ve=n.get(Y);if(Y.isRenderTargetTexture===!1&&Y.version>0&&ve.__version!==Y.version){de(ve,Y,H);return}t.bindTexture(i.TEXTURE_2D_ARRAY,ve.__webglTexture,i.TEXTURE0+H)}function ae(Y,H){const ve=n.get(Y);if(Y.isRenderTargetTexture===!1&&Y.version>0&&ve.__version!==Y.version){de(ve,Y,H);return}t.bindTexture(i.TEXTURE_3D,ve.__webglTexture,i.TEXTURE0+H)}function U(Y,H){const ve=n.get(Y);if(Y.version>0&&ve.__version!==Y.version){ge(ve,Y,H);return}t.bindTexture(i.TEXTURE_CUBE_MAP,ve.__webglTexture,i.TEXTURE0+H)}const Z={[Kc]:i.REPEAT,[Us]:i.CLAMP_TO_EDGE,[hp]:i.MIRRORED_REPEAT},q={[or]:i.NEAREST,[Mx]:i.NEAREST_MIPMAP_NEAREST,[hh]:i.NEAREST_MIPMAP_LINEAR,[Ti]:i.LINEAR,[qd]:i.LINEAR_MIPMAP_NEAREST,[ho]:i.LINEAR_MIPMAP_LINEAR},W={[wL]:i.NEVER,[RL]:i.ALWAYS,[SL]:i.LESS,[BS]:i.LEQUAL,[ML]:i.EQUAL,[bL]:i.GEQUAL,[CL]:i.GREATER,[TL]:i.NOTEQUAL};function se(Y,H){if(H.type===xs&&e.has("OES_texture_float_linear")===!1&&(H.magFilter===Ti||H.magFilter===qd||H.magFilter===hh||H.magFilter===ho||H.minFilter===Ti||H.minFilter===qd||H.minFilter===hh||H.minFilter===ho)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Y,i.TEXTURE_WRAP_S,Z[H.wrapS]),i.texParameteri(Y,i.TEXTURE_WRAP_T,Z[H.wrapT]),(Y===i.TEXTURE_3D||Y===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Y,i.TEXTURE_WRAP_R,Z[H.wrapR]),i.texParameteri(Y,i.TEXTURE_MAG_FILTER,q[H.magFilter]),i.texParameteri(Y,i.TEXTURE_MIN_FILTER,q[H.minFilter]),H.compareFunction&&(i.texParameteri(Y,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Y,i.TEXTURE_COMPARE_FUNC,W[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===or||H.minFilter!==hh&&H.minFilter!==ho||H.type===xs&&e.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||n.get(H).__currentAnisotropy){const ve=e.get("EXT_texture_filter_anisotropic");i.texParameterf(Y,ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,r.getMaxAnisotropy())),n.get(H).__currentAnisotropy=H.anisotropy}}}function _e(Y,H){let ve=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,H.addEventListener("dispose",B));const Ce=H.source;let Fe=g.get(Ce);Fe===void 0&&(Fe={},g.set(Ce,Fe));const be=ce(H);if(be!==Y.__cacheKey){Fe[be]===void 0&&(Fe[be]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ve=!0),Fe[be].usedTimes++;const Et=Fe[Y.__cacheKey];Et!==void 0&&(Fe[Y.__cacheKey].usedTimes--,Et.usedTimes===0&&D(H)),Y.__cacheKey=be,Y.__webglTexture=Fe[be].texture}return ve}function De(Y,H,ve){return Math.floor(Math.floor(Y/ve)/H)}function ze(Y,H,ve,Ce){const be=Y.updateRanges;if(be.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,H.width,H.height,ve,Ce,H.data);else{be.sort((Ke,lt)=>Ke.start-lt.start);let Et=0;for(let Ke=1;Ke<be.length;Ke++){const lt=be[Et],Ot=be[Ke],ie=lt.start+lt.count,xe=De(Ot.start,H.width,4),tt=De(lt.start,H.width,4);Ot.start<=ie+1&&xe===tt&&De(Ot.start+Ot.count-1,H.width,4)===xe?lt.count=Math.max(lt.count,Ot.start+Ot.count-lt.start):(++Et,be[Et]=Ot)}be.length=Et+1;const et=i.getParameter(i.UNPACK_ROW_LENGTH),gt=i.getParameter(i.UNPACK_SKIP_PIXELS),At=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,H.width);for(let Ke=0,lt=be.length;Ke<lt;Ke++){const Ot=be[Ke],ie=Math.floor(Ot.start/4),xe=Math.ceil(Ot.count/4),tt=ie%H.width,re=Math.floor(ie/H.width),Ge=xe,Je=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,tt),i.pixelStorei(i.UNPACK_SKIP_ROWS,re),t.texSubImage2D(i.TEXTURE_2D,0,tt,re,Ge,Je,ve,Ce,H.data)}Y.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,et),i.pixelStorei(i.UNPACK_SKIP_PIXELS,gt),i.pixelStorei(i.UNPACK_SKIP_ROWS,At)}}function de(Y,H,ve){let Ce=i.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(Ce=i.TEXTURE_2D_ARRAY),H.isData3DTexture&&(Ce=i.TEXTURE_3D);const Fe=_e(Y,H),be=H.source;t.bindTexture(Ce,Y.__webglTexture,i.TEXTURE0+ve);const Et=n.get(be);if(be.version!==Et.__version||Fe===!0){t.activeTexture(i.TEXTURE0+ve);const et=Tn.getPrimaries(Tn.workingColorSpace),gt=H.colorSpace===Pl?null:Tn.getPrimaries(H.colorSpace),At=H.colorSpace===Pl||et===gt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,H.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,H.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,At);let Ke=S(H.image,!1,r.maxTextureSize);Ke=Rt(H,Ke);const lt=s.convert(H.format,H.colorSpace),Ot=s.convert(H.type);let ie=T(H.internalFormat,lt,Ot,H.colorSpace,H.isVideoTexture);se(Ce,H);let xe;const tt=H.mipmaps,re=H.isVideoTexture!==!0,Ge=Et.__version===void 0||Fe===!0,Je=be.dataReady,ot=L(H,Ke);if(H.isDepthTexture)ie=R(H.format===mp,H.type),Ge&&(re?t.texStorage2D(i.TEXTURE_2D,1,ie,Ke.width,Ke.height):t.texImage2D(i.TEXTURE_2D,0,ie,Ke.width,Ke.height,0,lt,Ot,null));else if(H.isDataTexture)if(tt.length>0){re&&Ge&&t.texStorage2D(i.TEXTURE_2D,ot,ie,tt[0].width,tt[0].height);for(let qe=0,ke=tt.length;qe<ke;qe++)xe=tt[qe],re?Je&&t.texSubImage2D(i.TEXTURE_2D,qe,0,0,xe.width,xe.height,lt,Ot,xe.data):t.texImage2D(i.TEXTURE_2D,qe,ie,xe.width,xe.height,0,lt,Ot,xe.data);H.generateMipmaps=!1}else re?(Ge&&t.texStorage2D(i.TEXTURE_2D,ot,ie,Ke.width,Ke.height),Je&&ze(H,Ke,lt,Ot)):t.texImage2D(i.TEXTURE_2D,0,ie,Ke.width,Ke.height,0,lt,Ot,Ke.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){re&&Ge&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ot,ie,tt[0].width,tt[0].height,Ke.depth);for(let qe=0,ke=tt.length;qe<ke;qe++)if(xe=tt[qe],H.format!==Br)if(lt!==null)if(re){if(Je)if(H.layerUpdates.size>0){const ct=H1(xe.width,xe.height,H.format,H.type);for(const Bt of H.layerUpdates){const mn=xe.data.subarray(Bt*ct/xe.data.BYTES_PER_ELEMENT,(Bt+1)*ct/xe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,qe,0,0,Bt,xe.width,xe.height,1,lt,mn)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,qe,0,0,0,xe.width,xe.height,Ke.depth,lt,xe.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,qe,ie,xe.width,xe.height,Ke.depth,0,xe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else re?Je&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,qe,0,0,0,xe.width,xe.height,Ke.depth,lt,Ot,xe.data):t.texImage3D(i.TEXTURE_2D_ARRAY,qe,ie,xe.width,xe.height,Ke.depth,0,lt,Ot,xe.data)}else{re&&Ge&&t.texStorage2D(i.TEXTURE_2D,ot,ie,tt[0].width,tt[0].height);for(let qe=0,ke=tt.length;qe<ke;qe++)xe=tt[qe],H.format!==Br?lt!==null?re?Je&&t.compressedTexSubImage2D(i.TEXTURE_2D,qe,0,0,xe.width,xe.height,lt,xe.data):t.compressedTexImage2D(i.TEXTURE_2D,qe,ie,xe.width,xe.height,0,xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):re?Je&&t.texSubImage2D(i.TEXTURE_2D,qe,0,0,xe.width,xe.height,lt,Ot,xe.data):t.texImage2D(i.TEXTURE_2D,qe,ie,xe.width,xe.height,0,lt,Ot,xe.data)}else if(H.isDataArrayTexture)if(re){if(Ge&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ot,ie,Ke.width,Ke.height,Ke.depth),Je)if(H.layerUpdates.size>0){const qe=H1(Ke.width,Ke.height,H.format,H.type);for(const ke of H.layerUpdates){const ct=Ke.data.subarray(ke*qe/Ke.data.BYTES_PER_ELEMENT,(ke+1)*qe/Ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,ke,Ke.width,Ke.height,1,lt,Ot,ct)}H.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ke.width,Ke.height,Ke.depth,lt,Ot,Ke.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ie,Ke.width,Ke.height,Ke.depth,0,lt,Ot,Ke.data);else if(H.isData3DTexture)re?(Ge&&t.texStorage3D(i.TEXTURE_3D,ot,ie,Ke.width,Ke.height,Ke.depth),Je&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ke.width,Ke.height,Ke.depth,lt,Ot,Ke.data)):t.texImage3D(i.TEXTURE_3D,0,ie,Ke.width,Ke.height,Ke.depth,0,lt,Ot,Ke.data);else if(H.isFramebufferTexture){if(Ge)if(re)t.texStorage2D(i.TEXTURE_2D,ot,ie,Ke.width,Ke.height);else{let qe=Ke.width,ke=Ke.height;for(let ct=0;ct<ot;ct++)t.texImage2D(i.TEXTURE_2D,ct,ie,qe,ke,0,lt,Ot,null),qe>>=1,ke>>=1}}else if(tt.length>0){if(re&&Ge){const qe=Dt(tt[0]);t.texStorage2D(i.TEXTURE_2D,ot,ie,qe.width,qe.height)}for(let qe=0,ke=tt.length;qe<ke;qe++)xe=tt[qe],re?Je&&t.texSubImage2D(i.TEXTURE_2D,qe,0,0,lt,Ot,xe):t.texImage2D(i.TEXTURE_2D,qe,ie,lt,Ot,xe);H.generateMipmaps=!1}else if(re){if(Ge){const qe=Dt(Ke);t.texStorage2D(i.TEXTURE_2D,ot,ie,qe.width,qe.height)}Je&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,lt,Ot,Ke)}else t.texImage2D(i.TEXTURE_2D,0,ie,lt,Ot,Ke);A(H)&&x(Ce),Et.__version=be.version,H.onUpdate&&H.onUpdate(H)}Y.__version=H.version}function ge(Y,H,ve){if(H.image.length!==6)return;const Ce=_e(Y,H),Fe=H.source;t.bindTexture(i.TEXTURE_CUBE_MAP,Y.__webglTexture,i.TEXTURE0+ve);const be=n.get(Fe);if(Fe.version!==be.__version||Ce===!0){t.activeTexture(i.TEXTURE0+ve);const Et=Tn.getPrimaries(Tn.workingColorSpace),et=H.colorSpace===Pl?null:Tn.getPrimaries(H.colorSpace),gt=H.colorSpace===Pl||Et===et?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,H.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,H.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,gt);const At=H.isCompressedTexture||H.image[0].isCompressedTexture,Ke=H.image[0]&&H.image[0].isDataTexture,lt=[];for(let ke=0;ke<6;ke++)!At&&!Ke?lt[ke]=S(H.image[ke],!0,r.maxCubemapSize):lt[ke]=Ke?H.image[ke].image:H.image[ke],lt[ke]=Rt(H,lt[ke]);const Ot=lt[0],ie=s.convert(H.format,H.colorSpace),xe=s.convert(H.type),tt=T(H.internalFormat,ie,xe,H.colorSpace),re=H.isVideoTexture!==!0,Ge=be.__version===void 0||Ce===!0,Je=Fe.dataReady;let ot=L(H,Ot);se(i.TEXTURE_CUBE_MAP,H);let qe;if(At){re&&Ge&&t.texStorage2D(i.TEXTURE_CUBE_MAP,ot,tt,Ot.width,Ot.height);for(let ke=0;ke<6;ke++){qe=lt[ke].mipmaps;for(let ct=0;ct<qe.length;ct++){const Bt=qe[ct];H.format!==Br?ie!==null?re?Je&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ct,0,0,Bt.width,Bt.height,ie,Bt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ct,tt,Bt.width,Bt.height,0,Bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):re?Je&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ct,0,0,Bt.width,Bt.height,ie,xe,Bt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ct,tt,Bt.width,Bt.height,0,ie,xe,Bt.data)}}}else{if(qe=H.mipmaps,re&&Ge){qe.length>0&&ot++;const ke=Dt(lt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,ot,tt,ke.width,ke.height)}for(let ke=0;ke<6;ke++)if(Ke){re?Je&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,lt[ke].width,lt[ke].height,ie,xe,lt[ke].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,tt,lt[ke].width,lt[ke].height,0,ie,xe,lt[ke].data);for(let ct=0;ct<qe.length;ct++){const mn=qe[ct].image[ke].image;re?Je&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ct+1,0,0,mn.width,mn.height,ie,xe,mn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ct+1,tt,mn.width,mn.height,0,ie,xe,mn.data)}}else{re?Je&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,ie,xe,lt[ke]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,tt,ie,xe,lt[ke]);for(let ct=0;ct<qe.length;ct++){const Bt=qe[ct];re?Je&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ct+1,0,0,ie,xe,Bt.image[ke]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,ct+1,tt,ie,xe,Bt.image[ke])}}}A(H)&&x(i.TEXTURE_CUBE_MAP),be.__version=Fe.version,H.onUpdate&&H.onUpdate(H)}Y.__version=H.version}function Ue(Y,H,ve,Ce,Fe,be){const Et=s.convert(ve.format,ve.colorSpace),et=s.convert(ve.type),gt=T(ve.internalFormat,Et,et,ve.colorSpace),At=n.get(H),Ke=n.get(ve);if(Ke.__renderTarget=H,!At.__hasExternalTextures){const lt=Math.max(1,H.width>>be),Ot=Math.max(1,H.height>>be);Fe===i.TEXTURE_3D||Fe===i.TEXTURE_2D_ARRAY?t.texImage3D(Fe,be,gt,lt,Ot,H.depth,0,Et,et,null):t.texImage2D(Fe,be,gt,lt,Ot,0,Et,et,null)}t.bindFramebuffer(i.FRAMEBUFFER,Y),Ve(H)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ce,Fe,Ke.__webglTexture,0,Qe(H)):(Fe===i.TEXTURE_2D||Fe>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Fe<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ce,Fe,Ke.__webglTexture,be),t.bindFramebuffer(i.FRAMEBUFFER,null)}function We(Y,H,ve){if(i.bindRenderbuffer(i.RENDERBUFFER,Y),H.depthBuffer){const Ce=H.depthTexture,Fe=Ce&&Ce.isDepthTexture?Ce.type:null,be=R(H.stencilBuffer,Fe),Et=H.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,et=Qe(H);Ve(H)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,et,be,H.width,H.height):ve?i.renderbufferStorageMultisample(i.RENDERBUFFER,et,be,H.width,H.height):i.renderbufferStorage(i.RENDERBUFFER,be,H.width,H.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Et,i.RENDERBUFFER,Y)}else{const Ce=H.textures;for(let Fe=0;Fe<Ce.length;Fe++){const be=Ce[Fe],Et=s.convert(be.format,be.colorSpace),et=s.convert(be.type),gt=T(be.internalFormat,Et,et,be.colorSpace),At=Qe(H);ve&&Ve(H)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,At,gt,H.width,H.height):Ve(H)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,At,gt,H.width,H.height):i.renderbufferStorage(i.RENDERBUFFER,gt,H.width,H.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function He(Y,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,Y),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ce=n.get(H.depthTexture);Ce.__renderTarget=H,(!Ce.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),K(H.depthTexture,0);const Fe=Ce.__webglTexture,be=Qe(H);if(H.depthTexture.format===pp)Ve(H)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Fe,0,be):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Fe,0);else if(H.depthTexture.format===mp)Ve(H)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Fe,0,be):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Fe,0);else throw new Error("Unknown depthTexture format")}function rt(Y){const H=n.get(Y),ve=Y.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==Y.depthTexture){const Ce=Y.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),Ce){const Fe=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,Ce.removeEventListener("dispose",Fe)};Ce.addEventListener("dispose",Fe),H.__depthDisposeCallback=Fe}H.__boundDepthTexture=Ce}if(Y.depthTexture&&!H.__autoAllocateDepthBuffer){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");const Ce=Y.texture.mipmaps;Ce&&Ce.length>0?He(H.__webglFramebuffer[0],Y):He(H.__webglFramebuffer,Y)}else if(ve){H.__webglDepthbuffer=[];for(let Ce=0;Ce<6;Ce++)if(t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer[Ce]),H.__webglDepthbuffer[Ce]===void 0)H.__webglDepthbuffer[Ce]=i.createRenderbuffer(),We(H.__webglDepthbuffer[Ce],Y,!1);else{const Fe=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,be=H.__webglDepthbuffer[Ce];i.bindRenderbuffer(i.RENDERBUFFER,be),i.framebufferRenderbuffer(i.FRAMEBUFFER,Fe,i.RENDERBUFFER,be)}}else{const Ce=Y.texture.mipmaps;if(Ce&&Ce.length>0?t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=i.createRenderbuffer(),We(H.__webglDepthbuffer,Y,!1);else{const Fe=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,be=H.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,be),i.framebufferRenderbuffer(i.FRAMEBUFFER,Fe,i.RENDERBUFFER,be)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function zt(Y,H,ve){const Ce=n.get(Y);H!==void 0&&Ue(Ce.__webglFramebuffer,Y,Y.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),ve!==void 0&&rt(Y)}function Q(Y){const H=Y.texture,ve=n.get(Y),Ce=n.get(H);Y.addEventListener("dispose",k);const Fe=Y.textures,be=Y.isWebGLCubeRenderTarget===!0,Et=Fe.length>1;if(Et||(Ce.__webglTexture===void 0&&(Ce.__webglTexture=i.createTexture()),Ce.__version=H.version,o.memory.textures++),be){ve.__webglFramebuffer=[];for(let et=0;et<6;et++)if(H.mipmaps&&H.mipmaps.length>0){ve.__webglFramebuffer[et]=[];for(let gt=0;gt<H.mipmaps.length;gt++)ve.__webglFramebuffer[et][gt]=i.createFramebuffer()}else ve.__webglFramebuffer[et]=i.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){ve.__webglFramebuffer=[];for(let et=0;et<H.mipmaps.length;et++)ve.__webglFramebuffer[et]=i.createFramebuffer()}else ve.__webglFramebuffer=i.createFramebuffer();if(Et)for(let et=0,gt=Fe.length;et<gt;et++){const At=n.get(Fe[et]);At.__webglTexture===void 0&&(At.__webglTexture=i.createTexture(),o.memory.textures++)}if(Y.samples>0&&Ve(Y)===!1){ve.__webglMultisampledFramebuffer=i.createFramebuffer(),ve.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,ve.__webglMultisampledFramebuffer);for(let et=0;et<Fe.length;et++){const gt=Fe[et];ve.__webglColorRenderbuffer[et]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ve.__webglColorRenderbuffer[et]);const At=s.convert(gt.format,gt.colorSpace),Ke=s.convert(gt.type),lt=T(gt.internalFormat,At,Ke,gt.colorSpace,Y.isXRRenderTarget===!0),Ot=Qe(Y);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ot,lt,Y.width,Y.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+et,i.RENDERBUFFER,ve.__webglColorRenderbuffer[et])}i.bindRenderbuffer(i.RENDERBUFFER,null),Y.depthBuffer&&(ve.__webglDepthRenderbuffer=i.createRenderbuffer(),We(ve.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(be){t.bindTexture(i.TEXTURE_CUBE_MAP,Ce.__webglTexture),se(i.TEXTURE_CUBE_MAP,H);for(let et=0;et<6;et++)if(H.mipmaps&&H.mipmaps.length>0)for(let gt=0;gt<H.mipmaps.length;gt++)Ue(ve.__webglFramebuffer[et][gt],Y,H,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+et,gt);else Ue(ve.__webglFramebuffer[et],Y,H,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);A(H)&&x(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Et){for(let et=0,gt=Fe.length;et<gt;et++){const At=Fe[et],Ke=n.get(At);let lt=i.TEXTURE_2D;(Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(lt=Y.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(lt,Ke.__webglTexture),se(lt,At),Ue(ve.__webglFramebuffer,Y,At,i.COLOR_ATTACHMENT0+et,lt,0),A(At)&&x(lt)}t.unbindTexture()}else{let et=i.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(et=Y.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(et,Ce.__webglTexture),se(et,H),H.mipmaps&&H.mipmaps.length>0)for(let gt=0;gt<H.mipmaps.length;gt++)Ue(ve.__webglFramebuffer[gt],Y,H,i.COLOR_ATTACHMENT0,et,gt);else Ue(ve.__webglFramebuffer,Y,H,i.COLOR_ATTACHMENT0,et,0);A(H)&&x(et),t.unbindTexture()}Y.depthBuffer&&rt(Y)}function Oe(Y){const H=Y.textures;for(let ve=0,Ce=H.length;ve<Ce;ve++){const Fe=H[ve];if(A(Fe)){const be=C(Y),Et=n.get(Fe).__webglTexture;t.bindTexture(be,Et),x(be),t.unbindTexture()}}}const Le=[],Pe=[];function Re(Y){if(Y.samples>0){if(Ve(Y)===!1){const H=Y.textures,ve=Y.width,Ce=Y.height;let Fe=i.COLOR_BUFFER_BIT;const be=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Et=n.get(Y),et=H.length>1;if(et)for(let At=0;At<H.length;At++)t.bindFramebuffer(i.FRAMEBUFFER,Et.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+At,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Et.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+At,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Et.__webglMultisampledFramebuffer);const gt=Y.texture.mipmaps;gt&&gt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Et.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Et.__webglFramebuffer);for(let At=0;At<H.length;At++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(Fe|=i.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(Fe|=i.STENCIL_BUFFER_BIT)),et){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Et.__webglColorRenderbuffer[At]);const Ke=n.get(H[At]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ke,0)}i.blitFramebuffer(0,0,ve,Ce,0,0,ve,Ce,Fe,i.NEAREST),c===!0&&(Le.length=0,Pe.length=0,Le.push(i.COLOR_ATTACHMENT0+At),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(Le.push(be),Pe.push(be),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Pe)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Le))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),et)for(let At=0;At<H.length;At++){t.bindFramebuffer(i.FRAMEBUFFER,Et.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+At,i.RENDERBUFFER,Et.__webglColorRenderbuffer[At]);const Ke=n.get(H[At]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Et.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+At,i.TEXTURE_2D,Ke,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Et.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&c){const H=Y.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[H])}}}function Qe(Y){return Math.min(r.maxSamples,Y.samples)}function Ve(Y){const H=n.get(Y);return Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function je(Y){const H=o.render.frame;f.get(Y)!==H&&(f.set(Y,H),Y.update())}function Rt(Y,H){const ve=Y.colorSpace,Ce=Y.format,Fe=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||ve!==Dh&&ve!==Pl&&(Tn.getTransfer(ve)===zn?(Ce!==Br||Fe!==vo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ve)),H}function Dt(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(h.width=Y.naturalWidth||Y.width,h.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(h.width=Y.displayWidth,h.height=Y.displayHeight):(h.width=Y.width,h.height=Y.height),h}this.allocateTextureUnit=te,this.resetTextureUnits=ee,this.setTexture2D=K,this.setTexture2DArray=oe,this.setTexture3D=ae,this.setTextureCube=U,this.rebindTextures=zt,this.setupRenderTarget=Q,this.updateRenderTargetMipmap=Oe,this.updateMultisampleRenderTarget=Re,this.setupDepthRenderbuffer=rt,this.setupFrameBufferTexture=Ue,this.useMultisampledRTT=Ve}function LD(i,e){function t(n,r=Pl){let s;const o=Tn.getTransfer(r);if(n===vo)return i.UNSIGNED_BYTE;if(n===Tx)return i.UNSIGNED_SHORT_4_4_4_4;if(n===bx)return i.UNSIGNED_SHORT_5_5_5_1;if(n===TS)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===bS)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===MS)return i.BYTE;if(n===CS)return i.SHORT;if(n===fp)return i.UNSIGNED_SHORT;if(n===Cx)return i.INT;if(n===zl)return i.UNSIGNED_INT;if(n===xs)return i.FLOAT;if(n===Pp)return i.HALF_FLOAT;if(n===RS)return i.ALPHA;if(n===IS)return i.RGB;if(n===Br)return i.RGBA;if(n===pp)return i.DEPTH_COMPONENT;if(n===mp)return i.DEPTH_STENCIL;if(n===Rx)return i.RED;if(n===s0)return i.RED_INTEGER;if(n===PS)return i.RG;if(n===Ix)return i.RG_INTEGER;if(n===Px)return i.RGBA_INTEGER;if(n===yg||n===_g||n===xg||n===Eg)if(o===zn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===yg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===_g)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===xg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Eg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===yg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===_g)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===xg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Eg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===A_||n===w_||n===S_||n===M_)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===A_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===w_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===S_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===M_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===C_||n===T_||n===b_)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===C_||n===T_)return o===zn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===b_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===R_||n===I_||n===P_||n===L_||n===D_||n===B_||n===N_||n===F_||n===O_||n===k_||n===U_||n===z_||n===G_||n===H_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===R_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===I_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===P_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===L_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===D_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===B_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===N_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===F_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===O_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===k_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===U_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===z_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===G_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===H_)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===V_||n===W_||n===X_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===V_)return o===zn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===W_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===X_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===j_||n===Y_||n===K_||n===J_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===j_)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Y_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===K_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===J_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===dp?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const jX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,YX=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class KX{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new WS(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new yo({vertexShader:jX,fragmentShader:YX,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new mi(new Dp(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class JX extends Fa{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",c=1,h=null,f=null,m=null,g=null,y=null,_=null;const S=typeof XRWebGLBinding<"u",A=new KX,x={},C=t.getContextAttributes();let T=null,R=null;const L=[],B=[],k=new Be;let O=null;const D=new ei;D.viewport=new In;const N=new ei;N.viewport=new In;const z=[D,N],ee=new AD;let te=null,ce=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let ge=L[de];return ge===void 0&&(ge=new Ky,L[de]=ge),ge.getTargetRaySpace()},this.getControllerGrip=function(de){let ge=L[de];return ge===void 0&&(ge=new Ky,L[de]=ge),ge.getGripSpace()},this.getHand=function(de){let ge=L[de];return ge===void 0&&(ge=new Ky,L[de]=ge),ge.getHandSpace()};function K(de){const ge=B.indexOf(de.inputSource);if(ge===-1)return;const Ue=L[ge];Ue!==void 0&&(Ue.update(de.inputSource,de.frame,h||o),Ue.dispatchEvent({type:de.type,data:de.inputSource}))}function oe(){r.removeEventListener("select",K),r.removeEventListener("selectstart",K),r.removeEventListener("selectend",K),r.removeEventListener("squeeze",K),r.removeEventListener("squeezestart",K),r.removeEventListener("squeezeend",K),r.removeEventListener("end",oe),r.removeEventListener("inputsourceschange",ae);for(let de=0;de<L.length;de++){const ge=B[de];ge!==null&&(B[de]=null,L[de].disconnect(ge))}te=null,ce=null,A.reset();for(const de in x)delete x[de];e.setRenderTarget(T),y=null,g=null,m=null,r=null,R=null,ze.stop(),n.isPresenting=!1,e.setPixelRatio(O),e.setSize(k.width,k.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(de){s=de,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){a=de,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(de){h=de},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return m===null&&S&&(m=new XRWebGLBinding(r,t)),m},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function(de){if(r=de,r!==null){if(T=e.getRenderTarget(),r.addEventListener("select",K),r.addEventListener("selectstart",K),r.addEventListener("selectend",K),r.addEventListener("squeeze",K),r.addEventListener("squeezestart",K),r.addEventListener("squeezeend",K),r.addEventListener("end",oe),r.addEventListener("inputsourceschange",ae),C.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(k),S&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ue=null,We=null,He=null;C.depth&&(He=C.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ue=C.stencil?mp:pp,We=C.stencil?dp:zl);const rt={colorFormat:t.RGBA8,depthFormat:He,scaleFactor:s};m=this.getBinding(),g=m.createProjectionLayer(rt),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),R=new Da(g.textureWidth,g.textureHeight,{format:Br,type:vo,depthTexture:new VS(g.textureWidth,g.textureHeight,We,void 0,void 0,void 0,void 0,void 0,void 0,Ue),stencilBuffer:C.stencil,colorSpace:e.outputColorSpace,samples:C.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}else{const Ue={antialias:C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,Ue),r.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),R=new Da(y.framebufferWidth,y.framebufferHeight,{format:Br,type:vo,colorSpace:e.outputColorSpace,stencilBuffer:C.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}R.isXRRenderTarget=!0,this.setFoveation(c),h=null,o=await r.requestReferenceSpace(a),ze.setContext(r),ze.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function ae(de){for(let ge=0;ge<de.removed.length;ge++){const Ue=de.removed[ge],We=B.indexOf(Ue);We>=0&&(B[We]=null,L[We].disconnect(Ue))}for(let ge=0;ge<de.added.length;ge++){const Ue=de.added[ge];let We=B.indexOf(Ue);if(We===-1){for(let rt=0;rt<L.length;rt++)if(rt>=B.length){B.push(Ue),We=rt;break}else if(B[rt]===null){B[rt]=Ue,We=rt;break}if(We===-1)break}const He=L[We];He&&He.connect(Ue)}}const U=new j,Z=new j;function q(de,ge,Ue){U.setFromMatrixPosition(ge.matrixWorld),Z.setFromMatrixPosition(Ue.matrixWorld);const We=U.distanceTo(Z),He=ge.projectionMatrix.elements,rt=Ue.projectionMatrix.elements,zt=He[14]/(He[10]-1),Q=He[14]/(He[10]+1),Oe=(He[9]+1)/He[5],Le=(He[9]-1)/He[5],Pe=(He[8]-1)/He[0],Re=(rt[8]+1)/rt[0],Qe=zt*Pe,Ve=zt*Re,je=We/(-Pe+Re),Rt=je*-Pe;if(ge.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(Rt),de.translateZ(je),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert(),He[10]===-1)de.projectionMatrix.copy(ge.projectionMatrix),de.projectionMatrixInverse.copy(ge.projectionMatrixInverse);else{const Dt=zt+je,Y=Q+je,H=Qe-Rt,ve=Ve+(We-Rt),Ce=Oe*Q/Y*Dt,Fe=Le*Q/Y*Dt;de.projectionMatrix.makePerspective(H,ve,Ce,Fe,Dt,Y),de.projectionMatrixInverse.copy(de.projectionMatrix).invert()}}function W(de,ge){ge===null?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(ge.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(r===null)return;let ge=de.near,Ue=de.far;A.texture!==null&&(A.depthNear>0&&(ge=A.depthNear),A.depthFar>0&&(Ue=A.depthFar)),ee.near=N.near=D.near=ge,ee.far=N.far=D.far=Ue,(te!==ee.near||ce!==ee.far)&&(r.updateRenderState({depthNear:ee.near,depthFar:ee.far}),te=ee.near,ce=ee.far),ee.layers.mask=de.layers.mask|6,D.layers.mask=ee.layers.mask&3,N.layers.mask=ee.layers.mask&5;const We=de.parent,He=ee.cameras;W(ee,We);for(let rt=0;rt<He.length;rt++)W(He[rt],We);He.length===2?q(ee,D,N):ee.projectionMatrix.copy(D.projectionMatrix),se(de,ee,We)};function se(de,ge,Ue){Ue===null?de.matrix.copy(ge.matrixWorld):(de.matrix.copy(Ue.matrixWorld),de.matrix.invert(),de.matrix.multiply(ge.matrixWorld)),de.matrix.decompose(de.position,de.quaternion,de.scale),de.updateMatrixWorld(!0),de.projectionMatrix.copy(ge.projectionMatrix),de.projectionMatrixInverse.copy(ge.projectionMatrixInverse),de.isPerspectiveCamera&&(de.fov=_p*2*Math.atan(1/de.projectionMatrix.elements[5]),de.zoom=1)}this.getCamera=function(){return ee},this.getFoveation=function(){if(!(g===null&&y===null))return c},this.setFoveation=function(de){c=de,g!==null&&(g.fixedFoveation=de),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=de)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(ee)},this.getCameraTexture=function(de){return x[de]};let _e=null;function De(de,ge){if(f=ge.getViewerPose(h||o),_=ge,f!==null){const Ue=f.views;y!==null&&(e.setRenderTargetFramebuffer(R,y.framebuffer),e.setRenderTarget(R));let We=!1;Ue.length!==ee.cameras.length&&(ee.cameras.length=0,We=!0);for(let Q=0;Q<Ue.length;Q++){const Oe=Ue[Q];let Le=null;if(y!==null)Le=y.getViewport(Oe);else{const Re=m.getViewSubImage(g,Oe);Le=Re.viewport,Q===0&&(e.setRenderTargetTextures(R,Re.colorTexture,Re.depthStencilTexture),e.setRenderTarget(R))}let Pe=z[Q];Pe===void 0&&(Pe=new ei,Pe.layers.enable(Q),Pe.viewport=new In,z[Q]=Pe),Pe.matrix.fromArray(Oe.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(Oe.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(Le.x,Le.y,Le.width,Le.height),Q===0&&(ee.matrix.copy(Pe.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale)),We===!0&&ee.cameras.push(Pe)}const He=r.enabledFeatures;if(He&&He.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&S){m=n.getBinding();const Q=m.getDepthInformation(Ue[0]);Q&&Q.isValid&&Q.texture&&A.init(Q,r.renderState)}if(He&&He.includes("camera-access")&&S){e.state.unbindTexture(),m=n.getBinding();for(let Q=0;Q<Ue.length;Q++){const Oe=Ue[Q].camera;if(Oe){let Le=x[Oe];Le||(Le=new WS,x[Oe]=Le);const Pe=m.getCameraImage(Oe);Le.sourceTexture=Pe}}}}for(let Ue=0;Ue<L.length;Ue++){const We=B[Ue],He=L[Ue];We!==null&&He!==void 0&&He.update(We,ge,h||o)}_e&&_e(de,ge),ge.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ge}),_=null}const ze=new TD;ze.setAnimationLoop(De),this.setAnimationLoop=function(de){_e=de},this.dispose=function(){}}}const th=new ws,ZX=new jt;function qX(i,e){function t(A,x){A.matrixAutoUpdate===!0&&A.updateMatrix(),x.value.copy(A.matrix)}function n(A,x){x.color.getRGB(A.fogColor.value,NL(i)),x.isFog?(A.fogNear.value=x.near,A.fogFar.value=x.far):x.isFogExp2&&(A.fogDensity.value=x.density)}function r(A,x,C,T,R){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(A,x):x.isMeshToonMaterial?(s(A,x),m(A,x)):x.isMeshPhongMaterial?(s(A,x),f(A,x)):x.isMeshStandardMaterial?(s(A,x),g(A,x),x.isMeshPhysicalMaterial&&y(A,x,R)):x.isMeshMatcapMaterial?(s(A,x),_(A,x)):x.isMeshDepthMaterial?s(A,x):x.isMeshDistanceMaterial?(s(A,x),S(A,x)):x.isMeshNormalMaterial?s(A,x):x.isLineBasicMaterial?(o(A,x),x.isLineDashedMaterial&&a(A,x)):x.isPointsMaterial?c(A,x,C,T):x.isSpriteMaterial?h(A,x):x.isShadowMaterial?(A.color.value.copy(x.color),A.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(A,x){A.opacity.value=x.opacity,x.color&&A.diffuse.value.copy(x.color),x.emissive&&A.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(A.map.value=x.map,t(x.map,A.mapTransform)),x.alphaMap&&(A.alphaMap.value=x.alphaMap,t(x.alphaMap,A.alphaMapTransform)),x.bumpMap&&(A.bumpMap.value=x.bumpMap,t(x.bumpMap,A.bumpMapTransform),A.bumpScale.value=x.bumpScale,x.side===Nr&&(A.bumpScale.value*=-1)),x.normalMap&&(A.normalMap.value=x.normalMap,t(x.normalMap,A.normalMapTransform),A.normalScale.value.copy(x.normalScale),x.side===Nr&&A.normalScale.value.negate()),x.displacementMap&&(A.displacementMap.value=x.displacementMap,t(x.displacementMap,A.displacementMapTransform),A.displacementScale.value=x.displacementScale,A.displacementBias.value=x.displacementBias),x.emissiveMap&&(A.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,A.emissiveMapTransform)),x.specularMap&&(A.specularMap.value=x.specularMap,t(x.specularMap,A.specularMapTransform)),x.alphaTest>0&&(A.alphaTest.value=x.alphaTest);const C=e.get(x),T=C.envMap,R=C.envMapRotation;T&&(A.envMap.value=T,th.copy(R),th.x*=-1,th.y*=-1,th.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(th.y*=-1,th.z*=-1),A.envMapRotation.value.setFromMatrix4(ZX.makeRotationFromEuler(th)),A.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=x.reflectivity,A.ior.value=x.ior,A.refractionRatio.value=x.refractionRatio),x.lightMap&&(A.lightMap.value=x.lightMap,A.lightMapIntensity.value=x.lightMapIntensity,t(x.lightMap,A.lightMapTransform)),x.aoMap&&(A.aoMap.value=x.aoMap,A.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,A.aoMapTransform))}function o(A,x){A.diffuse.value.copy(x.color),A.opacity.value=x.opacity,x.map&&(A.map.value=x.map,t(x.map,A.mapTransform))}function a(A,x){A.dashSize.value=x.dashSize,A.totalSize.value=x.dashSize+x.gapSize,A.scale.value=x.scale}function c(A,x,C,T){A.diffuse.value.copy(x.color),A.opacity.value=x.opacity,A.size.value=x.size*C,A.scale.value=T*.5,x.map&&(A.map.value=x.map,t(x.map,A.uvTransform)),x.alphaMap&&(A.alphaMap.value=x.alphaMap,t(x.alphaMap,A.alphaMapTransform)),x.alphaTest>0&&(A.alphaTest.value=x.alphaTest)}function h(A,x){A.diffuse.value.copy(x.color),A.opacity.value=x.opacity,A.rotation.value=x.rotation,x.map&&(A.map.value=x.map,t(x.map,A.mapTransform)),x.alphaMap&&(A.alphaMap.value=x.alphaMap,t(x.alphaMap,A.alphaMapTransform)),x.alphaTest>0&&(A.alphaTest.value=x.alphaTest)}function f(A,x){A.specular.value.copy(x.specular),A.shininess.value=Math.max(x.shininess,1e-4)}function m(A,x){x.gradientMap&&(A.gradientMap.value=x.gradientMap)}function g(A,x){A.metalness.value=x.metalness,x.metalnessMap&&(A.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,A.metalnessMapTransform)),A.roughness.value=x.roughness,x.roughnessMap&&(A.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,A.roughnessMapTransform)),x.envMap&&(A.envMapIntensity.value=x.envMapIntensity)}function y(A,x,C){A.ior.value=x.ior,x.sheen>0&&(A.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),A.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(A.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,A.sheenColorMapTransform)),x.sheenRoughnessMap&&(A.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,A.sheenRoughnessMapTransform))),x.clearcoat>0&&(A.clearcoat.value=x.clearcoat,A.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(A.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,A.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(A.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Nr&&A.clearcoatNormalScale.value.negate())),x.dispersion>0&&(A.dispersion.value=x.dispersion),x.iridescence>0&&(A.iridescence.value=x.iridescence,A.iridescenceIOR.value=x.iridescenceIOR,A.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(A.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,A.iridescenceMapTransform)),x.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),x.transmission>0&&(A.transmission.value=x.transmission,A.transmissionSamplerMap.value=C.texture,A.transmissionSamplerSize.value.set(C.width,C.height),x.transmissionMap&&(A.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,A.transmissionMapTransform)),A.thickness.value=x.thickness,x.thicknessMap&&(A.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=x.attenuationDistance,A.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(A.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(A.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=x.specularIntensity,A.specularColor.value.copy(x.specularColor),x.specularColorMap&&(A.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,A.specularColorMapTransform)),x.specularIntensityMap&&(A.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,A.specularIntensityMapTransform))}function _(A,x){x.matcap&&(A.matcap.value=x.matcap)}function S(A,x){const C=e.get(x).light;A.referencePosition.value.setFromMatrixPosition(C.matrixWorld),A.nearDistance.value=C.shadow.camera.near,A.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function QX(i,e,t,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(C,T){const R=T.program;n.uniformBlockBinding(C,R)}function h(C,T){let R=r[C.id];R===void 0&&(_(C),R=f(C),r[C.id]=R,C.addEventListener("dispose",A));const L=T.program;n.updateUBOMapping(C,L);const B=e.render.frame;s[C.id]!==B&&(g(C),s[C.id]=B)}function f(C){const T=m();C.__bindingPointIndex=T;const R=i.createBuffer(),L=C.__size,B=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,R),i.bufferData(i.UNIFORM_BUFFER,L,B),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,T,R),R}function m(){for(let C=0;C<a;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(C){const T=r[C.id],R=C.uniforms,L=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,T);for(let B=0,k=R.length;B<k;B++){const O=Array.isArray(R[B])?R[B]:[R[B]];for(let D=0,N=O.length;D<N;D++){const z=O[D];if(y(z,B,D,L)===!0){const ee=z.__offset,te=Array.isArray(z.value)?z.value:[z.value];let ce=0;for(let K=0;K<te.length;K++){const oe=te[K],ae=S(oe);typeof oe=="number"||typeof oe=="boolean"?(z.__data[0]=oe,i.bufferSubData(i.UNIFORM_BUFFER,ee+ce,z.__data)):oe.isMatrix3?(z.__data[0]=oe.elements[0],z.__data[1]=oe.elements[1],z.__data[2]=oe.elements[2],z.__data[3]=0,z.__data[4]=oe.elements[3],z.__data[5]=oe.elements[4],z.__data[6]=oe.elements[5],z.__data[7]=0,z.__data[8]=oe.elements[6],z.__data[9]=oe.elements[7],z.__data[10]=oe.elements[8],z.__data[11]=0):(oe.toArray(z.__data,ce),ce+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ee,z.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function y(C,T,R,L){const B=C.value,k=T+"_"+R;if(L[k]===void 0)return typeof B=="number"||typeof B=="boolean"?L[k]=B:L[k]=B.clone(),!0;{const O=L[k];if(typeof B=="number"||typeof B=="boolean"){if(O!==B)return L[k]=B,!0}else if(O.equals(B)===!1)return O.copy(B),!0}return!1}function _(C){const T=C.uniforms;let R=0;const L=16;for(let k=0,O=T.length;k<O;k++){const D=Array.isArray(T[k])?T[k]:[T[k]];for(let N=0,z=D.length;N<z;N++){const ee=D[N],te=Array.isArray(ee.value)?ee.value:[ee.value];for(let ce=0,K=te.length;ce<K;ce++){const oe=te[ce],ae=S(oe),U=R%L,Z=U%ae.boundary,q=U+Z;R+=Z,q!==0&&L-q<ae.storage&&(R+=L-q),ee.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=R,R+=ae.storage}}}const B=R%L;return B>0&&(R+=L-B),C.__size=R,C.__cache={},this}function S(C){const T={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(T.boundary=4,T.storage=4):C.isVector2?(T.boundary=8,T.storage=8):C.isVector3||C.isColor?(T.boundary=16,T.storage=12):C.isVector4?(T.boundary=16,T.storage=16):C.isMatrix3?(T.boundary=48,T.storage=48):C.isMatrix4?(T.boundary=64,T.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),T}function A(C){const T=C.target;T.removeEventListener("dispose",A);const R=o.indexOf(T.__bindingPointIndex);o.splice(R,1),i.deleteBuffer(r[T.id]),delete r[T.id],delete s[T.id]}function x(){for(const C in r)i.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:c,update:h,dispose:x}}class mM{constructor(e={}){const{canvas:t=LL(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:m=!1,reversedDepthBuffer:g=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=o;const _=new Uint32Array(4),S=new Int32Array(4);let A=null,x=null;const C=[],T=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Ia,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const R=this;let L=!1;this._outputColorSpace=ms;let B=0,k=0,O=null,D=-1,N=null;const z=new In,ee=new In;let te=null;const ce=new ft(0);let K=0,oe=t.width,ae=t.height,U=1,Z=null,q=null;const W=new In(0,0,oe,ae),se=new In(0,0,oe,ae);let _e=!1;const De=new Lp;let ze=!1,de=!1;const ge=new jt,Ue=new j,We=new In,He={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let rt=!1;function zt(){return O===null?U:1}let Q=n;function Oe(X,me){return t.getContext(X,me)}try{const X={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${i0}`),t.addEventListener("webglcontextlost",Je,!1),t.addEventListener("webglcontextrestored",ot,!1),t.addEventListener("webglcontextcreationerror",qe,!1),Q===null){const me="webgl2";if(Q=Oe(me,X),Q===null)throw Oe(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(X){throw console.error("THREE.WebGLRenderer: "+X.message),X}let Le,Pe,Re,Qe,Ve,je,Rt,Dt,Y,H,ve,Ce,Fe,be,Et,et,gt,At,Ke,lt,Ot,ie,xe,tt;function re(){Le=new u6(Q),Le.init(),ie=new LD(Q,Le),Pe=new i6(Q,Le,e,ie),Re=new WX(Q,Le),Pe.reversedDepthBuffer&&g&&Re.buffers.depth.setReversed(!0),Qe=new d6(Q),Ve=new PX,je=new XX(Q,Le,Re,Ve,Pe,ie,Qe),Rt=new s6(R),Dt=new c6(R),Y=new _8(Q),xe=new t6(Q,Y),H=new h6(Q,Y,Qe,xe),ve=new m6(Q,H,Y,Qe),Ke=new p6(Q,Pe,je),et=new r6(Ve),Ce=new IX(R,Rt,Dt,Le,Pe,xe,et),Fe=new qX(R,Ve),be=new DX,Et=new UX(Le),At=new e6(R,Rt,Dt,Re,ve,y,c),gt=new HX(R,ve,Pe),tt=new QX(Q,Qe,Pe,Re),lt=new n6(Q,Le,Qe),Ot=new f6(Q,Le,Qe),Qe.programs=Ce.programs,R.capabilities=Pe,R.extensions=Le,R.properties=Ve,R.renderLists=be,R.shadowMap=gt,R.state=Re,R.info=Qe}re();const Ge=new JX(R,Q);this.xr=Ge,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const X=Le.get("WEBGL_lose_context");X&&X.loseContext()},this.forceContextRestore=function(){const X=Le.get("WEBGL_lose_context");X&&X.restoreContext()},this.getPixelRatio=function(){return U},this.setPixelRatio=function(X){X!==void 0&&(U=X,this.setSize(oe,ae,!1))},this.getSize=function(X){return X.set(oe,ae)},this.setSize=function(X,me,Se=!0){if(Ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}oe=X,ae=me,t.width=Math.floor(X*U),t.height=Math.floor(me*U),Se===!0&&(t.style.width=X+"px",t.style.height=me+"px"),this.setViewport(0,0,X,me)},this.getDrawingBufferSize=function(X){return X.set(oe*U,ae*U).floor()},this.setDrawingBufferSize=function(X,me,Se){oe=X,ae=me,U=Se,t.width=Math.floor(X*Se),t.height=Math.floor(me*Se),this.setViewport(0,0,X,me)},this.getCurrentViewport=function(X){return X.copy(z)},this.getViewport=function(X){return X.copy(W)},this.setViewport=function(X,me,Se,Me){X.isVector4?W.set(X.x,X.y,X.z,X.w):W.set(X,me,Se,Me),Re.viewport(z.copy(W).multiplyScalar(U).round())},this.getScissor=function(X){return X.copy(se)},this.setScissor=function(X,me,Se,Me){X.isVector4?se.set(X.x,X.y,X.z,X.w):se.set(X,me,Se,Me),Re.scissor(ee.copy(se).multiplyScalar(U).round())},this.getScissorTest=function(){return _e},this.setScissorTest=function(X){Re.setScissorTest(_e=X)},this.setOpaqueSort=function(X){Z=X},this.setTransparentSort=function(X){q=X},this.getClearColor=function(X){return X.copy(At.getClearColor())},this.setClearColor=function(){At.setClearColor(...arguments)},this.getClearAlpha=function(){return At.getClearAlpha()},this.setClearAlpha=function(){At.setClearAlpha(...arguments)},this.clear=function(X=!0,me=!0,Se=!0){let Me=0;if(X){let ue=!1;if(O!==null){const Ze=O.texture.format;ue=Ze===Px||Ze===Ix||Ze===s0}if(ue){const Ze=O.texture.type,at=Ze===vo||Ze===zl||Ze===fp||Ze===dp||Ze===Tx||Ze===bx,yt=At.getClearColor(),mt=At.getClearAlpha(),kt=yt.r,Nt=yt.g,xt=yt.b;at?(_[0]=kt,_[1]=Nt,_[2]=xt,_[3]=mt,Q.clearBufferuiv(Q.COLOR,0,_)):(S[0]=kt,S[1]=Nt,S[2]=xt,S[3]=mt,Q.clearBufferiv(Q.COLOR,0,S))}else Me|=Q.COLOR_BUFFER_BIT}me&&(Me|=Q.DEPTH_BUFFER_BIT),Se&&(Me|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(Me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Je,!1),t.removeEventListener("webglcontextrestored",ot,!1),t.removeEventListener("webglcontextcreationerror",qe,!1),At.dispose(),be.dispose(),Et.dispose(),Ve.dispose(),Rt.dispose(),Dt.dispose(),ve.dispose(),xe.dispose(),tt.dispose(),Ce.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",ci),Ge.removeEventListener("sessionend",Wl),kr.stop()};function Je(X){X.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function ot(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const X=Qe.autoReset,me=gt.enabled,Se=gt.autoUpdate,Me=gt.needsUpdate,ue=gt.type;re(),Qe.autoReset=X,gt.enabled=me,gt.autoUpdate=Se,gt.needsUpdate=Me,gt.type=ue}function qe(X){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",X.statusMessage)}function ke(X){const me=X.target;me.removeEventListener("dispose",ke),ct(me)}function ct(X){Bt(X),Ve.remove(X)}function Bt(X){const me=Ve.get(X).programs;me!==void 0&&(me.forEach(function(Se){Ce.releaseProgram(Se)}),X.isShaderMaterial&&Ce.releaseShaderCache(X))}this.renderBufferDirect=function(X,me,Se,Me,ue,Ze){me===null&&(me=He);const at=ue.isMesh&&ue.matrixWorld.determinant()<0,yt=Ao(X,me,Se,Me,ue);Re.setMaterial(Me,at);let mt=Se.index,kt=1;if(Me.wireframe===!0){if(mt=H.getWireframeAttribute(Se),mt===void 0)return;kt=2}const Nt=Se.drawRange,xt=Se.attributes.position;let dt=Nt.start*kt,Ft=(Nt.start+Nt.count)*kt;Ze!==null&&(dt=Math.max(dt,Ze.start*kt),Ft=Math.min(Ft,(Ze.start+Ze.count)*kt)),mt!==null?(dt=Math.max(dt,0),Ft=Math.min(Ft,mt.count)):xt!=null&&(dt=Math.max(dt,0),Ft=Math.min(Ft,xt.count));const rn=Ft-dt;if(rn<0||rn===1/0)return;xe.setup(ue,Me,yt,Se,mt);let $t,en=lt;if(mt!==null&&($t=Y.get(mt),en=Ot,en.setIndex($t)),ue.isMesh)Me.wireframe===!0?(Re.setLineWidth(Me.wireframeLinewidth*zt()),en.setMode(Q.LINES)):en.setMode(Q.TRIANGLES);else if(ue.isLine){let It=Me.linewidth;It===void 0&&(It=1),Re.setLineWidth(It*zt()),ue.isLineSegments?en.setMode(Q.LINES):ue.isLineLoop?en.setMode(Q.LINE_LOOP):en.setMode(Q.LINE_STRIP)}else ue.isPoints?en.setMode(Q.POINTS):ue.isSprite&&en.setMode(Q.TRIANGLES);if(ue.isBatchedMesh)if(ue._multiDrawInstances!==null)zg("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),en.renderMultiDrawInstances(ue._multiDrawStarts,ue._multiDrawCounts,ue._multiDrawCount,ue._multiDrawInstances);else if(Le.get("WEBGL_multi_draw"))en.renderMultiDraw(ue._multiDrawStarts,ue._multiDrawCounts,ue._multiDrawCount);else{const It=ue._multiDrawStarts,_n=ue._multiDrawCounts,Gt=ue._multiDrawCount,ni=mt?Y.get(mt).bytesPerElement:1,es=Ve.get(Me).currentProgram.getUniforms();for(let qi=0;qi<Gt;qi++)es.setValue(Q,"_gl_DrawID",qi),en.render(It[qi]/ni,_n[qi])}else if(ue.isInstancedMesh)en.renderInstances(dt,rn,ue.count);else if(Se.isInstancedBufferGeometry){const It=Se._maxInstanceCount!==void 0?Se._maxInstanceCount:1/0,_n=Math.min(Se.instanceCount,It);en.renderInstances(dt,rn,_n)}else en.render(dt,rn)};function mn(X,me,Se){X.transparent===!0&&X.side===ks&&X.forceSinglePass===!1?(X.side=Nr,X.needsUpdate=!0,Yl(X,me,Se),X.side=La,X.needsUpdate=!0,Yl(X,me,Se),X.side=ks):Yl(X,me,Se)}this.compile=function(X,me,Se=null){Se===null&&(Se=X),x=Et.get(Se),x.init(me),T.push(x),Se.traverseVisible(function(ue){ue.isLight&&ue.layers.test(me.layers)&&(x.pushLight(ue),ue.castShadow&&x.pushShadow(ue))}),X!==Se&&X.traverseVisible(function(ue){ue.isLight&&ue.layers.test(me.layers)&&(x.pushLight(ue),ue.castShadow&&x.pushShadow(ue))}),x.setupLights();const Me=new Set;return X.traverse(function(ue){if(!(ue.isMesh||ue.isPoints||ue.isLine||ue.isSprite))return;const Ze=ue.material;if(Ze)if(Array.isArray(Ze))for(let at=0;at<Ze.length;at++){const yt=Ze[at];mn(yt,Se,ue),Me.add(yt)}else mn(Ze,Se,ue),Me.add(Ze)}),x=T.pop(),Me},this.compileAsync=function(X,me,Se=null){const Me=this.compile(X,me,Se);return new Promise(ue=>{function Ze(){if(Me.forEach(function(at){Ve.get(at).currentProgram.isReady()&&Me.delete(at)}),Me.size===0){ue(X);return}setTimeout(Ze,10)}Le.get("KHR_parallel_shader_compile")!==null?Ze():setTimeout(Ze,10)})};let nn=null;function Ai(X){nn&&nn(X)}function ci(){kr.stop()}function Wl(){kr.start()}const kr=new TD;kr.setAnimationLoop(Ai),typeof self<"u"&&kr.setContext(self),this.setAnimationLoop=function(X){nn=X,Ge.setAnimationLoop(X),X===null?kr.stop():kr.start()},Ge.addEventListener("sessionstart",ci),Ge.addEventListener("sessionend",Wl),this.render=function(X,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(X.matrixWorldAutoUpdate===!0&&X.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(me),me=Ge.getCamera()),X.isScene===!0&&X.onBeforeRender(R,X,me,O),x=Et.get(X,T.length),x.init(me),T.push(x),ge.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),De.setFromProjectionMatrix(ge,zs,me.reversedDepth),de=this.localClippingEnabled,ze=et.init(this.clippingPlanes,de),A=be.get(X,C.length),A.init(),C.push(A),Ge.enabled===!0&&Ge.isPresenting===!0){const Ze=R.xr.getDepthSensingMesh();Ze!==null&&Xl(Ze,me,-1/0,R.sortObjects)}Xl(X,me,0,R.sortObjects),A.finish(),R.sortObjects===!0&&A.sort(Z,q),rt=Ge.enabled===!1||Ge.isPresenting===!1||Ge.hasDepthSensing()===!1,rt&&At.addToRenderList(A,X),this.info.render.frame++,ze===!0&&et.beginShadows();const Se=x.state.shadowsArray;gt.render(Se,X,me),ze===!0&&et.endShadows(),this.info.autoReset===!0&&this.info.reset();const Me=A.opaque,ue=A.transmissive;if(x.setupLights(),me.isArrayCamera){const Ze=me.cameras;if(ue.length>0)for(let at=0,yt=Ze.length;at<yt;at++){const mt=Ze[at];Oa(Me,ue,X,mt)}rt&&At.render(X);for(let at=0,yt=Ze.length;at<yt;at++){const mt=Ze[at];Xs(A,X,mt,mt.viewport)}}else ue.length>0&&Oa(Me,ue,X,me),rt&&At.render(X),Xs(A,X,me);O!==null&&k===0&&(je.updateMultisampleRenderTarget(O),je.updateRenderTargetMipmap(O)),X.isScene===!0&&X.onAfterRender(R,X,me),xe.resetDefaultState(),D=-1,N=null,T.pop(),T.length>0?(x=T[T.length-1],ze===!0&&et.setGlobalState(R.clippingPlanes,x.state.camera)):x=null,C.pop(),C.length>0?A=C[C.length-1]:A=null};function Xl(X,me,Se,Me){if(X.visible===!1)return;if(X.layers.test(me.layers)){if(X.isGroup)Se=X.renderOrder;else if(X.isLOD)X.autoUpdate===!0&&X.update(me);else if(X.isLight)x.pushLight(X),X.castShadow&&x.pushShadow(X);else if(X.isSprite){if(!X.frustumCulled||De.intersectsSprite(X)){Me&&We.setFromMatrixPosition(X.matrixWorld).applyMatrix4(ge);const at=ve.update(X),yt=X.material;yt.visible&&A.push(X,at,yt,Se,We.z,null)}}else if((X.isMesh||X.isLine||X.isPoints)&&(!X.frustumCulled||De.intersectsObject(X))){const at=ve.update(X),yt=X.material;if(Me&&(X.boundingSphere!==void 0?(X.boundingSphere===null&&X.computeBoundingSphere(),We.copy(X.boundingSphere.center)):(at.boundingSphere===null&&at.computeBoundingSphere(),We.copy(at.boundingSphere.center)),We.applyMatrix4(X.matrixWorld).applyMatrix4(ge)),Array.isArray(yt)){const mt=at.groups;for(let kt=0,Nt=mt.length;kt<Nt;kt++){const xt=mt[kt],dt=yt[xt.materialIndex];dt&&dt.visible&&A.push(X,at,dt,Se,We.z,xt)}}else yt.visible&&A.push(X,at,yt,Se,We.z,null)}}const Ze=X.children;for(let at=0,yt=Ze.length;at<yt;at++)Xl(Ze[at],me,Se,Me)}function Xs(X,me,Se,Me){const ue=X.opaque,Ze=X.transmissive,at=X.transparent;x.setupLightsView(Se),ze===!0&&et.setGlobalState(R.clippingPlanes,Se),Me&&Re.viewport(z.copy(Me)),ue.length>0&&Ur(ue,me,Se),Ze.length>0&&Ur(Ze,me,Se),at.length>0&&Ur(at,me,Se),Re.buffers.depth.setTest(!0),Re.buffers.depth.setMask(!0),Re.buffers.color.setMask(!0),Re.setPolygonOffset(!1)}function Oa(X,me,Se,Me){if((Se.isScene===!0?Se.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[Me.id]===void 0&&(x.state.transmissionRenderTarget[Me.id]=new Da(1,1,{generateMipmaps:!0,type:Le.has("EXT_color_buffer_half_float")||Le.has("EXT_color_buffer_float")?Pp:vo,minFilter:ho,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Tn.workingColorSpace}));const Ze=x.state.transmissionRenderTarget[Me.id],at=Me.viewport||z;Ze.setSize(at.z*R.transmissionResolutionScale,at.w*R.transmissionResolutionScale);const yt=R.getRenderTarget(),mt=R.getActiveCubeFace(),kt=R.getActiveMipmapLevel();R.setRenderTarget(Ze),R.getClearColor(ce),K=R.getClearAlpha(),K<1&&R.setClearColor(16777215,.5),R.clear(),rt&&At.render(Se);const Nt=R.toneMapping;R.toneMapping=Ia;const xt=Me.viewport;if(Me.viewport!==void 0&&(Me.viewport=void 0),x.setupLightsView(Me),ze===!0&&et.setGlobalState(R.clippingPlanes,Me),Ur(X,Se,Me),je.updateMultisampleRenderTarget(Ze),je.updateRenderTargetMipmap(Ze),Le.has("WEBGL_multisampled_render_to_texture")===!1){let dt=!1;for(let Ft=0,rn=me.length;Ft<rn;Ft++){const $t=me[Ft],en=$t.object,It=$t.geometry,_n=$t.material,Gt=$t.group;if(_n.side===ks&&en.layers.test(Me.layers)){const ni=_n.side;_n.side=Nr,_n.needsUpdate=!0,jl(en,Se,Me,It,_n,Gt),_n.side=ni,_n.needsUpdate=!0,dt=!0}}dt===!0&&(je.updateMultisampleRenderTarget(Ze),je.updateRenderTargetMipmap(Ze))}R.setRenderTarget(yt,mt,kt),R.setClearColor(ce,K),xt!==void 0&&(Me.viewport=xt),R.toneMapping=Nt}function Ur(X,me,Se){const Me=me.isScene===!0?me.overrideMaterial:null;for(let ue=0,Ze=X.length;ue<Ze;ue++){const at=X[ue],yt=at.object,mt=at.geometry,kt=at.group;let Nt=at.material;Nt.allowOverride===!0&&Me!==null&&(Nt=Me),yt.layers.test(Se.layers)&&jl(yt,me,Se,mt,Nt,kt)}}function jl(X,me,Se,Me,ue,Ze){X.onBeforeRender(R,me,Se,Me,ue,Ze),X.modelViewMatrix.multiplyMatrices(Se.matrixWorldInverse,X.matrixWorld),X.normalMatrix.getNormalMatrix(X.modelViewMatrix),ue.onBeforeRender(R,me,Se,Me,X,Ze),ue.transparent===!0&&ue.side===ks&&ue.forceSinglePass===!1?(ue.side=Nr,ue.needsUpdate=!0,R.renderBufferDirect(Se,me,Me,ue,X,Ze),ue.side=La,ue.needsUpdate=!0,R.renderBufferDirect(Se,me,Me,ue,X,Ze),ue.side=ks):R.renderBufferDirect(Se,me,Me,ue,X,Ze),X.onAfterRender(R,me,Se,Me,ue,Ze)}function Yl(X,me,Se){me.isScene!==!0&&(me=He);const Me=Ve.get(X),ue=x.state.lights,Ze=x.state.shadowsArray,at=ue.state.version,yt=Ce.getParameters(X,ue.state,Ze,me,Se),mt=Ce.getProgramCacheKey(yt);let kt=Me.programs;Me.environment=X.isMeshStandardMaterial?me.environment:null,Me.fog=me.fog,Me.envMap=(X.isMeshStandardMaterial?Dt:Rt).get(X.envMap||Me.environment),Me.envMapRotation=Me.environment!==null&&X.envMap===null?me.environmentRotation:X.envMapRotation,kt===void 0&&(X.addEventListener("dispose",ke),kt=new Map,Me.programs=kt);let Nt=kt.get(mt);if(Nt!==void 0){if(Me.currentProgram===Nt&&Me.lightsStateVersion===at)return qh(X,yt),Nt}else yt.uniforms=Ce.getUniforms(X),X.onBeforeCompile(yt,R),Nt=Ce.acquireProgram(yt,mt),kt.set(mt,Nt),Me.uniforms=yt.uniforms;const xt=Me.uniforms;return(!X.isShaderMaterial&&!X.isRawShaderMaterial||X.clipping===!0)&&(xt.clippingPlanes=et.uniform),qh(X,yt),Me.needsLights=$h(X),Me.lightsStateVersion=at,Me.needsLights&&(xt.ambientLightColor.value=ue.state.ambient,xt.lightProbe.value=ue.state.probe,xt.directionalLights.value=ue.state.directional,xt.directionalLightShadows.value=ue.state.directionalShadow,xt.spotLights.value=ue.state.spot,xt.spotLightShadows.value=ue.state.spotShadow,xt.rectAreaLights.value=ue.state.rectArea,xt.ltc_1.value=ue.state.rectAreaLTC1,xt.ltc_2.value=ue.state.rectAreaLTC2,xt.pointLights.value=ue.state.point,xt.pointLightShadows.value=ue.state.pointShadow,xt.hemisphereLights.value=ue.state.hemi,xt.directionalShadowMap.value=ue.state.directionalShadowMap,xt.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,xt.spotShadowMap.value=ue.state.spotShadowMap,xt.spotLightMatrix.value=ue.state.spotLightMatrix,xt.spotLightMap.value=ue.state.spotLightMap,xt.pointShadowMap.value=ue.state.pointShadowMap,xt.pointShadowMatrix.value=ue.state.pointShadowMatrix),Me.currentProgram=Nt,Me.uniformsList=null,Nt}function Zh(X){if(X.uniformsList===null){const me=X.currentProgram.getUniforms();X.uniformsList=Jy.seqWithValue(me.seq,X.uniforms)}return X.uniformsList}function qh(X,me){const Se=Ve.get(X);Se.outputColorSpace=me.outputColorSpace,Se.batching=me.batching,Se.batchingColor=me.batchingColor,Se.instancing=me.instancing,Se.instancingColor=me.instancingColor,Se.instancingMorph=me.instancingMorph,Se.skinning=me.skinning,Se.morphTargets=me.morphTargets,Se.morphNormals=me.morphNormals,Se.morphColors=me.morphColors,Se.morphTargetsCount=me.morphTargetsCount,Se.numClippingPlanes=me.numClippingPlanes,Se.numIntersection=me.numClipIntersection,Se.vertexAlphas=me.vertexAlphas,Se.vertexTangents=me.vertexTangents,Se.toneMapping=me.toneMapping}function Ao(X,me,Se,Me,ue){me.isScene!==!0&&(me=He),je.resetTextureUnits();const Ze=me.fog,at=Me.isMeshStandardMaterial?me.environment:null,yt=O===null?R.outputColorSpace:O.isXRRenderTarget===!0?O.texture.colorSpace:Dh,mt=(Me.isMeshStandardMaterial?Dt:Rt).get(Me.envMap||at),kt=Me.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,Nt=!!Se.attributes.tangent&&(!!Me.normalMap||Me.anisotropy>0),xt=!!Se.morphAttributes.position,dt=!!Se.morphAttributes.normal,Ft=!!Se.morphAttributes.color;let rn=Ia;Me.toneMapped&&(O===null||O.isXRRenderTarget===!0)&&(rn=R.toneMapping);const $t=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,en=$t!==void 0?$t.length:0,It=Ve.get(Me),_n=x.state.lights;if(ze===!0&&(de===!0||X!==N)){const ui=X===N&&Me.id===D;et.setState(Me,X,ui)}let Gt=!1;Me.version===It.__version?(It.needsLights&&It.lightsStateVersion!==_n.state.version||It.outputColorSpace!==yt||ue.isBatchedMesh&&It.batching===!1||!ue.isBatchedMesh&&It.batching===!0||ue.isBatchedMesh&&It.batchingColor===!0&&ue.colorTexture===null||ue.isBatchedMesh&&It.batchingColor===!1&&ue.colorTexture!==null||ue.isInstancedMesh&&It.instancing===!1||!ue.isInstancedMesh&&It.instancing===!0||ue.isSkinnedMesh&&It.skinning===!1||!ue.isSkinnedMesh&&It.skinning===!0||ue.isInstancedMesh&&It.instancingColor===!0&&ue.instanceColor===null||ue.isInstancedMesh&&It.instancingColor===!1&&ue.instanceColor!==null||ue.isInstancedMesh&&It.instancingMorph===!0&&ue.morphTexture===null||ue.isInstancedMesh&&It.instancingMorph===!1&&ue.morphTexture!==null||It.envMap!==mt||Me.fog===!0&&It.fog!==Ze||It.numClippingPlanes!==void 0&&(It.numClippingPlanes!==et.numPlanes||It.numIntersection!==et.numIntersection)||It.vertexAlphas!==kt||It.vertexTangents!==Nt||It.morphTargets!==xt||It.morphNormals!==dt||It.morphColors!==Ft||It.toneMapping!==rn||It.morphTargetsCount!==en)&&(Gt=!0):(Gt=!0,It.__version=Me.version);let ni=It.currentProgram;Gt===!0&&(ni=Yl(Me,me,ue));let es=!1,qi=!1,js=!1;const Nn=ni.getUniforms(),Xn=It.uniforms;if(Re.useProgram(ni.program)&&(es=!0,qi=!0,js=!0),Me.id!==D&&(D=Me.id,qi=!0),es||N!==X){Re.buffers.depth.getReversed()&&X.reversedDepth!==!0&&(X._reversedDepth=!0,X.updateProjectionMatrix()),Nn.setValue(Q,"projectionMatrix",X.projectionMatrix),Nn.setValue(Q,"viewMatrix",X.matrixWorldInverse);const $i=Nn.map.cameraPosition;$i!==void 0&&$i.setValue(Q,Ue.setFromMatrixPosition(X.matrixWorld)),Pe.logarithmicDepthBuffer&&Nn.setValue(Q,"logDepthBufFC",2/(Math.log(X.far+1)/Math.LN2)),(Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshLambertMaterial||Me.isMeshBasicMaterial||Me.isMeshStandardMaterial||Me.isShaderMaterial)&&Nn.setValue(Q,"isOrthographic",X.isOrthographicCamera===!0),N!==X&&(N=X,qi=!0,js=!0)}if(ue.isSkinnedMesh){Nn.setOptional(Q,ue,"bindMatrix"),Nn.setOptional(Q,ue,"bindMatrixInverse");const ui=ue.skeleton;ui&&(ui.boneTexture===null&&ui.computeBoneTexture(),Nn.setValue(Q,"boneTexture",ui.boneTexture,je))}ue.isBatchedMesh&&(Nn.setOptional(Q,ue,"batchingTexture"),Nn.setValue(Q,"batchingTexture",ue._matricesTexture,je),Nn.setOptional(Q,ue,"batchingIdTexture"),Nn.setValue(Q,"batchingIdTexture",ue._indirectTexture,je),Nn.setOptional(Q,ue,"batchingColorTexture"),ue._colorsTexture!==null&&Nn.setValue(Q,"batchingColorTexture",ue._colorsTexture,je));const Qi=Se.morphAttributes;if((Qi.position!==void 0||Qi.normal!==void 0||Qi.color!==void 0)&&Ke.update(ue,Se,ni),(qi||It.receiveShadow!==ue.receiveShadow)&&(It.receiveShadow=ue.receiveShadow,Nn.setValue(Q,"receiveShadow",ue.receiveShadow)),Me.isMeshGouraudMaterial&&Me.envMap!==null&&(Xn.envMap.value=mt,Xn.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),Me.isMeshStandardMaterial&&Me.envMap===null&&me.environment!==null&&(Xn.envMapIntensity.value=me.environmentIntensity),qi&&(Nn.setValue(Q,"toneMappingExposure",R.toneMappingExposure),It.needsLights&&Qh(Xn,js),Ze&&Me.fog===!0&&Fe.refreshFogUniforms(Xn,Ze),Fe.refreshMaterialUniforms(Xn,Me,U,ae,x.state.transmissionRenderTarget[X.id]),Jy.upload(Q,Zh(It),Xn,je)),Me.isShaderMaterial&&Me.uniformsNeedUpdate===!0&&(Jy.upload(Q,Zh(It),Xn,je),Me.uniformsNeedUpdate=!1),Me.isSpriteMaterial&&Nn.setValue(Q,"center",ue.center),Nn.setValue(Q,"modelViewMatrix",ue.modelViewMatrix),Nn.setValue(Q,"normalMatrix",ue.normalMatrix),Nn.setValue(Q,"modelMatrix",ue.matrixWorld),Me.isShaderMaterial||Me.isRawShaderMaterial){const ui=Me.uniformsGroups;for(let $i=0,Ys=ui.length;$i<Ys;$i++){const an=ui[$i];tt.update(an,ni),tt.bind(an,ni)}}return ni}function Qh(X,me){X.ambientLightColor.needsUpdate=me,X.lightProbe.needsUpdate=me,X.directionalLights.needsUpdate=me,X.directionalLightShadows.needsUpdate=me,X.pointLights.needsUpdate=me,X.pointLightShadows.needsUpdate=me,X.spotLights.needsUpdate=me,X.spotLightShadows.needsUpdate=me,X.rectAreaLights.needsUpdate=me,X.hemisphereLights.needsUpdate=me}function $h(X){return X.isMeshLambertMaterial||X.isMeshToonMaterial||X.isMeshPhongMaterial||X.isMeshStandardMaterial||X.isShadowMaterial||X.isShaderMaterial&&X.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(X,me,Se){const Me=Ve.get(X);Me.__autoAllocateDepthBuffer=X.resolveDepthBuffer===!1,Me.__autoAllocateDepthBuffer===!1&&(Me.__useRenderToTexture=!1),Ve.get(X.texture).__webglTexture=me,Ve.get(X.depthTexture).__webglTexture=Me.__autoAllocateDepthBuffer?void 0:Se,Me.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(X,me){const Se=Ve.get(X);Se.__webglFramebuffer=me,Se.__useDefaultFramebuffer=me===void 0};const ef=Q.createFramebuffer();this.setRenderTarget=function(X,me=0,Se=0){O=X,B=me,k=Se;let Me=!0,ue=null,Ze=!1,at=!1;if(X){const mt=Ve.get(X);if(mt.__useDefaultFramebuffer!==void 0)Re.bindFramebuffer(Q.FRAMEBUFFER,null),Me=!1;else if(mt.__webglFramebuffer===void 0)je.setupRenderTarget(X);else if(mt.__hasExternalTextures)je.rebindTextures(X,Ve.get(X.texture).__webglTexture,Ve.get(X.depthTexture).__webglTexture);else if(X.depthBuffer){const xt=X.depthTexture;if(mt.__boundDepthTexture!==xt){if(xt!==null&&Ve.has(xt)&&(X.width!==xt.image.width||X.height!==xt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");je.setupDepthRenderbuffer(X)}}const kt=X.texture;(kt.isData3DTexture||kt.isDataArrayTexture||kt.isCompressedArrayTexture)&&(at=!0);const Nt=Ve.get(X).__webglFramebuffer;X.isWebGLCubeRenderTarget?(Array.isArray(Nt[me])?ue=Nt[me][Se]:ue=Nt[me],Ze=!0):X.samples>0&&je.useMultisampledRTT(X)===!1?ue=Ve.get(X).__webglMultisampledFramebuffer:Array.isArray(Nt)?ue=Nt[Se]:ue=Nt,z.copy(X.viewport),ee.copy(X.scissor),te=X.scissorTest}else z.copy(W).multiplyScalar(U).floor(),ee.copy(se).multiplyScalar(U).floor(),te=_e;if(Se!==0&&(ue=ef),Re.bindFramebuffer(Q.FRAMEBUFFER,ue)&&Me&&Re.drawBuffers(X,ue),Re.viewport(z),Re.scissor(ee),Re.setScissorTest(te),Ze){const mt=Ve.get(X.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+me,mt.__webglTexture,Se)}else if(at){const mt=me;for(let kt=0;kt<X.textures.length;kt++){const Nt=Ve.get(X.textures[kt]);Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0+kt,Nt.__webglTexture,Se,mt)}}else if(X!==null&&Se!==0){const mt=Ve.get(X.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,mt.__webglTexture,Se)}D=-1},this.readRenderTargetPixels=function(X,me,Se,Me,ue,Ze,at,yt=0){if(!(X&&X.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mt=Ve.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&at!==void 0&&(mt=mt[at]),mt){Re.bindFramebuffer(Q.FRAMEBUFFER,mt);try{const kt=X.textures[yt],Nt=kt.format,xt=kt.type;if(!Pe.textureFormatReadable(Nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Pe.textureTypeReadable(xt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=X.width-Me&&Se>=0&&Se<=X.height-ue&&(X.textures.length>1&&Q.readBuffer(Q.COLOR_ATTACHMENT0+yt),Q.readPixels(me,Se,Me,ue,ie.convert(Nt),ie.convert(xt),Ze))}finally{const kt=O!==null?Ve.get(O).__webglFramebuffer:null;Re.bindFramebuffer(Q.FRAMEBUFFER,kt)}}},this.readRenderTargetPixelsAsync=async function(X,me,Se,Me,ue,Ze,at,yt=0){if(!(X&&X.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let mt=Ve.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&at!==void 0&&(mt=mt[at]),mt)if(me>=0&&me<=X.width-Me&&Se>=0&&Se<=X.height-ue){Re.bindFramebuffer(Q.FRAMEBUFFER,mt);const kt=X.textures[yt],Nt=kt.format,xt=kt.type;if(!Pe.textureFormatReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Pe.textureTypeReadable(xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const dt=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,dt),Q.bufferData(Q.PIXEL_PACK_BUFFER,Ze.byteLength,Q.STREAM_READ),X.textures.length>1&&Q.readBuffer(Q.COLOR_ATTACHMENT0+yt),Q.readPixels(me,Se,Me,ue,ie.convert(Nt),ie.convert(xt),0);const Ft=O!==null?Ve.get(O).__webglFramebuffer:null;Re.bindFramebuffer(Q.FRAMEBUFFER,Ft);const rn=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await U4(Q,rn,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,dt),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,Ze),Q.deleteBuffer(dt),Q.deleteSync(rn),Ze}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(X,me=null,Se=0){const Me=Math.pow(2,-Se),ue=Math.floor(X.image.width*Me),Ze=Math.floor(X.image.height*Me),at=me!==null?me.x:0,yt=me!==null?me.y:0;je.setTexture2D(X,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,Se,0,0,at,yt,ue,Ze),Re.unbindTexture()};const tf=Q.createFramebuffer(),nf=Q.createFramebuffer();this.copyTextureToTexture=function(X,me,Se=null,Me=null,ue=0,Ze=null){Ze===null&&(ue!==0?(zg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ze=ue,ue=0):Ze=0);let at,yt,mt,kt,Nt,xt,dt,Ft,rn;const $t=X.isCompressedTexture?X.mipmaps[Ze]:X.image;if(Se!==null)at=Se.max.x-Se.min.x,yt=Se.max.y-Se.min.y,mt=Se.isBox3?Se.max.z-Se.min.z:1,kt=Se.min.x,Nt=Se.min.y,xt=Se.isBox3?Se.min.z:0;else{const Qi=Math.pow(2,-ue);at=Math.floor($t.width*Qi),yt=Math.floor($t.height*Qi),X.isDataArrayTexture?mt=$t.depth:X.isData3DTexture?mt=Math.floor($t.depth*Qi):mt=1,kt=0,Nt=0,xt=0}Me!==null?(dt=Me.x,Ft=Me.y,rn=Me.z):(dt=0,Ft=0,rn=0);const en=ie.convert(me.format),It=ie.convert(me.type);let _n;me.isData3DTexture?(je.setTexture3D(me,0),_n=Q.TEXTURE_3D):me.isDataArrayTexture||me.isCompressedArrayTexture?(je.setTexture2DArray(me,0),_n=Q.TEXTURE_2D_ARRAY):(je.setTexture2D(me,0),_n=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,me.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,me.unpackAlignment);const Gt=Q.getParameter(Q.UNPACK_ROW_LENGTH),ni=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),es=Q.getParameter(Q.UNPACK_SKIP_PIXELS),qi=Q.getParameter(Q.UNPACK_SKIP_ROWS),js=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,$t.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,$t.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,kt),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Nt),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,xt);const Nn=X.isDataArrayTexture||X.isData3DTexture,Xn=me.isDataArrayTexture||me.isData3DTexture;if(X.isDepthTexture){const Qi=Ve.get(X),ui=Ve.get(me),$i=Ve.get(Qi.__renderTarget),Ys=Ve.get(ui.__renderTarget);Re.bindFramebuffer(Q.READ_FRAMEBUFFER,$i.__webglFramebuffer),Re.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Ys.__webglFramebuffer);for(let an=0;an<mt;an++)Nn&&(Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Ve.get(X).__webglTexture,ue,xt+an),Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Ve.get(me).__webglTexture,Ze,rn+an)),Q.blitFramebuffer(kt,Nt,at,yt,dt,Ft,at,yt,Q.DEPTH_BUFFER_BIT,Q.NEAREST);Re.bindFramebuffer(Q.READ_FRAMEBUFFER,null),Re.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else if(ue!==0||X.isRenderTargetTexture||Ve.has(X)){const Qi=Ve.get(X),ui=Ve.get(me);Re.bindFramebuffer(Q.READ_FRAMEBUFFER,tf),Re.bindFramebuffer(Q.DRAW_FRAMEBUFFER,nf);for(let $i=0;$i<mt;$i++)Nn?Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Qi.__webglTexture,ue,xt+$i):Q.framebufferTexture2D(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Qi.__webglTexture,ue),Xn?Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ui.__webglTexture,Ze,rn+$i):Q.framebufferTexture2D(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,ui.__webglTexture,Ze),ue!==0?Q.blitFramebuffer(kt,Nt,at,yt,dt,Ft,at,yt,Q.COLOR_BUFFER_BIT,Q.NEAREST):Xn?Q.copyTexSubImage3D(_n,Ze,dt,Ft,rn+$i,kt,Nt,at,yt):Q.copyTexSubImage2D(_n,Ze,dt,Ft,kt,Nt,at,yt);Re.bindFramebuffer(Q.READ_FRAMEBUFFER,null),Re.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else Xn?X.isDataTexture||X.isData3DTexture?Q.texSubImage3D(_n,Ze,dt,Ft,rn,at,yt,mt,en,It,$t.data):me.isCompressedArrayTexture?Q.compressedTexSubImage3D(_n,Ze,dt,Ft,rn,at,yt,mt,en,$t.data):Q.texSubImage3D(_n,Ze,dt,Ft,rn,at,yt,mt,en,It,$t):X.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,Ze,dt,Ft,at,yt,en,It,$t.data):X.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,Ze,dt,Ft,$t.width,$t.height,en,$t.data):Q.texSubImage2D(Q.TEXTURE_2D,Ze,dt,Ft,at,yt,en,It,$t);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Gt),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,ni),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,es),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,qi),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,js),Ze===0&&me.generateMipmaps&&Q.generateMipmap(_n),Re.unbindTexture()},this.initRenderTarget=function(X){Ve.get(X).__webglFramebuffer===void 0&&je.setupRenderTarget(X)},this.initTexture=function(X){X.isCubeTexture?je.setTextureCube(X,0):X.isData3DTexture?je.setTexture3D(X,0):X.isDataArrayTexture||X.isCompressedArrayTexture?je.setTexture2DArray(X,0):je.setTexture2D(X,0),Re.unbindTexture()},this.resetState=function(){B=0,k=0,O=null,Re.reset(),xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return zs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Tn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Tn._getUnpackColorSpace()}}const $X=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:wx,AddEquation:Hc,AddOperation:lL,AdditiveAnimationBlendMode:LS,AdditiveBlending:I1,AgXToneMapping:dL,AlphaFormat:RS,AlwaysCompare:RL,AlwaysDepth:g_,AlwaysStencilFunc:B1,AmbientLight:oM,AnimationAction:MD,AnimationClip:Ap,AnimationLoader:fV,AnimationMixer:UV,AnimationObjectGroup:OV,AnimationUtils:lV,ArcCurve:XL,ArrayCamera:AD,ArrowHelper:u8,AttachedBindMode:D1,Audio:wD,AudioAnalyser:TV,AudioContext:aM,AudioListener:SV,AudioLoader:EV,AxesHelper:h8,BackSide:Nr,BasicDepthPacking:xL,BasicShadowMap:HP,BatchedMesh:HL,Bone:kx,BooleanKeyframeTrack:Xh,Box2:KV,Box3:Ar,Box3Helper:l8,BoxGeometry:Wh,BoxHelper:a8,BufferAttribute:Pn,BufferGeometry:Qt,BufferGeometryLoader:xD,ByteType:MS,Cache:Ta,Camera:o0,CameraHelper:o8,CanvasTexture:P5,CapsuleGeometry:Hx,CatmullRomCurve3:jL,CineonToneMapping:hL,CircleGeometry:Vx,ClampToEdgeWrapping:Us,Clock:lM,Color:ft,ColorKeyframeTrack:tM,ColorManagement:Tn,CompressedArrayTexture:R5,CompressedCubeTexture:I5,CompressedTexture:Gx,CompressedTextureLoader:dV,ConeGeometry:f0,ConstantAlphaFactor:sL,ConstantColorFactor:iL,Controls:d8,CubeCamera:OL,CubeReflectionMapping:Ul,CubeRefractionMapping:Yc,CubeTexture:a0,CubeTextureLoader:pV,CubeUVReflectionMapping:Ip,CubicBezierCurve:jS,CubicBezierCurve3:YL,CubicInterpolant:hD,CullFaceBack:R1,CullFaceFront:GP,CullFaceFrontBack:HH,CullFaceNone:zP,Curve:aa,CurvePath:JL,CustomBlending:VP,CustomToneMapping:fL,CylinderGeometry:h0,Cylindrical:YV,Data3DTexture:Bx,DataArrayTexture:Dx,DataTexture:Pa,DataTextureLoader:mV,DataUtils:e5,DecrementStencilOp:$H,DecrementWrapStencilOp:t4,DefaultLoadingManager:pD,DepthFormat:pp,DepthStencilFormat:mp,DepthTexture:VS,DetachedBindMode:mL,DirectionalLight:jg,DirectionalLightHelper:s8,DiscreteInterpolant:fD,DodecahedronGeometry:Wx,DoubleSide:ks,DstAlphaFactor:QP,DstColorFactor:eL,DynamicCopyUsage:g4,DynamicDrawUsage:u4,DynamicReadUsage:d4,EdgesGeometry:WL,EllipseCurve:Xx,EqualCompare:ML,EqualDepth:y_,EqualStencilFunc:s4,EquirectangularReflectionMapping:Bg,EquirectangularRefractionMapping:Ng,Euler:ws,EventDispatcher:Fa,ExternalTexture:WS,ExtrudeGeometry:jx,FileLoader:Ws,Float16BufferAttribute:a5,Float32BufferAttribute:St,FloatType:xs,Fog:Fx,FogExp2:Nx,FramebufferTexture:b5,FrontSide:La,Frustum:Lp,FrustumArray:Ux,GLBufferAttribute:WV,GLSL1:y4,GLSL3:N1,GreaterCompare:CL,GreaterDepth:x_,GreaterEqualCompare:bL,GreaterEqualDepth:__,GreaterEqualStencilFunc:c4,GreaterStencilFunc:a4,GridHelper:i8,Group:Dl,HalfFloatType:Pp,HemisphereLight:mD,HemisphereLightHelper:n8,IcosahedronGeometry:Yx,ImageBitmapLoader:ED,ImageLoader:Wg,ImageUtils:DL,IncrementStencilOp:QH,IncrementWrapStencilOp:e4,InstancedBufferAttribute:Bh,InstancedBufferGeometry:_D,InstancedInterleavedBuffer:VV,InstancedMesh:GS,Int16BufferAttribute:s5,Int32BufferAttribute:o5,Int8BufferAttribute:n5,IntType:Cx,InterleavedBuffer:l0,InterleavedBufferAttribute:Jc,Interpolant:Bp,InterpolateDiscrete:gp,InterpolateLinear:vp,InterpolateSmooth:Yy,InterpolationSamplingMode:E4,InterpolationSamplingType:x4,InvertStencilOp:n4,KeepStencilOp:ah,KeyframeTrack:Eo,LOD:GL,LatheGeometry:Kx,Layers:wh,LessCompare:SL,LessDepth:v_,LessEqualCompare:BS,LessEqualDepth:Lh,LessEqualStencilFunc:o4,LessStencilFunc:r4,Light:eu,LightProbe:yD,Line:Gl,Line3:qV,LineBasicMaterial:Fr,LineCurve:YS,LineCurve3:KL,LineDashedMaterial:lD,LineLoop:HS,LineSegments:oa,LinearFilter:Ti,LinearInterpolant:eM,LinearMipMapLinearFilter:jH,LinearMipMapNearestFilter:XH,LinearMipmapLinearFilter:ho,LinearMipmapNearestFilter:qd,LinearSRGBColorSpace:Dh,LinearToneMapping:cL,LinearTransfer:Og,Loader:Or,LoaderUtils:Xc,LoadingManager:nM,LoopOnce:gL,LoopPingPong:yL,LoopRepeat:vL,MOUSE:sh,Material:Ki,MaterialLoader:tE,MathUtils:IL,Matrix2:dM,Matrix3:on,Matrix4:jt,MaxEquation:YP,Mesh:mi,MeshBasicMaterial:Gs,MeshDepthMaterial:qS,MeshDistanceMaterial:QS,MeshLambertMaterial:oD,MeshMatcapMaterial:aD,MeshNormalMaterial:sD,MeshPhongMaterial:iD,MeshPhysicalMaterial:xo,MeshStandardMaterial:Zc,MeshToonMaterial:rD,MinEquation:jP,MirroredRepeatWrapping:hp,MixOperation:aL,MultiplyBlending:L1,MultiplyOperation:r0,NearestFilter:or,NearestMipMapLinearFilter:WH,NearestMipMapNearestFilter:VH,NearestMipmapLinearFilter:hh,NearestMipmapNearestFilter:Mx,NeutralToneMapping:pL,NeverCompare:wL,NeverDepth:m_,NeverStencilFunc:i4,NoBlending:Nl,NoColorSpace:Pl,NoToneMapping:Ia,NormalAnimationBlendMode:Lx,NormalBlending:Eh,NotEqualCompare:TL,NotEqualDepth:E_,NotEqualStencilFunc:l4,NumberKeyframeTrack:Oh,Object3D:Sn,ObjectLoader:_V,ObjectSpaceNormalMap:AL,OctahedronGeometry:d0,OneFactor:JP,OneMinusConstantAlphaFactor:oL,OneMinusConstantColorFactor:rL,OneMinusDstAlphaFactor:$P,OneMinusDstColorFactor:tL,OneMinusSrcAlphaFactor:p_,OneMinusSrcColorFactor:qP,OrthographicCamera:na,PCFShadowMap:Ax,PCFSoftShadowMap:vg,PMREMGenerator:V1,Path:ex,PerspectiveCamera:ei,Plane:Tl,PlaneGeometry:Dp,PlaneHelper:c8,PointLight:sM,PointLightHelper:e8,Points:zx,PointsMaterial:u0,PolarGridHelper:r8,PolyhedronGeometry:$c,PositionalAudio:CV,PropertyBinding:Cn,PropertyMixer:SD,QuadraticBezierCurve:KS,QuadraticBezierCurve3:JS,Quaternion:ar,QuaternionKeyframeTrack:kh,QuaternionLinearInterpolant:dD,RED_GREEN_RGTC2_Format:K_,RED_RGTC1_Format:j_,REVISION:i0,RGBADepthPacking:EL,RGBAFormat:Br,RGBAIntegerFormat:Px,RGBA_ASTC_10x10_Format:z_,RGBA_ASTC_10x5_Format:O_,RGBA_ASTC_10x6_Format:k_,RGBA_ASTC_10x8_Format:U_,RGBA_ASTC_12x10_Format:G_,RGBA_ASTC_12x12_Format:H_,RGBA_ASTC_4x4_Format:R_,RGBA_ASTC_5x4_Format:I_,RGBA_ASTC_5x5_Format:P_,RGBA_ASTC_6x5_Format:L_,RGBA_ASTC_6x6_Format:D_,RGBA_ASTC_8x5_Format:B_,RGBA_ASTC_8x6_Format:N_,RGBA_ASTC_8x8_Format:F_,RGBA_BPTC_Format:V_,RGBA_ETC2_EAC_Format:b_,RGBA_PVRTC_2BPPV1_Format:M_,RGBA_PVRTC_4BPPV1_Format:S_,RGBA_S3TC_DXT1_Format:_g,RGBA_S3TC_DXT3_Format:xg,RGBA_S3TC_DXT5_Format:Eg,RGBDepthPacking:KH,RGBFormat:IS,RGBIntegerFormat:YH,RGB_BPTC_SIGNED_Format:W_,RGB_BPTC_UNSIGNED_Format:X_,RGB_ETC1_Format:C_,RGB_ETC2_Format:T_,RGB_PVRTC_2BPPV1_Format:w_,RGB_PVRTC_4BPPV1_Format:A_,RGB_S3TC_DXT1_Format:yg,RGDepthPacking:JH,RGFormat:PS,RGIntegerFormat:Ix,RawShaderMaterial:nD,Ray:Vh,Raycaster:fM,RectAreaLight:gD,RedFormat:Rx,RedIntegerFormat:s0,ReinhardToneMapping:uL,RenderTarget:FS,RenderTarget3D:zV,RepeatWrapping:Kc,ReplaceStencilOp:qH,ReverseSubtractEquation:XP,RingGeometry:Jx,SIGNED_RED_GREEN_RGTC2_Format:J_,SIGNED_RED_RGTC1_Format:Y_,SRGBColorSpace:ms,SRGBTransfer:zn,Scene:Ox,ShaderChunk:fn,ShaderLib:Qo,ShaderMaterial:yo,ShadowMaterial:tD,Shape:Sh,ShapeGeometry:Zx,ShapePath:f8,ShapeUtils:ta,ShortType:CS,Skeleton:c0,SkeletonHelper:$V,SkinnedMesh:zS,Source:Vc,Sphere:lr,SphereGeometry:Fh,Spherical:G1,SphericalHarmonics3:vD,SplineCurve:ZS,SpotLight:rM,SpotLightHelper:QV,Sprite:zL,SpriteMaterial:US,SrcAlphaFactor:d_,SrcAlphaSaturateFactor:nL,SrcColorFactor:ZP,StaticCopyUsage:m4,StaticDrawUsage:kg,StaticReadUsage:f4,StereoCamera:AV,StreamCopyUsage:v4,StreamDrawUsage:h4,StreamReadUsage:p4,StringKeyframeTrack:jh,SubtractEquation:WP,SubtractiveBlending:P1,TOUCH:oh,TangentSpaceNormalMap:Qc,TetrahedronGeometry:qx,Texture:li,TextureLoader:Xg,TextureUtils:y8,Timer:XV,TimestampQuery:_4,TorusGeometry:Qx,TorusKnotGeometry:$x,Triangle:vs,TriangleFanDrawMode:Z_,TriangleStripDrawMode:DS,TrianglesDrawMode:_L,TubeGeometry:eE,UVMapping:Sx,Uint16BufferAttribute:OS,Uint32BufferAttribute:kS,Uint8BufferAttribute:i5,Uint8ClampedBufferAttribute:r5,Uniform:hM,UniformsGroup:HV,UniformsLib:ht,UniformsUtils:FL,UnsignedByteType:vo,UnsignedInt101111Type:bS,UnsignedInt248Type:dp,UnsignedInt5999Type:TS,UnsignedIntType:zl,UnsignedShort4444Type:Tx,UnsignedShort5551Type:bx,UnsignedShortType:fp,VSMShadowMap:Zo,Vector2:Be,Vector3:j,Vector4:In,VectorKeyframeTrack:Uh,VideoFrameTexture:T5,VideoTexture:VL,WebGL3DRenderTarget:W4,WebGLArrayRenderTarget:V4,WebGLCoordinateSystem:zs,WebGLCubeRenderTarget:kL,WebGLRenderTarget:Da,WebGLRenderer:mM,WebGLUtils:LD,WebGPUCoordinateSystem:yp,WebXRController:Ky,WireframeGeometry:eD,WrapAroundEnding:Fg,ZeroCurvatureEnding:fh,ZeroFactor:KP,ZeroSlopeEnding:dh,ZeroStencilOp:ZH,createCanvasElement:LL},Symbol.toStringTag,{value:"Module"}));var fw={exports:{}},Dc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wR;function ej(){return wR||(wR=1,Dc.ConcurrentRoot=1,Dc.ContinuousEventPriority=4,Dc.DefaultEventPriority=16,Dc.DiscreteEventPriority=1,Dc.IdleEventPriority=536870912,Dc.LegacyRoot=0),Dc}var SR;function tj(){return SR||(SR=1,fw.exports=ej()),fw.exports}var Yd=tj();function nj(i){let e;const t=new Set,n=(h,f)=>{const m=typeof h=="function"?h(e):h;if(m!==e){const g=e;e=f?m:Object.assign({},e,m),t.forEach(y=>y(e,g))}},r=()=>e,s=(h,f=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=f(e);function y(){const _=f(e);if(!m(g,_)){const S=g;h(g=_,S)}}return t.add(y),()=>t.delete(y)},c={setState:n,getState:r,subscribe:(h,f,m)=>f||m?s(h,f,m):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=i(n,r,c),c}const ij=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),MR=ij?J.useEffect:J.useLayoutEffect;function rj(i){const e=typeof i=="function"?nj(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=J.useReducer(A=>A+1,0),o=e.getState(),a=J.useRef(o),c=J.useRef(n),h=J.useRef(r),f=J.useRef(!1),m=J.useRef();m.current===void 0&&(m.current=n(o));let g,y=!1;(a.current!==o||c.current!==n||h.current!==r||f.current)&&(g=n(o),y=!r(m.current,g)),MR(()=>{y&&(m.current=g),a.current=o,c.current=n,h.current=r,f.current=!1});const _=J.useRef(o);MR(()=>{const A=()=>{try{const C=e.getState(),T=c.current(C);h.current(m.current,T)||(a.current=C,m.current=T,s())}catch{f.current=!0,s()}},x=e.subscribe(A);return e.getState()!==_.current&&A(),x},[]);const S=y?g:m.current;return J.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}const sj=i=>typeof i=="object"&&typeof i.then=="function",mh=[];function DD(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function BD(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of mh)if(DD(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:n.equal,remove:()=>{const s=mh.indexOf(r);s!==-1&&mh.splice(s,1)},promise:(sj(i)?i:i(...e)).then(s=>{r.response=s,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(s=>r.error=s)};if(mh.push(r),!t)throw r.promise}const oj=(i,e,t)=>BD(i,e,!1,t),aj=(i,e,t)=>void BD(i,e,!0,t),lj=i=>{if(i===void 0||i.length===0)mh.splice(0,mh.length);else{const e=mh.find(t=>DD(i,t.keys,t.equal));e&&e.remove()}};var dw={exports:{}},pw={exports:{}},mw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR;function cj(){return CR||(CR=1,(function(i){function e(U,Z){var q=U.length;U.push(Z);e:for(;0<q;){var W=q-1>>>1,se=U[W];if(0<r(se,Z))U[W]=Z,U[q]=se,q=W;else break e}}function t(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var Z=U[0],q=U.pop();if(q!==Z){U[0]=q;e:for(var W=0,se=U.length,_e=se>>>1;W<_e;){var De=2*(W+1)-1,ze=U[De],de=De+1,ge=U[de];if(0>r(ze,q))de<se&&0>r(ge,ze)?(U[W]=ge,U[de]=q,W=de):(U[W]=ze,U[De]=q,W=De);else if(de<se&&0>r(ge,q))U[W]=ge,U[de]=q,W=de;else break e}}return Z}function r(U,Z){var q=U.sortIndex-Z.sortIndex;return q!==0?q:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var c=[],h=[],f=1,m=null,g=3,y=!1,_=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(U){for(var Z=t(h);Z!==null;){if(Z.callback===null)n(h);else if(Z.startTime<=U)n(h),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(h)}}function R(U){if(S=!1,T(U),!_)if(t(c)!==null)_=!0,oe(L);else{var Z=t(h);Z!==null&&ae(R,Z.startTime-U)}}function L(U,Z){_=!1,S&&(S=!1,x(O),O=-1),y=!0;var q=g;try{for(T(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||U&&!z());){var W=m.callback;if(typeof W=="function"){m.callback=null,g=m.priorityLevel;var se=W(m.expirationTime<=Z);Z=i.unstable_now(),typeof se=="function"?m.callback=se:m===t(c)&&n(c),T(Z)}else n(c);m=t(c)}if(m!==null)var _e=!0;else{var De=t(h);De!==null&&ae(R,De.startTime-Z),_e=!1}return _e}finally{m=null,g=q,y=!1}}var B=!1,k=null,O=-1,D=5,N=-1;function z(){return!(i.unstable_now()-N<D)}function ee(){if(k!==null){var U=i.unstable_now();N=U;var Z=!0;try{Z=k(!0,U)}finally{Z?te():(B=!1,k=null)}}else B=!1}var te;if(typeof C=="function")te=function(){C(ee)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,K=ce.port2;ce.port1.onmessage=ee,te=function(){K.postMessage(null)}}else te=function(){A(ee,0)};function oe(U){k=U,B||(B=!0,te())}function ae(U,Z){O=A(function(){U(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_continueExecution=function(){_||y||(_=!0,oe(L))},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var q=g;g=Z;try{return U()}finally{g=q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=g;g=U;try{return Z()}finally{g=q}},i.unstable_scheduleCallback=function(U,Z,q){var W=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?W+q:W):q=W,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,U={id:f++,callback:Z,priorityLevel:U,startTime:q,expirationTime:se,sortIndex:-1},q>W?(U.sortIndex=q,e(h,U),t(c)===null&&U===t(h)&&(S?(x(O),O=-1):S=!0,ae(R,q-W))):(U.sortIndex=se,e(c,U),_||y||(_=!0,oe(L))),U},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(U){var Z=g;return function(){var q=g;g=Z;try{return U.apply(this,arguments)}finally{g=q}}}})(mw)),mw}var TR;function uj(){return TR||(TR=1,pw.exports=cj()),pw.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw,bR;function hj(){return bR||(bR=1,gw=function(e){var t={},n=mx(),r=uj(),s=Object.assign;function o(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,E=1;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),L=Symbol.iterator;function B(d){return d===null||typeof d!="object"?null:(d=L&&d[L]||d["@@iterator"],typeof d=="function"?d:null)}function k(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case f:return"Fragment";case h:return"Portal";case g:return"Profiler";case m:return"StrictMode";case A:return"Suspense";case x:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case _:return(d.displayName||"Context")+".Consumer";case y:return(d._context.displayName||"Context")+".Provider";case S:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case C:return p=d.displayName||null,p!==null?p:k(d.type)||"Memo";case T:p=d._payload,d=d._init;try{return k(d(p))}catch{}}return null}function O(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k(p);case 8:return p===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function D(d){var p=d,E=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(E=p.return),d=p.return;while(d)}return p.tag===3?E:null}function N(d){if(D(d)!==d)throw Error(o(188))}function z(d){var p=d.alternate;if(!p){if(p=D(d),p===null)throw Error(o(188));return p!==d?null:d}for(var E=d,M=p;;){var I=E.return;if(I===null)break;var F=I.alternate;if(F===null){if(M=I.return,M!==null){E=M;continue}break}if(I.child===F.child){for(F=I.child;F;){if(F===E)return N(I),d;if(F===M)return N(I),p;F=F.sibling}throw Error(o(188))}if(E.return!==M.return)E=I,M=F;else{for(var $=!1,fe=I.child;fe;){if(fe===E){$=!0,E=I,M=F;break}if(fe===M){$=!0,M=I,E=F;break}fe=fe.sibling}if(!$){for(fe=F.child;fe;){if(fe===E){$=!0,E=F,M=I;break}if(fe===M){$=!0,M=F,E=I;break}fe=fe.sibling}if(!$)throw Error(o(189))}}if(E.alternate!==M)throw Error(o(190))}if(E.tag!==3)throw Error(o(188));return E.stateNode.current===E?d:p}function ee(d){return d=z(d),d!==null?te(d):null}function te(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=te(d);if(p!==null)return p;d=d.sibling}return null}function ce(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var p=ce(d);if(p!==null)return p}d=d.sibling}return null}var K=Array.isArray,oe=e.getPublicInstance,ae=e.getRootHostContext,U=e.getChildHostContext,Z=e.prepareForCommit,q=e.resetAfterCommit,W=e.createInstance,se=e.appendInitialChild,_e=e.finalizeInitialChildren,De=e.prepareUpdate,ze=e.shouldSetTextContent,de=e.createTextInstance,ge=e.scheduleTimeout,Ue=e.cancelTimeout,We=e.noTimeout,He=e.isPrimaryRenderer,rt=e.supportsMutation,zt=e.supportsPersistence,Q=e.supportsHydration,Oe=e.getInstanceFromNode,Le=e.preparePortalMount,Pe=e.getCurrentEventPriority,Re=e.detachDeletedInstance,Qe=e.supportsMicrotasks,Ve=e.scheduleMicrotask,je=e.supportsTestSelectors,Rt=e.findFiberRoot,Dt=e.getBoundingRect,Y=e.getTextContent,H=e.isHiddenSubtree,ve=e.matchAccessibilityRole,Ce=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,be=e.appendChild,Et=e.appendChildToContainer,et=e.commitTextUpdate,gt=e.commitMount,At=e.commitUpdate,Ke=e.insertBefore,lt=e.insertInContainerBefore,Ot=e.removeChild,ie=e.removeChildFromContainer,xe=e.resetTextContent,tt=e.hideInstance,re=e.hideTextInstance,Ge=e.unhideInstance,Je=e.unhideTextInstance,ot=e.clearContainer,qe=e.cloneInstance,ke=e.createContainerChildSet,ct=e.appendChildToContainerChildSet,Bt=e.finalizeContainerChildren,mn=e.replaceContainerChildren,nn=e.cloneHiddenInstance,Ai=e.cloneHiddenTextInstance,ci=e.canHydrateInstance,Wl=e.canHydrateTextInstance,kr=e.canHydrateSuspenseInstance,Xl=e.isSuspenseInstancePending,Xs=e.isSuspenseInstanceFallback,Oa=e.registerSuspenseInstanceRetry,Ur=e.getNextHydratableSibling,jl=e.getFirstHydratableChild,Yl=e.getFirstHydratableChildWithinContainer,Zh=e.getFirstHydratableChildWithinSuspenseInstance,qh=e.hydrateInstance,Ao=e.hydrateTextInstance,Qh=e.hydrateSuspenseInstance,$h=e.getNextHydratableInstanceAfterSuspenseInstance,ef=e.commitHydratedContainer,tf=e.commitHydratedSuspenseInstance,nf=e.clearSuspenseBoundary,X=e.clearSuspenseBoundaryFromContainer,me=e.shouldDeleteUnhydratedTailInstances,Se=e.didNotMatchHydratedContainerTextInstance,Me=e.didNotMatchHydratedTextInstance,ue;function Ze(d){if(ue===void 0)try{throw Error()}catch(E){var p=E.stack.trim().match(/\n( *(at )?)/);ue=p&&p[1]||""}return`
`+ue+d}var at=!1;function yt(d,p){if(!d||at)return"";at=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(nt){var M=nt}Reflect.construct(d,[],p)}else{try{p.call()}catch(nt){M=nt}d.call(p.prototype)}else{try{throw Error()}catch(nt){M=nt}d()}}catch(nt){if(nt&&M&&typeof nt.stack=="string"){for(var I=nt.stack.split(`
`),F=M.stack.split(`
`),$=I.length-1,fe=F.length-1;1<=$&&0<=fe&&I[$]!==F[fe];)fe--;for(;1<=$&&0<=fe;$--,fe--)if(I[$]!==F[fe]){if($!==1||fe!==1)do if($--,fe--,0>fe||I[$]!==F[fe]){var Ie=`
`+I[$].replace(" at new "," at ");return d.displayName&&Ie.includes("<anonymous>")&&(Ie=Ie.replace("<anonymous>",d.displayName)),Ie}while(1<=$&&0<=fe);break}}}finally{at=!1,Error.prepareStackTrace=E}return(d=d?d.displayName||d.name:"")?Ze(d):""}var mt=Object.prototype.hasOwnProperty,kt=[],Nt=-1;function xt(d){return{current:d}}function dt(d){0>Nt||(d.current=kt[Nt],kt[Nt]=null,Nt--)}function Ft(d,p){Nt++,kt[Nt]=d.current,d.current=p}var rn={},$t=xt(rn),en=xt(!1),It=rn;function _n(d,p){var E=d.type.contextTypes;if(!E)return rn;var M=d.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===p)return M.__reactInternalMemoizedMaskedChildContext;var I={},F;for(F in E)I[F]=p[F];return M&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=I),I}function Gt(d){return d=d.childContextTypes,d!=null}function ni(){dt(en),dt($t)}function es(d,p,E){if($t.current!==rn)throw Error(o(168));Ft($t,p),Ft(en,E)}function qi(d,p,E){var M=d.stateNode;if(p=p.childContextTypes,typeof M.getChildContext!="function")return E;M=M.getChildContext();for(var I in M)if(!(I in p))throw Error(o(108,O(d)||"Unknown",I));return s({},E,M)}function js(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||rn,It=$t.current,Ft($t,d),Ft(en,en.current),!0}function Nn(d,p,E){var M=d.stateNode;if(!M)throw Error(o(169));E?(d=qi(d,p,It),M.__reactInternalMemoizedMergedChildContext=d,dt(en),dt($t),Ft($t,d)):dt(en),Ft(en,E)}var Xn=Math.clz32?Math.clz32:$i,Qi=Math.log,ui=Math.LN2;function $i(d){return d>>>=0,d===0?32:31-(Qi(d)/ui|0)|0}var Ys=64,an=4194304;function Kl(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function nu(d,p){var E=d.pendingLanes;if(E===0)return 0;var M=0,I=d.suspendedLanes,F=d.pingedLanes,$=E&268435455;if($!==0){var fe=$&~I;fe!==0?M=Kl(fe):(F&=$,F!==0&&(M=Kl(F)))}else $=E&~I,$!==0?M=Kl($):F!==0&&(M=Kl(F));if(M===0)return 0;if(p!==0&&p!==M&&(p&I)===0&&(I=M&-M,F=p&-p,I>=F||I===16&&(F&4194240)!==0))return p;if((M&4)!==0&&(M|=E&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=M;0<p;)E=31-Xn(p),I=1<<E,M|=d[E],p&=~I;return M}function kp(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function C0(d,p){for(var E=d.suspendedLanes,M=d.pingedLanes,I=d.expirationTimes,F=d.pendingLanes;0<F;){var $=31-Xn(F),fe=1<<$,Ie=I[$];Ie===-1?((fe&E)===0||(fe&M)!==0)&&(I[$]=kp(fe,p)):Ie<=p&&(d.expiredLanes|=fe),F&=~fe}}function rf(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function sf(d){for(var p=[],E=0;31>E;E++)p.push(d);return p}function ka(d,p,E){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-Xn(p),d[p]=E}function of(d,p){var E=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var M=d.eventTimes;for(d=d.expirationTimes;0<E;){var I=31-Xn(E),F=1<<I;p[I]=0,M[I]=-1,d[I]=-1,E&=~F}}function Ks(d,p){var E=d.entangledLanes|=p;for(d=d.entanglements;E;){var M=31-Xn(E),I=1<<M;I&p|d[M]&p&&(d[M]|=p),E&=~I}}var un=0;function wo(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Ua=r.unstable_scheduleCallback,Jl=r.unstable_cancelCallback,la=r.unstable_shouldYield,ME=r.unstable_requestPaint,wi=r.unstable_now,za=r.unstable_ImmediatePriority,CE=r.unstable_UserBlockingPriority,af=r.unstable_NormalPriority,lf=r.unstable_IdlePriority,iu=null,Js=null;function ru(d){if(Js&&typeof Js.onCommitFiberRoot=="function")try{Js.onCommitFiberRoot(iu,d,void 0,(d.current.flags&128)===128)}catch{}}function su(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var cr=typeof Object.is=="function"?Object.is:su,ts=null,cf=!1,Up=!1;function uf(d){ts===null?ts=[d]:ts.push(d)}function hf(d){cf=!0,uf(d)}function ns(){if(!Up&&ts!==null){Up=!0;var d=0,p=un;try{var E=ts;for(un=1;d<E.length;d++){var M=E[d];do M=M(!0);while(M!==null)}ts=null,cf=!1}catch(I){throw ts!==null&&(ts=ts.slice(d+1)),Ua(za,ns),I}finally{un=p,Up=!1}}return null}var T0=a.ReactCurrentBatchConfig;function Ss(d,p){if(cr(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var E=Object.keys(d),M=Object.keys(p);if(E.length!==M.length)return!1;for(M=0;M<E.length;M++){var I=E[M];if(!mt.call(p,I)||!cr(d[I],p[I]))return!1}return!0}function zp(d){switch(d.tag){case 5:return Ze(d.type);case 16:return Ze("Lazy");case 13:return Ze("Suspense");case 19:return Ze("SuspenseList");case 0:case 2:case 15:return d=yt(d.type,!1),d;case 11:return d=yt(d.type.render,!1),d;case 1:return d=yt(d.type,!0),d;default:return""}}function wr(d,p){if(d&&d.defaultProps){p=s({},p),d=d.defaultProps;for(var E in d)p[E]===void 0&&(p[E]=d[E]);return p}return p}var ou=xt(null),Ga=null,So=null,ff=null;function ur(){ff=So=Ga=null}function Ha(d,p,E){He?(Ft(ou,p._currentValue),p._currentValue=E):(Ft(ou,p._currentValue2),p._currentValue2=E)}function au(d){var p=ou.current;dt(ou),He?d._currentValue=p:d._currentValue2=p}function Va(d,p,E){for(;d!==null;){var M=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,M!==null&&(M.childLanes|=p)):M!==null&&(M.childLanes&p)!==p&&(M.childLanes|=p),d===E)break;d=d.return}}function Zl(d,p){Ga=d,ff=So=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&p)!==0&&(Bi=!0),d.firstContext=null)}function Sr(d){var p=He?d._currentValue:d._currentValue2;if(ff!==d)if(d={context:d,memoizedValue:p,next:null},So===null){if(Ga===null)throw Error(o(308));So=d,Ga.dependencies={lanes:0,firstContext:d}}else So=So.next=d;return p}var is=null,rs=!1;function ql(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gp(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Mo(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function ca(d,p){var E=d.updateQueue;E!==null&&(E=E.shared,fi!==null&&(d.mode&1)!==0&&(sn&2)===0?(d=E.interleaved,d===null?(p.next=p,is===null?is=[E]:is.push(E)):(p.next=d.next,d.next=p),E.interleaved=p):(d=E.pending,d===null?p.next=p:(p.next=d.next,d.next=p),E.pending=p))}function df(d,p,E){if(p=p.updateQueue,p!==null&&(p=p.shared,(E&4194240)!==0)){var M=p.lanes;M&=d.pendingLanes,E|=M,p.lanes=E,Ks(d,E)}}function pf(d,p){var E=d.updateQueue,M=d.alternate;if(M!==null&&(M=M.updateQueue,E===M)){var I=null,F=null;if(E=E.firstBaseUpdate,E!==null){do{var $={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};F===null?I=F=$:F=F.next=$,E=E.next}while(E!==null);F===null?I=F=p:F=F.next=p}else I=F=p;E={baseState:M.baseState,firstBaseUpdate:I,lastBaseUpdate:F,shared:M.shared,effects:M.effects},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=p:d.next=p,E.lastBaseUpdate=p}function mf(d,p,E,M){var I=d.updateQueue;rs=!1;var F=I.firstBaseUpdate,$=I.lastBaseUpdate,fe=I.shared.pending;if(fe!==null){I.shared.pending=null;var Ie=fe,nt=Ie.next;Ie.next=null,$===null?F=nt:$.next=nt,$=Ie;var _t=d.alternate;_t!==null&&(_t=_t.updateQueue,fe=_t.lastBaseUpdate,fe!==$&&(fe===null?_t.firstBaseUpdate=nt:fe.next=nt,_t.lastBaseUpdate=Ie))}if(F!==null){var Zt=I.baseState;$=0,_t=nt=Ie=null,fe=F;do{var Ut=fe.lane,ln=fe.eventTime;if((M&Ut)===Ut){_t!==null&&(_t=_t.next={eventTime:ln,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var pt=d,Vi=fe;switch(Ut=p,ln=E,Vi.tag){case 1:if(pt=Vi.payload,typeof pt=="function"){Zt=pt.call(ln,Zt,Ut);break e}Zt=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=Vi.payload,Ut=typeof pt=="function"?pt.call(ln,Zt,Ut):pt,Ut==null)break e;Zt=s({},Zt,Ut);break e;case 2:rs=!0}}fe.callback!==null&&fe.lane!==0&&(d.flags|=64,Ut=I.effects,Ut===null?I.effects=[fe]:Ut.push(fe))}else ln={eventTime:ln,lane:Ut,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},_t===null?(nt=_t=ln,Ie=Zt):_t=_t.next=ln,$|=Ut;if(fe=fe.next,fe===null){if(fe=I.shared.pending,fe===null)break;Ut=fe,fe=Ut.next,Ut.next=null,I.lastBaseUpdate=Ut,I.shared.pending=null}}while(!0);if(_t===null&&(Ie=Zt),I.baseState=Ie,I.firstBaseUpdate=nt,I.lastBaseUpdate=_t,p=I.shared.interleaved,p!==null){I=p;do $|=I.lane,I=I.next;while(I!==p)}else F===null&&(I.shared.lanes=0);$s|=$,d.lanes=$,d.memoizedState=Zt}}function b0(d,p,E){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var M=d[p],I=M.callback;if(I!==null){if(M.callback=null,M=E,typeof I!="function")throw Error(o(191,I));I.call(M)}}}var R0=new n.Component().refs;function Hp(d,p,E,M){p=d.memoizedState,E=E(M,p),E=E==null?p:s({},p,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}var gf={isMounted:function(d){return(d=d._reactInternals)?D(d)===d:!1},enqueueSetState:function(d,p,E){d=d._reactInternals;var M=Mn(),I=Ps(d),F=Mo(M,I);F.payload=p,E!=null&&(F.callback=E),ca(d,F),p=nr(d,I,M),p!==null&&df(p,d,I)},enqueueReplaceState:function(d,p,E){d=d._reactInternals;var M=Mn(),I=Ps(d),F=Mo(M,I);F.tag=1,F.payload=p,E!=null&&(F.callback=E),ca(d,F),p=nr(d,I,M),p!==null&&df(p,d,I)},enqueueForceUpdate:function(d,p){d=d._reactInternals;var E=Mn(),M=Ps(d),I=Mo(E,M);I.tag=2,p!=null&&(I.callback=p),ca(d,I),p=nr(d,M,E),p!==null&&df(p,d,M)}};function Vp(d,p,E,M,I,F,$){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(M,F,$):p.prototype&&p.prototype.isPureReactComponent?!Ss(E,M)||!Ss(I,F):!0}function I0(d,p,E){var M=!1,I=rn,F=p.contextType;return typeof F=="object"&&F!==null?F=Sr(F):(I=Gt(p)?It:$t.current,M=p.contextTypes,F=(M=M!=null)?_n(d,I):rn),p=new p(E,F),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=gf,d.stateNode=p,p._reactInternals=d,M&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=I,d.__reactInternalMemoizedMaskedChildContext=F),p}function P0(d,p,E,M){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(E,M),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(E,M),p.state!==d&&gf.enqueueReplaceState(p,p.state,null)}function Wp(d,p,E,M){var I=d.stateNode;I.props=E,I.state=d.memoizedState,I.refs=R0,ql(d);var F=p.contextType;typeof F=="object"&&F!==null?I.context=Sr(F):(F=Gt(p)?It:$t.current,I.context=_n(d,F)),I.state=d.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(Hp(d,p,F,E),I.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(p=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),p!==I.state&&gf.enqueueReplaceState(I,I.state,null),mf(d,E,I,M),I.state=d.memoizedState),typeof I.componentDidMount=="function"&&(d.flags|=4194308)}var Ql=[],ua=0,vf=null,yf=0,ss=[],zr=0,Wa=null,Co=1,To="";function Xa(d,p){Ql[ua++]=yf,Ql[ua++]=vf,vf=d,yf=p}function L0(d,p,E){ss[zr++]=Co,ss[zr++]=To,ss[zr++]=Wa,Wa=d;var M=Co;d=To;var I=32-Xn(M)-1;M&=~(1<<I),E+=1;var F=32-Xn(p)+I;if(30<F){var $=I-I%5;F=(M&(1<<$)-1).toString(32),M>>=$,I-=$,Co=1<<32-Xn(p)+I|E<<I|M,To=F+d}else Co=1<<F|E<<I|M,To=d}function Xp(d){d.return!==null&&(Xa(d,1),L0(d,1,0))}function jp(d){for(;d===vf;)vf=Ql[--ua],Ql[ua]=null,yf=Ql[--ua],Ql[ua]=null;for(;d===Wa;)Wa=ss[--zr],ss[zr]=null,To=ss[--zr],ss[zr]=null,Co=ss[--zr],ss[zr]=null}var hr=null,ki=null,Kn=!1,$l=!1,os=null;function Yp(d,p){var E=Yr(5,null,null,0);E.elementType="DELETED",E.stateNode=p,E.return=d,p=d.deletions,p===null?(d.deletions=[E],d.flags|=16):p.push(E)}function Kp(d,p){switch(d.tag){case 5:return p=ci(p,d.type,d.pendingProps),p!==null?(d.stateNode=p,hr=d,ki=jl(p),!0):!1;case 6:return p=Wl(p,d.pendingProps),p!==null?(d.stateNode=p,hr=d,ki=null,!0):!1;case 13:if(p=kr(p),p!==null){var E=Wa!==null?{id:Co,overflow:To}:null;return d.memoizedState={dehydrated:p,treeContext:E,retryLane:1073741824},E=Yr(18,null,null,0),E.stateNode=p,E.return=d,d.child=E,hr=d,ki=null,!0}return!1;default:return!1}}function _f(d){return(d.mode&1)!==0&&(d.flags&128)===0}function ha(d){if(Kn){var p=ki;if(p){var E=p;if(!Kp(d,p)){if(_f(d))throw Error(o(418));p=Ur(E);var M=hr;p&&Kp(d,p)?Yp(M,E):(d.flags=d.flags&-4097|2,Kn=!1,hr=d)}}else{if(_f(d))throw Error(o(418));d.flags=d.flags&-4097|2,Kn=!1,hr=d}}}function D0(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;hr=d}function lu(d){if(!Q||d!==hr)return!1;if(!Kn)return D0(d),Kn=!0,!1;if(d.tag!==3&&(d.tag!==5||me(d.type)&&!ze(d.type,d.memoizedProps))){var p=ki;if(p){if(_f(d)){for(d=ki;d;)d=Ur(d);throw Error(o(418))}for(;p;)Yp(d,p),p=Ur(p)}}if(D0(d),d.tag===13){if(!Q)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));ki=$h(d)}else ki=hr?Ur(d.stateNode):null;return!0}function ec(){Q&&(ki=hr=null,$l=Kn=!1)}function xf(d){os===null?os=[d]:os.push(d)}function tc(d,p,E){if(d=E.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(o(309));var M=E.stateNode}if(!M)throw Error(o(147,d));var I=M,F=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===F?p.ref:(p=function($){var fe=I.refs;fe===R0&&(fe=I.refs={}),$===null?delete fe[F]:fe[F]=$},p._stringRef=F,p)}if(typeof d!="string")throw Error(o(284));if(!E._owner)throw Error(o(290,d))}return d}function fa(d,p){throw d=Object.prototype.toString.call(p),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function nc(d){var p=d._init;return p(d._payload)}function B0(d){function p(Ae,pe){if(d){var Te=Ae.deletions;Te===null?(Ae.deletions=[pe],Ae.flags|=16):Te.push(pe)}}function E(Ae,pe){if(!d)return null;for(;pe!==null;)p(Ae,pe),pe=pe.sibling;return null}function M(Ae,pe){for(Ae=new Map;pe!==null;)pe.key!==null?Ae.set(pe.key,pe):Ae.set(pe.index,pe),pe=pe.sibling;return Ae}function I(Ae,pe){return Ae=Go(Ae,pe),Ae.index=0,Ae.sibling=null,Ae}function F(Ae,pe,Te){return Ae.index=Te,d?(Te=Ae.alternate,Te!==null?(Te=Te.index,Te<pe?(Ae.flags|=2,pe):Te):(Ae.flags|=2,pe)):(Ae.flags|=1048576,pe)}function $(Ae){return d&&Ae.alternate===null&&(Ae.flags|=2),Ae}function fe(Ae,pe,Te,ut){return pe===null||pe.tag!==6?(pe=Yf(Te,Ae.mode,ut),pe.return=Ae,pe):(pe=I(pe,Te),pe.return=Ae,pe)}function Ie(Ae,pe,Te,ut){var Pt=Te.type;return Pt===f?_t(Ae,pe,Te.props.children,ut,Te.key):pe!==null&&(pe.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===T&&nc(Pt)===pe.type)?(ut=I(pe,Te.props),ut.ref=tc(Ae,pe,Te),ut.return=Ae,ut):(ut=jf(Te.type,Te.key,Te.props,null,Ae.mode,ut),ut.ref=tc(Ae,pe,Te),ut.return=Ae,ut)}function nt(Ae,pe,Te,ut){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Te.containerInfo||pe.stateNode.implementation!==Te.implementation?(pe=Kf(Te,Ae.mode,ut),pe.return=Ae,pe):(pe=I(pe,Te.children||[]),pe.return=Ae,pe)}function _t(Ae,pe,Te,ut,Pt){return pe===null||pe.tag!==7?(pe=dl(Te,Ae.mode,ut,Pt),pe.return=Ae,pe):(pe=I(pe,Te),pe.return=Ae,pe)}function Zt(Ae,pe,Te){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return pe=Yf(""+pe,Ae.mode,Te),pe.return=Ae,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case c:return Te=jf(pe.type,pe.key,pe.props,null,Ae.mode,Te),Te.ref=tc(Ae,null,pe),Te.return=Ae,Te;case h:return pe=Kf(pe,Ae.mode,Te),pe.return=Ae,pe;case T:var ut=pe._init;return Zt(Ae,ut(pe._payload),Te)}if(K(pe)||B(pe))return pe=dl(pe,Ae.mode,Te,null),pe.return=Ae,pe;fa(Ae,pe)}return null}function Ut(Ae,pe,Te,ut){var Pt=pe!==null?pe.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Pt!==null?null:fe(Ae,pe,""+Te,ut);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case c:return Te.key===Pt?Ie(Ae,pe,Te,ut):null;case h:return Te.key===Pt?nt(Ae,pe,Te,ut):null;case T:return Pt=Te._init,Ut(Ae,pe,Pt(Te._payload),ut)}if(K(Te)||B(Te))return Pt!==null?null:_t(Ae,pe,Te,ut,null);fa(Ae,Te)}return null}function ln(Ae,pe,Te,ut,Pt){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Ae=Ae.get(Te)||null,fe(pe,Ae,""+ut,Pt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case c:return Ae=Ae.get(ut.key===null?Te:ut.key)||null,Ie(pe,Ae,ut,Pt);case h:return Ae=Ae.get(ut.key===null?Te:ut.key)||null,nt(pe,Ae,ut,Pt);case T:var tn=ut._init;return ln(Ae,pe,Te,tn(ut._payload),Pt)}if(K(ut)||B(ut))return Ae=Ae.get(Te)||null,_t(pe,Ae,ut,Pt,null);fa(pe,ut)}return null}function pt(Ae,pe,Te,ut){for(var Pt=null,tn=null,qt=pe,xn=pe=0,vi=null;qt!==null&&xn<Te.length;xn++){qt.index>xn?(vi=qt,qt=null):vi=qt.sibling;var yn=Ut(Ae,qt,Te[xn],ut);if(yn===null){qt===null&&(qt=vi);break}d&&qt&&yn.alternate===null&&p(Ae,qt),pe=F(yn,pe,xn),tn===null?Pt=yn:tn.sibling=yn,tn=yn,qt=vi}if(xn===Te.length)return E(Ae,qt),Kn&&Xa(Ae,xn),Pt;if(qt===null){for(;xn<Te.length;xn++)qt=Zt(Ae,Te[xn],ut),qt!==null&&(pe=F(qt,pe,xn),tn===null?Pt=qt:tn.sibling=qt,tn=qt);return Kn&&Xa(Ae,xn),Pt}for(qt=M(Ae,qt);xn<Te.length;xn++)vi=ln(qt,Ae,xn,Te[xn],ut),vi!==null&&(d&&vi.alternate!==null&&qt.delete(vi.key===null?xn:vi.key),pe=F(vi,pe,xn),tn===null?Pt=vi:tn.sibling=vi,tn=vi);return d&&qt.forEach(function(Ho){return p(Ae,Ho)}),Kn&&Xa(Ae,xn),Pt}function Vi(Ae,pe,Te,ut){var Pt=B(Te);if(typeof Pt!="function")throw Error(o(150));if(Te=Pt.call(Te),Te==null)throw Error(o(151));for(var tn=Pt=null,qt=pe,xn=pe=0,vi=null,yn=Te.next();qt!==null&&!yn.done;xn++,yn=Te.next()){qt.index>xn?(vi=qt,qt=null):vi=qt.sibling;var Ho=Ut(Ae,qt,yn.value,ut);if(Ho===null){qt===null&&(qt=vi);break}d&&qt&&Ho.alternate===null&&p(Ae,qt),pe=F(Ho,pe,xn),tn===null?Pt=Ho:tn.sibling=Ho,tn=Ho,qt=vi}if(yn.done)return E(Ae,qt),Kn&&Xa(Ae,xn),Pt;if(qt===null){for(;!yn.done;xn++,yn=Te.next())yn=Zt(Ae,yn.value,ut),yn!==null&&(pe=F(yn,pe,xn),tn===null?Pt=yn:tn.sibling=yn,tn=yn);return Kn&&Xa(Ae,xn),Pt}for(qt=M(Ae,qt);!yn.done;xn++,yn=Te.next())yn=ln(qt,Ae,xn,yn.value,ut),yn!==null&&(d&&yn.alternate!==null&&qt.delete(yn.key===null?xn:yn.key),pe=F(yn,pe,xn),tn===null?Pt=yn:tn.sibling=yn,tn=yn);return d&&qt.forEach(function(Mm){return p(Ae,Mm)}),Kn&&Xa(Ae,xn),Pt}function Kr(Ae,pe,Te,ut){if(typeof Te=="object"&&Te!==null&&Te.type===f&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case c:e:{for(var Pt=Te.key,tn=pe;tn!==null;){if(tn.key===Pt){if(Pt=Te.type,Pt===f){if(tn.tag===7){E(Ae,tn.sibling),pe=I(tn,Te.props.children),pe.return=Ae,Ae=pe;break e}}else if(tn.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===T&&nc(Pt)===tn.type){E(Ae,tn.sibling),pe=I(tn,Te.props),pe.ref=tc(Ae,tn,Te),pe.return=Ae,Ae=pe;break e}E(Ae,tn);break}else p(Ae,tn);tn=tn.sibling}Te.type===f?(pe=dl(Te.props.children,Ae.mode,ut,Te.key),pe.return=Ae,Ae=pe):(ut=jf(Te.type,Te.key,Te.props,null,Ae.mode,ut),ut.ref=tc(Ae,pe,Te),ut.return=Ae,Ae=ut)}return $(Ae);case h:e:{for(tn=Te.key;pe!==null;){if(pe.key===tn)if(pe.tag===4&&pe.stateNode.containerInfo===Te.containerInfo&&pe.stateNode.implementation===Te.implementation){E(Ae,pe.sibling),pe=I(pe,Te.children||[]),pe.return=Ae,Ae=pe;break e}else{E(Ae,pe);break}else p(Ae,pe);pe=pe.sibling}pe=Kf(Te,Ae.mode,ut),pe.return=Ae,Ae=pe}return $(Ae);case T:return tn=Te._init,Kr(Ae,pe,tn(Te._payload),ut)}if(K(Te))return pt(Ae,pe,Te,ut);if(B(Te))return Vi(Ae,pe,Te,ut);fa(Ae,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,pe!==null&&pe.tag===6?(E(Ae,pe.sibling),pe=I(pe,Te),pe.return=Ae,Ae=pe):(E(Ae,pe),pe=Yf(Te,Ae.mode,ut),pe.return=Ae,Ae=pe),$(Ae)):E(Ae,pe)}return Kr}var bo=B0(!0),N0=B0(!1),ic={},Mr=xt(ic),ja=xt(ic),Ya=xt(ic);function Ms(d){if(d===ic)throw Error(o(174));return d}function Ef(d,p){Ft(Ya,p),Ft(ja,d),Ft(Mr,ic),d=ae(p),dt(Mr),Ft(Mr,d)}function rc(){dt(Mr),dt(ja),dt(Ya)}function F0(d){var p=Ms(Ya.current),E=Ms(Mr.current);p=U(E,d.type,p),E!==p&&(Ft(ja,d),Ft(Mr,p))}function Jp(d){ja.current===d&&(dt(Mr),dt(ja))}var Qn=xt(0);function Af(d){for(var p=d;p!==null;){if(p.tag===13){var E=p.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||Xl(E)||Xs(E)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Gr=[];function Ka(){for(var d=0;d<Gr.length;d++){var p=Gr[d];He?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}Gr.length=0}var cu=a.ReactCurrentDispatcher,Hr=a.ReactCurrentBatchConfig,Ja=0,$n=null,Pi=null,Li=null,wf=!1,Zs=!1,Za=0,uu=0;function Di(){throw Error(o(321))}function Sf(d,p){if(p===null)return!1;for(var E=0;E<p.length&&E<d.length;E++)if(!cr(d[E],p[E]))return!1;return!0}function sc(d,p,E,M,I,F){if(Ja=F,$n=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,cu.current=d===null||d.memoizedState===null?tm:nm,d=E(M,I),Zs){F=0;do{if(Zs=!1,Za=0,25<=F)throw Error(o(301));F+=1,Li=Pi=null,p.updateQueue=null,cu.current=im,d=E(M,I)}while(Zs)}if(cu.current=cc,p=Pi!==null&&Pi.next!==null,Ja=0,Li=Pi=$n=null,wf=!1,p)throw Error(o(300));return d}function da(){var d=Za!==0;return Za=0,d}function Cs(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?$n.memoizedState=Li=d:Li=Li.next=d,Li}function Ts(){if(Pi===null){var d=$n.alternate;d=d!==null?d.memoizedState:null}else d=Pi.next;var p=Li===null?$n.memoizedState:Li.next;if(p!==null)Li=p,Pi=d;else{if(d===null)throw Error(o(310));Pi=d,d={memoizedState:Pi.memoizedState,baseState:Pi.baseState,baseQueue:Pi.baseQueue,queue:Pi.queue,next:null},Li===null?$n.memoizedState=Li=d:Li=Li.next=d}return Li}function qs(d,p){return typeof p=="function"?p(d):p}function hu(d){var p=Ts(),E=p.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=d;var M=Pi,I=M.baseQueue,F=E.pending;if(F!==null){if(I!==null){var $=I.next;I.next=F.next,F.next=$}M.baseQueue=I=F,E.pending=null}if(I!==null){F=I.next,M=M.baseState;var fe=$=null,Ie=null,nt=F;do{var _t=nt.lane;if((Ja&_t)===_t)Ie!==null&&(Ie=Ie.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),M=nt.hasEagerState?nt.eagerState:d(M,nt.action);else{var Zt={lane:_t,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};Ie===null?(fe=Ie=Zt,$=M):Ie=Ie.next=Zt,$n.lanes|=_t,$s|=_t}nt=nt.next}while(nt!==null&&nt!==F);Ie===null?$=M:Ie.next=fe,cr(M,p.memoizedState)||(Bi=!0),p.memoizedState=M,p.baseState=$,p.baseQueue=Ie,E.lastRenderedState=M}if(d=E.interleaved,d!==null){I=d;do F=I.lane,$n.lanes|=F,$s|=F,I=I.next;while(I!==d)}else I===null&&(E.lanes=0);return[p.memoizedState,E.dispatch]}function fu(d){var p=Ts(),E=p.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=d;var M=E.dispatch,I=E.pending,F=p.memoizedState;if(I!==null){E.pending=null;var $=I=I.next;do F=d(F,$.action),$=$.next;while($!==I);cr(F,p.memoizedState)||(Bi=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),E.lastRenderedState=F}return[F,M]}function Zp(){}function qp(d,p){var E=$n,M=Ts(),I=p(),F=!cr(M.memoizedState,I);if(F&&(M.memoizedState=I,Bi=!0),M=M.queue,oc(Ro.bind(null,E,M,d),[d]),M.getSnapshot!==p||F||Li!==null&&Li.memoizedState.tag&1){if(E.flags|=2048,pu(9,$p.bind(null,E,M,I,p),void 0,null),fi===null)throw Error(o(349));(Ja&30)!==0||Qp(E,p,I)}return I}function Qp(d,p,E){d.flags|=16384,d={getSnapshot:p,value:E},p=$n.updateQueue,p===null?(p={lastEffect:null,stores:null},$n.updateQueue=p,p.stores=[d]):(E=p.stores,E===null?p.stores=[d]:E.push(d))}function $p(d,p,E,M){p.value=E,p.getSnapshot=M,Mf(p)&&nr(d,1,-1)}function Ro(d,p,E){return E(function(){Mf(p)&&nr(d,1,-1)})}function Mf(d){var p=d.getSnapshot;d=d.value;try{var E=p();return!cr(d,E)}catch{return!0}}function du(d){var p=Cs();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:d},p.queue=d,d=d.dispatch=TE.bind(null,$n,d),[p.memoizedState,d]}function pu(d,p,E,M){return d={tag:d,create:p,destroy:E,deps:M,next:null},p=$n.updateQueue,p===null?(p={lastEffect:null,stores:null},$n.updateQueue=p,p.lastEffect=d.next=d):(E=p.lastEffect,E===null?p.lastEffect=d.next=d:(M=E.next,E.next=d,d.next=M,p.lastEffect=d)),d}function O0(){return Ts().memoizedState}function pa(d,p,E,M){var I=Cs();$n.flags|=d,I.memoizedState=pu(1|p,E,void 0,M===void 0?null:M)}function Cf(d,p,E,M){var I=Ts();M=M===void 0?null:M;var F=void 0;if(Pi!==null){var $=Pi.memoizedState;if(F=$.destroy,M!==null&&Sf(M,$.deps)){I.memoizedState=pu(p,E,F,M);return}}$n.flags|=d,I.memoizedState=pu(1|p,E,F,M)}function Tf(d,p){return pa(8390656,8,d,p)}function oc(d,p){return Cf(2048,8,d,p)}function Hn(d,p){return Cf(4,2,d,p)}function bf(d,p){return Cf(4,4,d,p)}function mu(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function ac(d,p,E){return E=E!=null?E.concat([d]):null,Cf(4,4,mu.bind(null,p,d),E)}function Rf(){}function If(d,p){var E=Ts();p=p===void 0?null:p;var M=E.memoizedState;return M!==null&&p!==null&&Sf(p,M[1])?M[0]:(E.memoizedState=[d,p],d)}function lc(d,p){var E=Ts();p=p===void 0?null:p;var M=E.memoizedState;return M!==null&&p!==null&&Sf(p,M[1])?M[0]:(d=d(),E.memoizedState=[d,p],d)}function Pf(d,p){var E=un;un=E!==0&&4>E?E:4,d(!0);var M=Hr.transition;Hr.transition={};try{d(!1),p()}finally{un=E,Hr.transition=M}}function qa(){return Ts().memoizedState}function k0(d,p,E){var M=Ps(d);E={lane:M,action:E,hasEagerState:!1,eagerState:null,next:null},U0(d)?em(p,E):(gu(d,p,E),E=Mn(),d=nr(d,M,E),d!==null&&vu(d,p,M))}function TE(d,p,E){var M=Ps(d),I={lane:M,action:E,hasEagerState:!1,eagerState:null,next:null};if(U0(d))em(p,I);else{gu(d,p,I);var F=d.alternate;if(d.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var $=p.lastRenderedState,fe=F($,E);if(I.hasEagerState=!0,I.eagerState=fe,cr(fe,$))return}catch{}finally{}E=Mn(),d=nr(d,M,E),d!==null&&vu(d,p,M)}}function U0(d){var p=d.alternate;return d===$n||p!==null&&p===$n}function em(d,p){Zs=wf=!0;var E=d.pending;E===null?p.next=p:(p.next=E.next,E.next=p),d.pending=p}function gu(d,p,E){fi!==null&&(d.mode&1)!==0&&(sn&2)===0?(d=p.interleaved,d===null?(E.next=E,is===null?is=[p]:is.push(p)):(E.next=d.next,d.next=E),p.interleaved=E):(d=p.pending,d===null?E.next=E:(E.next=d.next,d.next=E),p.pending=E)}function vu(d,p,E){if((E&4194240)!==0){var M=p.lanes;M&=d.pendingLanes,E|=M,p.lanes=E,Ks(d,E)}}var cc={readContext:Sr,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},tm={readContext:Sr,useCallback:function(d,p){return Cs().memoizedState=[d,p===void 0?null:p],d},useContext:Sr,useEffect:Tf,useImperativeHandle:function(d,p,E){return E=E!=null?E.concat([d]):null,pa(4194308,4,mu.bind(null,p,d),E)},useLayoutEffect:function(d,p){return pa(4194308,4,d,p)},useInsertionEffect:function(d,p){return pa(4,2,d,p)},useMemo:function(d,p){var E=Cs();return p=p===void 0?null:p,d=d(),E.memoizedState=[d,p],d},useReducer:function(d,p,E){var M=Cs();return p=E!==void 0?E(p):p,M.memoizedState=M.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},M.queue=d,d=d.dispatch=k0.bind(null,$n,d),[M.memoizedState,d]},useRef:function(d){var p=Cs();return d={current:d},p.memoizedState=d},useState:du,useDebugValue:Rf,useDeferredValue:function(d){var p=du(d),E=p[0],M=p[1];return Tf(function(){var I=Hr.transition;Hr.transition={};try{M(d)}finally{Hr.transition=I}},[d]),E},useTransition:function(){var d=du(!1),p=d[0];return d=Pf.bind(null,d[1]),Cs().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,E){var M=$n,I=Cs();if(Kn){if(E===void 0)throw Error(o(407));E=E()}else{if(E=p(),fi===null)throw Error(o(349));(Ja&30)!==0||Qp(M,p,E)}I.memoizedState=E;var F={value:E,getSnapshot:p};return I.queue=F,Tf(Ro.bind(null,M,F,d),[d]),M.flags|=2048,pu(9,$p.bind(null,M,F,E,p),void 0,null),E},useId:function(){var d=Cs(),p=fi.identifierPrefix;if(Kn){var E=To,M=Co;E=(M&~(1<<32-Xn(M)-1)).toString(32)+E,p=":"+p+"R"+E,E=Za++,0<E&&(p+="H"+E.toString(32)),p+=":"}else E=uu++,p=":"+p+"r"+E.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},nm={readContext:Sr,useCallback:If,useContext:Sr,useEffect:oc,useImperativeHandle:ac,useInsertionEffect:Hn,useLayoutEffect:bf,useMemo:lc,useReducer:hu,useRef:O0,useState:function(){return hu(qs)},useDebugValue:Rf,useDeferredValue:function(d){var p=hu(qs),E=p[0],M=p[1];return oc(function(){var I=Hr.transition;Hr.transition={};try{M(d)}finally{Hr.transition=I}},[d]),E},useTransition:function(){var d=hu(qs)[0],p=Ts().memoizedState;return[d,p]},useMutableSource:Zp,useSyncExternalStore:qp,useId:qa,unstable_isNewReconciler:!1},im={readContext:Sr,useCallback:If,useContext:Sr,useEffect:oc,useImperativeHandle:ac,useInsertionEffect:Hn,useLayoutEffect:bf,useMemo:lc,useReducer:fu,useRef:O0,useState:function(){return fu(qs)},useDebugValue:Rf,useDeferredValue:function(d){var p=fu(qs),E=p[0],M=p[1];return oc(function(){var I=Hr.transition;Hr.transition={};try{M(d)}finally{Hr.transition=I}},[d]),E},useTransition:function(){var d=fu(qs)[0],p=Ts().memoizedState;return[d,p]},useMutableSource:Zp,useSyncExternalStore:qp,useId:qa,unstable_isNewReconciler:!1};function rm(d,p){try{var E="",M=p;do E+=zp(M),M=M.return;while(M);var I=E}catch(F){I=`
Error generating stack: `+F.message+`
`+F.stack}return{value:d,source:p,stack:I}}function Lf(d,p){try{console.error(p.value)}catch(E){setTimeout(function(){throw E})}}var bE=typeof WeakMap=="function"?WeakMap:Map;function z0(d,p,E){E=Mo(-1,E),E.tag=3,E.payload={element:null};var M=p.value;return E.callback=function(){mc||(mc=!0,Yn=M),Lf(d,p)},E}function Df(d,p,E){E=Mo(-1,E),E.tag=3;var M=d.type.getDerivedStateFromError;if(typeof M=="function"){var I=p.value;E.payload=function(){return M(I)},E.callback=function(){Lf(d,p)}}var F=d.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(E.callback=function(){Lf(d,p),typeof M!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var $=p.stack;this.componentDidCatch(p.value,{componentStack:$!==null?$:""})}),E}function Io(d,p,E){var M=d.pingCache;if(M===null){M=d.pingCache=new bE;var I=new Set;M.set(p,I)}else I=M.get(p),I===void 0&&(I=new Set,M.set(p,I));I.has(E)||(I.add(E),d=Am.bind(null,d,p,E),p.then(d,d))}function sm(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function Qa(d,p,E,M,I){return(d.mode&1)===0?(d===p?d.flags|=65536:(d.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(p=Mo(-1,1),p.tag=2,ca(E,p))),E.lanes|=1),d):(d.flags|=65536,d.lanes=I,d)}function Si(d){d.flags|=4}function uc(d,p){if(d!==null&&d.child===p.child)return!0;if((p.flags&16)!==0)return!1;for(d=p.child;d!==null;){if((d.flags&12854)!==0||(d.subtreeFlags&12854)!==0)return!1;d=d.sibling}return!0}var Vr,$a,Bf,Nf;if(rt)Vr=function(d,p){for(var E=p.child;E!==null;){if(E.tag===5||E.tag===6)se(d,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},$a=function(){},Bf=function(d,p,E,M,I){if(d=d.memoizedProps,d!==M){var F=p.stateNode,$=Ms(Mr.current);E=De(F,E,d,M,I,$),(p.updateQueue=E)&&Si(p)}},Nf=function(d,p,E,M){E!==M&&Si(p)};else if(zt){Vr=function(d,p,E,M){for(var I=p.child;I!==null;){if(I.tag===5){var F=I.stateNode;E&&M&&(F=nn(F,I.type,I.memoizedProps,I)),se(d,F)}else if(I.tag===6)F=I.stateNode,E&&M&&(F=Ai(F,I.memoizedProps,I)),se(d,F);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)F=I.child,F!==null&&(F.return=I),Vr(d,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var ma=function(d,p,E,M){for(var I=p.child;I!==null;){if(I.tag===5){var F=I.stateNode;E&&M&&(F=nn(F,I.type,I.memoizedProps,I)),ct(d,F)}else if(I.tag===6)F=I.stateNode,E&&M&&(F=Ai(F,I.memoizedProps,I)),ct(d,F);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)F=I.child,F!==null&&(F.return=I),ma(d,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};$a=function(d,p){var E=p.stateNode;if(!uc(d,p)){d=E.containerInfo;var M=ke(d);ma(M,p,!1,!1),E.pendingChildren=M,Si(p),Bt(d,M)}},Bf=function(d,p,E,M,I){var F=d.stateNode,$=d.memoizedProps;if((d=uc(d,p))&&$===M)p.stateNode=F;else{var fe=p.stateNode,Ie=Ms(Mr.current),nt=null;$!==M&&(nt=De(fe,E,$,M,I,Ie)),d&&nt===null?p.stateNode=F:(F=qe(F,nt,E,$,M,p,d,fe),_e(F,E,M,I,Ie)&&Si(p),p.stateNode=F,d?Si(p):Vr(F,p,!1,!1))}},Nf=function(d,p,E,M){E!==M?(d=Ms(Ya.current),E=Ms(Mr.current),p.stateNode=de(M,d,E,p),Si(p)):p.stateNode=d.stateNode}}else $a=function(){},Bf=function(){},Nf=function(){};function Po(d,p){if(!Kn)switch(d.tailMode){case"hidden":p=d.tail;for(var E=null;p!==null;)p.alternate!==null&&(E=p),p=p.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var M=null;E!==null;)E.alternate!==null&&(M=E),E=E.sibling;M===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:M.sibling=null}}function hi(d){var p=d.alternate!==null&&d.alternate.child===d.child,E=0,M=0;if(p)for(var I=d.child;I!==null;)E|=I.lanes|I.childLanes,M|=I.subtreeFlags&14680064,M|=I.flags&14680064,I.return=d,I=I.sibling;else for(I=d.child;I!==null;)E|=I.lanes|I.childLanes,M|=I.subtreeFlags,M|=I.flags,I.return=d,I=I.sibling;return d.subtreeFlags|=M,d.childLanes=E,p}function Ff(d,p,E){var M=p.pendingProps;switch(jp(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(p),null;case 1:return Gt(p.type)&&ni(),hi(p),null;case 3:return M=p.stateNode,rc(),dt(en),dt($t),Ka(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(d===null||d.child===null)&&(lu(p)?Si(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,os!==null&&(Iu(os),os=null))),$a(d,p),hi(p),null;case 5:Jp(p),E=Ms(Ya.current);var I=p.type;if(d!==null&&p.stateNode!=null)Bf(d,p,I,M,E),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!M){if(p.stateNode===null)throw Error(o(166));return hi(p),null}if(d=Ms(Mr.current),lu(p)){if(!Q)throw Error(o(175));d=qh(p.stateNode,p.type,p.memoizedProps,E,d,p,!$l),p.updateQueue=d,d!==null&&Si(p)}else{var F=W(I,M,E,d,p);Vr(F,p,!1,!1),p.stateNode=F,_e(F,I,M,E,d)&&Si(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return hi(p),null;case 6:if(d&&p.stateNode!=null)Nf(d,p,d.memoizedProps,M);else{if(typeof M!="string"&&p.stateNode===null)throw Error(o(166));if(d=Ms(Ya.current),E=Ms(Mr.current),lu(p)){if(!Q)throw Error(o(176));if(d=p.stateNode,M=p.memoizedProps,(E=Ao(d,M,p,!$l))&&(I=hr,I!==null))switch(F=(I.mode&1)!==0,I.tag){case 3:Se(I.stateNode.containerInfo,d,M,F);break;case 5:Me(I.type,I.memoizedProps,I.stateNode,d,M,F)}E&&Si(p)}else p.stateNode=de(M,d,E,p)}return hi(p),null;case 13:if(dt(Qn),M=p.memoizedState,Kn&&ki!==null&&(p.mode&1)!==0&&(p.flags&128)===0){for(d=ki;d;)d=Ur(d);return ec(),p.flags|=98560,p}if(M!==null&&M.dehydrated!==null){if(M=lu(p),d===null){if(!M)throw Error(o(318));if(!Q)throw Error(o(344));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Qh(d,p)}else ec(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;return hi(p),null}return os!==null&&(Iu(os),os=null),(p.flags&128)!==0?(p.lanes=E,p):(M=M!==null,E=!1,d===null?lu(p):E=d.memoizedState!==null,M&&!E&&(p.child.flags|=8192,(p.mode&1)!==0&&(d===null||(Qn.current&1)!==0?ri===0&&(ri=3):Vf())),p.updateQueue!==null&&(p.flags|=4),hi(p),null);case 4:return rc(),$a(d,p),d===null&&Le(p.stateNode.containerInfo),hi(p),null;case 10:return au(p.type._context),hi(p),null;case 17:return Gt(p.type)&&ni(),hi(p),null;case 19:if(dt(Qn),I=p.memoizedState,I===null)return hi(p),null;if(M=(p.flags&128)!==0,F=I.rendering,F===null)if(M)Po(I,!1);else{if(ri!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(F=Af(d),F!==null){for(p.flags|=128,Po(I,!1),d=F.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),p.subtreeFlags=0,d=E,M=p.child;M!==null;)E=M,I=d,E.flags&=14680066,F=E.alternate,F===null?(E.childLanes=0,E.lanes=I,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=F.childLanes,E.lanes=F.lanes,E.child=F.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=F.memoizedProps,E.memoizedState=F.memoizedState,E.updateQueue=F.updateQueue,E.type=F.type,I=F.dependencies,E.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),M=M.sibling;return Ft(Qn,Qn.current&1|2),p.child}d=d.sibling}I.tail!==null&&wi()>ya&&(p.flags|=128,M=!0,Po(I,!1),p.lanes=4194304)}else{if(!M)if(d=Af(F),d!==null){if(p.flags|=128,M=!0,d=d.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),Po(I,!0),I.tail===null&&I.tailMode==="hidden"&&!F.alternate&&!Kn)return hi(p),null}else 2*wi()-I.renderingStartTime>ya&&E!==1073741824&&(p.flags|=128,M=!0,Po(I,!1),p.lanes=4194304);I.isBackwards?(F.sibling=p.child,p.child=F):(d=I.last,d!==null?d.sibling=F:p.child=F,I.last=F)}return I.tail!==null?(p=I.tail,I.rendering=p,I.tail=p.sibling,I.renderingStartTime=wi(),p.sibling=null,d=Qn.current,Ft(Qn,M?d&1|2:d&1),p):(hi(p),null);case 22:case 23:return Pu(),M=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==M&&(p.flags|=8192),M&&(p.mode&1)!==0?(tr&1073741824)!==0&&(hi(p),rt&&p.subtreeFlags&6&&(p.flags|=8192)):hi(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var om=a.ReactCurrentOwner,Bi=!1;function ii(d,p,E,M){p.child=d===null?N0(p,null,E,M):bo(p,d.child,E,M)}function Vn(d,p,E,M,I){E=E.render;var F=p.ref;return Zl(p,I),M=sc(d,p,E,M,F,I),E=da(),d!==null&&!Bi?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~I,Cr(d,p,I)):(Kn&&E&&Xp(p),p.flags|=1,ii(d,p,M,I),p.child)}function kn(d,p,E,M,I){if(d===null){var F=E.type;return typeof F=="function"&&!Xf(F)&&F.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(p.tag=15,p.type=F,Lo(d,p,F,M,I)):(d=jf(E.type,null,M,p,p.mode,I),d.ref=p.ref,d.return=p,p.child=d)}if(F=d.child,(d.lanes&I)===0){var $=F.memoizedProps;if(E=E.compare,E=E!==null?E:Ss,E($,M)&&d.ref===p.ref)return Cr(d,p,I)}return p.flags|=1,d=Go(F,M),d.ref=p.ref,d.return=p,p.child=d}function Lo(d,p,E,M,I){if(d!==null&&Ss(d.memoizedProps,M)&&d.ref===p.ref)if(Bi=!1,(d.lanes&I)!==0)(d.flags&131072)!==0&&(Bi=!0);else return p.lanes=d.lanes,Cr(d,p,I);return Do(d,p,E,M,I)}function Ui(d,p,E){var M=p.pendingProps,I=M.children,F=d!==null?d.memoizedState:null;if(M.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null},Ft(ll,tr),tr|=E;else if((E&1073741824)!==0)p.memoizedState={baseLanes:0,cachePool:null},M=F!==null?F.baseLanes:E,Ft(ll,tr),tr|=M;else return d=F!==null?F.baseLanes|E:E,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null},p.updateQueue=null,Ft(ll,tr),tr|=d,null;else F!==null?(M=F.baseLanes|E,p.memoizedState=null):M=E,Ft(ll,tr),tr|=M;return ii(d,p,I,E),p.child}function fr(d,p){var E=p.ref;(d===null&&E!==null||d!==null&&d.ref!==E)&&(p.flags|=512,p.flags|=2097152)}function Do(d,p,E,M,I){var F=Gt(E)?It:$t.current;return F=_n(p,F),Zl(p,I),E=sc(d,p,E,M,F,I),M=da(),d!==null&&!Bi?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~I,Cr(d,p,I)):(Kn&&M&&Xp(p),p.flags|=1,ii(d,p,E,I),p.child)}function el(d,p,E,M,I){if(Gt(E)){var F=!0;js(p)}else F=!1;if(Zl(p,I),p.stateNode===null)d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),I0(p,E,M),Wp(p,E,M,I),M=!0;else if(d===null){var $=p.stateNode,fe=p.memoizedProps;$.props=fe;var Ie=$.context,nt=E.contextType;typeof nt=="object"&&nt!==null?nt=Sr(nt):(nt=Gt(E)?It:$t.current,nt=_n(p,nt));var _t=E.getDerivedStateFromProps,Zt=typeof _t=="function"||typeof $.getSnapshotBeforeUpdate=="function";Zt||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(fe!==M||Ie!==nt)&&P0(p,$,M,nt),rs=!1;var Ut=p.memoizedState;$.state=Ut,mf(p,M,$,I),Ie=p.memoizedState,fe!==M||Ut!==Ie||en.current||rs?(typeof _t=="function"&&(Hp(p,E,_t,M),Ie=p.memoizedState),(fe=rs||Vp(p,E,fe,M,Ut,Ie,nt))?(Zt||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(p.flags|=4194308)):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=M,p.memoizedState=Ie),$.props=M,$.state=Ie,$.context=nt,M=fe):(typeof $.componentDidMount=="function"&&(p.flags|=4194308),M=!1)}else{$=p.stateNode,Gp(d,p),fe=p.memoizedProps,nt=p.type===p.elementType?fe:wr(p.type,fe),$.props=nt,Zt=p.pendingProps,Ut=$.context,Ie=E.contextType,typeof Ie=="object"&&Ie!==null?Ie=Sr(Ie):(Ie=Gt(E)?It:$t.current,Ie=_n(p,Ie));var ln=E.getDerivedStateFromProps;(_t=typeof ln=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(fe!==Zt||Ut!==Ie)&&P0(p,$,M,Ie),rs=!1,Ut=p.memoizedState,$.state=Ut,mf(p,M,$,I);var pt=p.memoizedState;fe!==Zt||Ut!==pt||en.current||rs?(typeof ln=="function"&&(Hp(p,E,ln,M),pt=p.memoizedState),(nt=rs||Vp(p,E,nt,M,Ut,pt,Ie)||!1)?(_t||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(M,pt,Ie),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(M,pt,Ie)),typeof $.componentDidUpdate=="function"&&(p.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof $.componentDidUpdate!="function"||fe===d.memoizedProps&&Ut===d.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||fe===d.memoizedProps&&Ut===d.memoizedState||(p.flags|=1024),p.memoizedProps=M,p.memoizedState=pt),$.props=M,$.state=pt,$.context=Ie,M=nt):(typeof $.componentDidUpdate!="function"||fe===d.memoizedProps&&Ut===d.memoizedState||(p.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||fe===d.memoizedProps&&Ut===d.memoizedState||(p.flags|=1024),M=!1)}return er(d,p,E,M,F,I)}function er(d,p,E,M,I,F){fr(d,p);var $=(p.flags&128)!==0;if(!M&&!$)return I&&Nn(p,E,!1),Cr(d,p,F);M=p.stateNode,om.current=p;var fe=$&&typeof E.getDerivedStateFromError!="function"?null:M.render();return p.flags|=1,d!==null&&$?(p.child=bo(p,d.child,null,F),p.child=bo(p,null,fe,F)):ii(d,p,fe,F),p.memoizedState=M.state,I&&Nn(p,E,!0),p.child}function yu(d){var p=d.stateNode;p.pendingContext?es(d,p.pendingContext,p.pendingContext!==p.context):p.context&&es(d,p.context,!1),Ef(d,p.containerInfo)}function am(d,p,E,M,I){return ec(),xf(I),p.flags|=256,ii(d,p,E,M),p.child}var _u={dehydrated:null,treeContext:null,retryLane:0};function tl(d){return{baseLanes:d,cachePool:null}}function lm(d,p,E){var M=p.pendingProps,I=Qn.current,F=!1,$=(p.flags&128)!==0,fe;if((fe=$)||(fe=d!==null&&d.memoizedState===null?!1:(I&2)!==0),fe?(F=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(I|=1),Ft(Qn,I&1),d===null)return ha(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((p.mode&1)===0?p.lanes=1:Xs(d)?p.lanes=8:p.lanes=1073741824,null):(I=M.children,d=M.fallback,F?(M=p.mode,F=p.child,I={mode:"hidden",children:I},(M&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=I):F=Bu(I,M,0,null),d=dl(d,M,E,null),F.return=p,d.return=p,F.sibling=d,p.child=F,p.child.memoizedState=tl(E),p.memoizedState=_u,d):bs(p,I));if(I=d.memoizedState,I!==null){if(fe=I.dehydrated,fe!==null){if($)return p.flags&256?(p.flags&=-257,Eu(d,p,E,Error(o(422)))):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(F=M.fallback,I=p.mode,M=Bu({mode:"visible",children:M.children},I,0,null),F=dl(F,I,E,null),F.flags|=2,M.return=p,F.return=p,M.sibling=F,p.child=M,(p.mode&1)!==0&&bo(p,d.child,null,E),p.child.memoizedState=tl(E),p.memoizedState=_u,F);if((p.mode&1)===0)p=Eu(d,p,E,null);else if(Xs(fe))p=Eu(d,p,E,Error(o(419)));else if(M=(E&d.childLanes)!==0,Bi||M){if(M=fi,M!==null){switch(E&-E){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}M=(F&(M.suspendedLanes|E))!==0?0:F,M!==0&&M!==I.retryLane&&(I.retryLane=M,nr(d,M,-1))}Vf(),p=Eu(d,p,E,Error(o(421)))}else Xl(fe)?(p.flags|=128,p.child=d.child,p=X0.bind(null,d),Oa(fe,p),p=null):(E=I.treeContext,Q&&(ki=Zh(fe),hr=p,Kn=!0,os=null,$l=!1,E!==null&&(ss[zr++]=Co,ss[zr++]=To,ss[zr++]=Wa,Co=E.id,To=E.overflow,Wa=p)),p=bs(p,p.pendingProps.children),p.flags|=4096);return p}return F?(M=Of(d,p,M.children,M.fallback,E),F=p.child,I=d.child.memoizedState,F.memoizedState=I===null?tl(E):{baseLanes:I.baseLanes|E,cachePool:null},F.childLanes=d.childLanes&~E,p.memoizedState=_u,M):(E=xu(d,p,M.children,E),p.memoizedState=null,E)}return F?(M=Of(d,p,M.children,M.fallback,E),F=p.child,I=d.child.memoizedState,F.memoizedState=I===null?tl(E):{baseLanes:I.baseLanes|E,cachePool:null},F.childLanes=d.childLanes&~E,p.memoizedState=_u,M):(E=xu(d,p,M.children,E),p.memoizedState=null,E)}function bs(d,p){return p=Bu({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function xu(d,p,E,M){var I=d.child;return d=I.sibling,E=Go(I,{mode:"visible",children:E}),(p.mode&1)===0&&(E.lanes=M),E.return=p,E.sibling=null,d!==null&&(M=p.deletions,M===null?(p.deletions=[d],p.flags|=16):M.push(d)),p.child=E}function Of(d,p,E,M,I){var F=p.mode;d=d.child;var $=d.sibling,fe={mode:"hidden",children:E};return(F&1)===0&&p.child!==d?(E=p.child,E.childLanes=0,E.pendingProps=fe,p.deletions=null):(E=Go(d,fe),E.subtreeFlags=d.subtreeFlags&14680064),$!==null?M=Go($,M):(M=dl(M,F,I,null),M.flags|=2),M.return=p,E.return=p,E.sibling=M,p.child=E,M}function Eu(d,p,E,M){return M!==null&&xf(M),bo(p,d.child,null,E),d=bs(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function G0(d,p,E){d.lanes|=p;var M=d.alternate;M!==null&&(M.lanes|=p),Va(d.return,p,E)}function Qs(d,p,E,M,I){var F=d.memoizedState;F===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:M,tail:E,tailMode:I}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=M,F.tail=E,F.tailMode=I)}function nl(d,p,E){var M=p.pendingProps,I=M.revealOrder,F=M.tail;if(ii(d,p,M.children,E),M=Qn.current,(M&2)!==0)M=M&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&G0(d,E,p);else if(d.tag===19)G0(d,E,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}M&=1}if(Ft(Qn,M),(p.mode&1)===0)p.memoizedState=null;else switch(I){case"forwards":for(E=p.child,I=null;E!==null;)d=E.alternate,d!==null&&Af(d)===null&&(I=E),E=E.sibling;E=I,E===null?(I=p.child,p.child=null):(I=E.sibling,E.sibling=null),Qs(p,!1,I,E,F);break;case"backwards":for(E=null,I=p.child,p.child=null;I!==null;){if(d=I.alternate,d!==null&&Af(d)===null){p.child=I;break}d=I.sibling,I.sibling=E,E=I,I=d}Qs(p,!0,E,null,F);break;case"together":Qs(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Cr(d,p,E){if(d!==null&&(p.dependencies=d.dependencies),$s|=p.lanes,(E&p.childLanes)===0)return null;if(d!==null&&p.child!==d.child)throw Error(o(153));if(p.child!==null){for(d=p.child,E=Go(d,d.pendingProps),p.child=E,E.return=p;d.sibling!==null;)d=d.sibling,E=E.sibling=Go(d,d.pendingProps),E.return=p;E.sibling=null}return p.child}function kf(d,p,E){switch(p.tag){case 3:yu(p),ec();break;case 5:F0(p);break;case 1:Gt(p.type)&&js(p);break;case 4:Ef(p,p.stateNode.containerInfo);break;case 10:Ha(p,p.type._context,p.memoizedProps.value);break;case 13:var M=p.memoizedState;if(M!==null)return M.dehydrated!==null?(Ft(Qn,Qn.current&1),p.flags|=128,null):(E&p.child.childLanes)!==0?lm(d,p,E):(Ft(Qn,Qn.current&1),d=Cr(d,p,E),d!==null?d.sibling:null);Ft(Qn,Qn.current&1);break;case 19:if(M=(E&p.childLanes)!==0,(d.flags&128)!==0){if(M)return nl(d,p,E);p.flags|=128}var I=p.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Ft(Qn,Qn.current),M)break;return null;case 22:case 23:return p.lanes=0,Ui(d,p,E)}return Cr(d,p,E)}function Uf(d,p){switch(jp(p),p.tag){case 1:return Gt(p.type)&&ni(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return rc(),dt(en),dt($t),Ka(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 5:return Jp(p),null;case 13:if(dt(Qn),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(o(340));ec()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return dt(Qn),null;case 4:return rc(),null;case 10:return au(p.type._context),null;case 22:case 23:return Pu(),null;case 24:return null;default:return null}}var dr=!1,Ni=!1,il=typeof WeakSet=="function"?WeakSet:Set,st=null;function as(d,p){var E=d.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(M){mr(d,p,M)}else E.current=null}function Bo(d,p,E){try{E()}catch(M){mr(d,p,M)}}var cm=!1;function um(d,p){for(Z(d.containerInfo),st=p;st!==null;)if(d=st,p=d.child,(d.subtreeFlags&1028)!==0&&p!==null)p.return=d,st=p;else for(;st!==null;){d=st;try{var E=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var M=E.memoizedProps,I=E.memoizedState,F=d.stateNode,$=F.getSnapshotBeforeUpdate(d.elementType===d.type?M:wr(d.type,M),I);F.__reactInternalSnapshotBeforeUpdate=$}break;case 3:rt&&ot(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(fe){mr(d,d.return,fe)}if(p=d.sibling,p!==null){p.return=d.return,st=p;break}st=d.return}return E=cm,cm=!1,E}function No(d,p,E){var M=p.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var I=M=M.next;do{if((I.tag&d)===d){var F=I.destroy;I.destroy=void 0,F!==void 0&&Bo(p,E,F)}I=I.next}while(I!==M)}}function zi(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var E=p=p.next;do{if((E.tag&d)===d){var M=E.create;E.destroy=M()}E=E.next}while(E!==p)}}function pr(d){var p=d.ref;if(p!==null){var E=d.stateNode;switch(d.tag){case 5:d=oe(E);break;default:d=E}typeof p=="function"?p(d):p.current=d}}function jn(d,p,E){if(Js&&typeof Js.onCommitFiberUnmount=="function")try{Js.onCommitFiberUnmount(iu,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(d=p.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var M=d=d.next;do{var I=M,F=I.destroy;I=I.tag,F!==void 0&&((I&2)!==0||(I&4)!==0)&&Bo(p,E,F),M=M.next}while(M!==d)}break;case 1:if(as(p,E),d=p.stateNode,typeof d.componentWillUnmount=="function")try{d.props=p.memoizedProps,d.state=p.memoizedState,d.componentWillUnmount()}catch($){mr(p,E,$)}break;case 5:as(p,E);break;case 4:rt?dm(d,p,E):zt&&zt&&(p=p.stateNode.containerInfo,E=ke(p),mn(p,E))}}function ls(d,p,E){for(var M=p;;)if(jn(d,M,E),M.child===null||rt&&M.tag===4){if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function hm(d){var p=d.alternate;p!==null&&(d.alternate=null,hm(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Re(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function fm(d){return d.tag===5||d.tag===3||d.tag===4}function zf(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||fm(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Gf(d){if(rt){e:{for(var p=d.return;p!==null;){if(fm(p))break e;p=p.return}throw Error(o(160))}var E=p;switch(E.tag){case 5:p=E.stateNode,E.flags&32&&(xe(p),E.flags&=-33),E=zf(d),hc(d,E,p);break;case 3:case 4:p=E.stateNode.containerInfo,E=zf(d),Hf(d,E,p);break;default:throw Error(o(161))}}}function Hf(d,p,E){var M=d.tag;if(M===5||M===6)d=d.stateNode,p?lt(E,d,p):Et(E,d);else if(M!==4&&(d=d.child,d!==null))for(Hf(d,p,E),d=d.sibling;d!==null;)Hf(d,p,E),d=d.sibling}function hc(d,p,E){var M=d.tag;if(M===5||M===6)d=d.stateNode,p?Ke(E,d,p):be(E,d);else if(M!==4&&(d=d.child,d!==null))for(hc(d,p,E),d=d.sibling;d!==null;)hc(d,p,E),d=d.sibling}function dm(d,p,E){for(var M=p,I=!1,F,$;;){if(!I){I=M.return;e:for(;;){if(I===null)throw Error(o(160));switch(F=I.stateNode,I.tag){case 5:$=!1;break e;case 3:F=F.containerInfo,$=!0;break e;case 4:F=F.containerInfo,$=!0;break e}I=I.return}I=!0}if(M.tag===5||M.tag===6)ls(d,M,E),$?ie(F,M.stateNode):Ot(F,M.stateNode);else if(M.tag===18)$?X(F,M.stateNode):nf(F,M.stateNode);else if(M.tag===4){if(M.child!==null){F=M.stateNode.containerInfo,$=!0,M.child.return=M,M=M.child;continue}}else if(jn(d,M,E),M.child!==null){M.child.return=M,M=M.child;continue}if(M===p)break;for(;M.sibling===null;){if(M.return===null||M.return===p)return;M=M.return,M.tag===4&&(I=!1)}M.sibling.return=M.return,M=M.sibling}}function ga(d,p){if(rt){switch(p.tag){case 0:case 11:case 14:case 15:No(3,p,p.return),zi(3,p),No(5,p,p.return);return;case 1:return;case 5:var E=p.stateNode;if(E!=null){var M=p.memoizedProps;d=d!==null?d.memoizedProps:M;var I=p.type,F=p.updateQueue;p.updateQueue=null,F!==null&&At(E,F,I,d,M,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));E=p.memoizedProps,et(p.stateNode,d!==null?d.memoizedProps:E,E);return;case 3:Q&&d!==null&&d.memoizedState.isDehydrated&&ef(p.stateNode.containerInfo);return;case 12:return;case 13:fc(p);return;case 19:fc(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:No(3,p,p.return),zi(3,p),No(5,p,p.return);return;case 12:return;case 13:fc(p);return;case 19:fc(p);return;case 3:Q&&d!==null&&d.memoizedState.isDehydrated&&ef(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(zt){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,mn(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function fc(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var E=d.stateNode;E===null&&(E=d.stateNode=new il),p.forEach(function(M){var I=j0.bind(null,d,M);E.has(M)||(E.add(M),M.then(I,I))})}}function RE(d,p){for(st=p;st!==null;){p=st;var E=p.deletions;if(E!==null)for(var M=0;M<E.length;M++){var I=E[M];try{var F=d;rt?dm(F,I,p):ls(F,I,p);var $=I.alternate;$!==null&&($.return=null),I.return=null}catch(Pt){mr(I,p,Pt)}}if(E=p.child,(p.subtreeFlags&12854)!==0&&E!==null)E.return=p,st=E;else for(;st!==null;){p=st;try{var fe=p.flags;if(fe&32&&rt&&xe(p.stateNode),fe&512){var Ie=p.alternate;if(Ie!==null){var nt=Ie.ref;nt!==null&&(typeof nt=="function"?nt(null):nt.current=null)}}if(fe&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var _t=p.alternate;(_t===null||_t.memoizedState===null)&&(bu=wi())}break;case 22:var Zt=p.memoizedState!==null,Ut=p.alternate,ln=Ut!==null&&Ut.memoizedState!==null;if(E=p,rt){e:if(M=E,I=Zt,F=null,rt)for(var pt=M;;){if(pt.tag===5){if(F===null){F=pt;var Vi=pt.stateNode;I?tt(Vi):Ge(pt.stateNode,pt.memoizedProps)}}else if(pt.tag===6){if(F===null){var Kr=pt.stateNode;I?re(Kr):Je(Kr,pt.memoizedProps)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===M)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===M)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===M)break e;F===pt&&(F=null),pt=pt.return}F===pt&&(F=null),pt.sibling.return=pt.return,pt=pt.sibling}}if(Zt&&!ln&&(E.mode&1)!==0){st=E;for(var Ae=E.child;Ae!==null;){for(E=st=Ae;st!==null;){M=st;var pe=M.child;switch(M.tag){case 0:case 11:case 14:case 15:No(4,M,M.return);break;case 1:as(M,M.return);var Te=M.stateNode;if(typeof Te.componentWillUnmount=="function"){var ut=M.return;try{Te.props=M.memoizedProps,Te.state=M.memoizedState,Te.componentWillUnmount()}catch(Pt){mr(M,ut,Pt)}}break;case 5:as(M,M.return);break;case 22:if(M.memoizedState!==null){mm(E);continue}}pe!==null?(pe.return=M,st=pe):mm(E)}Ae=Ae.sibling}}}switch(fe&4102){case 2:Gf(p),p.flags&=-3;break;case 6:Gf(p),p.flags&=-3,ga(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,ga(p.alternate,p);break;case 4:ga(p.alternate,p)}}catch(Pt){mr(p,p.return,Pt)}if(E=p.sibling,E!==null){E.return=p.return,st=E;break}st=p.return}}}function Au(d,p,E){st=d,wu(d)}function wu(d,p,E){for(var M=(d.mode&1)!==0;st!==null;){var I=st,F=I.child;if(I.tag===22&&M){var $=I.memoizedState!==null||dr;if(!$){var fe=I.alternate,Ie=fe!==null&&fe.memoizedState!==null||Ni;fe=dr;var nt=Ni;if(dr=$,(Ni=Ie)&&!nt)for(st=I;st!==null;)$=st,Ie=$.child,$.tag===22&&$.memoizedState!==null?rl(I):Ie!==null?(Ie.return=$,st=Ie):rl(I);for(;F!==null;)st=F,wu(F),F=F.sibling;st=I,dr=fe,Ni=nt}pm(d)}else(I.subtreeFlags&8772)!==0&&F!==null?(F.return=I,st=F):pm(d)}}function pm(d){for(;st!==null;){var p=st;if((p.flags&8772)!==0){var E=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Ni||zi(5,p);break;case 1:var M=p.stateNode;if(p.flags&4&&!Ni)if(E===null)M.componentDidMount();else{var I=p.elementType===p.type?E.memoizedProps:wr(p.type,E.memoizedProps);M.componentDidUpdate(I,E.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&b0(p,F,M);break;case 3:var $=p.updateQueue;if($!==null){if(E=null,p.child!==null)switch(p.child.tag){case 5:E=oe(p.child.stateNode);break;case 1:E=p.child.stateNode}b0(p,$,E)}break;case 5:var fe=p.stateNode;E===null&&p.flags&4&&gt(fe,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Q&&p.memoizedState===null){var Ie=p.alternate;if(Ie!==null){var nt=Ie.memoizedState;if(nt!==null){var _t=nt.dehydrated;_t!==null&&tf(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ni||p.flags&512&&pr(p)}catch(Zt){mr(p,p.return,Zt)}}if(p===d){st=null;break}if(E=p.sibling,E!==null){E.return=p.return,st=E;break}st=p.return}}function mm(d){for(;st!==null;){var p=st;if(p===d){st=null;break}var E=p.sibling;if(E!==null){E.return=p.return,st=E;break}st=p.return}}function rl(d){for(;st!==null;){var p=st;try{switch(p.tag){case 0:case 11:case 15:var E=p.return;try{zi(4,p)}catch(Ie){mr(p,E,Ie)}break;case 1:var M=p.stateNode;if(typeof M.componentDidMount=="function"){var I=p.return;try{M.componentDidMount()}catch(Ie){mr(p,I,Ie)}}var F=p.return;try{pr(p)}catch(Ie){mr(p,F,Ie)}break;case 5:var $=p.return;try{pr(p)}catch(Ie){mr(p,$,Ie)}}}catch(Ie){mr(p,p.return,Ie)}if(p===d){st=null;break}var fe=p.sibling;if(fe!==null){fe.return=p.return,st=fe;break}st=p.return}}var Su=0,sl=1,ol=2,Fo=3,dc=4;if(typeof Symbol=="function"&&Symbol.for){var al=Symbol.for;Su=al("selector.component"),sl=al("selector.has_pseudo_class"),ol=al("selector.role"),Fo=al("selector.test_id"),dc=al("selector.text")}function Mu(d){var p=Oe(d);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(d=Rt(d),d===null)throw Error(o(362));return d.stateNode.current}function Cu(d,p){switch(p.$$typeof){case Su:if(d.type===p.value)return!0;break;case sl:e:{p=p.value,d=[d,0];for(var E=0;E<d.length;){var M=d[E++],I=d[E++],F=p[I];if(M.tag!==5||!H(M)){for(;F!=null&&Cu(M,F);)I++,F=p[I];if(I===p.length){p=!0;break e}else for(M=M.child;M!==null;)d.push(M,I),M=M.sibling}}p=!1}return p;case ol:if(d.tag===5&&ve(d.stateNode,p.value))return!0;break;case dc:if((d.tag===5||d.tag===6)&&(d=Y(d),d!==null&&0<=d.indexOf(p.value)))return!0;break;case Fo:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function va(d){switch(d.$$typeof){case Su:return"<"+(k(d.value)||"Unknown")+">";case sl:return":has("+(va(d)||"")+")";case ol:return'[role="'+d.value+'"]';case dc:return'"'+d.value+'"';case Fo:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function Wr(d,p){var E=[];d=[d,0];for(var M=0;M<d.length;){var I=d[M++],F=d[M++],$=p[F];if(I.tag!==5||!H(I)){for(;$!=null&&Cu(I,$);)F++,$=p[F];if(F===p.length)E.push(I);else for(I=I.child;I!==null;)d.push(I,F),I=I.sibling}}return E}function Oo(d,p){if(!je)throw Error(o(363));d=Mu(d),d=Wr(d,p),p=[],d=Array.from(d);for(var E=0;E<d.length;){var M=d[E++];if(M.tag===5)H(M)||p.push(M.stateNode);else for(M=M.child;M!==null;)d.push(M),M=M.sibling}return p}var gm=Math.ceil,Tu=a.ReactCurrentDispatcher,Rs=a.ReactCurrentOwner,Fn=a.ReactCurrentBatchConfig,sn=0,fi=null,On=null,Jn=0,tr=0,ll=xt(0),ri=0,pc=null,$s=0,Xr=0,cl=0,ko=null,gi=null,bu=0,ya=1/0;function ul(){ya=wi()+500}var mc=!1,Yn=null,Is=null,gc=!1,eo=null,hl=0,fl=0,Uo=null,Wn=-1,si=0;function Mn(){return(sn&6)!==0?wi():Wn!==-1?Wn:Wn=wi()}function Ps(d){return(d.mode&1)===0?1:(sn&2)!==0&&Jn!==0?Jn&-Jn:T0.transition!==null?(si===0&&(d=Ys,Ys<<=1,(Ys&4194240)===0&&(Ys=64),si=d),si):(d=un,d!==0?d:Pe())}function nr(d,p,E){if(50<fl)throw fl=0,Uo=null,Error(o(185));var M=_a(d,p);return M===null?null:(ka(M,p,E),((sn&2)===0||M!==fi)&&(M===fi&&((sn&2)===0&&(Xr|=p),ri===4&&Hi(M,Jn)),Tr(M,E),p===1&&sn===0&&(d.mode&1)===0&&(ul(),cf&&ns())),M)}function _a(d,p){d.lanes|=p;var E=d.alternate;for(E!==null&&(E.lanes|=p),E=d,d=d.return;d!==null;)d.childLanes|=p,E=d.alternate,E!==null&&(E.childLanes|=p),E=d,d=d.return;return E.tag===3?E.stateNode:null}function Tr(d,p){var E=d.callbackNode;C0(d,p);var M=nu(d,d===fi?Jn:0);if(M===0)E!==null&&Jl(E),d.callbackNode=null,d.callbackPriority=0;else if(p=M&-M,d.callbackPriority!==p){if(E!=null&&Jl(E),p===1)d.tag===0?hf(jr.bind(null,d)):uf(jr.bind(null,d)),Qe?Ve(function(){sn===0&&ns()}):Ua(za,ns),E=null;else{switch(wo(M)){case 1:E=za;break;case 4:E=CE;break;case 16:E=af;break;case 536870912:E=lf;break;default:E=af}E=Wf(E,Gi.bind(null,d))}d.callbackPriority=p,d.callbackNode=E}}function Gi(d,p){if(Wn=-1,si=0,(sn&6)!==0)throw Error(o(327));var E=d.callbackNode;if(to()&&d.callbackNode!==E)return null;var M=nu(d,d===fi?Jn:0);if(M===0)return null;if((M&30)!==0||(M&d.expiredLanes)!==0||p)p=Lu(d,M);else{p=M;var I=sn;sn|=2;var F=_m();(fi!==d||Jn!==p)&&(ul(),zo(d,p));do try{V0();break}catch(fe){ym(d,fe)}while(!0);ur(),Tu.current=F,sn=I,On!==null?p=0:(fi=null,Jn=0,p=ri)}if(p!==0){if(p===2&&(I=rf(d),I!==0&&(M=I,p=Ru(d,I))),p===1)throw E=pc,zo(d,0),Hi(d,M),Tr(d,wi()),E;if(p===6)Hi(d,M);else{if(I=d.current.alternate,(M&30)===0&&!vm(I)&&(p=Lu(d,M),p===2&&(F=rf(d),F!==0&&(M=F,p=Ru(d,F))),p===1))throw E=pc,zo(d,0),Hi(d,M),Tr(d,wi()),E;switch(d.finishedWork=I,d.finishedLanes=M,p){case 0:case 1:throw Error(o(345));case 2:Ls(d,gi);break;case 3:if(Hi(d,M),(M&130023424)===M&&(p=bu+500-wi(),10<p)){if(nu(d,0)!==0)break;if(I=d.suspendedLanes,(I&M)!==M){Mn(),d.pingedLanes|=d.suspendedLanes&I;break}d.timeoutHandle=ge(Ls.bind(null,d,gi),p);break}Ls(d,gi);break;case 4:if(Hi(d,M),(M&4194240)===M)break;for(p=d.eventTimes,I=-1;0<M;){var $=31-Xn(M);F=1<<$,$=p[$],$>I&&(I=$),M&=~F}if(M=I,M=wi()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*gm(M/1960))-M,10<M){d.timeoutHandle=ge(Ls.bind(null,d,gi),M);break}Ls(d,gi);break;case 5:Ls(d,gi);break;default:throw Error(o(329))}}}return Tr(d,wi()),d.callbackNode===E?Gi.bind(null,d):null}function Ru(d,p){var E=ko;return d.current.memoizedState.isDehydrated&&(zo(d,p).flags|=256),d=Lu(d,p),d!==2&&(p=gi,gi=E,p!==null&&Iu(p)),d}function Iu(d){gi===null?gi=d:gi.push.apply(gi,d)}function vm(d){for(var p=d;;){if(p.flags&16384){var E=p.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var M=0;M<E.length;M++){var I=E[M],F=I.getSnapshot;I=I.value;try{if(!cr(F(),I))return!1}catch{return!1}}}if(E=p.child,p.subtreeFlags&16384&&E!==null)E.return=p,p=E;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Hi(d,p){for(p&=~cl,p&=~Xr,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var E=31-Xn(p),M=1<<E;d[E]=-1,p&=~M}}function jr(d){if((sn&6)!==0)throw Error(o(327));to();var p=nu(d,0);if((p&1)===0)return Tr(d,wi()),null;var E=Lu(d,p);if(d.tag!==0&&E===2){var M=rf(d);M!==0&&(p=M,E=Ru(d,M))}if(E===1)throw E=pc,zo(d,0),Hi(d,p),Tr(d,wi()),E;if(E===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,Ls(d,gi),Tr(d,wi()),null}function vc(d){eo!==null&&eo.tag===0&&(sn&6)===0&&to();var p=sn;sn|=1;var E=Fn.transition,M=un;try{if(Fn.transition=null,un=1,d)return d()}finally{un=M,Fn.transition=E,sn=p,(sn&6)===0&&ns()}}function Pu(){tr=ll.current,dt(ll)}function zo(d,p){d.finishedWork=null,d.finishedLanes=0;var E=d.timeoutHandle;if(E!==We&&(d.timeoutHandle=We,Ue(E)),On!==null)for(E=On.return;E!==null;){var M=E;switch(jp(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&ni();break;case 3:rc(),dt(en),dt($t),Ka();break;case 5:Jp(M);break;case 4:rc();break;case 13:dt(Qn);break;case 19:dt(Qn);break;case 10:au(M.type._context);break;case 22:case 23:Pu()}E=E.return}if(fi=d,On=d=Go(d.current,null),Jn=tr=p,ri=0,pc=null,cl=Xr=$s=0,gi=ko=null,is!==null){for(p=0;p<is.length;p++)if(E=is[p],M=E.interleaved,M!==null){E.interleaved=null;var I=M.next,F=E.pending;if(F!==null){var $=F.next;F.next=I,M.next=$}E.pending=M}is=null}return d}function ym(d,p){do{var E=On;try{if(ur(),cu.current=cc,wf){for(var M=$n.memoizedState;M!==null;){var I=M.queue;I!==null&&(I.pending=null),M=M.next}wf=!1}if(Ja=0,Li=Pi=$n=null,Zs=!1,Za=0,Rs.current=null,E===null||E.return===null){ri=1,pc=p,On=null;break}e:{var F=d,$=E.return,fe=E,Ie=p;if(p=Jn,fe.flags|=32768,Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var nt=Ie,_t=fe,Zt=_t.tag;if((_t.mode&1)===0&&(Zt===0||Zt===11||Zt===15)){var Ut=_t.alternate;Ut?(_t.updateQueue=Ut.updateQueue,_t.memoizedState=Ut.memoizedState,_t.lanes=Ut.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var ln=sm($);if(ln!==null){ln.flags&=-257,Qa(ln,$,fe,F,p),ln.mode&1&&Io(F,nt,p),p=ln,Ie=nt;var pt=p.updateQueue;if(pt===null){var Vi=new Set;Vi.add(Ie),p.updateQueue=Vi}else pt.add(Ie);break e}else{if((p&1)===0){Io(F,nt,p),Vf();break e}Ie=Error(o(426))}}else if(Kn&&fe.mode&1){var Kr=sm($);if(Kr!==null){(Kr.flags&65536)===0&&(Kr.flags|=256),Qa(Kr,$,fe,F,p),xf(Ie);break e}}F=Ie,ri!==4&&(ri=2),ko===null?ko=[F]:ko.push(F),Ie=rm(Ie,fe),fe=$;do{switch(fe.tag){case 3:fe.flags|=65536,p&=-p,fe.lanes|=p;var Ae=z0(fe,Ie,p);pf(fe,Ae);break e;case 1:F=Ie;var pe=fe.type,Te=fe.stateNode;if((fe.flags&128)===0&&(typeof pe.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(Is===null||!Is.has(Te)))){fe.flags|=65536,p&=-p,fe.lanes|=p;var ut=Df(fe,F,p);pf(fe,ut);break e}}fe=fe.return}while(fe!==null)}Em(E)}catch(Pt){p=Pt,On===E&&E!==null&&(On=E=E.return);continue}break}while(!0)}function _m(){var d=Tu.current;return Tu.current=cc,d===null?cc:d}function Vf(){(ri===0||ri===3||ri===2)&&(ri=4),fi===null||($s&268435455)===0&&(Xr&268435455)===0||Hi(fi,Jn)}function Lu(d,p){var E=sn;sn|=2;var M=_m();fi===d&&Jn===p||zo(d,p);do try{H0();break}catch(I){ym(d,I)}while(!0);if(ur(),sn=E,Tu.current=M,On!==null)throw Error(o(261));return fi=null,Jn=0,ri}function H0(){for(;On!==null;)xm(On)}function V0(){for(;On!==null&&!la();)xm(On)}function xm(d){var p=Sm(d.alternate,d,tr);d.memoizedProps=d.pendingProps,p===null?Em(d):On=p,Rs.current=null}function Em(d){var p=d;do{var E=p.alternate;if(d=p.return,(p.flags&32768)===0){if(E=Ff(E,p,tr),E!==null){On=E;return}}else{if(E=Uf(E,p),E!==null){E.flags&=32767,On=E;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{ri=6,On=null;return}}if(p=p.sibling,p!==null){On=p;return}On=p=d}while(p!==null);ri===0&&(ri=5)}function Ls(d,p){var E=un,M=Fn.transition;try{Fn.transition=null,un=1,W0(d,p,E)}finally{Fn.transition=M,un=E}return null}function W0(d,p,E){do to();while(eo!==null);if((sn&6)!==0)throw Error(o(327));var M=d.finishedWork,I=d.finishedLanes;if(M===null)return null;if(d.finishedWork=null,d.finishedLanes=0,M===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var F=M.lanes|M.childLanes;if(of(d,F),d===fi&&(On=fi=null,Jn=0),(M.subtreeFlags&2064)===0&&(M.flags&2064)===0||gc||(gc=!0,Wf(af,function(){return to(),null})),F=(M.flags&15990)!==0,(M.subtreeFlags&15990)!==0||F){F=Fn.transition,Fn.transition=null;var $=un;un=1;var fe=sn;sn|=4,Rs.current=null,um(d,M),RE(d,M),q(d.containerInfo),d.current=M,Au(M),ME(),sn=fe,un=$,Fn.transition=F}else d.current=M;if(gc&&(gc=!1,eo=d,hl=I),F=d.pendingLanes,F===0&&(Is=null),ru(M.stateNode),Tr(d,wi()),p!==null)for(E=d.onRecoverableError,M=0;M<p.length;M++)E(p[M]);if(mc)throw mc=!1,d=Yn,Yn=null,d;return(hl&1)!==0&&d.tag!==0&&to(),F=d.pendingLanes,(F&1)!==0?d===Uo?fl++:(fl=0,Uo=d):fl=0,ns(),null}function to(){if(eo!==null){var d=wo(hl),p=Fn.transition,E=un;try{if(Fn.transition=null,un=16>d?16:d,eo===null)var M=!1;else{if(d=eo,eo=null,hl=0,(sn&6)!==0)throw Error(o(331));var I=sn;for(sn|=4,st=d.current;st!==null;){var F=st,$=F.child;if((st.flags&16)!==0){var fe=F.deletions;if(fe!==null){for(var Ie=0;Ie<fe.length;Ie++){var nt=fe[Ie];for(st=nt;st!==null;){var _t=st;switch(_t.tag){case 0:case 11:case 15:No(8,_t,F)}var Zt=_t.child;if(Zt!==null)Zt.return=_t,st=Zt;else for(;st!==null;){_t=st;var Ut=_t.sibling,ln=_t.return;if(hm(_t),_t===nt){st=null;break}if(Ut!==null){Ut.return=ln,st=Ut;break}st=ln}}}var pt=F.alternate;if(pt!==null){var Vi=pt.child;if(Vi!==null){pt.child=null;do{var Kr=Vi.sibling;Vi.sibling=null,Vi=Kr}while(Vi!==null)}}st=F}}if((F.subtreeFlags&2064)!==0&&$!==null)$.return=F,st=$;else e:for(;st!==null;){if(F=st,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:No(9,F,F.return)}var Ae=F.sibling;if(Ae!==null){Ae.return=F.return,st=Ae;break e}st=F.return}}var pe=d.current;for(st=pe;st!==null;){$=st;var Te=$.child;if(($.subtreeFlags&2064)!==0&&Te!==null)Te.return=$,st=Te;else e:for($=pe;st!==null;){if(fe=st,(fe.flags&2048)!==0)try{switch(fe.tag){case 0:case 11:case 15:zi(9,fe)}}catch(Pt){mr(fe,fe.return,Pt)}if(fe===$){st=null;break e}var ut=fe.sibling;if(ut!==null){ut.return=fe.return,st=ut;break e}st=fe.return}}if(sn=I,ns(),Js&&typeof Js.onPostCommitFiberRoot=="function")try{Js.onPostCommitFiberRoot(iu,d)}catch{}M=!0}return M}finally{un=E,Fn.transition=p}}return!1}function Du(d,p,E){p=rm(E,p),p=z0(d,p,1),ca(d,p),p=Mn(),d=_a(d,1),d!==null&&(ka(d,1,p),Tr(d,p))}function mr(d,p,E){if(d.tag===3)Du(d,d,E);else for(;p!==null;){if(p.tag===3){Du(p,d,E);break}else if(p.tag===1){var M=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Is===null||!Is.has(M))){d=rm(E,d),d=Df(p,d,1),ca(p,d),d=Mn(),p=_a(p,1),p!==null&&(ka(p,1,d),Tr(p,d));break}}p=p.return}}function Am(d,p,E){var M=d.pingCache;M!==null&&M.delete(p),p=Mn(),d.pingedLanes|=d.suspendedLanes&E,fi===d&&(Jn&E)===E&&(ri===4||ri===3&&(Jn&130023424)===Jn&&500>wi()-bu?zo(d,0):cl|=E),Tr(d,p)}function wm(d,p){p===0&&((d.mode&1)===0?p=1:(p=an,an<<=1,(an&130023424)===0&&(an=4194304)));var E=Mn();d=_a(d,p),d!==null&&(ka(d,p,E),Tr(d,E))}function X0(d){var p=d.memoizedState,E=0;p!==null&&(E=p.retryLane),wm(d,E)}function j0(d,p){var E=0;switch(d.tag){case 13:var M=d.stateNode,I=d.memoizedState;I!==null&&(E=I.retryLane);break;case 19:M=d.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(p),wm(d,E)}var Sm;Sm=function(d,p,E){if(d!==null)if(d.memoizedProps!==p.pendingProps||en.current)Bi=!0;else{if((d.lanes&E)===0&&(p.flags&128)===0)return Bi=!1,kf(d,p,E);Bi=(d.flags&131072)!==0}else Bi=!1,Kn&&(p.flags&1048576)!==0&&L0(p,yf,p.index);switch(p.lanes=0,p.tag){case 2:var M=p.type;d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps;var I=_n(p,$t.current);Zl(p,E),I=sc(null,p,M,d,I,E);var F=da();return p.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Gt(M)?(F=!0,js(p)):F=!1,p.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,ql(p),I.updater=gf,p.stateNode=I,I._reactInternals=p,Wp(p,M,d,E),p=er(null,p,M,!0,F,E)):(p.tag=0,Kn&&F&&Xp(p),ii(null,p,I,E),p=p.child),p;case 16:M=p.elementType;e:{switch(d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps,I=M._init,M=I(M._payload),p.type=M,I=p.tag=IE(M),d=wr(M,d),I){case 0:p=Do(null,p,M,d,E);break e;case 1:p=el(null,p,M,d,E);break e;case 11:p=Vn(null,p,M,d,E);break e;case 14:p=kn(null,p,M,wr(M.type,d),E);break e}throw Error(o(306,M,""))}return p;case 0:return M=p.type,I=p.pendingProps,I=p.elementType===M?I:wr(M,I),Do(d,p,M,I,E);case 1:return M=p.type,I=p.pendingProps,I=p.elementType===M?I:wr(M,I),el(d,p,M,I,E);case 3:e:{if(yu(p),d===null)throw Error(o(387));M=p.pendingProps,F=p.memoizedState,I=F.element,Gp(d,p),mf(p,M,null,E);var $=p.memoizedState;if(M=$.element,Q&&F.isDehydrated)if(F={element:M,isDehydrated:!1,cache:$.cache,transitions:$.transitions},p.updateQueue.baseState=F,p.memoizedState=F,p.flags&256){I=Error(o(423)),p=am(d,p,M,E,I);break e}else if(M!==I){I=Error(o(424)),p=am(d,p,M,E,I);break e}else for(Q&&(ki=Yl(p.stateNode.containerInfo),hr=p,Kn=!0,os=null,$l=!1),E=N0(p,null,M,E),p.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(ec(),M===I){p=Cr(d,p,E);break e}ii(d,p,M,E)}p=p.child}return p;case 5:return F0(p),d===null&&ha(p),M=p.type,I=p.pendingProps,F=d!==null?d.memoizedProps:null,$=I.children,ze(M,I)?$=null:F!==null&&ze(M,F)&&(p.flags|=32),fr(d,p),ii(d,p,$,E),p.child;case 6:return d===null&&ha(p),null;case 13:return lm(d,p,E);case 4:return Ef(p,p.stateNode.containerInfo),M=p.pendingProps,d===null?p.child=bo(p,null,M,E):ii(d,p,M,E),p.child;case 11:return M=p.type,I=p.pendingProps,I=p.elementType===M?I:wr(M,I),Vn(d,p,M,I,E);case 7:return ii(d,p,p.pendingProps,E),p.child;case 8:return ii(d,p,p.pendingProps.children,E),p.child;case 12:return ii(d,p,p.pendingProps.children,E),p.child;case 10:e:{if(M=p.type._context,I=p.pendingProps,F=p.memoizedProps,$=I.value,Ha(p,M,$),F!==null)if(cr(F.value,$)){if(F.children===I.children&&!en.current){p=Cr(d,p,E);break e}}else for(F=p.child,F!==null&&(F.return=p);F!==null;){var fe=F.dependencies;if(fe!==null){$=F.child;for(var Ie=fe.firstContext;Ie!==null;){if(Ie.context===M){if(F.tag===1){Ie=Mo(-1,E&-E),Ie.tag=2;var nt=F.updateQueue;if(nt!==null){nt=nt.shared;var _t=nt.pending;_t===null?Ie.next=Ie:(Ie.next=_t.next,_t.next=Ie),nt.pending=Ie}}F.lanes|=E,Ie=F.alternate,Ie!==null&&(Ie.lanes|=E),Va(F.return,E,p),fe.lanes|=E;break}Ie=Ie.next}}else if(F.tag===10)$=F.type===p.type?null:F.child;else if(F.tag===18){if($=F.return,$===null)throw Error(o(341));$.lanes|=E,fe=$.alternate,fe!==null&&(fe.lanes|=E),Va($,E,p),$=F.sibling}else $=F.child;if($!==null)$.return=F;else for($=F;$!==null;){if($===p){$=null;break}if(F=$.sibling,F!==null){F.return=$.return,$=F;break}$=$.return}F=$}ii(d,p,I.children,E),p=p.child}return p;case 9:return I=p.type,M=p.pendingProps.children,Zl(p,E),I=Sr(I),M=M(I),p.flags|=1,ii(d,p,M,E),p.child;case 14:return M=p.type,I=wr(M,p.pendingProps),I=wr(M.type,I),kn(d,p,M,I,E);case 15:return Lo(d,p,p.type,p.pendingProps,E);case 17:return M=p.type,I=p.pendingProps,I=p.elementType===M?I:wr(M,I),d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,Gt(M)?(d=!0,js(p)):d=!1,Zl(p,E),I0(p,M,I),Wp(p,M,I,E),er(null,p,M,!0,d,E);case 19:return nl(d,p,E);case 22:return Ui(d,p,E)}throw Error(o(156,p.tag))};function Wf(d,p){return Ua(d,p)}function Y0(d,p,E,M){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(d,p,E,M){return new Y0(d,p,E,M)}function Xf(d){return d=d.prototype,!(!d||!d.isReactComponent)}function IE(d){if(typeof d=="function")return Xf(d)?1:0;if(d!=null){if(d=d.$$typeof,d===S)return 11;if(d===C)return 14}return 2}function Go(d,p){var E=d.alternate;return E===null?(E=Yr(d.tag,p,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=p,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&14680064,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,p=d.dependencies,E.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E}function jf(d,p,E,M,I,F){var $=2;if(M=d,typeof d=="function")Xf(d)&&($=1);else if(typeof d=="string")$=5;else e:switch(d){case f:return dl(E.children,I,F,p);case m:$=8,I|=8;break;case g:return d=Yr(12,E,p,I|2),d.elementType=g,d.lanes=F,d;case A:return d=Yr(13,E,p,I),d.elementType=A,d.lanes=F,d;case x:return d=Yr(19,E,p,I),d.elementType=x,d.lanes=F,d;case R:return Bu(E,I,F,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case y:$=10;break e;case _:$=9;break e;case S:$=11;break e;case C:$=14;break e;case T:$=16,M=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return p=Yr($,E,p,I),p.elementType=d,p.type=M,p.lanes=F,p}function dl(d,p,E,M){return d=Yr(7,d,M,p),d.lanes=E,d}function Bu(d,p,E,M){return d=Yr(22,d,M,p),d.elementType=R,d.lanes=E,d.stateNode={},d}function Yf(d,p,E){return d=Yr(6,d,null,p),d.lanes=E,d}function Kf(d,p,E){return p=Yr(4,d.children!==null?d.children:[],d.key,p),p.lanes=E,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function Jf(d,p,E,M,I){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=We,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sf(0),this.expirationTimes=sf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sf(0),this.identifierPrefix=M,this.onRecoverableError=I,Q&&(this.mutableSourceEagerHydrationData=null)}function K0(d,p,E,M,I,F,$,fe,Ie){return d=new Jf(d,p,E,fe,Ie),p===1?(p=1,F===!0&&(p|=8)):p=0,F=Yr(3,null,null,p),d.current=F,F.stateNode=d,F.memoizedState={element:M,isDehydrated:E,cache:null,transitions:null},ql(F),d}function J0(d){if(!d)return rn;d=d._reactInternals;e:{if(D(d)!==d||d.tag!==1)throw Error(o(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Gt(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(d.tag===1){var E=d.type;if(Gt(E))return qi(d,E,p)}return p}function Z0(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=ee(p),d===null?null:d.stateNode}function cs(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<p?E:p}}function Nu(d,p){cs(d,p),(d=d.alternate)&&cs(d,p)}function Zf(d){return d=ee(d),d===null?null:d.stateNode}function q0(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var p=Mn();nr(d,134217728,p),Nu(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var p=Mn(),E=Ps(d);nr(d,E,p),Nu(d,E)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var E=Kl(p.pendingLanes);E!==0&&(Ks(p,E|1),Tr(p,wi()),(sn&6)===0&&(ul(),ns()))}break;case 13:var M=Mn();vc(function(){return nr(d,1,M)}),Nu(d,1)}},t.batchedUpdates=function(d,p){var E=sn;sn|=1;try{return d(p)}finally{sn=E,sn===0&&(ul(),cf&&ns())}},t.createComponentSelector=function(d){return{$$typeof:Su,value:d}},t.createContainer=function(d,p,E,M,I,F,$){return K0(d,p,!1,null,E,M,I,F,$)},t.createHasPseudoClassSelector=function(d){return{$$typeof:sl,value:d}},t.createHydrationContainer=function(d,p,E,M,I,F,$,fe,Ie){return d=K0(E,M,!0,d,I,F,$,fe,Ie),d.context=J0(null),E=d.current,M=Mn(),I=Ps(E),F=Mo(M,I),F.callback=p??null,ca(E,F),d.current.lanes=I,ka(d,I,M),Tr(d,M),d},t.createPortal=function(d,p,E){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:M==null?null:""+M,children:d,containerInfo:p,implementation:E}},t.createRoleSelector=function(d){return{$$typeof:ol,value:d}},t.createTestNameSelector=function(d){return{$$typeof:Fo,value:d}},t.createTextSelector=function(d){return{$$typeof:dc,value:d}},t.deferredUpdates=function(d){var p=un,E=Fn.transition;try{return Fn.transition=null,un=16,d()}finally{un=p,Fn.transition=E}},t.discreteUpdates=function(d,p,E,M,I){var F=un,$=Fn.transition;try{return Fn.transition=null,un=1,d(p,E,M,I)}finally{un=F,Fn.transition=$,sn===0&&ul()}},t.findAllNodes=Oo,t.findBoundingRects=function(d,p){if(!je)throw Error(o(363));p=Oo(d,p),d=[];for(var E=0;E<p.length;E++)d.push(Dt(p[E]));for(p=d.length-1;0<p;p--){E=d[p];for(var M=E.x,I=M+E.width,F=E.y,$=F+E.height,fe=p-1;0<=fe;fe--)if(p!==fe){var Ie=d[fe],nt=Ie.x,_t=nt+Ie.width,Zt=Ie.y,Ut=Zt+Ie.height;if(M>=nt&&F>=Zt&&I<=_t&&$<=Ut){d.splice(p,1);break}else if(M!==nt||E.width!==Ie.width||Ut<F||Zt>$){if(!(F!==Zt||E.height!==Ie.height||_t<M||nt>I)){nt>M&&(Ie.width+=nt-M,Ie.x=M),_t<I&&(Ie.width=I-nt),d.splice(p,1);break}}else{Zt>F&&(Ie.height+=Zt-F,Ie.y=F),Ut<$&&(Ie.height=$-Zt),d.splice(p,1);break}}}return d},t.findHostInstance=Z0,t.findHostInstanceWithNoPortals=function(d){return d=z(d),d=d!==null?ce(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return Z0(d)},t.flushControlled=function(d){var p=sn;sn|=1;var E=Fn.transition,M=un;try{Fn.transition=null,un=1,d()}finally{un=M,Fn.transition=E,sn=p,sn===0&&(ul(),ns())}},t.flushPassiveEffects=to,t.flushSync=vc,t.focusWithin=function(d,p){if(!je)throw Error(o(363));for(d=Mu(d),p=Wr(d,p),p=Array.from(p),d=0;d<p.length;){var E=p[d++];if(!H(E)){if(E.tag===5&&Ce(E.stateNode))return!0;for(E=E.child;E!==null;)p.push(E),E=E.sibling}}return!1},t.getCurrentUpdatePriority=function(){return un},t.getFindAllNodesFailureDescription=function(d,p){if(!je)throw Error(o(363));var E=0,M=[];d=[Mu(d),0];for(var I=0;I<d.length;){var F=d[I++],$=d[I++],fe=p[$];if((F.tag!==5||!H(F))&&(Cu(F,fe)&&(M.push(va(fe)),$++,$>E&&(E=$)),$<p.length))for(F=F.child;F!==null;)d.push(F,$),F=F.sibling}if(E<p.length){for(d=[];E<p.length;E++)d.push(va(p[E]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return oe(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Zf,findFiberByHostInstance:d.findFiberByHostInstance||q0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)d=!0;else{try{iu=p.inject(d),Js=p}catch{}d=!!p.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,p,E,M){if(!je)throw Error(o(363));d=Oo(d,p);var I=Fe(d,E,M).disconnect;return{disconnect:function(){I()}}},t.registerMutableSourceForHydration=function(d,p){var E=p._getVersion;E=E(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,E]:d.mutableSourceEagerHydrationData.push(p,E)},t.runWithPriority=function(d,p){var E=un;try{return un=d,p()}finally{un=E}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,p,E,M){var I=p.current,F=Mn(),$=Ps(I);return E=J0(E),p.context===null?p.context=E:p.pendingContext=E,p=Mo(F,$),p.payload={element:d},M=M===void 0?null:M,M!==null&&(p.callback=M),ca(I,p),d=nr(I,$,F),d!==null&&df(d,I,$),$},t}),gw}var RR;function fj(){return RR||(RR=1,dw.exports=hj()),dw.exports}var dj=fj();const pj=uS(dj);var vw={exports:{}},yw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IR;function mj(){return IR||(IR=1,(function(i){function e(U,Z){var q=U.length;U.push(Z);e:for(;0<q;){var W=q-1>>>1,se=U[W];if(0<r(se,Z))U[W]=Z,U[q]=se,q=W;else break e}}function t(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var Z=U[0],q=U.pop();if(q!==Z){U[0]=q;e:for(var W=0,se=U.length,_e=se>>>1;W<_e;){var De=2*(W+1)-1,ze=U[De],de=De+1,ge=U[de];if(0>r(ze,q))de<se&&0>r(ge,ze)?(U[W]=ge,U[de]=q,W=de):(U[W]=ze,U[De]=q,W=De);else if(de<se&&0>r(ge,q))U[W]=ge,U[de]=q,W=de;else break e}}return Z}function r(U,Z){var q=U.sortIndex-Z.sortIndex;return q!==0?q:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var c=[],h=[],f=1,m=null,g=3,y=!1,_=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(U){for(var Z=t(h);Z!==null;){if(Z.callback===null)n(h);else if(Z.startTime<=U)n(h),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(h)}}function R(U){if(S=!1,T(U),!_)if(t(c)!==null)_=!0,oe(L);else{var Z=t(h);Z!==null&&ae(R,Z.startTime-U)}}function L(U,Z){_=!1,S&&(S=!1,x(O),O=-1),y=!0;var q=g;try{for(T(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||U&&!z());){var W=m.callback;if(typeof W=="function"){m.callback=null,g=m.priorityLevel;var se=W(m.expirationTime<=Z);Z=i.unstable_now(),typeof se=="function"?m.callback=se:m===t(c)&&n(c),T(Z)}else n(c);m=t(c)}if(m!==null)var _e=!0;else{var De=t(h);De!==null&&ae(R,De.startTime-Z),_e=!1}return _e}finally{m=null,g=q,y=!1}}var B=!1,k=null,O=-1,D=5,N=-1;function z(){return!(i.unstable_now()-N<D)}function ee(){if(k!==null){var U=i.unstable_now();N=U;var Z=!0;try{Z=k(!0,U)}finally{Z?te():(B=!1,k=null)}}else B=!1}var te;if(typeof C=="function")te=function(){C(ee)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,K=ce.port2;ce.port1.onmessage=ee,te=function(){K.postMessage(null)}}else te=function(){A(ee,0)};function oe(U){k=U,B||(B=!0,te())}function ae(U,Z){O=A(function(){U(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_continueExecution=function(){_||y||(_=!0,oe(L))},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(U){switch(g){case 1:case 2:case 3:var Z=3;break;default:Z=g}var q=g;g=Z;try{return U()}finally{g=q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=g;g=U;try{return Z()}finally{g=q}},i.unstable_scheduleCallback=function(U,Z,q){var W=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?W+q:W):q=W,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,U={id:f++,callback:Z,priorityLevel:U,startTime:q,expirationTime:se,sortIndex:-1},q>W?(U.sortIndex=q,e(h,U),t(c)===null&&U===t(h)&&(S?(x(O),O=-1):S=!0,ae(R,q-W))):(U.sortIndex=se,e(c,U),_||y||(_=!0,oe(L))),U},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(U){var Z=g;return function(){var q=g;g=Z;try{return U.apply(this,arguments)}finally{g=q}}}})(yw)),yw}var PR;function gj(){return PR||(PR=1,vw.exports=mj()),vw.exports}var LR=gj();const gM={},vj=i=>void Object.assign(gM,i);function yj(i,e){function t(f,{args:m=[],attach:g,...y},_){let S=`${f[0].toUpperCase()}${f.slice(1)}`,A;if(f==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=y.object;A=kd(x,{type:f,root:_,attach:g,primitive:!0})}else{const x=gM[S];if(!x)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");A=kd(new x(...m),{type:f,root:_,attach:g,memoizedProps:{args:m}})}return A.__r3f.attach===void 0&&(A.isBufferGeometry?A.__r3f.attach="geometry":A.isMaterial&&(A.__r3f.attach="material")),S!=="inject"&&Ew(A,y),A}function n(f,m){let g=!1;if(m){var y,_;(y=m.__r3f)!=null&&y.attach?xw(f,m,m.__r3f.attach):m.isObject3D&&f.isObject3D&&(f.add(m),g=!0),g||(_=f.__r3f)==null||_.objects.push(m),m.__r3f||kd(m,{}),m.__r3f.parent=f,j1(m),Ud(m)}}function r(f,m,g){let y=!1;if(m){var _,S;if((_=m.__r3f)!=null&&_.attach)xw(f,m,m.__r3f.attach);else if(m.isObject3D&&f.isObject3D){m.parent=f,m.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:m});const A=f.children.filter(C=>C!==m),x=A.indexOf(g);f.children=[...A.slice(0,x),m,...A.slice(x)],y=!0}y||(S=f.__r3f)==null||S.objects.push(m),m.__r3f||kd(m,{}),m.__r3f.parent=f,j1(m),Ud(m)}}function s(f,m,g=!1){f&&[...f].forEach(y=>o(m,y,g))}function o(f,m,g){if(m){var y,_,S;if(m.__r3f&&(m.__r3f.parent=null),(y=f.__r3f)!=null&&y.objects&&(f.__r3f.objects=f.__r3f.objects.filter(R=>R!==m)),(_=m.__r3f)!=null&&_.attach)OR(f,m,m.__r3f.attach);else if(m.isObject3D&&f.isObject3D){var A;f.remove(m),(A=m.__r3f)!=null&&A.root&&Cj(Zy(m),m)}const C=(S=m.__r3f)==null?void 0:S.primitive,T=!C&&(g===void 0?m.dispose!==null:g);if(!C){var x;s((x=m.__r3f)==null?void 0:x.objects,m,T),s(m.children,m,T)}if(delete m.__r3f,T&&m.dispose&&m.type!=="Scene"){const R=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?LR.unstable_scheduleCallback(LR.unstable_IdlePriority,R):R()}Ud(f)}}function a(f,m,g,y){var _;const S=(_=f.__r3f)==null?void 0:_.parent;if(!S)return;const A=t(m,g,f.__r3f.root);if(f.children){for(const x of f.children)x.__r3f&&n(A,x);f.children=f.children.filter(x=>!x.__r3f)}f.__r3f.objects.forEach(x=>n(A,x)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(S,f),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),n(S,A),A.raycast&&A.__r3f.eventCount&&Zy(A).getState().internal.interaction.push(A),[y,y.alternate].forEach(x=>{x!==null&&(x.stateNode=A,x.ref&&(typeof x.ref=="function"?x.ref(A):x.ref.current=A))})}const c=()=>{};return{reconciler:pj({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,m)=>{if(!m)return;const g=f.getState().scene;g.__r3f&&(g.__r3f.root=f,n(g,m))},removeChildFromContainer:(f,m)=>{m&&o(f.getState().scene,m)},insertInContainerBefore:(f,m,g)=>{if(!m||!g)return;const y=f.getState().scene;y.__r3f&&r(y,m,g)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var m;return!!((m=f?.__r3f)!=null?m:{}).handlers},prepareUpdate(f,m,g,y){var _;if(((_=f?.__r3f)!=null?_:{}).primitive&&y.object&&y.object!==f)return[!0];{const{args:A=[],children:x,...C}=y,{args:T=[],children:R,...L}=g;if(!Array.isArray(A))throw new Error("R3F: the args prop must be an array!");if(A.some((k,O)=>k!==T[O]))return[!0];const B=GD(f,C,L,!0);return B.changes.length?[!1,B]:null}},commitUpdate(f,[m,g],y,_,S,A){m?a(f,y,S,A):Ew(f,g)},commitMount(f,m,g,y){var _;const S=(_=f.__r3f)!=null?_:{};f.raycast&&S.handlers&&S.eventCount&&Zy(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>kd(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var m;const{attach:g,parent:y}=(m=f.__r3f)!=null?m:{};g&&y&&OR(y,f,g),f.isObject3D&&(f.visible=!1),Ud(f)},unhideInstance(f,m){var g;const{attach:y,parent:_}=(g=f.__r3f)!=null?g:{};y&&_&&xw(_,f,y),(f.isObject3D&&m.visible==null||m.visible)&&(f.visible=!0),Ud(f)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Yd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Zn.fun(performance.now)?performance.now:Zn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Zn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Zn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ew}}var DR,BR;const _w=i=>"colorSpace"in i||"outputColorSpace"in i,ND=()=>{var i;return(i=gM.ColorManagement)!=null?i:null},FD=i=>i&&i.isOrthographicCamera,_j=i=>i&&i.hasOwnProperty("current"),p0=typeof window<"u"&&((DR=window.document)!=null&&DR.createElement||((BR=window.navigator)==null?void 0:BR.product)==="ReactNative")?J.useLayoutEffect:J.useEffect;function OD(i){const e=J.useRef(i);return p0(()=>void(e.current=i),[i]),e}function xj({set:i}){return p0(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class kD extends J.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}kD.getDerivedStateFromError=()=>({error:!0});const UD="__default",NR=new Map,Ej=i=>i&&!!i.memoized&&!!i.changes;function zD(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const Ym=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()};function Zy(i){let e=i.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Zn={obj:i=>i===Object(i)&&!Zn.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Zn.str(i)||Zn.num(i)||Zn.boo(i))return i===e;const s=Zn.obj(i);if(s&&n==="reference")return i===e;const o=Zn.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let a;for(a in i)if(!(a in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(a in r?e:i)if(!Zn.equ(i[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:i)if(i[a]!==e[a])return!1;if(Zn.und(a)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function Aj(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function wj(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function kd(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function X1(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((s,o)=>s[o],i),{target:t,key:r}}else return{target:t,key:e}}const FR=/-\d+$/;function xw(i,e,t){if(Zn.str(t)){if(FR.test(t)){const s=t.replace(FR,""),{target:o,key:a}=X1(i,s);Array.isArray(o[a])||(o[a]=[])}const{target:n,key:r}=X1(i,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(i,e)}function OR(i,e,t){var n,r;if(Zn.str(t)){const{target:s,key:o}=X1(i,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(r=e.__r3f)==null||delete r.previousAttach}function GD(i,{children:e,key:t,ref:n,...r},{children:s,key:o,ref:a,...c}={},h=!1){const f=i.__r3f,m=Object.entries(r),g=[];if(h){const _=Object.keys(c);for(let S=0;S<_.length;S++)r.hasOwnProperty(_[S])||m.unshift([_[S],UD+"remove"])}m.forEach(([_,S])=>{var A;if((A=i.__r3f)!=null&&A.primitive&&_==="object"||Zn.equ(S,c[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return g.push([_,S,!0,[]]);let x=[];_.includes("-")&&(x=_.split("-")),g.push([_,S,!1,x]);for(const C in r){const T=r[C];C.startsWith(`${_}-`)&&g.push([C,T,!1,C.split("-")])}});const y={...r};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(y.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(y.attach=f.memoizedProps.attach),{memoized:y,changes:g}}function Ew(i,e){var t;const n=i.__r3f,r=n?.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=Ej(e)?e:GD(i,e),c=n?.eventCount;i.__r3f&&(i.__r3f.memoizedProps=o);for(let g=0;g<a.length;g++){let[y,_,S,A]=a[g];if(_w(i)){const R="srgb",L="srgb-linear";y==="encoding"?(y="colorSpace",_=_===3001?R:L):y==="outputEncoding"&&(y="outputColorSpace",_=_===3001?R:L)}let x=i,C=x[y];if(A.length&&(C=A.reduce((T,R)=>T[R],i),!(C&&C.set))){const[T,...R]=A.reverse();x=R.reverse().reduce((L,B)=>L[B],i),y=T}if(_===UD+"remove")if(x.constructor){let T=NR.get(x.constructor);T||(T=new x.constructor,NR.set(x.constructor,T)),_=T[y]}else _=0;if(S&&n)_?n.handlers[y]=_:delete n.handlers[y],n.eventCount=Object.keys(n.handlers).length;else if(C&&C.set&&(C.copy||C instanceof wh)){if(Array.isArray(_))C.fromArray?C.fromArray(_):C.set(..._);else if(C.copy&&_&&_.constructor&&C.constructor===_.constructor)C.copy(_);else if(_!==void 0){var h;const T=(h=C)==null?void 0:h.isColor;!T&&C.setScalar?C.setScalar(_):C instanceof wh&&_ instanceof wh?C.mask=_.mask:C.set(_),!ND()&&s&&!s.linear&&T&&C.convertSRGBToLinear()}}else{var f;if(x[y]=_,(f=x[y])!=null&&f.isTexture&&x[y].format===Br&&x[y].type===vo&&s){const T=x[y];_w(T)&&_w(s.gl)?T.colorSpace=s.gl.outputColorSpace:T.encoding=s.gl.outputEncoding}}Ud(i)}if(n&&n.parent&&i.raycast&&c!==n.eventCount){const g=Zy(i).getState().internal,y=g.interaction.indexOf(i);y>-1&&g.interaction.splice(y,1),n.eventCount&&g.interaction.push(i)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=i.__r3f)!=null&&t.parent&&j1(i),i}function Ud(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function j1(i){i.onUpdate==null||i.onUpdate(i)}function Sj(i,e){i.manual||(FD(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function My(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function Mj(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Yd.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Yd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Yd.ContinuousEventPriority;default:return Yd.DefaultEventPriority}}function HD(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function Cj(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{HD(t.capturedMap,e,n,r)})}function Tj(i){function e(c){const{internal:h}=i.getState(),f=c.offsetX-h.initialClick[0],m=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(f*f+m*m))}function t(c){return c.filter(h=>["Move","Over","Enter","Out","Leave"].some(f=>{var m;return(m=h.__r3f)==null?void 0:m.handlers["onPointer"+f]}))}function n(c,h){const f=i.getState(),m=new Set,g=[],y=h?h(f.internal.interaction):f.internal.interaction;for(let x=0;x<y.length;x++){const C=Ym(y[x]);C&&(C.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(c,f);function _(x){const C=Ym(x);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var T;C.events.compute==null||C.events.compute(c,C,(T=C.previousRoot)==null?void 0:T.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(x,!0):[]}let S=y.flatMap(_).sort((x,C)=>{const T=Ym(x.object),R=Ym(C.object);return!T||!R?x.distance-C.distance:R.events.priority-T.events.priority||x.distance-C.distance}).filter(x=>{const C=My(x);return m.has(C)?!1:(m.add(C),!0)});f.events.filter&&(S=f.events.filter(S,f));for(const x of S){let C=x.object;for(;C;){var A;(A=C.__r3f)!=null&&A.eventCount&&g.push({...x,eventObject:C}),C=C.parent}}if("pointerId"in c&&f.internal.capturedMap.has(c.pointerId))for(let x of f.internal.capturedMap.get(c.pointerId).values())m.has(My(x.intersection))||g.push(x.intersection);return g}function r(c,h,f,m){const g=i.getState();if(c.length){const y={stopped:!1};for(const _ of c){const S=Ym(_.object)||g,{raycaster:A,pointer:x,camera:C,internal:T}=S,R=new j(x.x,x.y,0).unproject(C),L=N=>{var z,ee;return(z=(ee=T.capturedMap.get(N))==null?void 0:ee.has(_.eventObject))!=null?z:!1},B=N=>{const z={intersection:_,target:h.target};T.capturedMap.has(N)?T.capturedMap.get(N).set(_.eventObject,z):T.capturedMap.set(N,new Map([[_.eventObject,z]])),h.target.setPointerCapture(N)},k=N=>{const z=T.capturedMap.get(N);z&&HD(T.capturedMap,_.eventObject,z,N)};let O={};for(let N in h){let z=h[N];typeof z!="function"&&(O[N]=z)}let D={..._,...O,pointer:x,intersections:c,stopped:y.stopped,delta:f,unprojectedPoint:R,ray:A.ray,camera:C,stopPropagation(){const N="pointerId"in h&&T.capturedMap.get(h.pointerId);if((!N||N.has(_.eventObject))&&(D.stopped=y.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(z=>z.eventObject===_.eventObject))){const z=c.slice(0,c.indexOf(_));s([...z,_])}},target:{hasPointerCapture:L,setPointerCapture:B,releasePointerCapture:k},currentTarget:{hasPointerCapture:L,setPointerCapture:B,releasePointerCapture:k},nativeEvent:h};if(m(D),y.stopped===!0)break}}return c}function s(c){const{internal:h}=i.getState();for(const f of h.hovered.values())if(!c.length||!c.find(m=>m.object===f.object&&m.index===f.index&&m.instanceId===f.instanceId)){const g=f.eventObject.__r3f,y=g?.handlers;if(h.hovered.delete(My(f)),g!=null&&g.eventCount){const _={...f,intersections:c};y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}}function o(c,h){for(let f=0;f<h.length;f++){const m=h[f].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function a(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:f}=i.getState();"pointerId"in h&&f.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(h.pointerId)&&(f.capturedMap.delete(h.pointerId),s([]))})}}return function(f){const{onPointerMissed:m,internal:g}=i.getState();g.lastEvent.current=f;const y=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",A=n(f,y?t:void 0),x=_?e(f):0;c==="onPointerDown"&&(g.initialClick=[f.offsetX,f.offsetY],g.initialHits=A.map(T=>T.eventObject)),_&&!A.length&&x<=2&&(o(f,g.interaction),m&&m(f)),y&&s(A);function C(T){const R=T.eventObject,L=R.__r3f,B=L?.handlers;if(L!=null&&L.eventCount)if(y){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const k=My(T),O=g.hovered.get(k);O?O.stopped&&T.stopPropagation():(g.hovered.set(k,T),B.onPointerOver==null||B.onPointerOver(T),B.onPointerEnter==null||B.onPointerEnter(T))}B.onPointerMove==null||B.onPointerMove(T)}else{const k=B[c];k?(!_||g.initialHits.includes(R))&&(o(f,g.interaction.filter(O=>!g.initialHits.includes(O))),k(T)):_&&g.initialHits.includes(R)&&o(f,g.interaction.filter(O=>!g.initialHits.includes(O)))}}r(A,f,x,C)}}return{handlePointer:a}}const VD=i=>!!(i!=null&&i.render),WD=J.createContext(null),bj=(i,e)=>{const t=rj((a,c)=>{const h=new j,f=new j,m=new j;function g(x=c().camera,C=f,T=c().size){const{width:R,height:L,top:B,left:k}=T,O=R/L;C.isVector3?m.copy(C):m.set(...C);const D=x.getWorldPosition(h).distanceTo(m);if(FD(x))return{width:R/x.zoom,height:L/x.zoom,top:B,left:k,factor:1,distance:D,aspect:O};{const N=x.fov*Math.PI/180,z=2*Math.tan(N/2)*D,ee=z*(R/L);return{width:ee,height:z,top:B,left:k,factor:R/ee,distance:D,aspect:O}}}let y;const _=x=>a(C=>({performance:{...C.performance,current:x}})),S=new Be;return{set:a,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>i(c(),x),advance:(x,C)=>e(x,C,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new lM,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();y&&clearTimeout(y),x.performance.current!==x.performance.min&&_(x.performance.min),y=setTimeout(()=>_(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:x=>a(C=>({...C,events:{...C.events,...x}})),setSize:(x,C,T,R,L)=>{const B=c().camera,k={width:x,height:C,top:R||0,left:L||0,updateStyle:T};a(O=>({size:k,viewport:{...O.viewport,...g(B,f,k)}}))},setDpr:x=>a(C=>{const T=zD(x);return{viewport:{...C.viewport,dpr:T,initialDpr:C.viewport.initialDpr||T}}}),setFrameloop:(x="always")=>{const C=c().clock;C.stop(),C.elapsedTime=0,x!=="never"&&(C.start(),C.elapsedTime=0),a(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:J.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,C,T)=>{const R=c().internal;return R.priority=R.priority+(C>0?1:0),R.subscribers.push({ref:x,priority:C,store:T}),R.subscribers=R.subscribers.sort((L,B)=>L.priority-B.priority),()=>{const L=c().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(C>0?1:0),L.subscribers=L.subscribers.filter(B=>B.ref!==x))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:c,viewport:h,gl:f,set:m}=t.getState();if(c.width!==r.width||c.height!==r.height||h.dpr!==s){var g;r=c,s=h.dpr,Sj(a,c),f.setPixelRatio(h.dpr);const y=(g=c.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(c.width,c.height,y)}a!==o&&(o=a,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>i(a)),t};let Cy,Rj=new Set,Ij=new Set,Pj=new Set;function Aw(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Km(i,e){switch(i){case"before":return Aw(Rj,e);case"after":return Aw(Ij,e);case"tail":return Aw(Pj,e)}}let ww,Sw;function Mw(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),ww=e.internal.subscribers,Cy=0;Cy<ww.length;Cy++)Sw=ww[Cy],Sw.ref.current(Sw.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Lj(i){let e=!1,t=!1,n,r,s;function o(h){r=requestAnimationFrame(o),e=!0,n=0,Km("before",h),t=!0;for(const m of i.values()){var f;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(n+=Mw(h,s))}if(t=!1,Km("after",h),n===0)return Km("tail",h),e=!1,cancelAnimationFrame(r)}function a(h,f=1){var m;if(!h)return i.forEach(g=>a(g.store.getState(),f));(m=h.gl.xr)!=null&&m.isPresenting||!h.internal.active||h.frameloop==="never"||(f>1?h.internal.frames=Math.min(60,h.internal.frames+f):t?h.internal.frames=2:h.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function c(h,f=!0,m,g){if(f&&Km("before",h),m)Mw(h,m,g);else for(const y of i.values())Mw(h,y.store.getState());f&&Km("after",h)}return{loop:o,invalidate:a,advance:c}}function XD(){const i=J.useContext(WD);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function _r(i=t=>t,e){return XD()(i,e)}function iE(i,e=0){const t=XD(),n=t.getState().internal.subscribe,r=OD(i);return p0(()=>n(r,e,t),[e,n,t]),null}const kR=new WeakMap;function jD(i,e){return function(t,...n){let r=kR.get(t);return r||(r=new t,kR.set(t,r)),i&&i(r),Promise.all(n.map(s=>new Promise((o,a)=>r.load(s,c=>{c.scene&&Object.assign(c,Aj(c.scene)),o(c)},e,c=>a(new Error(`Could not load ${s}: ${c?.message}`))))))}}function m0(i,e,t,n){const r=Array.isArray(e)?e:[e],s=oj(jD(t,n),[i,...r],{equal:Zn.equ});return Array.isArray(e)?s:s[0]}m0.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return aj(jD(t),[i,...n])};m0.clear=function(i,e){const t=Array.isArray(e)?e:[e];return lj([i,...t])};const wp=new Map,{invalidate:UR,advance:zR}=Lj(wp),{reconciler:tx,applyProps:Cd}=yj(wp,Mj),Td={objects:"shallow",strict:!1},Dj=(i,e)=>{const t=typeof i=="function"?i(e):i;return VD(t)?t:new mM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function Bj(i,e){const t=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(e){const{width:n,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:n,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:n,height:r,top:s,left:o}=i.parentElement.getBoundingClientRect();return{width:n,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Nj(i){const e=wp.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||bj(UR,zR),o=t||tx.createContainer(s,Yd.ConcurrentRoot,null,!1,null,"",r,null);e||wp.set(i,{fiber:o,store:s});let a,c=!1,h;return{configure(f={}){let{gl:m,size:g,scene:y,events:_,onCreated:S,shadows:A=!1,linear:x=!1,flat:C=!1,legacy:T=!1,orthographic:R=!1,frameloop:L="always",dpr:B=[1,2],performance:k,raycaster:O,camera:D,onPointerMissed:N}=f,z=s.getState(),ee=z.gl;z.gl||z.set({gl:ee=Dj(m,i)});let te=z.raycaster;te||z.set({raycaster:te=new fM});const{params:ce,...K}=O||{};if(Zn.equ(K,te,Td)||Cd(te,{...K}),Zn.equ(ce,te.params,Td)||Cd(te,{params:{...te.params,...ce}}),!z.camera||z.camera===h&&!Zn.equ(h,D,Td)){h=D;const q=D instanceof o0,W=q?D:R?new na(0,0,0,0,.1,1e3):new ei(75,0,.1,1e3);q||(W.position.z=5,D&&(Cd(W,D),("aspect"in D||"left"in D||"right"in D||"bottom"in D||"top"in D)&&(W.manual=!0,W.updateProjectionMatrix())),!z.camera&&!(D!=null&&D.rotation)&&W.lookAt(0,0,0)),z.set({camera:W}),te.camera=W}if(!z.scene){let q;y!=null&&y.isScene?q=y:(q=new Ox,y&&Cd(q,y)),z.set({scene:kd(q)})}if(!z.xr){var oe;const q=(_e,De)=>{const ze=s.getState();ze.frameloop!=="never"&&zR(_e,!0,ze,De)},W=()=>{const _e=s.getState();_e.gl.xr.enabled=_e.gl.xr.isPresenting,_e.gl.xr.setAnimationLoop(_e.gl.xr.isPresenting?q:null),_e.gl.xr.isPresenting||UR(_e)},se={connect(){const _e=s.getState().gl;_e.xr.addEventListener("sessionstart",W),_e.xr.addEventListener("sessionend",W)},disconnect(){const _e=s.getState().gl;_e.xr.removeEventListener("sessionstart",W),_e.xr.removeEventListener("sessionend",W)}};typeof((oe=ee.xr)==null?void 0:oe.addEventListener)=="function"&&se.connect(),z.set({xr:se})}if(ee.shadowMap){const q=ee.shadowMap.enabled,W=ee.shadowMap.type;if(ee.shadowMap.enabled=!!A,Zn.boo(A))ee.shadowMap.type=vg;else if(Zn.str(A)){var ae;const se={basic:HP,percentage:Ax,soft:vg,variance:Zo};ee.shadowMap.type=(ae=se[A])!=null?ae:vg}else Zn.obj(A)&&Object.assign(ee.shadowMap,A);(q!==ee.shadowMap.enabled||W!==ee.shadowMap.type)&&(ee.shadowMap.needsUpdate=!0)}const U=ND();U&&("enabled"in U?U.enabled=!T:"legacyMode"in U&&(U.legacyMode=T)),c||Cd(ee,{outputEncoding:x?3e3:3001,toneMapping:C?Ia:wx}),z.legacy!==T&&z.set(()=>({legacy:T})),z.linear!==x&&z.set(()=>({linear:x})),z.flat!==C&&z.set(()=>({flat:C})),m&&!Zn.fun(m)&&!VD(m)&&!Zn.equ(m,ee,Td)&&Cd(ee,m),_&&!z.events.handlers&&z.set({events:_(s)});const Z=Bj(i,g);return Zn.equ(Z,z.size,Td)||z.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),B&&z.viewport.dpr!==zD(B)&&z.setDpr(B),z.frameloop!==L&&z.setFrameloop(L),z.onPointerMissed||z.set({onPointerMissed:N}),k&&!Zn.equ(k,z.performance,Td)&&z.set(q=>({performance:{...q.performance,...k}})),a=S,c=!0,this},render(f){return c||this.configure(),tx.updateContainer(V.jsx(Fj,{store:s,children:f,onCreated:a,rootElement:i}),o,null,()=>{}),s},unmount(){YD(i)}}}function Fj({store:i,children:e,onCreated:t,rootElement:n}){return p0(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),V.jsx(WD.Provider,{value:i,children:e})}function YD(i,e){const t=wp.get(i),n=t?.fiber;if(n){const r=t?.store.getState();r&&(r.internal.active=!1),tx.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,a,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),wj(r),wp.delete(i)}catch{}},500)})}}tx.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:J.version});const Cw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Oj(i){const{handlePointer:e}=Tj(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(Cw).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=i.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,a])=>{const[c,h]=Cw[o];t.addEventListener(c,a,{passive:h})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[a]=Cw[s];n.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function GR(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function kj({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=J.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=J.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=i?typeof i=="number"?i:i.scroll:null,h=i?typeof i=="number"?i:i.resize:null,f=J.useRef(!1);J.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[m,g,y]=J.useMemo(()=>{const x=()=>{if(!a.current.element)return;const{left:C,top:T,width:R,height:L,bottom:B,right:k,x:O,y:D}=a.current.element.getBoundingClientRect(),N={left:C,top:T,width:R,height:L,bottom:B,right:k,x:O,y:D};a.current.element instanceof HTMLElement&&n&&(N.height=a.current.element.offsetHeight,N.width=a.current.element.offsetWidth),Object.freeze(N),f.current&&!Hj(a.current.lastBounds,N)&&o(a.current.lastBounds=N)};return[x,h?GR(x,h):x,c?GR(x,c):x]},[o,n,c,h]);function _(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",y,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function S(){a.current.element&&(a.current.resizeObserver=new r(y),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(x=>x.addEventListener("scroll",y,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const A=x=>{!x||x===a.current.element||(_(),a.current.element=x,a.current.scrollContainers=KD(x),S())};return zj(y,!!e),Uj(g),J.useEffect(()=>{_(),S()},[e,y,g]),J.useEffect(()=>_,[]),[A,s,m]}function Uj(i){J.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function zj(i,e){J.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function KD(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...KD(i.parentElement)]}const Gj=["x","y","top","bottom","left","right","width","height"],Hj=(i,e)=>Gj.every(t=>i[t]===e[t]);var Vj=Object.defineProperty,Wj=Object.defineProperties,Xj=Object.getOwnPropertyDescriptors,HR=Object.getOwnPropertySymbols,jj=Object.prototype.hasOwnProperty,Yj=Object.prototype.propertyIsEnumerable,VR=(i,e,t)=>e in i?Vj(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,WR=(i,e)=>{for(var t in e||(e={}))jj.call(e,t)&&VR(i,t,e[t]);if(HR)for(var t of HR(e))Yj.call(e,t)&&VR(i,t,e[t]);return i},Kj=(i,e)=>Wj(i,Xj(e)),XR,jR;typeof window<"u"&&((XR=window.document)!=null&&XR.createElement||((jR=window.navigator)==null?void 0:jR.product)==="ReactNative")?J.useLayoutEffect:J.useEffect;function JD(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=JD(n,e,t);if(r)return r;n=n.sibling}}function ZD(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const YR=console.error;console.error=function(){const i=[...arguments].join("");if(i?.startsWith("Warning:")&&i.includes("useContext")){console.error=YR;return}return YR.apply(this,arguments)};const vM=ZD(J.createContext(null));class qD extends J.Component{render(){return J.createElement(vM.Provider,{value:this._reactInternals},this.props.children)}}function Jj(){const i=J.useContext(vM);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=J.useId();return J.useMemo(()=>{for(const n of[i,i?.alternate]){if(!n)continue;const r=JD(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[i,e])}function Zj(){const i=Jj(),[e]=J.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==vM&&!e.has(r)&&e.set(r,J.useContext(ZD(r)))}t=t.return}return e}function qj(){const i=Zj();return J.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>J.createElement(e,null,J.createElement(t.Provider,Kj(WR({},n),{value:i.get(t)}))),e=>J.createElement(qD,WR({},e))),[i])}const Qj=J.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:o=Oj,eventSource:a,eventPrefix:c,shadows:h,linear:f,flat:m,legacy:g,orthographic:y,frameloop:_,dpr:S,performance:A,raycaster:x,camera:C,scene:T,onPointerMissed:R,onCreated:L,...B},k){J.useMemo(()=>vj($X),[]);const O=qj(),[D,N]=kj({scroll:!0,debounce:{scroll:50,resize:0},...n}),z=J.useRef(null),ee=J.useRef(null);J.useImperativeHandle(k,()=>z.current);const te=OD(R),[ce,K]=J.useState(!1),[oe,ae]=J.useState(!1);if(ce)throw ce;if(oe)throw oe;const U=J.useRef(null);p0(()=>{const q=z.current;N.width>0&&N.height>0&&q&&(U.current||(U.current=Nj(q)),U.current.configure({gl:s,events:o,shadows:h,linear:f,flat:m,legacy:g,orthographic:y,frameloop:_,dpr:S,performance:A,raycaster:x,camera:C,scene:T,size:N,onPointerMissed:(...W)=>te.current==null?void 0:te.current(...W),onCreated:W=>{W.events.connect==null||W.events.connect(a?_j(a)?a.current:a:ee.current),c&&W.setEvents({compute:(se,_e)=>{const De=se[c+"X"],ze=se[c+"Y"];_e.pointer.set(De/_e.size.width*2-1,-(ze/_e.size.height)*2+1),_e.raycaster.setFromCamera(_e.pointer,_e.camera)}}),L?.(W)}}),U.current.render(V.jsx(O,{children:V.jsx(kD,{set:ae,children:V.jsx(J.Suspense,{fallback:V.jsx(xj,{set:K}),children:e??null})})})))}),J.useEffect(()=>{const q=z.current;if(q)return()=>YD(q)},[]);const Z=a?"none":"auto";return V.jsx("div",{ref:ee,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...r},...B,children:V.jsx("div",{ref:D,style:{width:"100%",height:"100%"},children:V.jsx("canvas",{ref:z,style:{display:"block"},children:t})})})}),$j=J.forwardRef(function(e,t){return V.jsx(qD,{children:V.jsx(Qj,{...e,ref:t})})});function Yg(){return Yg=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Yg.apply(null,arguments)}const g0=new j,yM=new j,eY=new j,KR=new Be;function tY(i,e,t){const n=g0.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]}function nY(i,e){const t=g0.setFromMatrixPosition(i.matrixWorld),n=yM.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(eY);return r.angleTo(s)>Math.PI/2}function iY(i,e,t,n){const r=g0.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),KR.set(s.x,s.y),t.setFromCamera(KR,e);const o=t.intersectObjects(n,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function rY(i,e){if(e instanceof na)return e.zoom;if(e instanceof ei){const t=g0.setFromMatrixPosition(i.matrixWorld),n=yM.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1}function sY(i,e,t){if(e instanceof ei||e instanceof na){const n=g0.setFromMatrixPosition(i.matrixWorld),r=yM.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const Y1=i=>Math.abs(i)<1e-10?0:i;function QD(i,e,t=""){let n="matrix3d(";for(let r=0;r!==16;r++)n+=Y1(e[r]*i.elements[r])+(r!==15?",":")");return t+n}const oY=(i=>e=>QD(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),aY=(i=>(e,t)=>QD(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function lY(i){return i&&typeof i=="object"&&"current"in i}const cY=J.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:c,sprite:h=!1,transform:f=!1,occlude:m,onOcclude:g,castShadow:y,receiveShadow:_,material:S,geometry:A,zIndexRange:x=[16777271,0],calculatePosition:C=tY,as:T="div",wrapperClass:R,pointerEvents:L="auto",...B},k)=>{const{gl:O,camera:D,scene:N,size:z,raycaster:ee,events:te,viewport:ce}=_r(),[K]=J.useState(()=>document.createElement(T)),oe=J.useRef(),ae=J.useRef(null),U=J.useRef(0),Z=J.useRef([0,0]),q=J.useRef(null),W=J.useRef(null),se=a?.current||te.connected||O.domElement.parentNode,_e=J.useRef(null),De=J.useRef(!1),ze=J.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&lY(m[0]),[m]);J.useLayoutEffect(()=>{const He=O.domElement;m&&m==="blending"?(He.style.zIndex=`${Math.floor(x[0]/2)}`,He.style.position="absolute",He.style.pointerEvents="none"):(He.style.zIndex=null,He.style.position=null,He.style.pointerEvents=null)},[m]),J.useLayoutEffect(()=>{if(ae.current){const He=oe.current=r2.createRoot(K);if(N.updateMatrixWorld(),f)K.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const rt=C(ae.current,D,z);K.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${rt[0]}px,${rt[1]}px,0);transform-origin:0 0;`}return se&&(r?se.prepend(K):se.appendChild(K)),()=>{se&&se.removeChild(K),He.unmount()}}},[se,f]),J.useLayoutEffect(()=>{R&&(K.className=R)},[R]);const de=J.useMemo(()=>f?{position:"absolute",top:0,left:0,width:z.width,height:z.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-z.height/2,left:-z.width/2,width:z.width,height:z.height},...t},[t,s,o,z,f]),ge=J.useMemo(()=>({position:"absolute",pointerEvents:L}),[L]);J.useLayoutEffect(()=>{if(De.current=!1,f){var He;(He=oe.current)==null||He.render(J.createElement("div",{ref:q,style:de},J.createElement("div",{ref:W,style:ge},J.createElement("div",{ref:k,className:n,style:t,children:i}))))}else{var rt;(rt=oe.current)==null||rt.render(J.createElement("div",{ref:k,style:de,className:n,children:i}))}});const Ue=J.useRef(!0);iE(He=>{if(ae.current){D.updateMatrixWorld(),ae.current.updateWorldMatrix(!0,!1);const rt=f?Z.current:C(ae.current,D,z);if(f||Math.abs(U.current-D.zoom)>e||Math.abs(Z.current[0]-rt[0])>e||Math.abs(Z.current[1]-rt[1])>e){const zt=nY(ae.current,D);let Q=!1;ze&&(Array.isArray(m)?Q=m.map(Re=>Re.current):m!=="blending"&&(Q=[N]));const Oe=Ue.current;if(Q){const Re=iY(ae.current,D,ee,Q);Ue.current=Re&&!zt}else Ue.current=!zt;Oe!==Ue.current&&(g?g(!Ue.current):K.style.display=Ue.current?"block":"none");const Le=Math.floor(x[0]/2),Pe=m?ze?[x[0],Le]:[Le-1,0]:x;if(K.style.zIndex=`${sY(ae.current,D,Pe)}`,f){const[Re,Qe]=[z.width/2,z.height/2],Ve=D.projectionMatrix.elements[5]*Qe,{isOrthographicCamera:je,top:Rt,left:Dt,bottom:Y,right:H}=D,ve=oY(D.matrixWorldInverse),Ce=je?`scale(${Ve})translate(${Y1(-(H+Dt)/2)}px,${Y1((Rt+Y)/2)}px)`:`translateZ(${Ve}px)`;let Fe=ae.current.matrixWorld;h&&(Fe=D.matrixWorldInverse.clone().transpose().copyPosition(Fe).scale(ae.current.scale),Fe.elements[3]=Fe.elements[7]=Fe.elements[11]=0,Fe.elements[15]=1),K.style.width=z.width+"px",K.style.height=z.height+"px",K.style.perspective=je?"":`${Ve}px`,q.current&&W.current&&(q.current.style.transform=`${Ce}${ve}translate(${Re}px,${Qe}px)`,W.current.style.transform=aY(Fe,1/((c||10)/400)))}else{const Re=c===void 0?1:rY(ae.current,D)*c;K.style.transform=`translate3d(${rt[0]}px,${rt[1]}px,0) scale(${Re})`}Z.current=rt,U.current=D.zoom}}if(!ze&&_e.current&&!De.current)if(f){if(q.current){const rt=q.current.children[0];if(rt!=null&&rt.clientWidth&&rt!=null&&rt.clientHeight){const{isOrthographicCamera:zt}=D;if(zt||A)B.scale&&(Array.isArray(B.scale)?B.scale instanceof j?_e.current.scale.copy(B.scale.clone().divideScalar(1)):_e.current.scale.set(1/B.scale[0],1/B.scale[1],1/B.scale[2]):_e.current.scale.setScalar(1/B.scale));else{const Q=(c||10)/400,Oe=rt.clientWidth*Q,Le=rt.clientHeight*Q;_e.current.scale.set(Oe,Le,1)}De.current=!0}}}else{const rt=K.children[0];if(rt!=null&&rt.clientWidth&&rt!=null&&rt.clientHeight){const zt=1/ce.factor,Q=rt.clientWidth*zt,Oe=rt.clientHeight*zt;_e.current.scale.set(Q,Oe,1),De.current=!0}_e.current.lookAt(He.camera.position)}});const We=J.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return J.createElement("group",Yg({},B,{ref:ae}),m&&!ze&&J.createElement("mesh",{castShadow:y,receiveShadow:_,ref:_e},A||J.createElement("planeGeometry",null),S||J.createElement("shaderMaterial",{side:ks,vertexShader:We.vertexShader,fragmentShader:We.fragmentShader})))}),uY=parseInt(i0.replace(/\D+/g,""));function JR(i,e){if(e===_L)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Z_||e===DS){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)o.push(c);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(t)if(e===Z_)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var hY=Object.defineProperty,fY=(i,e,t)=>e in i?hY(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,dY=(i,e,t)=>(fY(i,e+"",t),t);class $D{constructor(){dY(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var pY=Object.defineProperty,mY=(i,e,t)=>e in i?pY(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ji=(i,e,t)=>(mY(i,typeof e!="symbol"?e+"":e,t),t);const bd=new ws(0,0,0,"YXZ"),Rd=new j,gY={type:"change"},vY={type:"lock"},yY={type:"unlock"},ZR=.002,qR=Math.PI/2;let _Y=class extends $D{constructor(e,t){super(),ji(this,"camera"),ji(this,"domElement"),ji(this,"isLocked"),ji(this,"minPolarAngle"),ji(this,"maxPolarAngle"),ji(this,"pointerSpeed"),ji(this,"onMouseMove",n=>{!this.domElement||this.isLocked===!1||(bd.setFromQuaternion(this.camera.quaternion),bd.y-=n.movementX*ZR*this.pointerSpeed,bd.x-=n.movementY*ZR*this.pointerSpeed,bd.x=Math.max(qR-this.maxPolarAngle,Math.min(qR-this.minPolarAngle,bd.x)),this.camera.quaternion.setFromEuler(bd),this.dispatchEvent(gY))}),ji(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(vY),this.isLocked=!0):(this.dispatchEvent(yY),this.isLocked=!1))}),ji(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),ji(this,"connect",n=>{this.domElement=n||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),ji(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),ji(this,"dispose",()=>{this.disconnect()}),ji(this,"getObject",()=>this.camera),ji(this,"direction",new j(0,0,-1)),ji(this,"getDirection",n=>n.copy(this.direction).applyQuaternion(this.camera.quaternion)),ji(this,"moveForward",n=>{Rd.setFromMatrixColumn(this.camera.matrix,0),Rd.crossVectors(this.camera.up,Rd),this.camera.position.addScaledVector(Rd,n)}),ji(this,"moveRight",n=>{Rd.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(Rd,n)}),ji(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),ji(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,t&&this.connect(t)}};var xY=Object.defineProperty,EY=(i,e,t)=>e in i?xY(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Wt=(i,e,t)=>(EY(i,typeof e!="symbol"?e+"":e,t),t);const Ty=new Vh,QR=new Tl,AY=Math.cos(70*(Math.PI/180)),$R=(i,e)=>(i%e+e)%e;let wY=class extends $D{constructor(e,t){super(),Wt(this,"object"),Wt(this,"domElement"),Wt(this,"enabled",!0),Wt(this,"target",new j),Wt(this,"minDistance",0),Wt(this,"maxDistance",1/0),Wt(this,"minZoom",0),Wt(this,"maxZoom",1/0),Wt(this,"minPolarAngle",0),Wt(this,"maxPolarAngle",Math.PI),Wt(this,"minAzimuthAngle",-1/0),Wt(this,"maxAzimuthAngle",1/0),Wt(this,"enableDamping",!1),Wt(this,"dampingFactor",.05),Wt(this,"enableZoom",!0),Wt(this,"zoomSpeed",1),Wt(this,"enableRotate",!0),Wt(this,"rotateSpeed",1),Wt(this,"enablePan",!0),Wt(this,"panSpeed",1),Wt(this,"screenSpacePanning",!0),Wt(this,"keyPanSpeed",7),Wt(this,"zoomToCursor",!1),Wt(this,"autoRotate",!1),Wt(this,"autoRotateSpeed",2),Wt(this,"reverseOrbit",!1),Wt(this,"reverseHorizontalOrbit",!1),Wt(this,"reverseVerticalOrbit",!1),Wt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Wt(this,"mouseButtons",{LEFT:sh.ROTATE,MIDDLE:sh.DOLLY,RIGHT:sh.PAN}),Wt(this,"touches",{ONE:oh.ROTATE,TWO:oh.DOLLY_PAN}),Wt(this,"target0"),Wt(this,"position0"),Wt(this,"zoom0"),Wt(this,"_domElementKeyEvents",null),Wt(this,"getPolarAngle"),Wt(this,"getAzimuthalAngle"),Wt(this,"setPolarAngle"),Wt(this,"setAzimuthalAngle"),Wt(this,"getDistance"),Wt(this,"getZoomScale"),Wt(this,"listenToKeyEvents"),Wt(this,"stopListenToKeyEvents"),Wt(this,"saveState"),Wt(this,"reset"),Wt(this,"update"),Wt(this,"connect"),Wt(this,"dispose"),Wt(this,"dollyIn"),Wt(this,"dollyOut"),Wt(this,"getScale"),Wt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=ie=>{let xe=$R(ie,2*Math.PI),tt=f.phi;tt<0&&(tt+=2*Math.PI),xe<0&&(xe+=2*Math.PI);let re=Math.abs(xe-tt);2*Math.PI-re<re&&(xe<tt?xe+=2*Math.PI:tt+=2*Math.PI),m.phi=xe-tt,n.update()},this.setAzimuthalAngle=ie=>{let xe=$R(ie,2*Math.PI),tt=f.theta;tt<0&&(tt+=2*Math.PI),xe<0&&(xe+=2*Math.PI);let re=Math.abs(xe-tt);2*Math.PI-re<re&&(xe<tt?xe+=2*Math.PI:tt+=2*Math.PI),m.theta=xe-tt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ie=>{ie.addEventListener("keydown",be),this._domElementKeyEvents=ie},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",be),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),c=a.NONE},this.update=(()=>{const ie=new j,xe=new j(0,1,0),tt=new ar().setFromUnitVectors(e.up,xe),re=tt.clone().invert(),Ge=new j,Je=new ar,ot=2*Math.PI;return function(){const ke=n.object.position;tt.setFromUnitVectors(e.up,xe),re.copy(tt).invert(),ie.copy(ke).sub(n.target),ie.applyQuaternion(tt),f.setFromVector3(ie),n.autoRotate&&c===a.NONE&&ce(ee()),n.enableDamping?(f.theta+=m.theta*n.dampingFactor,f.phi+=m.phi*n.dampingFactor):(f.theta+=m.theta,f.phi+=m.phi);let ct=n.minAzimuthAngle,Bt=n.maxAzimuthAngle;isFinite(ct)&&isFinite(Bt)&&(ct<-Math.PI?ct+=ot:ct>Math.PI&&(ct-=ot),Bt<-Math.PI?Bt+=ot:Bt>Math.PI&&(Bt-=ot),ct<=Bt?f.theta=Math.max(ct,Math.min(Bt,f.theta)):f.theta=f.theta>(ct+Bt)/2?Math.max(ct,f.theta):Math.min(Bt,f.theta)),f.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,f.phi)),f.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&D||n.object.isOrthographicCamera?f.radius=_e(f.radius):f.radius=_e(f.radius*g),ie.setFromSpherical(f),ie.applyQuaternion(re),ke.copy(n.target).add(ie),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let mn=!1;if(n.zoomToCursor&&D){let nn=null;if(n.object instanceof ei&&n.object.isPerspectiveCamera){const Ai=ie.length();nn=_e(Ai*g);const ci=Ai-nn;n.object.position.addScaledVector(k,ci),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Ai=new j(O.x,O.y,0);Ai.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix(),mn=!0;const ci=new j(O.x,O.y,0);ci.unproject(n.object),n.object.position.sub(ci).add(Ai),n.object.updateMatrixWorld(),nn=ie.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;nn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(nn).add(n.object.position):(Ty.origin.copy(n.object.position),Ty.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Ty.direction))<AY?e.lookAt(n.target):(QR.setFromNormalAndCoplanarPoint(n.object.up,n.target),Ty.intersectPlane(QR,n.target))))}else n.object instanceof na&&n.object.isOrthographicCamera&&(mn=g!==1,mn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix()));return g=1,D=!1,mn||Ge.distanceToSquared(n.object.position)>h||8*(1-Je.dot(n.object.quaternion))>h?(n.dispatchEvent(r),Ge.copy(n.object.position),Je.copy(n.object.quaternion),mn=!1,!0):!1}})(),this.connect=ie=>{n.domElement=ie,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",gt),n.domElement.addEventListener("pointerdown",Dt),n.domElement.addEventListener("pointercancel",H),n.domElement.addEventListener("wheel",Fe)},this.dispose=()=>{var ie,xe,tt,re,Ge,Je;n.domElement&&(n.domElement.style.touchAction="auto"),(ie=n.domElement)==null||ie.removeEventListener("contextmenu",gt),(xe=n.domElement)==null||xe.removeEventListener("pointerdown",Dt),(tt=n.domElement)==null||tt.removeEventListener("pointercancel",H),(re=n.domElement)==null||re.removeEventListener("wheel",Fe),(Ge=n.domElement)==null||Ge.ownerDocument.removeEventListener("pointermove",Y),(Je=n.domElement)==null||Je.ownerDocument.removeEventListener("pointerup",H),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",be)};const n=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=a.NONE;const h=1e-6,f=new G1,m=new G1;let g=1;const y=new j,_=new Be,S=new Be,A=new Be,x=new Be,C=new Be,T=new Be,R=new Be,L=new Be,B=new Be,k=new j,O=new Be;let D=!1;const N=[],z={};function ee(){return 2*Math.PI/60/60*n.autoRotateSpeed}function te(){return Math.pow(.95,n.zoomSpeed)}function ce(ie){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=ie:m.theta-=ie}function K(ie){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=ie:m.phi-=ie}const oe=(()=>{const ie=new j;return function(tt,re){ie.setFromMatrixColumn(re,0),ie.multiplyScalar(-tt),y.add(ie)}})(),ae=(()=>{const ie=new j;return function(tt,re){n.screenSpacePanning===!0?ie.setFromMatrixColumn(re,1):(ie.setFromMatrixColumn(re,0),ie.crossVectors(n.object.up,ie)),ie.multiplyScalar(tt),y.add(ie)}})(),U=(()=>{const ie=new j;return function(tt,re){const Ge=n.domElement;if(Ge&&n.object instanceof ei&&n.object.isPerspectiveCamera){const Je=n.object.position;ie.copy(Je).sub(n.target);let ot=ie.length();ot*=Math.tan(n.object.fov/2*Math.PI/180),oe(2*tt*ot/Ge.clientHeight,n.object.matrix),ae(2*re*ot/Ge.clientHeight,n.object.matrix)}else Ge&&n.object instanceof na&&n.object.isOrthographicCamera?(oe(tt*(n.object.right-n.object.left)/n.object.zoom/Ge.clientWidth,n.object.matrix),ae(re*(n.object.top-n.object.bottom)/n.object.zoom/Ge.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function Z(ie){n.object instanceof ei&&n.object.isPerspectiveCamera||n.object instanceof na&&n.object.isOrthographicCamera?g=ie:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function q(ie){Z(g/ie)}function W(ie){Z(g*ie)}function se(ie){if(!n.zoomToCursor||!n.domElement)return;D=!0;const xe=n.domElement.getBoundingClientRect(),tt=ie.clientX-xe.left,re=ie.clientY-xe.top,Ge=xe.width,Je=xe.height;O.x=tt/Ge*2-1,O.y=-(re/Je)*2+1,k.set(O.x,O.y,1).unproject(n.object).sub(n.object.position).normalize()}function _e(ie){return Math.max(n.minDistance,Math.min(n.maxDistance,ie))}function De(ie){_.set(ie.clientX,ie.clientY)}function ze(ie){se(ie),R.set(ie.clientX,ie.clientY)}function de(ie){x.set(ie.clientX,ie.clientY)}function ge(ie){S.set(ie.clientX,ie.clientY),A.subVectors(S,_).multiplyScalar(n.rotateSpeed);const xe=n.domElement;xe&&(ce(2*Math.PI*A.x/xe.clientHeight),K(2*Math.PI*A.y/xe.clientHeight)),_.copy(S),n.update()}function Ue(ie){L.set(ie.clientX,ie.clientY),B.subVectors(L,R),B.y>0?q(te()):B.y<0&&W(te()),R.copy(L),n.update()}function We(ie){C.set(ie.clientX,ie.clientY),T.subVectors(C,x).multiplyScalar(n.panSpeed),U(T.x,T.y),x.copy(C),n.update()}function He(ie){se(ie),ie.deltaY<0?W(te()):ie.deltaY>0&&q(te()),n.update()}function rt(ie){let xe=!1;switch(ie.code){case n.keys.UP:U(0,n.keyPanSpeed),xe=!0;break;case n.keys.BOTTOM:U(0,-n.keyPanSpeed),xe=!0;break;case n.keys.LEFT:U(n.keyPanSpeed,0),xe=!0;break;case n.keys.RIGHT:U(-n.keyPanSpeed,0),xe=!0;break}xe&&(ie.preventDefault(),n.update())}function zt(){if(N.length==1)_.set(N[0].pageX,N[0].pageY);else{const ie=.5*(N[0].pageX+N[1].pageX),xe=.5*(N[0].pageY+N[1].pageY);_.set(ie,xe)}}function Q(){if(N.length==1)x.set(N[0].pageX,N[0].pageY);else{const ie=.5*(N[0].pageX+N[1].pageX),xe=.5*(N[0].pageY+N[1].pageY);x.set(ie,xe)}}function Oe(){const ie=N[0].pageX-N[1].pageX,xe=N[0].pageY-N[1].pageY,tt=Math.sqrt(ie*ie+xe*xe);R.set(0,tt)}function Le(){n.enableZoom&&Oe(),n.enablePan&&Q()}function Pe(){n.enableZoom&&Oe(),n.enableRotate&&zt()}function Re(ie){if(N.length==1)S.set(ie.pageX,ie.pageY);else{const tt=Ot(ie),re=.5*(ie.pageX+tt.x),Ge=.5*(ie.pageY+tt.y);S.set(re,Ge)}A.subVectors(S,_).multiplyScalar(n.rotateSpeed);const xe=n.domElement;xe&&(ce(2*Math.PI*A.x/xe.clientHeight),K(2*Math.PI*A.y/xe.clientHeight)),_.copy(S)}function Qe(ie){if(N.length==1)C.set(ie.pageX,ie.pageY);else{const xe=Ot(ie),tt=.5*(ie.pageX+xe.x),re=.5*(ie.pageY+xe.y);C.set(tt,re)}T.subVectors(C,x).multiplyScalar(n.panSpeed),U(T.x,T.y),x.copy(C)}function Ve(ie){const xe=Ot(ie),tt=ie.pageX-xe.x,re=ie.pageY-xe.y,Ge=Math.sqrt(tt*tt+re*re);L.set(0,Ge),B.set(0,Math.pow(L.y/R.y,n.zoomSpeed)),q(B.y),R.copy(L)}function je(ie){n.enableZoom&&Ve(ie),n.enablePan&&Qe(ie)}function Rt(ie){n.enableZoom&&Ve(ie),n.enableRotate&&Re(ie)}function Dt(ie){var xe,tt;n.enabled!==!1&&(N.length===0&&((xe=n.domElement)==null||xe.ownerDocument.addEventListener("pointermove",Y),(tt=n.domElement)==null||tt.ownerDocument.addEventListener("pointerup",H)),At(ie),ie.pointerType==="touch"?Et(ie):ve(ie))}function Y(ie){n.enabled!==!1&&(ie.pointerType==="touch"?et(ie):Ce(ie))}function H(ie){var xe,tt,re;Ke(ie),N.length===0&&((xe=n.domElement)==null||xe.releasePointerCapture(ie.pointerId),(tt=n.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",Y),(re=n.domElement)==null||re.ownerDocument.removeEventListener("pointerup",H)),n.dispatchEvent(o),c=a.NONE}function ve(ie){let xe;switch(ie.button){case 0:xe=n.mouseButtons.LEFT;break;case 1:xe=n.mouseButtons.MIDDLE;break;case 2:xe=n.mouseButtons.RIGHT;break;default:xe=-1}switch(xe){case sh.DOLLY:if(n.enableZoom===!1)return;ze(ie),c=a.DOLLY;break;case sh.ROTATE:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(n.enablePan===!1)return;de(ie),c=a.PAN}else{if(n.enableRotate===!1)return;De(ie),c=a.ROTATE}break;case sh.PAN:if(ie.ctrlKey||ie.metaKey||ie.shiftKey){if(n.enableRotate===!1)return;De(ie),c=a.ROTATE}else{if(n.enablePan===!1)return;de(ie),c=a.PAN}break;default:c=a.NONE}c!==a.NONE&&n.dispatchEvent(s)}function Ce(ie){if(n.enabled!==!1)switch(c){case a.ROTATE:if(n.enableRotate===!1)return;ge(ie);break;case a.DOLLY:if(n.enableZoom===!1)return;Ue(ie);break;case a.PAN:if(n.enablePan===!1)return;We(ie);break}}function Fe(ie){n.enabled===!1||n.enableZoom===!1||c!==a.NONE&&c!==a.ROTATE||(ie.preventDefault(),n.dispatchEvent(s),He(ie),n.dispatchEvent(o))}function be(ie){n.enabled===!1||n.enablePan===!1||rt(ie)}function Et(ie){switch(lt(ie),N.length){case 1:switch(n.touches.ONE){case oh.ROTATE:if(n.enableRotate===!1)return;zt(),c=a.TOUCH_ROTATE;break;case oh.PAN:if(n.enablePan===!1)return;Q(),c=a.TOUCH_PAN;break;default:c=a.NONE}break;case 2:switch(n.touches.TWO){case oh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Le(),c=a.TOUCH_DOLLY_PAN;break;case oh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Pe(),c=a.TOUCH_DOLLY_ROTATE;break;default:c=a.NONE}break;default:c=a.NONE}c!==a.NONE&&n.dispatchEvent(s)}function et(ie){switch(lt(ie),c){case a.TOUCH_ROTATE:if(n.enableRotate===!1)return;Re(ie),n.update();break;case a.TOUCH_PAN:if(n.enablePan===!1)return;Qe(ie),n.update();break;case a.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;je(ie),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Rt(ie),n.update();break;default:c=a.NONE}}function gt(ie){n.enabled!==!1&&ie.preventDefault()}function At(ie){N.push(ie)}function Ke(ie){delete z[ie.pointerId];for(let xe=0;xe<N.length;xe++)if(N[xe].pointerId==ie.pointerId){N.splice(xe,1);return}}function lt(ie){let xe=z[ie.pointerId];xe===void 0&&(xe=new Be,z[ie.pointerId]=xe),xe.set(ie.pageX,ie.pageY)}function Ot(ie){const xe=ie.pointerId===N[0].pointerId?N[1]:N[0];return z[xe.pointerId]}this.dollyIn=(ie=te())=>{W(ie),n.update()},this.dollyOut=(ie=te())=>{q(ie),n.update()},this.getScale=()=>g,this.setScale=ie=>{Z(ie),n.update()},this.getZoomScale=()=>te(),t!==void 0&&this.connect(t),this.update()}};function nx(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const gh="srgb",Ol="srgb-linear",eI=3001,SY=3e3;class _M extends Or{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new RY(t)}),this.register(function(t){return new IY(t)}),this.register(function(t){return new UY(t)}),this.register(function(t){return new zY(t)}),this.register(function(t){return new GY(t)}),this.register(function(t){return new LY(t)}),this.register(function(t){return new DY(t)}),this.register(function(t){return new BY(t)}),this.register(function(t){return new NY(t)}),this.register(function(t){return new bY(t)}),this.register(function(t){return new FY(t)}),this.register(function(t){return new PY(t)}),this.register(function(t){return new kY(t)}),this.register(function(t){return new OY(t)}),this.register(function(t){return new CY(t)}),this.register(function(t){return new HY(t)}),this.register(function(t){return new VY(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const h=Xc.extractUrlBase(e);o=Xc.resolveURL(h,this.path)}else o=Xc.extractUrlBase(e);this.manager.itemStart(e);const a=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Ws(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{s.parse(h,o,function(f){t(f),s.manager.itemEnd(e)},a)}catch(f){a(f)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(nx(new Uint8Array(e.slice(0,4)))===eB){try{o[vn.KHR_BINARY_GLTF]=new WY(e)}catch(f){r&&r(f);return}s=JSON.parse(o[vn.KHR_BINARY_GLTF].content)}else s=JSON.parse(nx(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new i7(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const f=this.pluginCallbacks[h](c);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[f.name]=f,o[f.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const f=s.extensionsUsed[h],m=s.extensionsRequired||[];switch(f){case vn.KHR_MATERIALS_UNLIT:o[f]=new TY;break;case vn.KHR_DRACO_MESH_COMPRESSION:o[f]=new XY(s,this.dracoLoader);break;case vn.KHR_TEXTURE_TRANSFORM:o[f]=new jY;break;case vn.KHR_MESH_QUANTIZATION:o[f]=new YY;break;default:m.indexOf(f)>=0&&a[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function MY(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const vn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class CY{constructor(e){this.parser=e,this.name=vn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const f=new ft(16777215);c.color!==void 0&&f.setRGB(c.color[0],c.color[1],c.color[2],Ol);const m=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new jg(f),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new sM(f),h.distance=m;break;case"spot":h=new rM(f),h.distance=m,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,Cl(h,c),c.intensity!==void 0&&(h.intensity=c.intensity),h.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(h),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return n._getNodeRef(t.cache,a,c)})}}class TY{constructor(){this.name=vn.KHR_MATERIALS_UNLIT}getMaterialType(){return Gs}extendParams(e,t,n){const r=[];e.color=new ft(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Ol),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,gh))}return Promise.all(r)}}class bY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class RY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Be(a,a)}return Promise.all(s)}}class IY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class PY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class LY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ft(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Ol)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,gh)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class DY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class BY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ft().setRGB(a[0],a[1],a[2],Ol),Promise.all(s)}}class NY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class FY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ft().setRGB(a[0],a[1],a[2],Ol),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,gh)),Promise.all(s)}}class OY{constructor(e){this.parser=e,this.name=vn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class kY{constructor(e){this.parser=e,this.name=vn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:xo}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class UY{constructor(e){this.parser=e,this.name=vn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class zY{constructor(e){this.parser=e,this.name=vn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=n.textureLoader;if(a.uri){const h=n.options.manager.getHandler(a.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class GY{constructor(e){this.parser=e,this.name=vn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=n.textureLoader;if(a.uri){const h=n.options.manager.getHandler(a.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class HY{constructor(e){this.name=vn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const c=r.byteOffset||0,h=r.byteLength||0,f=r.count,m=r.byteStride,g=new Uint8Array(a,c,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,m,g,r.mode,r.filter).then(function(y){return y.buffer}):o.ready.then(function(){const y=new ArrayBuffer(f*m);return o.decodeGltfBuffer(new Uint8Array(y),f,m,g,r.mode,r.filter),y})})}else return null}}class VY{constructor(e){this.name=vn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const h of r.primitives)if(h.mode!==so.TRIANGLES&&h.mode!==so.TRIANGLE_STRIP&&h.mode!==so.TRIANGLE_FAN&&h.mode!==void 0)return null;const o=n.extensions[this.name].attributes,a=[],c={};for(const h in o)a.push(this.parser.getDependency("accessor",o[h]).then(f=>(c[h]=f,c[h])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(h=>{const f=h.pop(),m=f.isGroup?f.children:[f],g=h[0].count,y=[];for(const _ of m){const S=new jt,A=new j,x=new ar,C=new j(1,1,1),T=new GS(_.geometry,_.material,g);for(let R=0;R<g;R++)c.TRANSLATION&&A.fromBufferAttribute(c.TRANSLATION,R),c.ROTATION&&x.fromBufferAttribute(c.ROTATION,R),c.SCALE&&C.fromBufferAttribute(c.SCALE,R),T.setMatrixAt(R,S.compose(A,x,C));for(const R in c)if(R==="_COLOR_0"){const L=c[R];T.instanceColor=new Bh(L.array,L.itemSize,L.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&_.geometry.setAttribute(R,c[R]);Sn.prototype.copy.call(T,_),this.parser.assignFinalMaterial(T),y.push(T)}return f.isGroup?(f.clear(),f.add(...y),f):y[0]}))}}const eB="glTF",Jm=12,tI={JSON:1313821514,BIN:5130562};class WY{constructor(e){this.name=vn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Jm);if(this.header={magic:nx(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==eB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Jm,r=new DataView(e,Jm);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===tI.JSON){const c=new Uint8Array(e,Jm+s,o);this.content=nx(c)}else if(a===tI.BIN){const c=Jm+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class XY{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=vn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},h={};for(const f in o){const m=K1[f]||f.toLowerCase();a[m]=o[f]}for(const f in e.attributes){const m=K1[f]||f.toLowerCase();if(o[f]!==void 0){const g=n.accessors[e.attributes[f]],y=$d[g.componentType];h[m]=y.name,c[m]=g.normalized===!0}}return t.getDependency("bufferView",s).then(function(f){return new Promise(function(m,g){r.decodeDracoFile(f,function(y){for(const _ in y.attributes){const S=y.attributes[_],A=c[_];A!==void 0&&(S.normalized=A)}m(y)},a,h,Ol,g)})})}}class jY{constructor(){this.name=vn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class YY{constructor(){this.name=vn.KHR_MESH_QUANTIZATION}}class tB extends Bp{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=a*2,h=a*3,f=r-t,m=(n-t)/f,g=m*m,y=g*m,_=e*h,S=_-h,A=-2*y+3*g,x=y-g,C=1-A,T=x-g+m;for(let R=0;R!==a;R++){const L=o[S+R+a],B=o[S+R+c]*f,k=o[_+R+a],O=o[_+R]*f;s[R]=C*L+T*B+A*k+x*O}return s}}const KY=new ar;class JY extends tB{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return KY.fromArray(s).normalize().toArray(s),s}}const so={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},$d={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},nI={9728:or,9729:Ti,9984:Mx,9985:qd,9986:hh,9987:ho},iI={33071:Us,33648:hp,10497:Kc},Tw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},K1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...uY>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ZY={CUBICSPLINE:void 0,LINEAR:vp,STEP:gp},bw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function qY(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Zc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:La})),i.DefaultMaterial}function nh(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Cl(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function QY(i,e,t){let n=!1,r=!1,s=!1;for(let h=0,f=e.length;h<f;h++){const m=e[h];if(m.POSITION!==void 0&&(n=!0),m.NORMAL!==void 0&&(r=!0),m.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],c=[];for(let h=0,f=e.length;h<f;h++){const m=e[h];if(n){const g=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):i.attributes.position;o.push(g)}if(r){const g=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):i.attributes.normal;a.push(g)}if(s){const g=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):i.attributes.color;c.push(g)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(h){const f=h[0],m=h[1],g=h[2];return n&&(i.morphAttributes.position=f),r&&(i.morphAttributes.normal=m),s&&(i.morphAttributes.color=g),i.morphTargetsRelative=!0,i})}function $Y(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function e7(i){let e;const t=i.extensions&&i.extensions[vn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Rw(t.attributes):e=i.indices+":"+Rw(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+Rw(i.targets[n]);return e}function Rw(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function J1(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function t7(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const n7=new jt;class i7{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new MY,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new Xg(this.options.manager):this.textureLoader=new ED(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ws(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return nh(s,a,r),Cl(a,r),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(const c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const c=this.associations.get(o);c!=null&&this.associations.set(a,c);for(const[h,f]of o.children.entries())s(f,a.children[h])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[vn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Xc.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=Tw[r.type],a=$d[r.componentType],c=r.normalized===!0,h=new a(r.count*o);return Promise.resolve(new Pn(h,o,c))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=Tw[r.type],h=$d[r.componentType],f=h.BYTES_PER_ELEMENT,m=f*c,g=r.byteOffset||0,y=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,_=r.normalized===!0;let S,A;if(y&&y!==m){const x=Math.floor(g/y),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+x+":"+r.count;let T=t.cache.get(C);T||(S=new h(a,x*y,r.count*y/f),T=new l0(S,y/f),t.cache.add(C,T)),A=new Jc(T,c,g%y/f,_)}else a===null?S=new h(r.count*c):S=new h(a,g,r.count*c),A=new Pn(S,c,_);if(r.sparse!==void 0){const x=Tw.SCALAR,C=$d[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,R=r.sparse.values.byteOffset||0,L=new C(o[1],T,r.sparse.count*x),B=new h(o[2],R,r.sparse.count*c);a!==null&&(A=new Pn(A.array.slice(),A.itemSize,A.normalized));for(let k=0,O=L.length;k<O;k++){const D=L[k];if(A.setX(D,B[k*c]),c>=2&&A.setY(D,B[k*c+1]),c>=3&&A.setZ(D,B[k*c+2]),c>=4&&A.setW(D,B[k*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=n.manager.getHandler(o.uri);c!==null&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const h=this.loadImageSource(t,n).then(function(f){f.flipY=!1,f.name=o.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);const g=(s.samplers||{})[o.sampler]||{};return f.magFilter=nI[g.magFilter]||Ti,f.minFilter=nI[g.minFilter]||ho,f.wrapS=iI[g.wrapS]||Kc,f.wrapT=iI[g.wrapT]||Kc,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[c]=h,h}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",h=!1;if(o.bufferView!==void 0)c=n.getDependency("bufferView",o.bufferView).then(function(m){h=!0;const g=new Blob([m],{type:o.mimeType});return c=a.createObjectURL(g),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(c).then(function(m){return new Promise(function(g,y){let _=g;t.isImageBitmapLoader===!0&&(_=function(S){const A=new li(S);A.needsUpdate=!0,g(A)}),t.load(Xc.resolveURL(m,s.path),_,void 0,y)})}).then(function(m){return h===!0&&a.revokeObjectURL(c),Cl(m,o),m.userData.mimeType=o.mimeType||t7(o.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),m});return this.sourceCache[e]=f,f}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[vn.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[vn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[vn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return r!==void 0&&(typeof r=="number"&&(r=r===eI?gh:Ol),"colorSpace"in o?o.colorSpace=r:o.encoding=r===gh?eI:SY),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let c=this.cache.get(a);c||(c=new u0,Ki.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(a,c)),n=c}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let c=this.cache.get(a);c||(c=new Fr,Ki.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(a,c)),n=c}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=n.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}getMaterialType(){return Zc}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const a={},c=s.extensions||{},h=[];if(c[vn.KHR_MATERIALS_UNLIT]){const m=r[vn.KHR_MATERIALS_UNLIT];o=m.getMaterialType(),h.push(m.extendParams(a,s,t))}else{const m=s.pbrMetallicRoughness||{};if(a.color=new ft(1,1,1),a.opacity=1,Array.isArray(m.baseColorFactor)){const g=m.baseColorFactor;a.color.setRGB(g[0],g[1],g[2],Ol),a.opacity=g[3]}m.baseColorTexture!==void 0&&h.push(t.assignTexture(a,"map",m.baseColorTexture,gh)),a.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,a.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(a,"metalnessMap",m.metallicRoughnessTexture)),h.push(t.assignTexture(a,"roughnessMap",m.metallicRoughnessTexture))),o=this._invokeOne(function(g){return g.getMaterialType&&g.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(g){return g.extendMaterialParams&&g.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ks);const f=s.alphaMode||bw.OPAQUE;if(f===bw.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===bw.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Gs&&(h.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Be(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;a.normalScale.set(m,m)}if(s.occlusionTexture!==void 0&&o!==Gs&&(h.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Gs){const m=s.emissiveFactor;a.emissive=new ft().setRGB(m[0],m[1],m[2],Ol)}return s.emissiveTexture!==void 0&&o!==Gs&&h.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,gh)),Promise.all(h).then(function(){const m=new o(a);return s.name&&(m.name=s.name),Cl(m,s),t.associations.set(m,{materials:e}),s.extensions&&nh(r,m,s),m})}createUniqueName(e){const t=Cn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[vn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return rI(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const h=e[a],f=e7(h),m=r[f];if(m)o.push(m.promise);else{let g;h.extensions&&h.extensions[vn.KHR_DRACO_MESH_COMPRESSION]?g=s(h):g=rI(new Qt,h,t),r[f]={primitive:h,promise:g},o.push(g)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let c=0,h=o.length;c<h;c++){const f=o[c].material===void 0?qY(this.cache):this.getDependency("material",o[c].material);a.push(f)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const h=c.slice(0,c.length-1),f=c[c.length-1],m=[];for(let y=0,_=f.length;y<_;y++){const S=f[y],A=o[y];let x;const C=h[y];if(A.mode===so.TRIANGLES||A.mode===so.TRIANGLE_STRIP||A.mode===so.TRIANGLE_FAN||A.mode===void 0)x=s.isSkinnedMesh===!0?new zS(S,C):new mi(S,C),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),A.mode===so.TRIANGLE_STRIP?x.geometry=JR(x.geometry,DS):A.mode===so.TRIANGLE_FAN&&(x.geometry=JR(x.geometry,Z_));else if(A.mode===so.LINES)x=new oa(S,C);else if(A.mode===so.LINE_STRIP)x=new Gl(S,C);else if(A.mode===so.LINE_LOOP)x=new HS(S,C);else if(A.mode===so.POINTS)x=new zx(S,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(x.geometry.morphAttributes).length>0&&$Y(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),Cl(x,s),A.extensions&&nh(r,x,A),t.assignFinalMaterial(x),m.push(x)}for(let y=0,_=m.length;y<_;y++)t.associations.set(m[y],{meshes:e,primitives:y});if(m.length===1)return s.extensions&&nh(r,m[0],s),m[0];const g=new Dl;s.extensions&&nh(r,g,s),t.associations.set(g,{meshes:e});for(let y=0,_=m.length;y<_;y++)g.add(m[y]);return g})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new ei(IL.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new na(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Cl(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],c=[];for(let h=0,f=o.length;h<f;h++){const m=o[h];if(m){a.push(m);const g=new jt;s!==null&&g.fromArray(s.array,h*16),c.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new c0(a,c)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],c=[],h=[],f=[];for(let m=0,g=r.channels.length;m<g;m++){const y=r.channels[m],_=r.samplers[y.sampler],S=y.target,A=S.node,x=r.parameters!==void 0?r.parameters[_.input]:_.input,C=r.parameters!==void 0?r.parameters[_.output]:_.output;S.node!==void 0&&(o.push(this.getDependency("node",A)),a.push(this.getDependency("accessor",x)),c.push(this.getDependency("accessor",C)),h.push(_),f.push(S))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(h),Promise.all(f)]).then(function(m){const g=m[0],y=m[1],_=m[2],S=m[3],A=m[4],x=[];for(let C=0,T=g.length;C<T;C++){const R=g[C],L=y[C],B=_[C],k=S[C],O=A[C];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const D=n._createAnimationTracks(R,L,B,k,O);if(D)for(let N=0;N<D.length;N++)x.push(D[N])}return new Ap(s,void 0,x)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let c=0,h=r.weights.length;c<h;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],a=r.children||[];for(let h=0,f=a.length;h<f;h++)o.push(n.getDependency("node",a[h]));const c=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(h){const f=h[0],m=h[1],g=h[2];g!==null&&f.traverse(function(y){y.isSkinnedMesh&&y.bind(g,n7)});for(let y=0,_=m.length;y<_;y++)f.add(m[y]);return f})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],c=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&a.push(c),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){a.push(h)}),this.nodeCache[e]=Promise.all(a).then(function(h){let f;if(s.isBone===!0?f=new kx:h.length>1?f=new Dl:h.length===1?f=h[0]:f=new Sn,f!==h[0])for(let m=0,g=h.length;m<g;m++)f.add(h[m]);if(s.name&&(f.userData.name=s.name,f.name=o),Cl(f,s),s.extensions&&nh(n,f,s),s.matrix!==void 0){const m=new jt;m.fromArray(s.matrix),f.applyMatrix4(m)}else s.translation!==void 0&&f.position.fromArray(s.translation),s.rotation!==void 0&&f.quaternion.fromArray(s.rotation),s.scale!==void 0&&f.scale.fromArray(s.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Dl;n.name&&(s.name=r.createUniqueName(n.name)),Cl(s,n),n.extensions&&nh(t,s,n);const o=n.nodes||[],a=[];for(let c=0,h=o.length;c<h;c++)a.push(r.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let f=0,m=c.length;f<m;f++)s.add(c[f]);const h=f=>{const m=new Map;for(const[g,y]of r.associations)(g instanceof Ki||g instanceof li)&&m.set(g,y);return f.traverse(g=>{const y=r.associations.get(g);y!=null&&m.set(g,y)}),m};return r.associations=h(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],a=e.name?e.name:e.uuid,c=[];Bc[s.path]===Bc.weights?e.traverse(function(g){g.morphTargetInfluences&&c.push(g.name?g.name:g.uuid)}):c.push(a);let h;switch(Bc[s.path]){case Bc.weights:h=Oh;break;case Bc.rotation:h=kh;break;case Bc.position:case Bc.scale:h=Uh;break;default:switch(n.itemSize){case 1:h=Oh;break;case 2:case 3:default:h=Uh;break}break}const f=r.interpolation!==void 0?ZY[r.interpolation]:vp,m=this._getArrayFromAccessor(n);for(let g=0,y=c.length;g<y;g++){const _=new h(c[g]+"."+Bc[s.path],t.array,m,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),o.push(_)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=J1(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof kh?JY:tB;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function r7(i,e,t){const n=e.attributes,r=new Ar;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],c=a.min,h=a.max;if(c!==void 0&&h!==void 0){if(r.set(new j(c[0],c[1],c[2]),new j(h[0],h[1],h[2])),a.normalized){const f=J1($d[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new j,c=new j;for(let h=0,f=s.length;h<f;h++){const m=s[h];if(m.POSITION!==void 0){const g=t.json.accessors[m.POSITION],y=g.min,_=g.max;if(y!==void 0&&_!==void 0){if(c.setX(Math.max(Math.abs(y[0]),Math.abs(_[0]))),c.setY(Math.max(Math.abs(y[1]),Math.abs(_[1]))),c.setZ(Math.max(Math.abs(y[2]),Math.abs(_[2]))),g.normalized){const S=J1($d[g.componentType]);c.multiplyScalar(S)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new lr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function rI(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){i.setAttribute(a,c)})}for(const o in n){const a=K1[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return Cl(i,e),r7(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?QY(i,e.targets,t):i})}const Iw=new WeakMap;class s7 extends Or{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new Ws(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const h=t.attributeTypes[c];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=h.name)}const n=JSON.stringify(t);if(Iw.has(e)){const c=Iw.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(c=>(r=c,new Promise((h,f)=>{r._callbacks[s]={resolve:h,reject:f},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Iw.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new Qt;e.index&&t.setIndex(new Pn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Pn(o,a))}return t}_loadLibrary(e,t){const n=new Ws(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=o7.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function o7(){let i,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":i=a.decoderConfig,e=new Promise(function(f){i.onModuleLoaded=function(m){f({draco:m})},DracoDecoderModule(i)});break;case"decode":const c=a.buffer,h=a.taskConfig;e.then(f=>{const m=f.draco,g=new m.Decoder,y=new m.DecoderBuffer;y.Init(new Int8Array(c),c.byteLength);try{const _=t(m,g,y,h),S=_.attributes.map(A=>A.array.buffer);_.index&&S.push(_.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:_},S)}catch(_){console.error(_),self.postMessage({type:"error",id:a.id,error:_.message})}finally{m.destroy(y),m.destroy(g)}});break}};function t(o,a,c,h){const f=h.attributeIDs,m=h.attributeTypes;let g,y;const _=a.GetEncodedGeometryType(c);if(_===o.TRIANGULAR_MESH)g=new o.Mesh,y=a.DecodeBufferToMesh(c,g);else if(_===o.POINT_CLOUD)g=new o.PointCloud,y=a.DecodeBufferToPointCloud(c,g);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||g.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const S={index:null,attributes:[]};for(const A in f){const x=self[m[A]];let C,T;if(h.useUniqueIDs)T=f[A],C=a.GetAttributeByUniqueId(g,T);else{if(T=a.GetAttributeId(g,o[f[A]]),T===-1)continue;C=a.GetAttribute(g,T)}S.attributes.push(r(o,a,g,A,x,C))}return _===o.TRIANGULAR_MESH&&(S.index=n(o,a,g)),o.destroy(g),S}function n(o,a,c){const f=c.num_faces()*3,m=f*4,g=o._malloc(m);a.GetTrianglesUInt32Array(c,m,g);const y=new Uint32Array(o.HEAPF32.buffer,g,f).slice();return o._free(g),{array:y,itemSize:1}}function r(o,a,c,h,f,m){const g=m.num_components(),_=c.num_points()*g,S=_*f.BYTES_PER_ELEMENT,A=s(o,f),x=o._malloc(S);a.GetAttributeDataArrayForAllPoints(c,m,A,S,x);const C=new f(o.HEAPF32.buffer,x,_).slice();return o._free(x),{name:h,array:C,itemSize:g}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let by;const Pw=()=>{if(by)return by;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(m=>{s=m.instance,s.exports.__wasm_call_ctors()});function a(m){const g=new Uint8Array(m.length);for(let _=0;_<m.length;++_){const S=m.charCodeAt(_);g[_]=S>96?S-71:S>64?S-65:S>47?S+4:S>46?63:62}let y=0;for(let _=0;_<m.length;++_)g[y++]=g[_]<60?n[g[_]]:(g[_]-60)*64+g[++_];return g.buffer.slice(0,y)}function c(m,g,y,_,S,A){const x=s.exports.sbrk,C=y+3&-4,T=x(C*_),R=x(S.length),L=new Uint8Array(s.exports.memory.buffer);L.set(S,R);const B=m(T,y,_,R,S.length);if(B===0&&A&&A(T,C,_),g.set(L.subarray(T,T+y*_)),x(T-x(0)),B!==0)throw new Error(`Malformed buffer data: ${B}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},f={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return by={ready:o,supported:!0,decodeVertexBuffer(m,g,y,_,S){c(s.exports.meshopt_decodeVertexBuffer,m,g,y,_,s.exports[h[S]])},decodeIndexBuffer(m,g,y,_){c(s.exports.meshopt_decodeIndexBuffer,m,g,y,_)},decodeIndexSequence(m,g,y,_){c(s.exports.meshopt_decodeIndexSequence,m,g,y,_)},decodeGltfBuffer(m,g,y,_,S,A){c(s.exports[f[S]],m,g,y,_,s.exports[h[A]])}},by};let Ry=null,nB="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function iB(i=!0,e=!0,t){return n=>{t&&t(n),i&&(Ry||(Ry=new s7),Ry.setDecoderPath(typeof i=="string"?i:nB),n.setDRACOLoader(Ry)),e&&n.setMeshoptDecoder(typeof Pw=="function"?Pw():Pw)}}const v0=(i,e,t,n)=>m0(_M,i,iB(e,t,n));v0.preload=(i,e,t,n)=>m0.preload(_M,i,iB(e,t,n));v0.clear=i=>m0.clear(_M,i);v0.setDecoderPath=i=>{nB=i};const a7=J.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:c,...h},f)=>{const m=_r(B=>B.invalidate),g=_r(B=>B.camera),y=_r(B=>B.gl),_=_r(B=>B.events),S=_r(B=>B.setEvents),A=_r(B=>B.set),x=_r(B=>B.get),C=_r(B=>B.performance),T=e||g,R=n||_.connected||y.domElement,L=J.useMemo(()=>new wY(T),[T]);return iE(()=>{L.enabled&&L.update()},-1),J.useEffect(()=>(s&&L.connect(s===!0?R:s),L.connect(R),()=>void L.dispose()),[s,R,t,L,m]),J.useEffect(()=>{const B=D=>{m(),t&&C.regress(),o&&o(D)},k=D=>{a&&a(D)},O=D=>{c&&c(D)};return L.addEventListener("change",B),L.addEventListener("start",k),L.addEventListener("end",O),()=>{L.removeEventListener("start",k),L.removeEventListener("end",O),L.removeEventListener("change",B)}},[o,a,c,L,m,S]),J.useEffect(()=>{if(i){const B=x().controls;return A({controls:L}),()=>A({controls:B})}},[i,L]),J.createElement("primitive",Yg({ref:f,object:L,enableDamping:r},h))}),l7=J.forwardRef(({domElement:i,selector:e,onChange:t,onLock:n,onUnlock:r,enabled:s=!0,makeDefault:o,...a},c)=>{const{camera:h,...f}=a,m=_r(L=>L.setEvents),g=_r(L=>L.gl),y=_r(L=>L.camera),_=_r(L=>L.invalidate),S=_r(L=>L.events),A=_r(L=>L.get),x=_r(L=>L.set),C=h||y,T=i||S.connected||g.domElement,R=J.useMemo(()=>new _Y(C),[C]);return J.useEffect(()=>{if(s){R.connect(T);const L=A().events.compute;return m({compute(B,k){const O=k.size.width/2,D=k.size.height/2;k.pointer.set(O/k.size.width*2-1,-(D/k.size.height)*2+1),k.raycaster.setFromCamera(k.pointer,k.camera)}}),()=>{R.disconnect(),m({compute:L})}}},[s,R]),J.useEffect(()=>{const L=O=>{_(),t&&t(O)};R.addEventListener("change",L),n&&R.addEventListener("lock",n),r&&R.addEventListener("unlock",r);const B=()=>R.lock(),k=e?Array.from(document.querySelectorAll(e)):[document];return k.forEach(O=>O&&O.addEventListener("click",B)),()=>{R.removeEventListener("change",L),n&&R.removeEventListener("lock",n),r&&R.removeEventListener("unlock",r),k.forEach(O=>O?O.removeEventListener("click",B):void 0)}},[t,n,r,e,R,_]),J.useEffect(()=>{if(o){const L=A().controls;return x({controls:R}),()=>x({controls:L})}},[o,R]),J.createElement("primitive",Yg({ref:c,object:R},f))}),ao={ADD:"add",REMOVE:"remove"},Kg={PROPERTYCHANGE:"propertychange"},pn={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class rE{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function sE(i,e){return i>e?1:i<e?-1:0}function xM(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let r=1;r<n;++r){const s=i[r];if(s===e)return r;if(s<e)return t(e,i[r-1],s)>0?r-1:r}return n-1}if(t>0){for(let r=1;r<n;++r)if(i[r]<e)return r-1;return n-1}if(t<0){for(let r=1;r<n;++r)if(i[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(i[r]==e)return r;if(i[r]<e)return i[r-1]-e<e-i[r]?r-1:r}return n-1}function c7(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let r=0;r<n;r++)i[i.length]=t[r]}function oE(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function u7(i,e,t){const n=e||sE;return i.every(function(r,s){if(s===0)return!0;const o=n(i[s-1],r);return!(o>0||o===0)})}function ix(){return!0}function aE(){return!1}function rx(){}function h7(i){let e,t,n;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==n||!oE(r,t))&&(n=this,t=r,e=i.apply(this,arguments)),e}}function f7(i){function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function lE(i){for(const e in i)delete i[e]}function rB(i){let e;for(e in i)return!1;return!e}class tu{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class cE extends rE{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=t?new tu(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let c;for(let h=0,f=r.length;h<f;++h)if("handleEvent"in r[h]?c=r[h].handleEvent(s):c=r[h].call(this,s),c===!1||s.propagationStopped){c=!1;break}if(--o[n]===0){let h=a[n];for(delete a[n];h--;)this.removeEventListener(n,rx);delete o[n]}return c}disposeInternal(){this.listeners_&&lE(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=rx,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}}function Gn(i,e,t,n,r){if(r){const o=t;t=function(a){return i.removeEventListener(e,t),o.call(n??this,a)}}else n&&n!==i&&(t=t.bind(n));const s={target:i,type:e,listener:t};return i.addEventListener(e,t),s}function sx(i,e,t,n){return Gn(i,e,t,n,!0)}function bi(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),lE(i))}class y0 extends cE{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(pn.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Gn(this,e[s],t);return r}return Gn(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=sx(this,e[s],t)}else n=sx(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)d7(n);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}y0.prototype.on;y0.prototype.once;y0.prototype.un;function d7(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)bi(i[e]);else bi(i)}function Dn(){throw new Error("Unimplemented abstract method.")}let p7=0;function xr(i){return i.ol_uid||(i.ol_uid=String(++p7))}class sI extends tu{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class Hl extends y0{constructor(e){super(),this.on,this.once,this.un,xr(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new sI(n,e,t)),n=Kg.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new sI(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const r=this.values_||(this.values_={});if(n)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],rB(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const oI={LENGTH:"length"};class Iy extends tu{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Bl extends Hl{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(oI.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Iy(ao.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Iy(ao.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Iy(ao.REMOVE,r,e)),this.dispatchEvent(new Iy(ao.ADD,t,e))}updateLength_(){this.set(oI.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}function qn(i,e){if(!i)throw new Error(e)}const yr={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function aI(i){const e=Yh();for(let t=0,n=i.length;t<n;++t)qy(e,i[t]);return e}function m7(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function sB(i,e,t){let n,r;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?r=i[1]-t:i[3]<t?r=t-i[3]:r=0,n*n+r*r}function EM(i,e){return oB(i,e[0],e[1])}function oB(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function lI(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=e[0],a=e[1];let c=yr.UNKNOWN;return o<t?c=c|yr.LEFT:o>r&&(c=c|yr.RIGHT),a<n?c=c|yr.BELOW:a>s&&(c=c|yr.ABOVE),c===yr.UNKNOWN&&(c=yr.INTERSECTING),c}function Yh(){return[1/0,1/0,-1/0,-1/0]}function _0(i,e,t,n,r){return r?(r[0]=i,r[1]=e,r[2]=t,r[3]=n,r):[i,e,t,n]}function uE(i){return _0(1/0,1/0,-1/0,-1/0,i)}function g7(i,e){const t=i[0],n=i[1];return _0(t,n,t,n,e)}function v7(i,e,t,n,r){const s=uE(r);return aB(s,i,e,t,n)}function Z1(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function y7(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function qy(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function aB(i,e,t,n,r){for(;t<n;t+=r)_7(i,e[t],e[t+1]);return i}function _7(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function lB(i,e){let t;return t=e(hE(i)),t||(t=e(fE(i)),t)||(t=e(dE(i)),t)||(t=e(Kh(i)),t)?t:!1}function q1(i){let e=0;return pE(i)||(e=ai(i)*fo(i)),e}function hE(i){return[i[0],i[1]]}function fE(i){return[i[2],i[1]]}function Sp(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function x7(i,e){let t;if(e==="bottom-left")t=hE(i);else if(e==="bottom-right")t=fE(i);else if(e==="top-left")t=Kh(i);else if(e==="top-right")t=dE(i);else throw new Error("Invalid corner");return t}function Q1(i,e,t,n,r){const[s,o,a,c,h,f,m,g]=cB(i,e,t,n);return _0(Math.min(s,a,h,m),Math.min(o,c,f,g),Math.max(s,a,h,m),Math.max(o,c,f,g),r)}function cB(i,e,t,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),c=r*o,h=r*a,f=s*o,m=s*a,g=i[0],y=i[1];return[g-c+m,y-h-f,g-c-m,y-h+f,g+c-m,y+h+f,g+c+m,y+h-f,g-c+m,y-h-f]}function fo(i){return i[3]-i[1]}function Mh(i,e,t){const n=t||Yh();return x0(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):uE(n),n}function Kh(i){return[i[0],i[3]]}function dE(i){return[i[2],i[3]]}function ai(i){return i[2]-i[0]}function x0(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function pE(i){return i[2]<i[0]||i[3]<i[1]}function E7(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function A7(i,e,t){let n=!1;const r=lI(i,e),s=lI(i,t);if(r===yr.INTERSECTING||s===yr.INTERSECTING)n=!0;else{const o=i[0],a=i[1],c=i[2],h=i[3],f=e[0],m=e[1],g=t[0],y=t[1],_=(y-m)/(g-f);let S,A;s&yr.ABOVE&&!(r&yr.ABOVE)&&(S=g-(y-h)/_,n=S>=o&&S<=c),!n&&s&yr.RIGHT&&!(r&yr.RIGHT)&&(A=y-(g-c)*_,n=A>=a&&A<=h),!n&&s&yr.BELOW&&!(r&yr.BELOW)&&(S=g-(y-a)/_,n=S>=o&&S<=c),!n&&s&yr.LEFT&&!(r&yr.LEFT)&&(A=y-(g-o)*_,n=A>=a&&A<=h)}return n}function w7(i,e){const t=e.getExtent(),n=Sp(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const r=ai(t),o=Math.floor((n[0]-t[0])/r)*r;i[0]-=o,i[2]-=o}return i}function S7(i,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];w7(i,e);const r=ai(n);if(ai(i)>r,i[0]<n[0])return[[i[0]+r,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-r,i[3]]]}return[i]}function Ri(i,e,t){return Math.min(Math.max(i,e),t)}function M7(i,e,t,n,r,s){const o=r-t,a=s-n;if(o!==0||a!==0){const c=((i-t)*o+(e-n)*a)/(o*o+a*a);c>1?(t=r,n=s):c>0&&(t+=o*c,n+=a*c)}return ep(i,e,t,n)}function ep(i,e,t,n){const r=t-i,s=n-e;return r*r+s*s}function C7(i){const e=i.length;for(let n=0;n<e;n++){let r=n,s=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const c=Math.abs(i[a][n]);c>s&&(s=c,r=a)}if(s===0)return null;const o=i[r];i[r]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const c=-i[a][n]/i[n][n];for(let h=n;h<e+1;h++)n==h?i[a][h]=0:i[a][h]+=c*i[n][h]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let r=n-1;r>=0;r--)i[r][e]-=i[r][n]*t[n]}return t}function cI(i){return i*180/Math.PI}function jc(i){return i*Math.PI/180}function tp(i,e){const t=i%e;return t*e<0?t+e:t}function T7(i,e,t){return i+t*(e-i)}function AM(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function Py(i,e){return Math.floor(AM(i,e))}function Ly(i,e){return Math.ceil(AM(i,e))}function $1(i,e,t){if(i>=e&&i<t)return i;const n=t-e;return((i-e)%n+n)%n+e}const b7=63710088e-1;function uI(i,e,t){t=t||b7;const n=jc(i[1]),r=jc(e[1]),s=(r-n)/2,o=jc(e[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function uB(...i){console.warn(...i)}function R7(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function ox(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function wM(i,e){const t=Math.cos(e),n=Math.sin(e),r=i[0]*t-i[1]*n,s=i[1]*t+i[0]*n;return i[0]=r,i[1]=s,i}function I7(i,e){return i[0]*=e,i[1]*=e,i}function P7(i,e){if(e.canWrapX()){const t=ai(e.getExtent()),n=L7(i,e,t);n&&(i[0]-=n*t)}return i}function L7(i,e,t){const n=e.getExtent();let r=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||ai(n),r=Math.floor((i[0]-n[0])/t)),r}const SM={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class MM{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||SM[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const E0=6378137,Kd=Math.PI*E0,D7=[-Kd,-Kd,Kd,Kd],B7=[-180,-85,180,85],Dy=E0*Math.log(Math.tan(Math.PI/2));class Id extends MM{constructor(e){super({code:e,units:"m",extent:D7,global:!0,worldExtent:B7,getPointResolution:function(t,n){return t/Math.cosh(n[1]/E0)}})}}const hI=[new Id("EPSG:3857"),new Id("EPSG:102100"),new Id("EPSG:102113"),new Id("EPSG:900913"),new Id("http://www.opengis.net/def/crs/EPSG/0/3857"),new Id("http://www.opengis.net/gml/srs/epsg.xml#3857")];function N7(i,e,t,n){const r=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let s=0;s<r;s+=n){e[s]=Kd*i[s]/180;let o=E0*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));o>Dy?o=Dy:o<-Dy&&(o=-Dy),e[s+1]=o}return e}function F7(i,e,t,n){const r=i.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=i.slice():e=new Array(r));for(let s=0;s<r;s+=n)e[s]=180*i[s]/Kd,e[s+1]=360*Math.atan(Math.exp(i[s+1]/E0))/Math.PI-90;return e}const O7=6378137,fI=[-180,-90,180,90],k7=Math.PI*O7/180;class ih extends MM{constructor(e,t){super({code:e,units:"degrees",extent:fI,axisOrientation:t,global:!0,metersPerUnit:k7,worldExtent:fI})}}const dI=[new ih("CRS:84"),new ih("EPSG:4326","neu"),new ih("urn:ogc:def:crs:OGC:1.3:CRS84"),new ih("urn:ogc:def:crs:OGC:2:84"),new ih("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ih("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ih("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let eS={};function U7(i){return eS[i]||eS[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function z7(i,e){eS[i]=e}let np={};function Jg(i,e,t){const n=i.getCode(),r=e.getCode();n in np||(np[n]={}),np[n][r]=t}function Lw(i,e){return i in np&&e in np[i]?np[i][e]:null}const ax=.9996,mo=.00669438,mE=mo*mo,gE=mE*mo,vh=mo/(1-mo),pI=Math.sqrt(1-mo),Mp=(1-pI)/(1+pI),hB=Mp*Mp,CM=hB*Mp,TM=CM*Mp,fB=TM*Mp,dB=1-mo/4-3*mE/64-5*gE/256,G7=3*mo/8+3*mE/32+45*gE/1024,H7=15*mE/256+45*gE/1024,V7=35*gE/3072,W7=3/2*Mp-27/32*CM+269/512*fB,X7=21/16*hB-55/32*TM,j7=151/96*CM-417/128*fB,Y7=1097/512*TM,lx=6378137;function K7(i,e,t){const n=i-5e5,o=(t.north?e:e-1e7)/ax/(lx*dB),a=o+W7*Math.sin(2*o)+X7*Math.sin(4*o)+j7*Math.sin(6*o)+Y7*Math.sin(8*o),c=Math.sin(a),h=c*c,f=Math.cos(a),m=c/f,g=m*m,y=g*g,_=1-mo*h,S=Math.sqrt(1-mo*h),A=lx/S,x=(1-mo)/_,C=vh*f**2,T=C*C,R=n/(A*ax),L=R*R,B=L*R,k=B*R,O=k*R,D=O*R,N=a-m/x*(L/2-k/24*(5+3*g+10*C-4*T-9*vh))+D/720*(61+90*g+298*C+45*y-252*vh-3*T);let z=(R-B/6*(1+2*g+C)+O/120*(5-2*C+28*g-3*T+8*vh+24*y))/f;return z=$1(z+jc(pB(t.number)),-Math.PI,Math.PI),[cI(z),cI(N)]}const mI=-80,gI=84,J7=-180,Z7=180;function q7(i,e,t){i=$1(i,J7,Z7),e<mI?e=mI:e>gI&&(e=gI);const n=jc(e),r=Math.sin(n),s=Math.cos(n),o=r/s,a=o*o,c=a*a,h=jc(i),f=pB(t.number),m=jc(f),g=lx/Math.sqrt(1-mo*r**2),y=vh*s**2,_=s*$1(h-m,-Math.PI,Math.PI),S=_*_,A=S*_,x=A*_,C=x*_,T=C*_,R=lx*(dB*n-G7*Math.sin(2*n)+H7*Math.sin(4*n)-V7*Math.sin(6*n)),L=ax*g*(_+A/6*(1-a+y)+C/120*(5-18*a+c+72*y-58*vh))+5e5;let B=ax*(R+g*o*(S/2+x/24*(5-a+9*y+4*y**2)+T/720*(61-58*a+c+600*y-330*vh)));return t.north||(B+=1e7),[L,B]}function pB(i){return(i-1)*6-180+3}const Q7=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function mB(i){let e=0;for(const r of Q7){const s=i.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,n=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(n=!0,t=e-32600),t?{number:t,north:n}:null}function vI(i,e){return function(t,n,r,s){const o=t.length;r=r>1?r:2,s=s??r,n||(r>2?n=t.slice():n=new Array(o));for(let a=0;a<o;a+=s){const c=t[a],h=t[a+1],f=i(c,h,e);n[a]=f[0],n[a+1]=f[1]}return n}}function $7(i){return mB(i)?new MM({code:i,units:"m"}):null}function eK(i){const e=mB(i.getCode());return e?{forward:vI(q7,e),inverse:vI(K7,e)}:null}const tK=[eK],nK=[$7];let tS=!0;function iK(i){tS=!1}function bM(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function nS(i){z7(i.getCode(),i),Jg(i,i,bM)}function rK(i){i.forEach(nS)}function _o(i){if(typeof i!="string")return i;const e=U7(i);if(e)return e;for(const t of nK){const n=t(i);if(n)return n}return null}function yI(i,e,t,n){i=_o(i);let r;const s=i.getPointResolutionFunc();if(s)r=s(e,t);else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")r=e;else{const a=IM(i,_o("EPSG:4326"));if(!a&&o!=="degrees")r=e*i.getMetersPerUnit();else{let h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=a(h,h,2);const f=uI(h.slice(0,2),h.slice(2,4)),m=uI(h.slice(4,6),h.slice(6,8));r=(f+m)/2}const c=i.getMetersPerUnit();c!==void 0&&(r/=c)}}return r}function _I(i){rK(i),i.forEach(function(e){i.forEach(function(t){e!==t&&Jg(e,t,bM)})})}function sK(i,e,t,n){i.forEach(function(r){e.forEach(function(s){Jg(r,s,t),Jg(s,r,n)})})}function RM(i,e){return i?typeof i=="string"?_o(i):i:_o(e)}function oK(i){return(function(e,t,n,r){const s=e.length;n=n!==void 0?n:2,r=r??n,t=t!==void 0?t:new Array(s);for(let o=0;o<s;o+=r){const a=i(e.slice(o,o+n)),c=a.length;for(let h=0,f=r;h<f;++h)t[o+h]=h>=c?e[o+h]:a[h]}return t})}function Dw(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||IM(i,e)===bM)&&t}function IM(i,e){const t=i.getCode(),n=e.getCode();let r=Lw(t,n);if(r)return r;let s=null,o=null;for(const c of tK)s||(s=c(i)),o||(o=c(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)r=Bw(s.inverse,o.forward);else{const c=Lw(t,a);c&&(r=Bw(c,o.forward))}else{const c=Lw(a,n);c&&(r=Bw(s.inverse,c))}return r&&(nS(i),nS(e),Jg(i,e,r)),r}function Bw(i,e){return function(t,n,r,s){return n=i(t,n,r,s),e(n,n,r,s)}}function cx(i,e){const t=_o(i),n=_o(e);return IM(t,n)}function gB(i,e,t){const n=cx(e,t);if(!n){const r=_o(e).getCode(),s=_o(t).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return n(i,void 0,i.length)}function iS(i,e){return i}function Ml(i,e){return tS&&!ox(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(tS=!1,uB("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function aK(i,e){return i}function yh(i,e){return i}function lK(){_I(hI),_I(dI),sK(dI,hI,N7,F7)}lK();new Array(6);function ip(){return[1,0,0,1,0,0]}function Os(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function Zg(i,e,t,n,r,s,o,a){const c=Math.sin(s),h=Math.cos(s);return i[0]=n*h,i[1]=r*c,i[2]=-n*c,i[3]=r*h,i[4]=o*n*h-a*n*c+e,i[5]=o*r*c+a*r*h+t,i}function vB(i,e){const t=cK(e);qn(t!==0,"Transformation matrix cannot be inverted");const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5];return i[0]=o/t,i[1]=-r/t,i[2]=-s/t,i[3]=n/t,i[4]=(s*c-o*a)/t,i[5]=-(n*c-r*a)/t,i}function cK(i){return i[0]*i[3]-i[1]*i[2]}const uK=[1e5,1e5,1e5,1e5,2,2];function hK(i){return"matrix("+i.join(", ")+")"}function xI(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function fK(i,e){const t=xI(i),n=xI(e);for(let r=0;r<6;++r)if(Math.round((t[r]-n[r])*uK[r])!==0)return!1;return!0}function dK(i,e,t,n,r,s,o){s=s||[],o=o||2;let a=0;for(let c=e;c<t;c+=n){const h=i[c],f=i[c+1];s[a++]=r[0]*h+r[2]*f+r[4],s[a++]=r[1]*h+r[3]*f+r[5];for(let m=2;m<o;m++)s[a++]=i[c+m]}return s&&s.length!=a&&(s.length=a),s}function pK(i,e,t,n,r,s,o){o=o||[];const a=Math.cos(r),c=Math.sin(r),h=s[0],f=s[1];let m=0;for(let g=e;g<t;g+=n){const y=i[g]-h,_=i[g+1]-f;o[m++]=h+y*a-_*c,o[m++]=f+y*c+_*a;for(let S=g+2;S<g+n;++S)o[m++]=i[S]}return o&&o.length!=m&&(o.length=m),o}function mK(i,e,t,n,r,s,o,a){a=a||[];const c=o[0],h=o[1];let f=0;for(let m=e;m<t;m+=n){const g=i[m]-c,y=i[m+1]-h;a[f++]=c+r*g,a[f++]=h+s*y;for(let _=m+2;_<m+n;++_)a[f++]=i[_]}return a&&a.length!=f&&(a.length=f),a}function gK(i,e,t,n,r,s,o){o=o||[];let a=0;for(let c=e;c<t;c+=n){o[a++]=i[c]+r,o[a++]=i[c+1]+s;for(let h=c+2;h<c+n;++h)o[a++]=i[h]}return o&&o.length!=a&&(o.length=a),o}const EI=ip(),vK=[NaN,NaN];class yK extends Hl{constructor(){super(),this.extent_=Yh(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=h7((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Dn()}closestPointXY(e,t,n,r){return Dn()}containsXY(e,t){return this.closestPointXY(e,t,vK,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Dn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&uE(t),this.extentRevision_=this.getRevision()}return E7(this.extent_,e)}rotate(e,t){Dn()}scale(e,t,n){Dn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Dn()}getType(){return Dn()}applyTransform(e){Dn()}intersectsExtent(e){return Dn()}translate(e,t){Dn()}transform(e,t){const n=_o(e),r=n.getUnits()=="tile-pixels"?function(s,o,a){const c=n.getExtent(),h=n.getWorldExtent(),f=fo(h)/fo(c);Zg(EI,h[0],h[3],f,-f,0,0,0);const m=dK(s,0,s.length,a,EI,o),g=cx(n,t);return g?g(m,m,a):m}:cx(n,t);return this.applyTransform(r),this}}class PM extends yK{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return v7(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Dn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=AI(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Dn()}setLayout(e,t,n){let r;if(e)r=AI(e);else{for(let s=0;s<n;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=_K(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();pK(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Sp(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();mK(r,0,r.length,s,e,t,n,r),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();gK(n,0,n.length,r,e,t,n),this.changed()}}}function _K(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function AI(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function yB(i,e,t,n){let r=0;const s=i[t-n],o=i[t-n+1];let a=0,c=0;for(;e<t;e+=n){const h=i[e]-s,f=i[e+1]-o;r+=c*h-a*f,a=h,c=f}return r/2}function xK(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=yB(i,e,a,n),e=a}return r}function wI(i,e,t,n,r,s,o){const a=i[e],c=i[e+1],h=i[t]-a,f=i[t+1]-c;let m;if(h===0&&f===0)m=e;else{const g=((r-a)*h+(s-c)*f)/(h*h+f*f);if(g>1)m=t;else if(g>0){for(let y=0;y<n;++y)o[y]=T7(i[e+y],i[t+y],g);o.length=n;return}else m=e}for(let g=0;g<n;++g)o[g]=i[m+g];o.length=n}function _B(i,e,t,n,r){let s=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],c=i[e+1],h=ep(s,o,a,c);h>r&&(r=h),s=a,o=c}return r}function EK(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=_B(i,e,a,n,r),e=a}return r}function xB(i,e,t,n,r,s,o,a,c,h,f){if(e==t)return h;let m,g;if(r===0){if(g=ep(o,a,i[e],i[e+1]),g<h){for(m=0;m<n;++m)c[m]=i[e+m];return c.length=n,g}return h}f=f||[NaN,NaN];let y=e+n;for(;y<t;)if(wI(i,y-n,y,n,o,a,f),g=ep(o,a,f[0],f[1]),g<h){for(h=g,m=0;m<n;++m)c[m]=f[m];c.length=n,y+=n}else y+=n*Math.max((Math.sqrt(g)-Math.sqrt(h))/r|0,1);if(wI(i,t-n,e,n,o,a,f),g=ep(o,a,f[0],f[1]),g<h){for(h=g,m=0;m<n;++m)c[m]=f[m];c.length=n}return h}function AK(i,e,t,n,r,s,o,a,c,h,f){f=f||[NaN,NaN];for(let m=0,g=t.length;m<g;++m){const y=t[m];h=xB(i,e,y,n,r,s,o,a,c,h,f),e=y}return h}function wK(i,e,t,n){for(let r=0,s=t.length;r<s;++r)i[e++]=t[r];return e}function EB(i,e,t,n){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function SK(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=EB(i,e,t[o],n);r[s++]=c,e=c}return r.length=s,r}function AB(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=n)r[s++]=i.slice(o,o+n);return r.length=s,r}function MK(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const c=t[o];r[s++]=AB(i,e,c,n,r[s]),e=c}return r.length=s,r}function CK(i,e,t,n,r,s,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)s[o++]=i[e],s[o++]=i[e+1];return o}const c=new Array(a);c[0]=1,c[a-1]=1;const h=[e,t-n];let f=0;for(;h.length>0;){const m=h.pop(),g=h.pop();let y=0;const _=i[g],S=i[g+1],A=i[m],x=i[m+1];for(let C=g+n;C<m;C+=n){const T=i[C],R=i[C+1],L=M7(T,R,_,S,A,x);L>y&&(f=C,y=L)}y>r&&(c[(f-e)/n]=1,g+n<f&&h.push(g,f),f+n<m&&h.push(f,m))}for(let m=0;m<a;++m)c[m]&&(s[o++]=i[e+m*n],s[o++]=i[e+m*n+1]);return o}function Pd(i,e){return e*Math.round(i/e)}function TK(i,e,t,n,r,s,o){if(e==t)return o;let a=Pd(i[e],r),c=Pd(i[e+1],r);e+=n,s[o++]=a,s[o++]=c;let h,f;do if(h=Pd(i[e],r),f=Pd(i[e+1],r),e+=n,e==t)return s[o++]=h,s[o++]=f,o;while(h==a&&f==c);for(;e<t;){const m=Pd(i[e],r),g=Pd(i[e+1],r);if(e+=n,m==h&&g==f)continue;const y=h-a,_=f-c,S=m-a,A=g-c;if(y*A==_*S&&(y<0&&S<y||y==S||y>0&&S>y)&&(_<0&&A<_||_==A||_>0&&A>_)){h=m,f=g;continue}s[o++]=h,s[o++]=f,a=h,c=f,h=m,f=g}return s[o++]=h,s[o++]=f,o}function bK(i,e,t,n,r,s,o,a){for(let c=0,h=t.length;c<h;++c){const f=t[c];o=TK(i,e,f,n,r,s,o),a.push(o),e=f}return o}class qg extends PM{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new qg(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,r){return r<sB(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_B(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,r))}getArea(){return yB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return AB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=CK(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new qg(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=EB(this.flatCoordinates,0,e,this.stride),this.changed()}}class LM extends PM{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new LM(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const s=this.flatCoordinates,o=ep(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let c=0;c<a;++c)n[c]=s[c];return n.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return g7(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return oB(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wK(this.flatCoordinates,0,e,this.stride),this.changed()}}function RK(i,e,t,n,r){return!lB(r,function(o){return!_h(i,e,t,n,o[0],o[1])})}function _h(i,e,t,n,r,s){let o=0,a=i[t-n],c=i[t-n+1];for(;e<t;e+=n){const h=i[e],f=i[e+1];c<=s?f>s&&(h-a)*(s-c)-(r-a)*(f-c)>0&&o++:f<=s&&(h-a)*(s-c)-(r-a)*(f-c)<0&&o--,a=h,c=f}return o!==0}function wB(i,e,t,n,r,s){if(t.length===0||!_h(i,e,t[0],n,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(_h(i,t[o-1],t[o],n,r,s))return!1;return!0}function IK(i,e,t,n,r,s,o){let a,c,h,f,m,g,y;const _=r[s+1],S=[];for(let C=0,T=t.length;C<T;++C){const R=t[C];for(f=i[R-n],g=i[R-n+1],a=e;a<R;a+=n)m=i[a],y=i[a+1],(_<=g&&y<=_||g<=_&&_<=y)&&(h=(_-g)/(y-g)*(m-f)+f,S.push(h)),f=m,g=y}let A=NaN,x=-1/0;for(S.sort(sE),f=S[0],a=1,c=S.length;a<c;++a){m=S[a];const C=Math.abs(m-f);C>x&&(h=(f+m)/2,wB(i,e,t,n,h,_)&&(A=h,x=C)),f=m}return isNaN(A)&&(A=r[s]),[A,_,x]}function PK(i,e,t,n,r){let s;for(e+=n;e<t;e+=n)if(s=r(i.slice(e-n,e),i.slice(e,e+n)),s)return s;return!1}function SB(i,e,t,n,r,s){return s=s??aB(Yh(),i,e,t,n),x0(r,s)?s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:PK(i,e,t,n,function(o,a){return A7(r,o,a)}):!1}function MB(i,e,t,n,r){return!!(SB(i,e,t,n,r)||_h(i,e,t,n,r[0],r[1])||_h(i,e,t,n,r[0],r[3])||_h(i,e,t,n,r[2],r[1])||_h(i,e,t,n,r[2],r[3]))}function LK(i,e,t,n,r){if(!MB(i,e,t[0],n,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(RK(i,t[s-1],t[s],n,r)&&!SB(i,t[s-1],t[s],n,r))return!1;return!0}function DK(i,e,t,n){for(;e<t-n;){for(let r=0;r<n;++r){const s=i[e+r];i[e+r]=i[t-n+r],i[t-n+r]=s}e+=n,t-=n}}function CB(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],c=i[e+1];r+=(a-s)*(c+o),s=a,o=c}return r===0?void 0:r>0}function BK(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=CB(i,e,a,n);if(s===0){if(r&&c||!r&&!c)return!1}else if(r&&!c||!r&&c)return!1;e=a}return!0}function SI(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],c=CB(i,e,a,n);(s===0?r&&c||!r&&!c:r&&!c||!r&&c)&&DK(i,e,a,n),e=a}return e}class Qg extends PM{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?c7(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Qg(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<sB(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(EK(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AK(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return wB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return xK(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),SI(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,MK(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Sp(this.getExtent());this.flatInteriorPoint_=IK(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new LM(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new qg(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const c=n[o],h=new qg(t.slice(s,c),e);r.push(h),s=c}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;BK(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=SI(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=bK(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Qg(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return LK(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=SK(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function MI(i){if(pE(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],r=i[3],s=[e,t,e,r,n,r,n,t,e,t];return new Qg(s,"XY",[s.length])}const ba={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},zh=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",NK=zh.includes("safari")&&!zh.includes("chrom");NK&&(zh.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(zh));const FK=zh.includes("webkit")&&!zh.includes("edge"),TB=zh.includes("macintosh"),OK=typeof devicePixelRatio<"u"?devicePixelRatio:1,kK=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,bB=typeof Image<"u"&&Image.prototype.decode,RB=(function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i})(),An={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function As(i,e,t,n){let r;return t&&t.length?r=t.shift():kK?r=new OffscreenCanvas(i||300,e||300):r=document.createElement("canvas"),i&&(r.width=i),e&&(r.height=e),r.getContext("2d",n)}let Nw;function ux(){return Nw||(Nw=As(1,1)),Nw}function DM(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function CI(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function UK(i){for(;i.lastChild;)i.lastChild.remove()}function zK(i,e){const t=i.childNodes;for(let n=0;;++n){const r=t[n],s=e[n];if(!r&&!s)break;if(r!==s){if(!r){i.appendChild(s);continue}if(!s){i.removeChild(r),--n;continue}i.insertBefore(s,r)}}}const BM=[NaN,NaN,NaN,0];let Fw;function GK(){return Fw||(Fw=As(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Fw}const HK=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,VK=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,WK=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,XK=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function By(i,e){return i.endsWith("%")?Number(i.substring(0,i.length-1))/e:Number(i)}function Mg(i){throw new Error('failed to parse "'+i+'" as color')}function IB(i){if(i.toLowerCase().startsWith("rgb")){const s=i.match(VK)||i.match(HK)||i.match(WK);if(s){const o=s[4],a=100/255;return[Ri(By(s[1],a)+.5|0,0,255),Ri(By(s[2],a)+.5|0,0,255),Ri(By(s[3],a)+.5|0,0,255),o!==void 0?Ri(By(o,100),0,1):1]}Mg(i)}if(i.startsWith("#")){if(XK.test(i)){const s=i.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let c=0,h=s.length;c<h;c+=o){let f=parseInt(s.substring(c,c+o),16);o===1&&(f+=f<<4),a[c/o]=f}return a[3]=a[3]/255,a}Mg(i)}const e=GK();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=i,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=i,e.fillStyle===t&&Mg(i));const n=e.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return IB(n);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=AM(r[3]/255,3),r}function jK(i){return typeof i=="string"?i:FM(i)}const YK=1024,Zm={};let Ow=0;function KK(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function kw(i){return i>.0031308?Math.pow(i,1/2.4)*269.025-14.025:i*3294.6}function Uw(i){return i>.2068965?Math.pow(i,3):(i-4/29)*(108/841)}function zw(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function Gw(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function TI(i){const e=zw(i[0]),t=zw(i[1]),n=zw(i[2]),r=Gw(e*.222488403+t*.716873169+n*.06060791),s=500*(Gw(e*.452247074+t*.399439023+n*.148375274)-r),o=200*(r-Gw(e*.016863605+t*.117638439+n*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*r-16,Math.sqrt(s*s+o*o),a<0?a+360:a,i[3]]}function JK(i){const e=(i[0]+16)/116,t=i[1],n=i[2]*Math.PI/180,r=Uw(e),s=Uw(e+t/500*Math.cos(n)),o=Uw(e-t/200*Math.sin(n)),a=kw(s*3.021973625-r*1.617392459-o*.404875592),c=kw(s*-.943766287+r*1.916279586+o*.027607165),h=kw(s*.069407491-r*.22898585+o*1.159737864);return[Ri(a+.5|0,0,255),Ri(c+.5|0,0,255),Ri(h+.5|0,0,255),i[3]]}function NM(i){if(i==="none")return BM;if(Zm.hasOwnProperty(i))return Zm[i];if(Ow>=YK){let t=0;for(const n in Zm)(t++&3)===0&&(delete Zm[n],--Ow)}const e=IB(i);e.length!==4&&Mg(i);for(const t of e)isNaN(t)&&Mg(i);return Zm[i]=e,++Ow,e}function Cp(i){return Array.isArray(i)?i:NM(i)}function FM(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+r+")"}function ZK(i,e,t){const n=i;let r=!0,s=!1,o=!1;const a=[sx(n,pn.LOAD,function(){o=!0,s||e()})];return n.src&&bB?(s=!0,n.decode().then(function(){r&&e()}).catch(function(c){r&&(o?e():t())})):a.push(sx(n,pn.ERROR,t)),function(){r=!1,a.forEach(bi)}}function qK(i,e){return new Promise((t,n)=>{function r(){o(),t(i)}function s(){o(),n(new Error("Image load error"))}function o(){i.removeEventListener("load",r),i.removeEventListener("error",s)}i.addEventListener("load",r),i.addEventListener("error",s)})}function QK(i,e){return e&&(i.src=e),i.src&&bB?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(r=>i.complete&&i.width?t(i):n(r))):qK(i)}class $K{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const r=Hw(e,t,n);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,n){const r=Hw(e,t,n);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,n,r,s){const o=Hw(e,t,n),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===An.IDLE&&r.load(),r.getImageState()===An.LOADING?r.ready().then(()=>{this.patternCache_[o]=ux().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=ux().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Hw(i,e,t){const n=t?Cp(t):"null";return e+":"+i+":"+n}const po=new $K;let qm=null;class PB extends cE{constructor(e,t,n,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=r===void 0?An.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===An.LOADED){qm||(qm=As(1,1,void 0,{willReadFrequently:!0})),qm.drawImage(this.image_,0,0);try{qm.getImageData(0,0,1,1),this.tainted_=!1}catch{qm=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(pn.CHANGE)}handleImageError_(){this.imageState_=An.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=An.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=As(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===An.IDLE){this.image_||this.initializeImage_(),this.imageState_=An.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&QK(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==An.LOADED)return;const t=this.image_,n=As(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=jK(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===An.LOADED||this.imageState_===An.ERROR)e();else{const t=()=>{(this.imageState_===An.LOADED||this.imageState_===An.ERROR)&&(this.removeEventListener(pn.CHANGE,t),e())};this.addEventListener(pn.CHANGE,t)}})),this.ready_}}function OM(i,e,t,n,r,s){let o=e===void 0?void 0:po.get(e,t,r);return o||(o=new PB(i,i&&"src"in i?i.src||void 0:e,t,n,r),po.set(e,t,r,o,s)),s&&o&&!po.getPattern(e,t,r)&&po.set(e,t,r,o,s),o}function bI(i){return i?Array.isArray(i)?FM(i):typeof i=="object"&&"src"in i?eJ(i):i:null}function eJ(i){if(!i.offset||!i.size)return po.getPattern(i.src,"anonymous",i.color);const e=i.src+":"+i.offset,t=po.getPattern(e,void 0,i.color);if(t)return t;const n=po.get(i.src,"anonymous",null);if(n.getImageState()!==An.LOADED)return null;const r=As(i.size[0],i.size[1]);return r.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),OM(r.canvas,e,void 0,An.LOADED,i.color,!0),po.getPattern(e,void 0,i.color)}const Ny="ol-hidden",vE="ol-unselectable",kM="ol-control",RI="ol-collapsed",II="#000",PI="round",LI="round",tJ=10,nJ="#000",iJ=1,rJ=new Hl;function LB(i,e,t=0,n=i.length-1,r=sJ){for(;n>t;){if(n-t>600){const c=n-t+1,h=e-t+1,f=Math.log(c),m=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*m*(c-m)/c)*(h-c/2<0?-1:1),y=Math.max(t,Math.floor(e-h*m/c+g)),_=Math.min(n,Math.floor(e+(c-h)*m/c+g));LB(i,e,y,_,r)}const s=i[e];let o=t,a=n;for(Qm(i,t,e),r(i[n],s)>0&&Qm(i,t,n);o<a;){for(Qm(i,o,a),o++,a--;r(i[o],s)<0;)o++;for(;r(i[a],s)>0;)a--}r(i[t],s)===0?Qm(i,t,a):(a++,Qm(i,a,n)),a<=e&&(t=a+1),e<=a&&(n=a-1)}}function Qm(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function sJ(i,e){return i<e?-1:i>e?1:0}class oJ{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!Oy(e,t))return n;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],c=t.leaf?r(a):a;Oy(e,c)&&(t.leaf?n.push(a):Ww(e,c)?this._all(a,n):s.push(a))}t=s.pop()}return n}collides(e){let t=this.data;if(!Oy(e,t))return!1;const n=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(Oy(e,o)){if(t.leaf||Ww(e,o))return!0;n.push(s)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=zd([]),this}remove(e,t){if(!e)return this;let n=this.data;const r=this.toBBox(e),s=[],o=[];let a,c,h;for(;n||s.length;){if(n||(n=s.pop(),c=s[s.length-1],a=o.pop(),h=!0),n.leaf){const f=aJ(e,n.children,t);if(f!==-1)return n.children.splice(f,1),s.push(n),this._condense(s),this}!h&&!n.leaf&&Ww(n,r)?(s.push(n),o.push(a),a=0,c=n,n=n.children[0]):c?(a++,n=c.children[a],h=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,r){const s=n-t+1;let o=this._maxEntries,a;if(s<=o)return a=zd(e.slice(t,n+1)),Ld(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=zd([]),a.leaf=!1,a.height=r;const c=Math.ceil(s/o),h=c*Math.ceil(Math.sqrt(o));DI(e,t,n,h,this.compareMinX);for(let f=t;f<=n;f+=h){const m=Math.min(f+h-1,n);DI(e,f,m,c,this.compareMinY);for(let g=f;g<=m;g+=c){const y=Math.min(g+c-1,m);a.children.push(this._build(e,g,y,r-1))}}return Ld(a,this.toBBox),a}_chooseSubtree(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){let s=1/0,o=1/0,a;for(let c=0;c<t.children.length;c++){const h=t.children[c],f=Vw(h),m=uJ(e,h)-f;m<o?(o=m,s=f<s?f:s,a=h):m===o&&f<s&&(s=f,a=h)}t=a||t.children[0]}return t}_insert(e,t,n){const r=n?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),fg(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const n=e[t],r=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,r);const o=this._chooseSplitIndex(n,s,r),a=zd(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ld(n,this.toBBox),Ld(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=zd([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Ld(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let r,s=1/0,o=1/0;for(let a=t;a<=n-t;a++){const c=hg(e,0,a,this.toBBox),h=hg(e,a,n,this.toBBox),f=hJ(c,h),m=Vw(c)+Vw(h);f<s?(s=f,r=a,o=m<o?m:o):f===s&&m<o&&(o=m,r=a)}return r||n-t}_chooseSplitAxis(e,t,n){const r=e.leaf?this.compareMinX:lJ,s=e.leaf?this.compareMinY:cJ,o=this._allDistMargin(e,t,n,r),a=this._allDistMargin(e,t,n,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const s=this.toBBox,o=hg(e,0,t,s),a=hg(e,n-t,n,s);let c=Fy(o)+Fy(a);for(let h=t;h<n-t;h++){const f=e.children[h];fg(o,e.leaf?s(f):f),c+=Fy(o)}for(let h=n-t-1;h>=t;h--){const f=e.children[h];fg(a,e.leaf?s(f):f),c+=Fy(a)}return c}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)fg(t[r],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():Ld(e[t],this.toBBox)}}function aJ(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function Ld(i,e){hg(i,0,i.children.length,e,i)}function hg(i,e,t,n,r){r||(r=zd(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=i.children[s];fg(r,i.leaf?n(o):o)}return r}function fg(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function lJ(i,e){return i.minX-e.minX}function cJ(i,e){return i.minY-e.minY}function Vw(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function Fy(i){return i.maxX-i.minX+(i.maxY-i.minY)}function uJ(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function hJ(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),r=Math.min(i.maxX,e.maxX),s=Math.min(i.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-n)}function Ww(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function Oy(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function zd(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function DI(i,e,t,n,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;LB(i,o,e,t,r),s.push(e,o,o,t)}}class fJ extends Hl{constructor(e){super(),this.projection=_o(e.projection),this.attributions_=BI(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,r){t.viewResolver=n,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=BI(e),this.changed()}setState(e){this.state_=e,this.changed()}}function BI(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),e=>i):null}class A0{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new A0({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=OM(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===An.IDLE&&t.load(),t.getImageState()===An.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?xr(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Cp(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class yE{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new yE({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function NI(i){return i[0]>0&&i[1]>0}function dJ(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Es(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}class _E{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Es(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new _E({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Dn()}getImage(e){return Dn()}getHitDetectionImage(){return Dn()}getPixelRatio(e){return 1}getImageState(){return Dn()}getImageSize(){return Dn()}getOrigin(){return Dn()}getSize(){return Dn()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Es(e)}listenImageChange(e){Dn()}load(){Dn()}unlistenImageChange(e){Dn()}ready(){return Promise.resolve()}}class xE extends _E{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?An.LOADING:An.LOADED,this.imageState_===An.LOADING&&this.ready().then(()=>this.imageState_=An.LOADED),this.render()}clone(){const e=this.getScale(),t=new xE({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=po.get(n,null,null)?.getImage(1);if(!r){const s=this.renderOptions_,o=Math.ceil(s.size*e),a=As(o,o);this.draw_(s,a,e),r=a.canvas,po.set(n,null,null,new PB(r,void 0,null,An.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const B=r;r=s,s=B}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,c=s*Math.sin(a),h=Math.sqrt(s*s-c*c),f=r-h,m=Math.sqrt(c*c+f*f),g=m/c;if(e==="miter"&&g<=n)return g*t;const y=t/2/g,_=t/2*(f/m),A=Math.sqrt((r+y)*(r+y)+_*_)-r;if(this.radius2_===void 0||e==="bevel")return A*2;const x=r*Math.sin(a),C=Math.sqrt(r*r-x*x),T=s-C,L=Math.sqrt(x*x+T*T)/x;if(L<=n){const B=L*t/2-s-r;return 2*Math.max(A,B)}return A*2}createRenderOptions(){let e=PI,t=LI,n=0,r=null,s=0,o,a=0;this.stroke_&&(o=bI(this.stroke_.getColor()??nJ),a=this.stroke_.getWidth()??iJ,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??LI,e=this.stroke_.getLineCap()??PI,n=this.stroke_.getMiterLimit()??tJ);const c=this.calculateLineJoinSize_(t,a,n),h=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*h+c);return{strokeStyle:o,strokeWidth:a,size:f,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=II),t.fillStyle=bI(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=Cp(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=As(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const c=s+a*o,h=a%2===0?n:r;e.lineTo(h*Math.cos(c),h*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=II,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class EE extends xE{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new EE({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Ch{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=FI,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Ch({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=FI,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function pJ(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(qn(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let Xw=null;function DB(i,e){if(!Xw){const t=new A0({color:"rgba(255,255,255,0.4)"}),n=new yE({color:"#3399CC",width:1.25});Xw=[new Ch({image:new EE({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Xw}function FI(i){return i.getGeometry()}const mJ="#333";class UM{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Es(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new A0({color:mJ}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new UM({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Es(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const oo={ANIMATING:0,INTERACTING:1};class gJ{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ux(),{get:(e,t)=>{if(typeof ux()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,n)=>(this.push_(t,n),!0)})}push_(...e){const t=this.instructions_,n=this.zIndex+this.offset_;t[n]||(t[n]=[]),t[n].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,r=t.length;n<r;++n){const s=t[n];if(typeof s=="function"){s(e);continue}const o=t[++n];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}function OI(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}class zM extends _E{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;qn(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||xr(o)),qn(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),qn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=An.IDLE:o!==void 0&&("complete"in o?o.complete?c=o.src?An.LOADED:An.IDLE:c=An.LOADING:c=An.LOADED),this.color_=e.color!==void 0?Cp(e.color):null,this.iconImage_=OM(o,a,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,f;if(e.size)[h,f]=e.size;else{const m=this.getImage(1);if(m.width&&m.height)h=m.width,f=m.height;else if(m instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const y=this.iconImage_.getSize();this.setScale(OI(y[0],y[1],e.width,e.height))};this.listenImageChange(g);return}}h!==void 0&&this.setScale(OI(h,f,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new zM({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==An.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==An.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(pn.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(pn.CHANGE,e)}ready(){return this.iconImage_.ready()}}class BB extends tu{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}}const vJ=5;class yJ extends y0{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=vJ}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Dn()}getData(e){return null}prepareFrame(e){return Dn()}renderFrame(e,t){return Dn()}forEachFeatureAtCoordinate(e,t,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===An.LOADED||t.getState()===An.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=An.LOADED&&t!=An.ERROR&&e.addEventListener(pn.CHANGE,this.boundHandleImageChange_),t==An.IDLE&&(e.load(),t=e.getState()),t==An.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}let Gd=null;function _J(){Gd=As(1,1,void 0,{willReadFrequently:!0})}class xJ extends yJ{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=ip(),this.pixelTransform=ip(),this.inversePixelTransform=ip(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){Gd||_J(),Gd.clearRect(0,0,1,1);let r;try{Gd.drawImage(e,t,n,1,1,0,0,1,1),r=Gd.getImageData(0,0,1,1).data}catch{return Gd=null,null}return r}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&oE(Cp(e.style.backgroundColor),Cp(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&fK(o.canvas.style.transform,t)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=As();const c=o.canvas;s.appendChild(c),a=c.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const r=Kh(n),s=dE(n),o=fE(n),a=hE(n);Os(t.coordinateToPixelTransform,r),Os(t.coordinateToPixelTransform,s),Os(t.coordinateToPixelTransform,o),Os(t.coordinateToPixelTransform,a);const c=this.inversePixelTransform;Os(c,r),Os(c,s),Os(c,o),Os(c,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){const n=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(ai(n)/r*o),c=Math.round(fo(n)/r*o);Zg(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-c/2),vB(this.inversePixelTransform,this.pixelTransform);const h=hK(this.pixelTransform);if(this.useContainer(t,h,this.getBackground(e)),!this.containerReused){const f=this.context.canvas;f.width!=a||f.height!=c?(f.width=a,f.height=c):this.context.clearRect(0,0,a,c),h!==f.style.transform&&(f.style.transform=h)}}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){const s=new BB(e,this.inversePixelTransform,n,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(ba.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(ba.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new gJ),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(ba.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(ba.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,r,s,o,a){const c=s/2,h=o/2,f=r/t,m=-f,g=-e[0]+a,y=-e[1];return Zg(this.tempTransform,c,h,f,m,-n,g,y)}disposeInternal(){delete this.frameState,super.disposeInternal()}}let Jh=0;const Qr=1<<Jh++,En=1<<Jh++,gs=1<<Jh++,ea=1<<Jh++,Gh=1<<Jh++,dg=1<<Jh++,ky=Math.pow(2,Jh)-1,GM={[Qr]:"boolean",[En]:"number",[gs]:"string",[ea]:"color",[Gh]:"number[]",[dg]:"size"},EJ=Object.keys(GM).map(Number).sort(sE);function AJ(i){return i in GM}function pg(i){const e=[];for(const t of EJ)mg(i,t)&&e.push(GM[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function mg(i,e){return(i&e)===e}function Nc(i,e){return i===e}class Yi{constructor(e,t){if(!AJ(e))throw new Error(`literal expressions must have a specific type, got ${pg(e)}`);this.type=e,this.value=t}}class wJ{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function NB(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Er(i,e,t){switch(typeof i){case"boolean":{if(Nc(e,gs))return new Yi(gs,i?"true":"false");if(!mg(e,Qr))throw new Error(`got a boolean, but expected ${pg(e)}`);return new Yi(Qr,i)}case"number":{if(Nc(e,dg))return new Yi(dg,Es(i));if(Nc(e,Qr))return new Yi(Qr,!!i);if(Nc(e,gs))return new Yi(gs,i.toString());if(!mg(e,En))throw new Error(`got a number, but expected ${pg(e)}`);return new Yi(En,i)}case"string":{if(Nc(e,ea))return new Yi(ea,NM(i));if(Nc(e,Qr))return new Yi(Qr,!!i);if(!mg(e,gs))throw new Error(`got a string, but expected ${pg(e)}`);return new Yi(gs,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return BJ(i,e,t);for(const n of i)if(typeof n!="number")throw new Error("expected an array of numbers");if(Nc(e,dg)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new Yi(dg,i)}if(Nc(e,ea)){if(i.length===3)return new Yi(ea,[...i,1]);if(i.length===4)return new Yi(ea,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!mg(e,Gh))throw new Error(`got an array of numbers, but expected ${pg(e)}`);return new Yi(Gh,i)}const Ne={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},SJ={[Ne.Get]:Jt(hn(1,1/0),kI),[Ne.Var]:Jt(hn(1,1),MJ),[Ne.Has]:Jt(hn(1,1/0),kI),[Ne.Id]:Jt(CJ,Dd),[Ne.Concat]:Jt(hn(2,1/0),Bn(gs)),[Ne.GeometryType]:Jt(TJ,Dd),[Ne.LineMetric]:Jt(Dd),[Ne.Resolution]:Jt(jw,Dd),[Ne.Zoom]:Jt(jw,Dd),[Ne.Time]:Jt(jw,Dd),[Ne.Any]:Jt(hn(2,1/0),Bn(Qr)),[Ne.All]:Jt(hn(2,1/0),Bn(Qr)),[Ne.Not]:Jt(hn(1,1),Bn(Qr)),[Ne.Equal]:Jt(hn(2,2),Bn(ky)),[Ne.NotEqual]:Jt(hn(2,2),Bn(ky)),[Ne.GreaterThan]:Jt(hn(2,2),Bn(En)),[Ne.GreaterThanOrEqualTo]:Jt(hn(2,2),Bn(En)),[Ne.LessThan]:Jt(hn(2,2),Bn(En)),[Ne.LessThanOrEqualTo]:Jt(hn(2,2),Bn(En)),[Ne.Multiply]:Jt(hn(2,1/0),UI),[Ne.Coalesce]:Jt(hn(2,1/0),UI),[Ne.Divide]:Jt(hn(2,2),Bn(En)),[Ne.Add]:Jt(hn(2,1/0),Bn(En)),[Ne.Subtract]:Jt(hn(2,2),Bn(En)),[Ne.Clamp]:Jt(hn(3,3),Bn(En)),[Ne.Mod]:Jt(hn(2,2),Bn(En)),[Ne.Pow]:Jt(hn(2,2),Bn(En)),[Ne.Abs]:Jt(hn(1,1),Bn(En)),[Ne.Floor]:Jt(hn(1,1),Bn(En)),[Ne.Ceil]:Jt(hn(1,1),Bn(En)),[Ne.Round]:Jt(hn(1,1),Bn(En)),[Ne.Sin]:Jt(hn(1,1),Bn(En)),[Ne.Cos]:Jt(hn(1,1),Bn(En)),[Ne.Atan]:Jt(hn(1,2),Bn(En)),[Ne.Sqrt]:Jt(hn(1,1),Bn(En)),[Ne.Match]:Jt(hn(4,1/0),zI,RJ),[Ne.Between]:Jt(hn(3,3),Bn(En)),[Ne.Interpolate]:Jt(hn(6,1/0),zI,IJ),[Ne.Case]:Jt(hn(3,1/0),bJ,PJ),[Ne.In]:Jt(hn(2,2),LJ),[Ne.Number]:Jt(hn(1,1/0),Bn(ky)),[Ne.String]:Jt(hn(1,1/0),Bn(ky)),[Ne.Array]:Jt(hn(1,1/0),Bn(En)),[Ne.Color]:Jt(hn(1,4),Bn(En)),[Ne.Band]:Jt(hn(1,3),Bn(En)),[Ne.Palette]:Jt(hn(2,2),DJ),[Ne.ToString]:Jt(hn(1,1),Bn(Qr|En|gs|ea))};function kI(i,e,t){const n=i.length-1,r=new Array(n);for(let s=0;s<n;++s){const o=i[s+1];switch(typeof o){case"number":{r[s]=new Yi(En,o);break}case"string":{r[s]=new Yi(gs,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&t.properties.add(String(o))}return r}function MJ(i,e,t){const n=i[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new Yi(gs,n)]}function CJ(i,e,t){t.featureId=!0}function TJ(i,e,t){t.geometryType=!0}function jw(i,e,t){t.mapState=!0}function Dd(i,e,t){const n=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function hn(i,e){return function(t,n,r){const s=t[0],o=t.length-1;if(i===e){if(o!==i){const a=i===1?"":"s";throw new Error(`expected ${i} argument${a} for ${s}, got ${o}`)}}else if(o<i||o>e){const a=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function UI(i,e,t){const n=i.length-1,r=new Array(n);for(let s=0;s<n;++s){const o=Er(i[s+1],e,t);r[s]=o}return r}function Bn(i){return function(e,t,n){const r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Er(e[o+1],i,n);s[o]=a}return s}}function bJ(i,e,t){const n=i[0],r=i.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${r} instead`)}function zI(i,e,t){const n=i[0],r=i.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${r} instead`)}function RJ(i,e,t){const n=i.length-1,r=gs|En|Qr,s=Er(i[1],r,t),o=Er(i[i.length-1],e,t),a=new Array(n-2);for(let c=0;c<n-2;c+=2){try{const h=Er(i[c+2],s.type,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of match expression: ${h.message}`)}try{const h=Er(i[c+3],o.type,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+2} of match expression: ${h.message}`)}}return[s,...a,o]}function IJ(i,e,t){const n=i[1];let r;switch(n[0]){case"linear":r=1;break;case"exponential":const c=n[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);r=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const s=new Yi(En,r);let o;try{o=Er(i[2],En,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const a=new Array(i.length-3);for(let c=0;c<a.length;c+=2){try{const h=Er(i[c+3],En,t);a[c]=h}catch(h){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${h.message}`)}try{const h=Er(i[c+4],e,t);a[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${h.message}`)}}return[s,o,...a]}function PJ(i,e,t){const n=Er(i[i.length-1],e,t),r=new Array(i.length-1);for(let s=0;s<r.length-1;s+=2){try{const o=Er(i[s+1],Qr,t);r[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=Er(i[s+2],n.type,t);r[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return r[r.length-1]=n,r}function LJ(i,e,t){let n=i[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],r=gs}else r=En;const s=new Array(n.length);for(let a=0;a<s.length;a++)try{const c=Er(n[a],r,t);s[a]=c}catch(c){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${c.message}`)}return[Er(i[1],r,t),...s]}function DJ(i,e,t){let n;try{n=Er(i[1],En,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const r=i[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let o=0;o<s.length;o++){let a;try{a=Er(r[o],ea,t)}catch(c){throw new Error(`failed to parse color at index ${o} in palette expression: ${c.message}`)}if(!(a instanceof Yi))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[n,...s]}function Jt(...i){return function(e,t,n){const r=e[0];let s;for(let o=0;o<i.length;o++){const a=i[o](e,t,n);if(o==i.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new wJ(t,r,...s)}}function BJ(i,e,t){const n=i[0],r=SJ[n];if(!r)throw new Error(`unknown operator: ${n}`);return r(i,e,t)}function FB(i){if(!i)return"";const e=i.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return FB(i.getGeometries()[0]);default:return""}}function OB(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Vl(i,e,t){const n=Er(i,e,t);return ia(n)}function ia(i,e){if(i instanceof Yi){if(i.type===ea&&typeof i.value=="string"){const n=NM(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case Ne.Number:case Ne.String:case Ne.Coalesce:return NJ(i);case Ne.Get:case Ne.Var:case Ne.Has:return FJ(i);case Ne.Id:return n=>n.featureId;case Ne.GeometryType:return n=>n.geometryType;case Ne.Concat:{const n=i.args.map(r=>ia(r));return r=>"".concat(...n.map(s=>s(r).toString()))}case Ne.Resolution:return n=>n.resolution;case Ne.Any:case Ne.All:case Ne.Between:case Ne.In:case Ne.Not:return kJ(i);case Ne.Equal:case Ne.NotEqual:case Ne.LessThan:case Ne.LessThanOrEqualTo:case Ne.GreaterThan:case Ne.GreaterThanOrEqualTo:return OJ(i);case Ne.Multiply:case Ne.Divide:case Ne.Add:case Ne.Subtract:case Ne.Clamp:case Ne.Mod:case Ne.Pow:case Ne.Abs:case Ne.Floor:case Ne.Ceil:case Ne.Round:case Ne.Sin:case Ne.Cos:case Ne.Atan:case Ne.Sqrt:return UJ(i);case Ne.Case:return zJ(i);case Ne.Match:return GJ(i);case Ne.Interpolate:return HJ(i);case Ne.ToString:return VJ(i);default:throw new Error(`Unsupported operator ${t}`)}}function NJ(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=ia(i.args[s]);switch(t){case Ne.Coalesce:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Ne.Number:case Ne.String:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function FJ(i,e){const n=i.args[0].value;switch(i.operator){case Ne.Get:return r=>{const s=i.args;let o=r.properties[n];for(let a=1,c=s.length;a<c;++a){const f=s[a].value;o=o[f]}return o};case Ne.Var:return r=>r.variables[n];case Ne.Has:return r=>{const s=i.args;if(!(n in r.properties))return!1;let o=r.properties[n];for(let a=1,c=s.length;a<c;++a){const f=s[a].value;if(!o||!Object.hasOwn(o,f))return!1;o=o[f]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function OJ(i,e){const t=i.operator,n=ia(i.args[0]),r=ia(i.args[1]);switch(t){case Ne.Equal:return s=>n(s)===r(s);case Ne.NotEqual:return s=>n(s)!==r(s);case Ne.LessThan:return s=>n(s)<r(s);case Ne.LessThanOrEqualTo:return s=>n(s)<=r(s);case Ne.GreaterThan:return s=>n(s)>r(s);case Ne.GreaterThanOrEqualTo:return s=>n(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function kJ(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=ia(i.args[s]);switch(t){case Ne.Any:return s=>{for(let o=0;o<n;++o)if(r[o](s))return!0;return!1};case Ne.All:return s=>{for(let o=0;o<n;++o)if(!r[o](s))return!1;return!0};case Ne.Between:return s=>{const o=r[0](s),a=r[1](s),c=r[2](s);return o>=a&&o<=c};case Ne.In:return s=>{const o=r[0](s);for(let a=1;a<n;++a)if(o===r[a](s))return!0;return!1};case Ne.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function UJ(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=ia(i.args[s]);switch(t){case Ne.Multiply:return s=>{let o=1;for(let a=0;a<n;++a)o*=r[a](s);return o};case Ne.Divide:return s=>r[0](s)/r[1](s);case Ne.Add:return s=>{let o=0;for(let a=0;a<n;++a)o+=r[a](s);return o};case Ne.Subtract:return s=>r[0](s)-r[1](s);case Ne.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const c=r[2](s);return o>c?c:o};case Ne.Mod:return s=>r[0](s)%r[1](s);case Ne.Pow:return s=>Math.pow(r[0](s),r[1](s));case Ne.Abs:return s=>Math.abs(r[0](s));case Ne.Floor:return s=>Math.floor(r[0](s));case Ne.Ceil:return s=>Math.ceil(r[0](s));case Ne.Round:return s=>Math.round(r[0](s));case Ne.Sin:return s=>Math.sin(r[0](s));case Ne.Cos:return s=>Math.cos(r[0](s));case Ne.Atan:return n===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case Ne.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function zJ(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=ia(i.args[r]);return r=>{for(let s=0;s<t-1;s+=2)if(n[s](r))return n[s+1](r);return n[t-1](r)}}function GJ(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=ia(i.args[r]);return r=>{const s=n[0](r);for(let o=1;o<t-1;o+=2)if(s===n[o](r))return n[o+1](r);return n[t-1](r)}}function HJ(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=ia(i.args[r]);return r=>{const s=n[0](r),o=n[1](r);let a,c;for(let h=2;h<t;h+=2){const f=n[h](r);let m=n[h+1](r);const g=Array.isArray(m);if(g&&(m=KK(m)),f>=o)return h===2?m:g?WJ(s,o,a,c,f,m):gg(s,o,a,c,f,m);a=f,c=m}return c}}function VJ(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=ia(i.args[s]);switch(t){case Ne.ToString:return s=>{const o=r[0](s);return i.args[0].type===ea?FM(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function gg(i,e,t,n,r,s){const o=r-t;if(o===0)return n;const a=e-t,c=i===1?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1);return n+c*(s-n)}function WJ(i,e,t,n,r,s){if(r-t===0)return n;const a=TI(n),c=TI(s);let h=c[2]-a[2];h>180?h-=360:h<-180&&(h+=360);const f=[gg(i,e,t,a[0],r,c[0]),gg(i,e,t,a[1],r,c[1]),a[2]+gg(i,e,t,0,r,h),gg(i,e,t,n[3],r,s[3])];return JK(f)}function XJ(i){return!0}function jJ(i){const e=NB(),t=YJ(i,e),n=OB();return function(r,s){if(n.properties=r.getPropertiesInternal(),n.resolution=s,e.featureId){const o=r.getId();o!==void 0?n.featureId=o:n.featureId=null}return e.geometryType&&(n.geometryType=FB(r.getGeometry())),t(n)}}function GI(i){const e=NB(),t=i.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=rS(i[o],e);const r=OB(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const h=o.getId();h!==void 0?r.featureId=h:r.featureId=null}let c=0;for(let h=0;h<t;++h){const f=n[h](r);f&&(s[c]=f,c+=1)}return s.length=c,s}}function YJ(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r){const s=i[r],o="filter"in s?Vl(s.filter,Qr,e):XJ;let a;if(Array.isArray(s.style)){const c=s.style.length;a=new Array(c);for(let h=0;h<c;++h)a[h]=rS(s.style[h],e)}else a=[rS(s.style,e)];n[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const c=n[a].filter;if(c(r)&&!(i[a].else&&o)){o=!0;for(const h of n[a].styles){const f=h(r);f&&s.push(f)}}}return s}}function rS(i,e){const t=$g(i,"",e),n=e0(i,"",e),r=KJ(i,e),s=JJ(i,e),o=ys(i,"z-index",e);if(!t&&!n&&!r&&!s&&!rB(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new Ch;return function(c){let h=!0;if(t){const f=t(c);f&&(h=!1),a.setFill(f)}if(n){const f=n(c);f&&(h=!1),a.setStroke(f)}if(r){const f=r(c);f&&(h=!1),a.setText(f)}if(s){const f=s(c);f&&(h=!1),a.setImage(f)}return o&&a.setZIndex(o(c)),h?null:a}}function $g(i,e,t){let n;if(e+"fill-pattern-src"in i)n=$J(i,e+"fill-",t);else{if(i[e+"fill-color"]==="none")return s=>null;n=HM(i,e+"fill-color",t)}if(!n)return null;const r=new A0;return function(s){const o=n(s);return o===BM?null:(r.setColor(o),r)}}function e0(i,e,t){const n=ys(i,e+"stroke-width",t),r=HM(i,e+"stroke-color",t);if(!n&&!r)return null;const s=bl(i,e+"stroke-line-cap",t),o=bl(i,e+"stroke-line-join",t),a=kB(i,e+"stroke-line-dash",t),c=ys(i,e+"stroke-line-dash-offset",t),h=ys(i,e+"stroke-miter-limit",t),f=new yE;return function(m){if(r){const g=r(m);if(g===BM)return null;f.setColor(g)}if(n&&f.setWidth(n(m)),s){const g=s(m);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(g)}if(o){const g=o(m);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(g)}return a&&f.setLineDash(a(m)),c&&f.setLineDashOffset(c(m)),h&&f.setMiterLimit(h(m)),f}}function KJ(i,e){const t="text-",n=bl(i,t+"value",e);if(!n)return null;const r=$g(i,t,e),s=$g(i,t+"background-",e),o=e0(i,t,e),a=e0(i,t+"background-",e),c=bl(i,t+"font",e),h=ys(i,t+"max-angle",e),f=ys(i,t+"offset-x",e),m=ys(i,t+"offset-y",e),g=rp(i,t+"overflow",e),y=bl(i,t+"placement",e),_=ys(i,t+"repeat",e),S=AE(i,t+"scale",e),A=rp(i,t+"rotate-with-view",e),x=ys(i,t+"rotation",e),C=bl(i,t+"align",e),T=bl(i,t+"justify",e),R=bl(i,t+"baseline",e),L=rp(i,t+"keep-upright",e),B=kB(i,t+"padding",e),k=wE(i,t+"declutter-mode"),O=new UM({declutterMode:k});return function(D){if(O.setText(n(D)),r&&O.setFill(r(D)),s&&O.setBackgroundFill(s(D)),o&&O.setStroke(o(D)),a&&O.setBackgroundStroke(a(D)),c&&O.setFont(c(D)),h&&O.setMaxAngle(h(D)),f&&O.setOffsetX(f(D)),m&&O.setOffsetY(m(D)),g&&O.setOverflow(g(D)),y){const N=y(D);if(N!=="point"&&N!=="line")throw new Error("Expected point or line for text-placement");O.setPlacement(N)}if(_&&O.setRepeat(_(D)),S&&O.setScale(S(D)),A&&O.setRotateWithView(A(D)),x&&O.setRotation(x(D)),C){const N=C(D);if(N!=="left"&&N!=="center"&&N!=="right"&&N!=="end"&&N!=="start")throw new Error("Expected left, right, center, start, or end for text-align");O.setTextAlign(N)}if(T){const N=T(D);if(N!=="left"&&N!=="right"&&N!=="center")throw new Error("Expected left, right, or center for text-justify");O.setJustify(N)}if(R){const N=R(D);if(N!=="bottom"&&N!=="top"&&N!=="middle"&&N!=="alphabetic"&&N!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");O.setTextBaseline(N)}return B&&O.setPadding(B(D)),L&&O.setKeepUpright(L(D)),O}}function JJ(i,e){return"icon-src"in i?ZJ(i,e):"shape-points"in i?qJ(i,e):"circle-radius"in i?QJ(i,e):null}function ZJ(i,e){const t="icon-",n=t+"src",r=UB(i[n],n),s=hx(i,t+"anchor",e),o=AE(i,t+"scale",e),a=ys(i,t+"opacity",e),c=hx(i,t+"displacement",e),h=ys(i,t+"rotation",e),f=rp(i,t+"rotate-with-view",e),m=VI(i,t+"anchor-origin"),g=WI(i,t+"anchor-x-units"),y=WI(i,t+"anchor-y-units"),_=iZ(i,t+"color"),S=tZ(i,t+"cross-origin"),A=nZ(i,t+"offset"),x=VI(i,t+"offset-origin"),C=fx(i,t+"width"),T=fx(i,t+"height"),R=eZ(i,t+"size"),L=wE(i,t+"declutter-mode"),B=new zM({src:r,anchorOrigin:m,anchorXUnits:g,anchorYUnits:y,color:_,crossOrigin:S,offset:A,offsetOrigin:x,height:T,width:C,size:R,declutterMode:L});return function(k){return a&&B.setOpacity(a(k)),c&&B.setDisplacement(c(k)),h&&B.setRotation(h(k)),f&&B.setRotateWithView(f(k)),o&&B.setScale(o(k)),s&&B.setAnchor(s(k)),B}}function qJ(i,e){const t="shape-",n=t+"points",r=t+"radius",s=sS(i[n],n),o=sS(i[r],r),a=$g(i,t,e),c=e0(i,t,e),h=AE(i,t+"scale",e),f=hx(i,t+"displacement",e),m=ys(i,t+"rotation",e),g=rp(i,t+"rotate-with-view",e),y=fx(i,t+"radius2"),_=fx(i,t+"angle"),S=wE(i,t+"declutter-mode"),A=new xE({points:s,radius:o,radius2:y,angle:_,declutterMode:S});return function(x){return a&&A.setFill(a(x)),c&&A.setStroke(c(x)),f&&A.setDisplacement(f(x)),m&&A.setRotation(m(x)),g&&A.setRotateWithView(g(x)),h&&A.setScale(h(x)),A}}function QJ(i,e){const t="circle-",n=$g(i,t,e),r=e0(i,t,e),s=ys(i,t+"radius",e),o=AE(i,t+"scale",e),a=hx(i,t+"displacement",e),c=ys(i,t+"rotation",e),h=rp(i,t+"rotate-with-view",e),f=wE(i,t+"declutter-mode"),m=new EE({radius:5,declutterMode:f});return function(g){return s&&m.setRadius(s(g)),n&&m.setFill(n(g)),r&&m.setStroke(r(g)),a&&m.setDisplacement(a(g)),c&&m.setRotation(c(g)),h&&m.setRotateWithView(h(g)),o&&m.setScale(o(g)),m}}function ys(i,e,t){if(!(e in i))return;const n=Vl(i[e],En,t);return function(r){return sS(n(r),e)}}function bl(i,e,t){if(!(e in i))return null;const n=Vl(i[e],gs,t);return function(r){return UB(n(r),e)}}function $J(i,e,t){const n=bl(i,e+"pattern-src",t),r=HI(i,e+"pattern-offset",t),s=HI(i,e+"pattern-size",t),o=HM(i,e+"color",t);return function(a){return{src:n(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function rp(i,e,t){if(!(e in i))return null;const n=Vl(i[e],Qr,t);return function(r){const s=n(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function HM(i,e,t){if(!(e in i))return null;const n=Vl(i[e],ea,t);return function(r){return zB(n(r),e)}}function kB(i,e,t){if(!(e in i))return null;const n=Vl(i[e],Gh,t);return function(r){return w0(n(r),e)}}function hx(i,e,t){if(!(e in i))return null;const n=Vl(i[e],Gh,t);return function(r){const s=w0(n(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function HI(i,e,t){if(!(e in i))return null;const n=Vl(i[e],Gh,t);return function(r){return GB(n(r),e)}}function AE(i,e,t){if(!(e in i))return null;const n=Vl(i[e],Gh|En,t);return function(r){return rZ(n(r),e)}}function fx(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function eZ(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return Es(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function tZ(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function VI(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function WI(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function nZ(i,e){const t=i[e];if(t!==void 0)return w0(t,e)}function wE(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function iZ(i,e){const t=i[e];if(t!==void 0)return zB(t,e)}function w0(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function UB(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function sS(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function zB(i,e){if(typeof i=="string")return i;const t=w0(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function GB(i,e){const t=w0(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function rZ(i,e){return typeof i=="number"?i:GB(i,e)}const Jo={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function XI(i,e,t){return(function(n,r,s,o,a){if(!n)return;if(!r&&!e)return n;const c=e?0:s[0]*r,h=e?0:s[1]*r,f=a?a[0]:0,m=a?a[1]:0;let g=i[0]+c/2+f,y=i[2]-c/2+f,_=i[1]+h/2+m,S=i[3]-h/2+m;g>y&&(g=(y+g)/2,y=g),_>S&&(_=(S+_)/2,S=_);let A=Ri(n[0],g,y),x=Ri(n[1],_,S);if(o&&t&&r){const C=30*r;A+=-C*Math.log(1+Math.max(0,g-n[0])/C)+C*Math.log(1+Math.max(0,n[0]-y)/C),x+=-C*Math.log(1+Math.max(0,_-n[1])/C)+C*Math.log(1+Math.max(0,n[1]-S)/C)}return[A,x]})}function sZ(i){return i}function HB(i){return Math.pow(i,3)}function Fp(i){return 1-HB(1-i)}function oZ(i){return 3*i*i-2*i*i*i}function aZ(i){return i}function VM(i,e,t,n){const r=ai(e)/t[0],s=fo(e)/t[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function WM(i,e,t){let n=Math.min(i,e);const r=50;return n*=Math.log(1+r*Math.max(0,i/e-1))/r+1,t&&(n=Math.max(n,t),n/=Math.log(1+r*Math.max(0,t/i-1))/r+1),Ri(n,t/2,e*2)}function lZ(i,e,t,n){return e=e!==void 0?e:!0,(function(r,s,o,a){if(r!==void 0){const c=i[0],h=i[i.length-1],f=t?VM(c,t,o,n):c;if(a)return e?WM(r,f,h):Ri(r,h,f);const m=Math.min(f,r),g=Math.floor(xM(i,m,s));return i[g]>f&&g<i.length-1?i[g+1]:i[g]}})}function cZ(i,e,t,n,r,s){return n=n!==void 0?n:!0,t=t!==void 0?t:0,(function(o,a,c,h){if(o!==void 0){const f=r?VM(e,r,c,s):e;if(h)return n?WM(o,f,t):Ri(o,t,f);const m=1e-9,g=Math.ceil(Math.log(e/f)/Math.log(i)-m),y=-a*(.5-m)+.5,_=Math.min(f,o),S=Math.floor(Math.log(e/_)/Math.log(i)+y),A=Math.max(g,S),x=e/Math.pow(i,A);return Ri(x,t,f)}})}function jI(i,e,t,n,r){return t=t!==void 0?t:!0,(function(s,o,a,c){if(s!==void 0){const h=n?VM(i,n,a,r):i;return!t||!c?Ri(s,e,h):WM(s,h,e)}})}function XM(i){if(i!==void 0)return 0}function YI(i){if(i!==void 0)return i}function uZ(i){const e=2*Math.PI/i;return(function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function hZ(i){const e=jc(5);return(function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t})}const fZ=42,jM=256,Yw=0;class Ca extends Hl{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=RM(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&iK(),e.center&&(e.center=Ml(e.center,this.projection_)),e.extent&&(e.extent=yh(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Jo)delete t[a];this.setProperties(t,!0);const n=pZ(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const r=dZ(e),s=n.constraint,o=mZ(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=Ml(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Ml(r.anchor,this.getProjection())),t[n]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const f=arguments[r];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(r===t){n&&Uy(n,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,c=this.targetRotation_;const h=[];for(;r<t;++r){const f=arguments[r],m={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||oZ,callback:n};if(f.center&&(m.sourceCenter=o,m.targetCenter=f.center.slice(),o=m.targetCenter),f.zoom!==void 0?(m.sourceResolution=a,m.targetResolution=this.getResolutionForZoom(f.zoom),a=m.targetResolution):f.resolution&&(m.sourceResolution=a,m.targetResolution=f.resolution,a=m.targetResolution),f.rotation!==void 0){m.sourceRotation=c;const g=tp(f.rotation-c+Math.PI,2*Math.PI)-Math.PI;m.targetRotation=c+g,c=m.targetRotation}gZ(m)?m.complete=!0:s+=m.duration,h.push(m)}this.animations_.push(h),this.setHint(oo.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[oo.ANIMATING]>0}getInteracting(){return this.hints_[oo.INTERACTING]>0}cancelAnimations(){this.setHint(oo.ANIMATING,-this.hints_[oo.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const r=this.animations_[t];if(r[0].callback&&Uy(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let o=0,a=r.length;o<a;++o){const c=r[o];if(c.complete)continue;const h=e-c.start;let f=c.duration>0?h/c.duration:1;f>=1?(c.complete=!0,f=1):s=!1;const m=c.easing(f);if(c.sourceCenter){const g=c.sourceCenter[0],y=c.sourceCenter[1],_=c.targetCenter[0],S=c.targetCenter[1];this.nextCenter_=c.targetCenter;const A=g+m*(_-g),x=y+m*(S-y);this.targetCenter_=[A,x]}if(c.sourceResolution&&c.targetResolution){const g=m===1?c.targetResolution:c.sourceResolution+m*(c.targetResolution-c.sourceResolution);if(c.anchor){const y=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(g,0,y,!0);this.targetCenter_=this.calculateCenterZoom(_,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const g=m===1?tp(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+m*(c.targetRotation-c.sourceRotation);if(c.anchor){const y=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(y,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(s){this.animations_[n]=null,this.setHint(oo.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Uy(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],wM(n,e-this.getRotation()),R7(n,t)),n}calculateCenterZoom(e,t){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&iS(e,this.getProjection())}getCenterInternal(){return this.get(Jo.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return aK(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();qn(t,"The view center is not defined");const n=this.getResolution();qn(n!==void 0,"The view resolution is not defined");const r=this.getRotation();return qn(r!==void 0,"The view rotation is not defined"),Q1(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Jo.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(yh(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=ai(e)/t[0],r=fo(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return(function(s){return t/Math.pow(e,s*r)})}getRotation(){return this.get(Jo.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/t;return(function(o){return Math.log(n/o)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=Kw(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,n)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){const s=xM(this.resolutions_,e,1);t=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Ri(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,Ri(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(qn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){qn(!pE(e),"Cannot fit empty extent provided as `geometry`");const r=yh(e,this.getProjection());n=MI(r)}else if(e.getType()==="Circle"){const r=yh(e.getExtent(),this.getProjection());n=MI(r),n.rotate(this.getRotation(),Sp(r))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,c=1/0,h=-1/0,f=-1/0;for(let m=0,g=s.length;m<g;m+=o){const y=s[m]*n-s[m+1]*r,_=s[m]*r+s[m+1]*n;a=Math.min(a,y),c=Math.min(c,_),h=Math.max(h,y),f=Math.max(f,_)}return[a,c,h,f]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(a,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,s?0:1);const h=this.getRotation(),f=Math.sin(h),m=Math.cos(h),g=Sp(a);g[0]+=(r[1]-r[3])/2*c,g[1]+=(r[0]-r[2])/2*c;const y=g[0]*m-g[1]*f,_=g[1]*m+g[0]*f,S=this.getConstrainedCenter([y,_],c),A=t.callback?t.callback:rx;t.duration!==void 0?this.animateInternal({resolution:c,center:S,duration:t.duration,easing:t.easing},A):(this.targetResolution_=c,this.targetCenter_=S,this.applyTargetState_(!1,!0),Uy(A,!0))}centerOn(e,t,n){this.centerOnInternal(Ml(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(Kw(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),c=Kw(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,n);s=[e[0]-c[0],e[1]-c[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=iS(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Ml(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Ml(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ml(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(Jo.ROTATION)!==r&&this.set(Jo.ROTATION,r),this.get(Jo.RESOLUTION)!==o&&(this.set(Jo.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Jo.CENTER)||!ox(this.get(Jo.CENTER),a))&&this.set(Jo.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),c=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=c,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!ox(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:c,resolution:a,duration:e,easing:Fp,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(oo.INTERACTING,1)}endInteraction(e,t,n){n=n&&Ml(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(oo.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function Uy(i,e){setTimeout(function(){i(e)},0)}function dZ(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return XI(i.extent,i.constrainOnlyCenter,t)}const e=RM(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,XI(t,!1,!1)}return sZ}function pZ(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:Yw,a=i.maxZoom!==void 0?i.maxZoom:28;const c=i.zoomFactor!==void 0?i.zoomFactor:2,h=i.multiWorld!==void 0?i.multiWorld:!1,f=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,m=i.showFullExtent!==void 0?i.showFullExtent:!1,g=RM(i.projection,"EPSG:3857"),y=g.getExtent();let _=i.constrainOnlyCenter,S=i.extent;if(!h&&!S&&g.isGlobal()&&(_=!1,S=y),i.resolutions!==void 0){const A=i.resolutions;t=A[o],n=A[a]!==void 0?A[a]:A[A.length-1],i.constrainResolution?e=lZ(A,f,!_&&S,m):e=jI(t,n,f,!_&&S,m)}else{const x=(y?Math.max(ai(y),fo(y)):360*SM.degrees/g.getMetersPerUnit())/jM/Math.pow(2,Yw),C=x/Math.pow(2,28-Yw);t=i.maxResolution,t!==void 0?o=0:t=x/Math.pow(c,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(c,a):n=x/Math.pow(c,a):n=C),a=o+Math.floor(Math.log(t/n)/Math.log(c)),n=t/Math.pow(c,a-o),i.constrainResolution?e=cZ(c,t,n,f,!_&&S,m):e=jI(t,n,f,!_&&S,m)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:c}}function mZ(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?hZ():t===!1?YI:typeof t=="number"?uZ(t):YI}return XM}function gZ(i){return!(i.sourceCenter&&i.targetCenter&&!ox(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function Kw(i,e,t,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=i[0]*s-i[1]*o,c=i[1]*s+i[0]*o;a+=(e[0]/2-t[0])*n,c+=(t[1]-e[1]/2)*n,o=-o;const h=a*s-c*o,f=c*s+a*o;return[h,f]}const Un={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class VB extends Hl{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Un.OPACITY]=e.opacity!==void 0?e.opacity:1,qn(typeof t[Un.OPACITY]=="number","Layer opacity must be a number"),t[Un.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Un.Z_INDEX]=e.zIndex,t[Un.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Un.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Un.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Un.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Ri(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Dn()}getLayerStatesArray(e){return Dn()}getExtent(){return this.get(Un.EXTENT)}getMaxResolution(){return this.get(Un.MAX_RESOLUTION)}getMinResolution(){return this.get(Un.MIN_RESOLUTION)}getMinZoom(){return this.get(Un.MIN_ZOOM)}getMaxZoom(){return this.get(Un.MAX_ZOOM)}getOpacity(){return this.get(Un.OPACITY)}getSourceState(){return Dn()}getVisible(){return this.get(Un.VISIBLE)}getZIndex(){return this.get(Un.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Un.EXTENT,e)}setMaxResolution(e){this.set(Un.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Un.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Un.MAX_ZOOM,e)}setMinZoom(e){this.set(Un.MIN_ZOOM,e)}setOpacity(e){qn(typeof e=="number","Layer opacity must be a number"),this.set(Un.OPACITY,e)}setVisible(e){this.set(Un.VISIBLE,e)}setZIndex(e){this.set(Un.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class SE extends VB{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Un.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Un.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(bi(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Gn(e,pn.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Ca?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(o=>o.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return YM(r,t.viewState)&&(!s||x0(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const n=e instanceof Ca?e.getViewStateAndExtent():e;let r=t(n);return Array.isArray(r)||(r=[r]),r}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Un.MAP,e)}getMapInternal(){return this.get(Un.MAP)}setMap(e){this.mapPrecomposeKey_&&(bi(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(bi(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Gn(e,ba.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Gn(this,pn.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);qn(!t.some(r=>r.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(Un.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function YM(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}const KI={RENDER_ORDER:"renderOrder"};class vZ extends SE{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(KI.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new oJ(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(KI.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?DB:e;const t=yZ(e);this.styleFunction_=e===null?void 0:pJ(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function yZ(i){if(i===void 0)return DB;if(!i)return null;if(typeof i=="function"||i instanceof Ch)return i;if(!Array.isArray(i))return GI([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof Ch){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!(o instanceof Ch))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return jJ(r)}return GI(i)}const Xt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class KM extends cE{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(pn.CHANGE)}release(){this.setState(Xt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Xt.EMPTY){if(this.state!==Xt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Dn()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const r=t-n+1e3/60;return r>=this.transition_?1:HB(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class WB extends KM{constructor(e,t,n,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Xt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Xt.ERROR,this.unlistenImage_(),this.image_=_Z(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Xt.LOADED:this.state=Xt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Xt.ERROR&&(this.state=Xt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Xt.IDLE&&(this.state=Xt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ZK(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function _Z(){const i=As(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class xZ{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const r=this.points_[t+2]-this.points_[n+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class Hd extends tu{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class kc extends Hd{constructor(e,t,n,r,s,o){super(e,t,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ei={SINGLECLICK:"singleclick",CLICK:pn.CLICK,DBLCLICK:pn.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},oS={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class EZ extends cE{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Gn(n,oS.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Gn(n,oS.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(pn.TOUCHMOVE,this.boundHandleTouchMove_,RB?{passive:!1}:!1)}emulateClick_(e){let t=new kc(Ei.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new kc(Ei.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new kc(Ei.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Ei.POINTERUP||t.type==Ei.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Ei.POINTERDOWN||t.type==Ei.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new kc(Ei.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(bi),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new kc(Ei.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Gn(n,Ei.POINTERMOVE,this.handlePointerMove_,this),Gn(n,Ei.POINTERUP,this.handlePointerUp_,this),Gn(this.element_,Ei.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Gn(this.element_.getRootNode(),Ei.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new kc(Ei.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new kc(Ei.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(bi(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(pn.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(bi(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(bi),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Uc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Dr={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},dx=1/0;class AZ{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,lE(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(e){qn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=dx?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,r=t.length,s=t[e],o=n[e],a=e;for(;e<r>>1;){const c=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),f=h<r&&n[h]<n[c]?h:c;t[e]=t[f],n[e]=n[f],e=f}t[e]=s,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,r=this.priorities_,s=n[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)n[t]=n[a],r[t]=r[a],t=a;else break}n[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let r=0;const s=t.length;let o,a,c;for(a=0;a<s;++a)o=t[a],c=e(o),c==dx?delete this.queuedElements_[this.keyFunction_(o)]:(n[r]=c,t[r++]=o);t.length=r,n.length=r,this.heapify_()}}class wZ extends AZ{constructor(e,t){super(n=>e.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(pn.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===Xt.LOADED||n===Xt.ERROR||n===Xt.EMPTY){n!==Xt.ERROR&&t.removeEventListener(pn.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===Xt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++n,r.load())}}}function SZ(i,e,t,n,r){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return dx;const s=i.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class JM extends Hl{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,n=this.listenerKeys.length;t<n;++t)bi(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==rx&&this.listenerKeys.push(Gn(e,Uc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class MZ extends JM{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(pn.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+vE+" "+kM+(this.collapsed_&&this.collapsible_?" "+RI:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=h,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>n.add(r)):n.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>f7(()=>r))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!oE(t,this.renderedAttributions_)){UK(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(RI),this.collapsed_?CI(this.collapseLabel_,this.label_):CI(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class CZ extends JM{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(pn.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+vE+" "+kM,c=this.element;c.className=a,c.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ny)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Fp}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Ny);!s&&n===0?this.element.classList.add(Ny):s&&n!==0&&this.element.classList.remove(Ny)}this.label_.style.transform=r}this.rotation_=n}}class TZ extends JM{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=r,f.setAttribute("type","button"),f.title=c,f.appendChild(typeof o=="string"?document.createTextNode(o):o),f.addEventListener(pn.CLICK,this.handleClick_.bind(this,n),!1);const m=document.createElement("button");m.className=s,m.setAttribute("type","button"),m.title=h,m.appendChild(typeof a=="string"?document.createTextNode(a):a),m.addEventListener(pn.CLICK,this.handleClick_.bind(this,-n),!1);const g=t+" "+vE+" "+kM,y=this.element;y.className=g,y.appendChild(f),y.appendChild(m),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const s=n.getConstrainedZoom(r+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:Fp})):n.setZoom(s)}}}function bZ(i){i=i||{};const e=new Bl;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new TZ(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new CZ(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new MZ(i.attributionOptions)),e}const JI={ACTIVE:"active"};class S0 extends Hl{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(JI.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(JI.ACTIVE,e)}setMap(e){this.map_=e}}function RZ(i,e,t){const n=i.getCenterInternal();if(n){const r=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:aZ,center:i.getConstrainedCenter(r)})}}function ZM(i,e,t,n){const r=i.getZoom();if(r===void 0)return;const s=i.getConstrainedZoom(r+e),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:Fp})}class IZ extends S0{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ei.DBLCLICK){const n=e.originalEvent,r=e.map,s=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=r.getView();ZM(a,o,s,this.duration_),n.preventDefault(),t=!0}return!t}}function aS(i){const e=arguments;return function(t){let n=!0;for(let r=0,s=e.length;r<s&&(n=n&&e[r](t),!!n);++r);return n}}const PZ=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},LZ=function(i){const e=i.map.getTargetElement(),t=e.getRootNode(),n=i.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},XB=function(i){const e=i.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?LZ(i):!0},DZ=ix,jB=function(i){const e=i.originalEvent;return"pointerId"in e&&e.button==0&&!(FK&&TB&&e.ctrlKey)},YB=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},BZ=function(i){const e=i.originalEvent;return TB?e.metaKey:e.ctrlKey},NZ=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},KB=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Jw=function(i){const e=i.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},FZ=function(i){const e=i.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class M0 extends S0{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ei.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ei.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Ei.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Ei.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function qM(i){const e=i.length;let t=0,n=0;for(let r=0;r<e;r++)t+=i[r].clientX,n+=i[r].clientY;return{clientX:t/e,clientY:n/e}}class OZ extends M0{constructor(e){super({stopDown:aE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:aS(YB,FZ);this.condition_=e.onFocusOnly?aS(XB,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,r=t.getEventPixel(qM(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();I7(s,a.getResolution()),wM(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),c=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(c),duration:500,easing:Fp})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class kZ extends M0{constructor(e){e=e||{},super({stopDown:aE}),this.condition_=e.condition?e.condition:PZ,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Jw(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===XM)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Jw(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Jw(e)&&jB(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class UZ extends rE{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+n,r.top=Math.min(e[1],t[1])+n,r.width=Math.abs(t[0]-e[0])+n,r.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Qg([r])}getGeometry(){return this.geometry_}}const Bd={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class $m extends tu{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class zZ extends M0{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new UZ(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??jB,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const r=n[0]-t[0],s=n[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new $m(Bd.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new $m(t?Bd.BOXEND:Bd.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new $m(Bd.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new $m(Bd.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new $m(Bd.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class GZ extends zZ{constructor(e){e=e||{};const t=e.condition?e.condition:NZ;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(r),o=n.getResolutionForExtentInternal(s),a=n.getResolution()/o;r=r.clone(),r.scale(a*a)}n.fitInternal(r,{duration:this.duration_,easing:Fp})}}const rh={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class HZ extends S0{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return YB(t)&&KB(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==pn.KEYDOWN){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==rh.DOWN||r==rh.LEFT||r==rh.RIGHT||r==rh.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let c=0,h=0;r==rh.DOWN?h=-a:r==rh.LEFT?c=-a:r==rh.RIGHT?c=a:h=a;const f=[c,h];wM(f,o.getRotation()),RZ(o,f,this.duration_),n.preventDefault(),t=!0}}return!t}}class VZ extends S0{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!BZ(t)&&KB(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==pn.KEYDOWN||e.type==pn.KEYPRESS){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();ZM(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}const WZ=40,XZ=300;class jZ extends S0{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:DZ;this.condition_=e.onFocusOnly?aS(XB,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==pn.WHEEL)return!0;const n=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=WZ;break;case WheelEvent.DOM_DELTA_PAGE:s*=XZ;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Ri(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),ZM(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class YZ extends M0{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=aE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const c=s-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==XM&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(qM(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class KZ extends M0{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=aE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const c=e.map,h=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(qM(this.targetPointers))),c.render(),h.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function JZ(i){i=i||{};const e=new Bl,t=new xZ(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new kZ),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new IZ({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new OZ({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new YZ),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new KZ({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new HZ),e.push(new VZ({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new jZ({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new GZ({duration:i.zoomDuration})),e}class Gc extends tu{constructor(e,t){super(e),this.layer=t}}const Zw={LAYERS:"layers"};class Op extends VB{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Zw.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Bl(n.slice(),{unique:!0}):qn(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Bl(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(bi),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Gn(e,ao.ADD,this.handleLayersAdd_,this),Gn(e,ao.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(bi);lE(this.listenerKeys_);const t=e.getArray();for(let n=0,r=t.length;n<r;n++){const s=t[n];this.registerLayerListeners_(s),this.dispatchEvent(new Gc("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[Gn(e,Kg.PROPERTYCHANGE,this.handleLayerChange_,this),Gn(e,pn.CHANGE,this.handleLayerChange_,this)];e instanceof Op&&t.push(Gn(e,"addlayer",this.handleLayerGroupAdd_,this),Gn(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[xr(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Gc("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Gc("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Gc("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=xr(t);this.listenerKeys_[n].forEach(bi),delete this.listenerKeys_[n],this.dispatchEvent(new Gc("removelayer",t)),this.changed()}getLayers(){return this.get(Zw.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new Gc("removelayer",n[r]))}this.set(Zw.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=n,a=t.length;o<a;o++){const c=t[o];c.opacity*=r.opacity,c.visible=c.visible&&r.visible,c.maxResolution=Math.min(c.maxResolution,r.maxResolution),c.minResolution=Math.max(c.minResolution,r.minResolution),c.minZoom=Math.max(c.minZoom,r.minZoom),c.maxZoom=Math.min(c.maxZoom,r.maxZoom),r.extent!==void 0&&(c.extent!==void 0?c.extent=Mh(c.extent,r.extent):c.extent=r.extent),c.zIndex===void 0&&(c.zIndex=s)}return t}getSourceState(){return"ready"}}class ZZ extends rE{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Dn()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Zg(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),vB(r,n)}forEachFeatureAtCoordinate(e,t,n,r,s,o,a,c){let h;const f=t.viewState;function m(R,L,B,k){return s.call(o,L,R?B:null,k)}const g=f.projection,y=P7(e.slice(),g),_=[[0,0]];if(g.canWrapX()&&r){const R=g.getExtent(),L=ai(R);_.push([-L,0],[L,0])}const S=t.layerStatesArray,A=S.length,x=[],C=[];for(let R=0;R<_.length;R++)for(let L=A-1;L>=0;--L){const B=S[L],k=B.layer;if(k.hasRenderer()&&YM(B,f)&&a.call(c,k)){const O=k.getRenderer(),D=k.getSource();if(O&&D){const N=D.getWrapX()?y:e,z=m.bind(null,B.managed);C[0]=N[0]+_[R][0],C[1]=N[1]+_[R][1],h=O.forEachFeatureAtCoordinate(C,t,n,z,x)}if(h)return h}}if(x.length===0)return;const T=1/x.length;return x.forEach((R,L)=>R.distanceSq+=L*T),x.sort((R,L)=>R.distanceSq-L.distanceSq),x.some(R=>h=R.callback(R.feature,R.layer,R.geometry)),h}hasFeatureAtCoordinate(e,t,n,r,s,o){return this.forEachFeatureAtCoordinate(e,t,n,r,ix,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Dn()}scheduleExpireIconCache(e){po.canExpireCache()&&e.postRenderFunctions.push(qZ)}}function qZ(i,e){po.expire()}class QZ extends ZZ{constructor(e){super(e),this.fontChangeListenerKey_=Gn(rJ,Kg.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=vE+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const r=new BB(e,void 0,t);n.dispatchEvent(r)}}disposeInternal(){bi(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(ba.PRECOMPOSE,e);const t=e.layerStatesArray.sort((a,c)=>a.zIndex-c.zIndex);t.some(a=>a.layer instanceof vZ&&a.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,c=t.length;a<c;++a){const h=t[a];e.layerIndex=a;const f=h.layer,m=f.getSourceState();if(!YM(h,r)||m!="ready"&&m!="undefined"){f.unrender();continue}const g=f.render(e,o);g&&(g!==o&&(this.children_.push(g),o=g),s.push(h))}this.declutter(e,s),zK(this.element_,this.children_),this.dispatchRenderEvent(ba.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const r=t[n],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}t.forEach(n=>n.layer.renderDeferred(e))}}}function JB(i){if(i instanceof SE){i.setMapInternal(null);return}i instanceof Op&&i.getLayers().forEach(JB)}function ZB(i,e){if(i instanceof SE){i.setMapInternal(e);return}if(i instanceof Op){const t=i.getLayers().getArray();for(let n=0,r=t.length;n<r;++n)ZB(t[n],e)}}let $Z=class extends Hl{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=eq(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:OK,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ip(),this.pixelToCoordinateTransform_=ip(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||bZ(),this.interactions=t.interactions||JZ({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new wZ(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Dr.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Dr.VIEW,this.handleViewChanged_),this.addChangeListener(Dr.SIZE,this.handleSizeChanged_),this.addChangeListener(Dr.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Ca)&&e.view.then(function(r){n.setView(new Ca(r))}),this.controls.addEventListener(ao.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(ao.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(ao.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(ao.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(ao.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(ao.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){ZB(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:ix,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(r){n.push(r)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(r){r instanceof Op?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:ix,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=n.width/r[0],o=n.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/s,(a.clientY-n.top)/o]}getTarget(){return this.get(Dr.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return iS(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Os(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Dr.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Bl){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Ml(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Os(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Dr.SIZE)}getView(){return this.get(Dr.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,r){return SZ(this.frameState_,e,t,n,r)}handleBrowserEvent(e,t){t=t||e.type;const n=new kc(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===oS.POINTERDOWN||n===pn.WHEEL||n===pn.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[oo.ANIMATING]||o[oo.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(ba.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ba.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Hd(Uc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Hd(Uc.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let r=0,s=n.length;r<s;++r)n[r](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,r=this.targetChangeHandlerKeys_.length;n<r;++n)bi(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(pn.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(pn.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new QZ(this)),this.mapBrowserEventHandler_=new EZ(this,this.moveTolerance_);for(const s in Ei)this.mapBrowserEventHandler_.addEventListener(Ei[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(pn.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(pn.WHEEL,this.boundHandleBrowserEvent_,RB?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const s=t.getRootNode();n=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[Gn(n,pn.KEYDOWN,this.handleBrowserEvent,this),Gn(n,pn.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(bi(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(bi(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Gn(e,Kg.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Gn(e,pn.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(bi),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Gc("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Gn(e,Kg.PROPERTYCHANGE,this.render,this),Gn(e,pn.CHANGE,this.render,this),Gn(e,"addlayer",this.handleLayerAdd_,this),Gn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,n=e.length;t<n;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){JB(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&NI(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Q1(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:xr(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const c=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=Q1(a.nextCenter,a.nextResolution,c,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!pE(this.previousExtent_)&&!Z1(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Hd(Uc.MOVESTART,this,r)),this.previousExtent_=uE(this.previousExtent_)),this.previousExtent_&&!s.viewHints[oo.ANIMATING]&&!s.viewHints[oo.INTERACTING]&&!Z1(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Hd(Uc.MOVEEND,this,s)),m7(s.extent,this.previousExtent_))),this.dispatchEvent(new Hd(Uc.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Uc.LOADSTART)||this.hasListener(Uc.LOADEND)||this.hasListener(ba.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Gc("removelayer",t)),this.set(Dr.LAYERGROUP,e)}setSize(e){this.set(Dr.SIZE,e)}setTarget(e){this.set(Dr.TARGET,e)}setView(e){if(!e||e instanceof Ca){this.set(Dr.VIEW,e);return}this.set(Dr.VIEW,new Ca);const t=this;e.then(function(n){t.setView(new Ca(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[Math.max(0,s),Math.max(0,o)],!NI(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&uB("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!oE(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function eq(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Op({layers:i.layers});t[Dr.LAYERGROUP]=n,t[Dr.TARGET]=i.target,t[Dr.VIEW]=i.view instanceof Ca?i.view:new Ca;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new Bl(i.controls.slice()):(qn(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new Bl(i.interactions.slice()):(qn(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new Bl(i.overlays.slice()):(qn(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new Bl,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}class QM{constructor(e,t,n,r){this.minX=e,this.maxX=t,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Nd(i,e,t,n,r){return r!==void 0?(r.minX=i,r.maxX=e,r.minY=t,r.maxY=n,r):new QM(i,e,t,n)}function lS(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}const tq=new Error("disposed"),nq=[256,256];class ZI extends KM{constructor(e){const t=Xt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=lS(this.data_);return e?[e.width,e.height]:nq}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Xt.IDLE&&this.state!==Xt.ERROR)return;this.state=Xt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Xt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Xt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(tq),this.controller_=null),super.disposeInternal()}}let qw;const sp=[];function qI(i,e,t,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,r)),i.restore()}function Qw(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function iq(){if(qw===void 0){const i=As(6,6,sp);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",qI(i,4,5,4,0),qI(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;qw=Qw(e,0)||Qw(e,4)||Qw(e,8),DM(i),sp.push(i.canvas)}return qw}function QI(i,e,t,n){const r=gB(t,e,i);let s=yI(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const c=i.getExtent();if(!c||EM(c,r)){const h=yI(i,s,r)/s;isFinite(h)&&h>0&&(s/=h)}return s}function rq(i,e,t,n){const r=Sp(t);let s=QI(i,e,r,n);return(!isFinite(s)||s<=0)&&lB(t,function(o){return s=QI(i,e,o,n),isFinite(s)&&s>0}),s}function sq(i,e,t,n,r,s,o,a,c,h,f,m,g,y){const _=As(Math.round(t*i),Math.round(t*e),sp);if(m||(_.imageSmoothingEnabled=!1),c.length===0)return _.canvas;_.scale(t,t);function S(L){return Math.round(L*t)/t}_.globalCompositeOperation="lighter";const A=Yh();c.forEach(function(L,B,k){y7(A,L.extent)});let x;const C=t/n,T=(m?1:1+Math.pow(2,-24))/C;x=As(Math.round(ai(A)*C),Math.round(fo(A)*C),sp),m||(x.imageSmoothingEnabled=!1),c.forEach(function(L,B,k){if(L.image.width>0&&L.image.height>0){if(L.clipExtent){x.save();const ee=(L.clipExtent[0]-A[0])*C,te=-(L.clipExtent[3]-A[3])*C,ce=ai(L.clipExtent)*C,K=fo(L.clipExtent)*C;x.rect(m?ee:Math.round(ee),m?te:Math.round(te),m?ce:Math.round(ee+ce)-Math.round(ee),m?K:Math.round(te+K)-Math.round(te)),x.clip()}const O=(L.extent[0]-A[0])*C,D=-(L.extent[3]-A[3])*C,N=ai(L.extent)*C,z=fo(L.extent)*C;x.drawImage(L.image,h,h,L.image.width-2*h,L.image.height-2*h,m?O:Math.round(O),m?D:Math.round(D),m?N:Math.round(O+N)-Math.round(O),m?z:Math.round(D+z)-Math.round(D)),L.clipExtent&&x.restore()}});const R=Kh(o);return a.getTriangles().forEach(function(L,B,k){const O=L.source,D=L.target;let N=O[0][0],z=O[0][1],ee=O[1][0],te=O[1][1],ce=O[2][0],K=O[2][1];const oe=S((D[0][0]-R[0])/s),ae=S(-(D[0][1]-R[1])/s),U=S((D[1][0]-R[0])/s),Z=S(-(D[1][1]-R[1])/s),q=S((D[2][0]-R[0])/s),W=S(-(D[2][1]-R[1])/s),se=N,_e=z;N=0,z=0,ee-=se,te-=_e,ce-=se,K-=_e;const De=[[ee,te,0,0,U-oe],[ce,K,0,0,q-oe],[0,0,ee,te,Z-ae],[0,0,ce,K,W-ae]],ze=C7(De);if(!ze)return;if(_.save(),_.beginPath(),iq()||!m){_.moveTo(U,Z);const ge=4,Ue=oe-U,We=ae-Z;for(let He=0;He<ge;He++)_.lineTo(U+S((He+1)*Ue/ge),Z+S(He*We/(ge-1))),He!=ge-1&&_.lineTo(U+S((He+1)*Ue/ge),Z+S((He+1)*We/(ge-1)));_.lineTo(q,W)}else _.moveTo(U,Z),_.lineTo(oe,ae),_.lineTo(q,W);_.clip(),_.transform(ze[0],ze[2],ze[1],ze[3],oe,ae),_.translate(A[0]-se,A[3]-_e);let de;if(x)de=x.canvas,_.scale(T,-T);else{const ge=c[0],Ue=ge.extent;de=ge.image,_.scale(ai(Ue)/de.width,-fo(Ue)/de.height)}_.drawImage(de,0,0),_.restore()}),x&&(DM(x),sp.push(x.canvas)),f&&(_.save(),_.globalCompositeOperation="source-over",_.strokeStyle="black",_.lineWidth=1,a.getTriangles().forEach(function(L,B,k){const O=L.target,D=(O[0][0]-R[0])/s,N=-(O[0][1]-R[1])/s,z=(O[1][0]-R[0])/s,ee=-(O[1][1]-R[1])/s,te=(O[2][0]-R[0])/s,ce=-(O[2][1]-R[1])/s;_.beginPath(),_.moveTo(z,ee),_.lineTo(D,N),_.lineTo(te,ce),_.closePath(),_.stroke()}),_.restore()),_.canvas}const oq=10,$I=.25;class aq{constructor(e,t,n,r,s,o,a){this.sourceProj_=e,this.targetProj_=t;let c={};const h=a?oK(T=>Os(a,gB(T,this.targetProj_,this.sourceProj_))):cx(this.targetProj_,this.sourceProj_);this.transformInv_=function(T){const R=T[0]+"/"+T[1];return c[R]||(c[R]=h(T)),c[R]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ai(r)>=ai(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ai(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ai(this.targetProj_.getExtent()):null;const f=Kh(n),m=dE(n),g=fE(n),y=hE(n),_=this.transformInv_(f),S=this.transformInv_(m),A=this.transformInv_(g),x=this.transformInv_(y),C=oq+(o?Math.max(0,Math.ceil(Math.log2(q1(n)/(o*o*256*256)))):0);if(this.addQuad_(f,m,g,y,_,S,A,x,C),this.wrapsXInSource_){let T=1/0;this.triangles_.forEach(function(R,L,B){T=Math.min(T,R.source[0][0],R.source[1][0],R.source[2][0])}),this.triangles_.forEach(R=>{if(Math.max(R.source[0][0],R.source[1][0],R.source[2][0])-T>this.sourceWorldWidth_/2){const L=[[R.source[0][0],R.source[0][1]],[R.source[1][0],R.source[1][1]],[R.source[2][0],R.source[2][1]]];L[0][0]-T>this.sourceWorldWidth_/2&&(L[0][0]-=this.sourceWorldWidth_),L[1][0]-T>this.sourceWorldWidth_/2&&(L[1][0]-=this.sourceWorldWidth_),L[2][0]-T>this.sourceWorldWidth_/2&&(L[2][0]-=this.sourceWorldWidth_);const B=Math.min(L[0][0],L[1][0],L[2][0]);Math.max(L[0][0],L[1][0],L[2][0])-B<this.sourceWorldWidth_/2&&(R.source=L)}})}c={}}addTriangle_(e,t,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,n]})}addQuad_(e,t,n,r,s,o,a,c,h){const f=aI([s,o,a,c]),m=this.sourceWorldWidth_?ai(f)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&m>.5&&m<1;let _=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const A=aI([e,t,n,r]);_=ai(A)/this.targetWorldWidth_>$I||_}!y&&this.sourceProj_.isGlobal()&&m&&(_=m>$I||_)}if(!_&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!x0(f,this.maxSourceExtent_))return;let S=0;if(!_&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1]))){if(h>0)_=!0;else if(S=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),S!=1&&S!=2&&S!=4&&S!=8)return}if(h>0){if(!_){const A=[(e[0]+n[0])/2,(e[1]+n[1])/2],x=this.transformInv_(A);let C;y?C=(tp(s[0],g)+tp(a[0],g))/2-tp(x[0],g):C=(s[0]+a[0])/2-x[0];const T=(s[1]+a[1])/2-x[1];_=C*C+T*T>this.errorThresholdSquared_}if(_){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const A=[(t[0]+n[0])/2,(t[1]+n[1])/2],x=this.transformInv_(A),C=[(r[0]+e[0])/2,(r[1]+e[1])/2],T=this.transformInv_(C);this.addQuad_(e,t,A,C,s,o,x,T,h-1),this.addQuad_(C,A,n,r,T,x,a,c,h-1)}else{const A=[(e[0]+t[0])/2,(e[1]+t[1])/2],x=this.transformInv_(A),C=[(n[0]+r[0])/2,(n[1]+r[1])/2],T=this.transformInv_(C);this.addQuad_(e,A,C,r,s,x,T,c,h-1),this.addQuad_(A,t,n,C,x,o,a,T,h-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(S&11)==0&&this.addTriangle_(e,n,r,s,a,c),(S&14)==0&&this.addTriangle_(e,n,t,s,a,o),S&&((S&13)==0&&this.addTriangle_(t,r,e,o,c,s),(S&7)==0&&this.addTriangle_(t,r,n,o,c,a))}calculateSourceExtent(){const e=Yh();return this.triangles_.forEach(function(t,n,r){const s=t.source;qy(e,s[0]),qy(e,s[1]),qy(e,s[2])}),e}getTriangles(){return this.triangles_}}const lq=.5;class qB extends KM{constructor(e,t,n,r,s,o,a,c,h,f,m,g){super(s,Xt.IDLE,g),this.renderEdges_=m!==void 0?m:!1,this.pixelRatio_=a,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const y=r.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent();let S=this.sourceTileGrid_.getExtent();const A=_?Mh(y,_):y;if(q1(A)===0){this.state=Xt.EMPTY;return}const x=e.getExtent();x&&(S?S=Mh(S,x):S=x);const C=r.getResolution(this.wrappedTileCoord_[0]),T=rq(e,n,A,C);if(!isFinite(T)||T<=0){this.state=Xt.EMPTY;return}const R=f!==void 0?f:lq;if(this.triangulation_=new aq(e,n,A,S,T*R,C),this.triangulation_.getTriangles().length===0){this.state=Xt.EMPTY;return}this.sourceZ_=t.getZForResolution(T);let L=this.triangulation_.calculateSourceExtent();if(S&&(e.canWrapX()?(L[1]=Ri(L[1],S[1],S[3]),L[3]=Ri(L[3],S[1],S[3])):L=Mh(L,S)),!q1(L))this.state=Xt.EMPTY;else{let B=0,k=0;e.canWrapX()&&(B=ai(x),k=Math.floor((L[0]-x[0])/B)),S7(L.slice(),e).forEach(D=>{const N=t.getTileRangeForExtentAndZ(D,this.sourceZ_);for(let z=N.minX;z<=N.maxX;z++)for(let ee=N.minY;ee<=N.maxY;ee++){const te=h(this.sourceZ_,z,ee,a);if(te){const ce=k*B;this.sourceTiles_.push({tile:te,offset:ce})}}++k}),this.sourceTiles_.length===0&&(this.state=Xt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const n=t.tile;if(n&&n.getState()==Xt.LOADED){const r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=t.offset,r[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:r,clipExtent:s,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Xt.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=sq(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Xt.LOADED}this.changed()}load(){if(this.state==Xt.IDLE){this.state=Xt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==Xt.IDLE||n==Xt.LOADING){e++;const r=Gn(t,pn.CHANGE,s=>{const o=t.getState();(o==Xt.LOADED||o==Xt.ERROR||o==Xt.EMPTY)&&(bi(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,r){t.getState()==Xt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(bi),this.sourcesListenerKeys_=null}release(){this.canvas_&&(DM(this.canvas_.getContext("2d")),sp.push(this.canvas_),this.canvas_=null),super.release()}}class cq{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof rE&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return qn(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return qn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){qn(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function px(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function uq(i,e,t){return i+"/"+e+"/"+t}function hq(i){return fq(i[0],i[1],i[2])}function fq(i,e,t){return(e<<i)+t}function dq(i,e){const t=i[0],n=i[1],r=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(n,r):!0}function $w(i,e,t,n,r){return`${xr(i)},${e},${uq(t,n,r)}`}function e1(i,e,t){if(!(t in i))return i[t]=new Set([e]),!0;const n=i[t],r=n.has(e);return r||n.add(e),!r}function pq(i,e,t){const n=i[t];return n?n.delete(e):!1}function e2(i,e){const t=i.layerStatesArray[i.layerIndex];t.extent&&(e=Mh(e,yh(t.extent,i.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const r=n.getTileGridForProjection(i.viewState.projection).getExtent();r&&(e=Mh(e,r))}return e}class mq extends xJ{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Yh(),this.tempTileRange_=new QM(0,0,0,0),this.tempTileCoord_=px(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new cq(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,r){const s=this.tileCache_,a=this.getLayer().getSource(),c=$w(a,a.getKey(),e,t,n);let h;if(s.containsKey(c))h=s.get(c);else{if(h=a.getTile(e,t,n,r.pixelRatio,r.viewState.projection),!h)return null;s.set(c,h)}return h}getTile(e,t,n,r){const s=this.getOrCreateTile(e,t,n,r);return s||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=Os(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!EM(s,r))return null;const o=t.viewState,a=n.getRenderSource(),c=a.getTileGridForProjection(o.projection),h=a.getTilePixelRatio(t.pixelRatio);for(let f=c.getZForResolution(o.resolution);f>=c.getMinZoom();--f){const m=c.getTileCoordForCoordAndZ(r,f),g=this.getTile(f,m[1],m[2],t);if(!g||g.getState()!==Xt.LOADED)continue;const y=c.getOrigin(f),_=Es(c.getTileSize(f)),S=c.getResolution(f);let A;if(g instanceof WB||g instanceof qB)A=g.getImage();else if(g instanceof ZI){if(A=lS(g.getData()),!A)continue}else continue;const x=Math.floor(h*((r[0]-y[0])/S-m[1]*_[0])),C=Math.floor(h*((y[1]-r[1])/S-m[2]*_[1])),T=Math.round(h*a.getGutterForProjection(o.projection));return this.getImageData(A,x+T,C+T)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=n,!0}enqueueTiles(e,t,n,r,s){const o=e.viewState,a=this.getLayer(),c=a.getRenderSource(),h=c.getTileGridForProjection(o.projection),f=xr(c);f in e.wantedTiles||(e.wantedTiles[f]={});const m=e.wantedTiles[f],g=a.getMapInternal(),y=Math.max(n-s,h.getMinZoom(),h.getZForResolution(Math.min(a.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):h.getResolution(0)),c.zDirection)),_=o.rotation,S=_?cB(o.center,o.resolution,_,e.size):void 0;for(let A=n;A>=y;--A){const x=h.getTileRangeForExtentAndZ(t,A,this.tempTileRange_),C=h.getResolution(A);for(let T=x.minX;T<=x.maxX;++T)for(let R=x.minY;R<=x.maxY;++R){if(_&&!h.tileCoordIntersectsViewport([A,T,R],S))continue;const L=this.getTile(A,T,R,e);if(!L||!e1(r,L,A))continue;const k=L.getKey();if(m[k]=!0,L.getState()===Xt.IDLE&&!e.tileQueue.isKeyQueued(k)){const O=px(A,T,R,this.tempTileCoord_);e.tileQueue.enqueue([L,f,h.getTileCoordCenter(O),C])}}}}findStaleTile_(e,t){const n=this.tileCache_,r=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let c=0;c<a.length;++c){const h=$w(this.getLayer().getSource(),a[c],r,s,o);if(n.containsKey(h)){const f=n.peek(h);if(f.getState()===Xt.LOADED)return f.endTransition(xr(this)),e1(t,f,r),!0}}return!1}findAltTiles_(e,t,n,r){const s=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,c=this.getLayer().getRenderSource(),h=c.getKey();for(let f=s.minX;f<=s.maxX;++f)for(let m=s.minY;m<=s.maxY;++m){const g=$w(c,h,n,f,m);let y=!1;if(a.containsKey(g)){const _=a.peek(g);_.getState()===Xt.LOADED&&(e1(r,_,n),y=!0)}y||(o=!1)}return o}renderFrame(e,t){this.renderComplete=!0;const n=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,c=e.pixelRatio,h=this.getLayer(),f=h.getSource(),m=f.getTileGridForProjection(s),g=m.getZForResolution(o,f.zDirection),y=m.getResolution(g),_=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==_&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=_):this.renderedSourceKey_=_;let S=e.extent;const A=f.getTilePixelRatio(c);this.prepareContainer(e,t);const x=this.context.canvas.width,C=this.context.canvas.height,T=n.extent&&yh(n.extent);T&&(S=Mh(S,yh(n.extent)));const R=y*x/2/A,L=y*C/2/A,B=[a[0]-R,a[1]-L,a[0]+R,a[1]+L],k={};this.renderedTiles.length=0;const O=h.getPreload();if(e.nextExtent){const U=m.getZForResolution(r.nextResolution,f.zDirection),Z=e2(e,e.nextExtent);this.enqueueTiles(e,Z,U,k,O)}const D=e2(e,S);if(this.enqueueTiles(e,D,g,k,0),O>0&&setTimeout(()=>{this.enqueueTiles(e,D,g-1,k,O-1)},0),!(g in k))return this.container;const N=xr(this),z=e.time;for(const U of k[g]){const Z=U.getState();if(Z===Xt.EMPTY)continue;const q=U.tileCoord;if(Z===Xt.LOADED&&U.getAlpha(N,z)===1){U.endTransition(N);continue}if(Z!==Xt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(q,k)){pq(k,U,g),e.animate=!0;continue}if(this.findAltTiles_(m,q,g+1,k))continue;const _e=m.getMinZoom();for(let De=g-1;De>=_e&&!this.findAltTiles_(m,q,De,k);--De);}const ee=y/o*c/A,te=this.getRenderContext(e);Zg(this.tempTransform,x/2,C/2,ee,ee,0,-x/2,-C/2),n.extent&&this.clipUnrotated(te,e,T),f.getInterpolate()||(te.imageSmoothingEnabled=!1),this.preRender(te,e);const ce=Object.keys(k).map(Number);ce.sort(sE);let K;const oe=[],ae=[];for(let U=ce.length-1;U>=0;--U){const Z=ce[U],q=f.getTilePixelSize(Z,c,s),se=m.getResolution(Z)/y,_e=q[0]*se*ee,De=q[1]*se*ee,ze=m.getTileCoordForCoordAndZ(Kh(B),Z),de=m.getTileCoordExtent(ze),ge=Os(this.tempTransform,[A*(de[0]-B[0])/y,A*(B[3]-de[3])/y]),Ue=A*f.getGutterForProjection(s);for(const We of k[Z]){if(We.getState()!==Xt.LOADED)continue;const He=We.tileCoord,rt=ze[1]-He[1],zt=Math.round(ge[0]-(rt-1)*_e),Q=ze[2]-He[2],Oe=Math.round(ge[1]-(Q-1)*De),Le=Math.round(ge[0]-rt*_e),Pe=Math.round(ge[1]-Q*De),Re=zt-Le,Qe=Oe-Pe,Ve=ce.length===1;let je=!1;K=[Le,Pe,Le+Re,Pe,Le+Re,Pe+Qe,Le,Pe+Qe];for(let Rt=0,Dt=oe.length;Rt<Dt;++Rt)if(!Ve&&Z<ae[Rt]){const Y=oe[Rt];x0([Le,Pe,Le+Re,Pe+Qe],[Y[0],Y[3],Y[4],Y[7]])&&(je||(te.save(),je=!0),te.beginPath(),te.moveTo(K[0],K[1]),te.lineTo(K[2],K[3]),te.lineTo(K[4],K[5]),te.lineTo(K[6],K[7]),te.moveTo(Y[6],Y[7]),te.lineTo(Y[4],Y[5]),te.lineTo(Y[2],Y[3]),te.lineTo(Y[0],Y[1]),te.clip())}oe.push(K),ae.push(Z),this.drawTile(We,e,Le,Pe,Re,Qe,Ue,Ve),je&&te.restore(),this.renderedTiles.unshift(We),this.updateUsedTiles(e.usedTiles,f,We)}}if(this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!Z1(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=c,this.postRender(this.context,e),n.extent&&te.restore(),te.imageSmoothingEnabled=!0,this.renderComplete){const U=(Z,q)=>{const W=xr(f),se=q.wantedTiles[W],_e=se?Object.keys(se).length:0;this.updateCacheSize(_e),this.tileCache_.expireCache()};e.postRenderFunctions.push(U)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,r,s,o,a,c){let h;if(e instanceof ZI){if(h=lS(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const f=this.getRenderContext(t),m=xr(this),g=t.layerStatesArray[t.layerIndex],y=g.opacity*(c?e.getAlpha(m,t.time):1),_=y!==f.globalAlpha;_&&(f.save(),f.globalAlpha=y),f.drawImage(h,a,a,h.width-2*a,h.height-2*a,n,r,s,o),_&&f.restore(),y!==g.opacity?t.animate=!0:c&&e.endTransition(m)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const r=xr(t);r in e||(e[r]={}),e[r][n.getKey()]=!0}}const zy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class gq extends SE{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(zy.PRELOAD)}setPreload(e){this.set(zy.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(zy.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(zy.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class vq extends gq{constructor(e){super(e)}createRenderer(){return new mq(this,{cacheSize:this.getCacheSize()})}}const Fd=[0,0,0],Fc=5;class QB{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,qn(u7(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,qn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Kh(n)),qn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,qn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:jM,qn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new QM(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,c=r.maxY;a<=c;++a)n([t,s,a])}forEachTileCoordParentTileRange(e,t,n,r){let s,o,a,c=null,h=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):c=this.getTileCoordExtent(e,r);h>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=Nd(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(c,h,n),t(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return Nd(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return Nd(s,o,s,o,n);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),h=Math.floor(s*c),f=Math.floor(o*c);if(t<r)return Nd(h,h,f,f,n);const m=Math.floor(c*(s+1))-1,g=Math.floor(c*(o+1))-1;return Nd(h,m,f,g,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Fd);const r=Fd[1],s=Fd[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Fd);const o=Fd[1],a=Fd[2];return Nd(r,o,s,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=Es(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*n,t[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Es(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*s[0]*r,a=n[1]-(e[2]+1)*s[1]*r,c=o+s[0]*r,h=a+s[1]*r;return _0(o,a,c,h,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,r,s){const o=this.getZForResolution(n),a=n/this.getResolution(o),c=this.getOrigin(o),h=Es(this.getTileSize(o),this.tmpSize_);let f=a*(e-c[0])/n/h[0],m=a*(c[1]-t)/n/h[1];return r?(f=Ly(f,Fc)-1,m=Ly(m,Fc)-1):(f=Py(f,Fc),m=Py(m,Fc)),px(o,f,m,s)}getTileCoordForXYAndZ_(e,t,n,r,s){const o=this.getOrigin(n),a=this.getResolution(n),c=Es(this.getTileSize(n),this.tmpSize_);let h=(e-o[0])/a/c[0],f=(o[1]-t)/a/c[1];return r?(h=Ly(h,Fc)-1,f=Ly(f,Fc)-1):(h=Py(h,Fc),f=Py(f,Fc)),px(n,h,f,s)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=xM(this.resolutions_,e,t||0);return Ri(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return MB(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let r=this.minZoom;r<t;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}}class yq extends QB{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function t2(i,e){const t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});const n=t.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+n}const _q=/\{z\}/g,xq=/\{x\}/g,Eq=/\{y\}/g,Aq=/\{-y\}/g;function wq(i,e,t,n,r){return i.replace(_q,e.toString()).replace(xq,t.toString()).replace(Eq,n.toString()).replace(Aq,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-n).toString()})}function $B(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=n;s<=r;++s)e.push(i.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=n;r++)e.push(i.replace(t[0],r.toString()));return e}return e.push(i),e}function Sq(i,e){return(function(t,n,r){if(!t)return;let s;const o=t[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return wq(i,o,t[1],t[2],s)})}function Mq(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Sq(i[r],e);return cS(n)}function cS(i){return i.length===1?i[0]:(function(e,t,n){if(!e)return;const r=hq(e),s=tp(r,i.length);return i[s](e,t,n)})}function eN(i){let e=i.getDefaultTileGrid();return e||(e=Rq(i),i.setDefaultTileGrid(e)),e}function Cq(i,e,t){const n=e[0],r=i.getTileCoordCenter(e),s=tN(t);if(!EM(s,r)){const o=ai(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,i.getTileCoordForCoordAndZ(r,n)}return e}function Tq(i,e,t,n){n=n!==void 0?n:"top-left";const r=bq(i,e,t);return new QB({extent:i,origin:x7(i,n),resolutions:r,tileSize:t})}function bq(i,e,t,n){e=e!==void 0?e:fZ,t=Es(t!==void 0?t:jM);const r=fo(i),s=ai(i);n=n>0?n:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let c=0;c<o;++c)a[c]=n/Math.pow(2,c);return a}function Rq(i,e,t,n){const r=tN(i);return Tq(r,e,t,n)}function tN(i){i=_o(i);let e=i.getExtent();if(!e){const t=180*SM.degrees/i.getMetersPerUnit();e=_0(-t,-t,t,t)}return e}class Iq extends fJ{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Es(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||xr(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,r,s){return Dn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:eN(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(t),o=Es(r.getTileSize(e),this.tmpSize);return s==1?o:dJ(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const n=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=Cq(r,e,n)),dq(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Pq extends tu{constructor(e,t){super(e),this.tile=t}}const t1={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class $M extends Iq{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===$M.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=xr(t),r=t.getState();let s;r==Xt.LOADING?(this.tileLoadingKeys_[n]=!0,s=t1.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==Xt.ERROR?t1.TILELOADERROR:r==Xt.LOADED?t1.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Pq(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=$B(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Mq(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class Lq extends $M{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Dq,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:WB,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Dw(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||Dw(t,e)))return this.tileGrid;const n=xr(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=eN(e)),this.tileGridForProjection[n]}createTile_(e,t,n,r,s,o){const a=[e,t,n],c=this.getTileCoordForTileUrlFunction(a,s),h=c?this.tileUrlFunction(c,r,s):void 0,f=new this.tileClass(a,h!==void 0?Xt.IDLE:Xt.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=o,f.addEventListener(pn.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,n,r,s){const o=this.getProjection();if(!o||!s||Dw(o,s))return this.getTileInternal(e,t,n,r,o||s);const a=[e,t,n],c=this.getKey(),h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),m=this.getTileCoordForTileUrlFunction(a,s),g=new qB(o,h,s,f,a,m,this.getTilePixelRatio(r),this.getGutter(),(y,_,S,A)=>this.getTileInternal(y,_,S,A,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=c,g}getTileInternal(e,t,n,r,s){const o=this.getKey();return this.createTile_(e,t,n,r,s,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=_o(e);if(n){const r=xr(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function Dq(i,e){i.getImage().src=e}class Bq extends Lq{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",n=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=$B(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=cS(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(cS(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?t2(e,n):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in n?n[a.toLowerCase()]:o});const r=this.tileGrid,s=this.dimensions_;return(function(o,a,c){if(!o)return;const h={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(h,s);let f=e;return t=="KVP"?f=t2(f,h):f=f.replace(/\{(\w+?)\}/g,function(m,g){return encodeURIComponent(h[g])}),f})}}const Nq=({lat:i,lon:e,x:t,y:n})=>{const r=J.useRef(null);return J.useEffect(()=>{if(!r.current)return;const s=[.5625,.28125,.140625,.0703125,.03515625,.017578125,.0087890625,.00439453125,.002197265625],o=s.map((_,S)=>S.toString()),a=new yq({origin:[-180,90],resolutions:s,matrixIds:o,tileSize:512}),c=new Ca({projection:"EPSG:4326",center:[e,i],zoom:7}),h=new Date;h.setDate(h.getDate()-7);const m=`https://gibs-{a-c}.earthdata.nasa.gov/wmts/epsg4326/best/wmts.cgi?TIME=${h.toISOString().split("T")[0]}`,g=new vq({source:new Bq({url:m,layer:"MODIS_Terra_CorrectedReflectance_TrueColor",format:"image/jpeg",matrixSet:"250m",tileGrid:a,style:"default",requestEncoding:"KVP"})}),y=new $Z({target:r.current,layers:[g],view:c});return y.getView().setCenter([e,i]),()=>y.setTarget(void 0)},[i,e]),V.jsx("div",{ref:r,className:"spyglass",style:{width:"300px",height:"300px",borderRadius:"50%",border:"4px solid rgba(255,255,255,0.8)",overflow:"hidden",position:"absolute",top:`${n-150}px`,left:`${t-150}px`,zIndex:1e3,pointerEvents:"none"}})};function Fq(){const i=J.useRef(),e=J.useMemo(()=>{const t=`
      varying vec3 vWorldPosition;
      void main() {
        vec4 worldPosition = modelMatrix * vec4(position, 1.0);
        vWorldPosition = worldPosition.xyz;
        gl_Position = projectionMatrix * viewMatrix * worldPosition;
      }
    `,n=`
      precision highp float;
      varying vec3 vWorldPosition;
      uniform float uTime;

      float hash(vec3 p) { return fract(sin(dot(p, vec3(127.1,311.7, 74.7))) * 43758.5453123); }
      float noise(vec3 p){
        vec3 i = floor(p); 
        vec3 f = fract(p);
        float n = mix(
          mix(mix(hash(i + vec3(0,0,0)), hash(i + vec3(1,0,0)), f.x),
              mix(hash(i + vec3(0,1,0)), hash(i + vec3(1,1,0)), f.x), f.y),
          mix(mix(hash(i + vec3(0,0,1)), hash(i + vec3(1,0,1)), f.x),
              mix(hash(i + vec3(0,1,1)), hash(i + vec3(1,1,1)), f.x), f.y), f.z
        );
        return n;
      }
      void main() {
        vec3 dir = normalize(vWorldPosition);

        float density = 150.0;
        float n = noise(dir * density);
        float stars = smoothstep(0.995, 1.0, n);

        float twinkle = 0.5 + 0.5 * sin(uTime + n * 50.0);
        float brightness = stars * (0.7 + 0.3 * twinkle);

        float glow = pow(noise(dir * 4.0), 3.0) * 0.15;

        vec3 col = vec3(glow) + vec3(brightness);
        gl_FragColor = vec4(col, 1.0);
      }
    `,r={uTime:{value:0}};return new yo({vertexShader:t,fragmentShader:n,uniforms:r,side:Nr,depthWrite:!1,transparent:!0})},[]);return iE((t,n)=>{e&&(e.uniforms.uTime.value+=n*.6),i.current&&(i.current.rotation.y+=n*.002)}),V.jsxs("mesh",{ref:i,renderOrder:-1,children:[V.jsx("sphereGeometry",{args:[2e3,64,64]}),V.jsx("primitive",{object:e,attach:"material"})]})}const Oq=()=>{const i=J.useRef(null),e="/futuristic-landing-page-ui/cupola_2/scene.glb",{scene:t}=v0(e);return J.useEffect(()=>{if(t&&i.current){const n=t.clone(!0);for(n.traverse(r=>{if(r.isMesh){r.castShadow=!0,r.receiveShadow=!0;const s=(r.material||new Zc).clone();s.side=ks,s.transparent=!0;const o=(r.name||"").toLowerCase(),a=(s.name||"").toLowerCase();o.includes("glass")||o.includes("window")||a.includes("glass")||a.includes("window")?(s.opacity=.25,s.depthWrite=!1,s.ior=1.2,s.metalness=0,s.roughness=.1):(s.opacity=1,s.metalness=.1,s.roughness=.7),r.material=s}});i.current.children.length>0;)i.current.remove(i.current.children[0]);n.rotation.x=Math.PI,n.scale.setScalar(.9),i.current.add(n)}},[t]),V.jsx("group",{ref:i})};function kq(){return V.jsxs(V.Fragment,{children:[V.jsx("ambientLight",{intensity:.5}),V.jsx("directionalLight",{position:[20,20,20],intensity:2,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),V.jsx("pointLight",{position:[-20,-10,-20],intensity:.4})]})}function Uq({onHover:i,onClick:e}){const t=J.useMemo(()=>new Xg().load("/futuristic-landing-page-ui/maps/Earth-1440x720.jpg"),[]),n=J.useMemo(()=>new Xg().load("/futuristic-landing-page-ui/maps/flat_earth_still_clouds.jpg"),[]),r=J.useRef(),s=J.useRef(),o=-400,a=200,{camera:c,gl:h}=_r();return iE((f,m)=>{r.current&&(r.current.rotation.y+=m*.01),s.current&&(s.current.rotation.y+=m*.015)}),J.useEffect(()=>{const f=new fM,m=new Be,g=_=>{if(m.x=_.clientX/window.innerWidth*2-1,m.y=-(_.clientY/window.innerHeight)*2+1,f.setFromCamera(m,c),r.current){r.current.updateMatrixWorld(!0);const S=f.intersectObject(r.current,!0);if(S.length>0){const A=S[0].point.clone().sub(new j(0,0,o)).normalize(),x=Math.asin(A.y)*(180/Math.PI),C=Math.atan2(A.z,A.x)*(180/Math.PI);i({lat:x.toFixed(2),lon:C.toFixed(2),x:_.clientX,y:_.clientY})}else i(null)}},y=_=>{if(m.x=_.clientX/window.innerWidth*2-1,m.y=-(_.clientY/window.innerHeight)*2+1,f.setFromCamera(m,c),r.current){r.current.updateMatrixWorld(!0);const S=f.intersectObject(r.current,!0);if(S.length>0){const A=S[0].point.clone().sub(new j(0,0,o)).normalize(),x=Math.asin(A.y)*(180/Math.PI),C=Math.atan2(A.z,A.x)*(180/Math.PI);e({lat:x.toFixed(2),lon:C.toFixed(2),x:_.clientX,y:_.clientY})}}};return h.domElement.addEventListener("mousemove",g),h.domElement.addEventListener("click",y),()=>{h.domElement.removeEventListener("mousemove",g),h.domElement.removeEventListener("click",y)}},[c,h,i,e]),V.jsxs(V.Fragment,{children:[V.jsxs("mesh",{ref:r,position:[0,0,o],castShadow:!0,receiveShadow:!0,children:[V.jsx("sphereGeometry",{args:[a,128,128]}),V.jsx("meshStandardMaterial",{map:t})]}),V.jsxs("mesh",{ref:s,position:[0,0,o],children:[V.jsx("sphereGeometry",{args:[a+.6,128,128]}),V.jsx("meshPhongMaterial",{map:n,transparent:!0,opacity:.4,depthWrite:!1})]})]})}function zq({coords:i}){return i?V.jsxs("div",{style:{position:"fixed",left:i.x+10,top:i.y+10,background:"rgba(0,0,0,0.7)",color:"white",padding:"4px 8px",borderRadius:4,fontSize:12,pointerEvents:"none",zIndex:1e3},children:["Lat: ",i.lat," ",V.jsx("br",{}),"Lon: ",i.lon,""]}):null}function nN(){const[i,e]=J.useState(null),[t,n]=J.useState(null),[r,s]=J.useState(!1);return J.useEffect(()=>{const o=a=>{a.code==="KeyE"&&s(c=>!c)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[]),V.jsxs(V.Fragment,{children:[V.jsx($j,{camera:{position:[0,1.5,0],fov:60,near:.1,far:5e3},shadows:!0,gl:{antialias:!0,toneMapping:wx,outputEncoding:void 0},dpr:[1,2],children:V.jsxs(J.Suspense,{fallback:V.jsx(cY,{center:!0,children:V.jsx("div",{style:{color:"white"},children:"Loading Cupola"})}),children:[V.jsx(Fq,{}),V.jsx(kq,{}),V.jsx(Uq,{onHover:e,onClick:n})," ",V.jsx(Oq,{}),r?V.jsx(l7,{}):V.jsx(a7,{target:[0,0,-80],enableDamping:!0,dampingFactor:.05,enableZoom:!1})]})}),V.jsx(zq,{coords:i}),t&&V.jsx(Nq,{lat:parseFloat(t.lat),lon:parseFloat(t.lon),x:t.x,y:t.y})]})}v0.preload("/futuristic-landing-page-ui/cupola_2/scene.glb");function Gq({onNavigate:i}){const[e,t]=J.useState(0),[n,r]=J.useState(1),s=[{label:"Windows",value:"7 (6 side + 1 top)"},{label:"Diameter",value:"3 meters (9.8 ft)"},{label:"Installed",value:"February 2010"},{label:"Mass",value:"1,805 kg (3,979 lb)"},{label:"Purpose",value:"Earth observation & robotics"}],o=[{icon:GC,title:"Satellite Imaging",description:"Advanced imaging techniques refined through Cupola observations improve Earth monitoring satellites."},{icon:gF,title:"Disaster Monitoring",description:"Real-time disaster assessment capabilities help coordinate emergency response efforts worldwide."},{icon:WN,title:"Climate Research",description:"Atmospheric and oceanic observations contribute to climate models and weather prediction."}],a=[{id:1,url:"https://images.unsplash.com/photo-1722850998715-91dcb2b7d327?w=400"},{id:2,url:"https://images.unsplash.com/photo-1685427454855-8291928a6d7d?w=400"},{id:3,url:"https://images.unsplash.com/photo-1636565214233-6d1019dfbc36?w=400"},{id:4,url:"https://images.unsplash.com/photo-1688413399498-e35ed74b554f?w=400"}];return V.jsx("div",{className:"min-h-screen pt-24 pb-12 px-6",children:V.jsxs("div",{className:"max-w-7xl mx-auto space-y-12",children:[V.jsxs("div",{className:"text-center space-y-4",children:[V.jsx(ZN,{className:"h-16 w-16 mx-auto text-[#0B3D91]"}),V.jsx("h1",{children:"ISS Cupola Observatory"}),V.jsx("p",{className:"text-muted-foreground text-lg max-w-3xl mx-auto",children:"The most stunning window to Earth, offering astronauts a 360-degree view of our planet and the cosmos beyond."})]}),V.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[V.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[V.jsxs(Rl,{className:"p-6 space-y-4",children:[V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsx("h2",{className:"text-2xl",children:"Cupola 3D Viewer"}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsxs(qo,{variant:"outline",size:"sm",onClick:()=>t(c=>c-15),children:[V.jsx(uF,{className:"h-4 w-4 mr-1"}),"Rotate"]}),V.jsx(qo,{size:"sm",className:"bg-[#0B3D91] text-white",onClick:()=>i&&i("cupola-viewer"),children:"Open Interactive 3D"}),V.jsx(qo,{variant:"outline",size:"sm",onClick:()=>r(c=>Math.min(c+.2,2)),children:V.jsx(SF,{className:"h-4 w-4"})}),V.jsx(qo,{variant:"outline",size:"sm",onClick:()=>r(c=>Math.max(c-.2,.6)),children:V.jsx(CF,{className:"h-4 w-4"})})]})]}),V.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border-2 border-border bg-black",children:[V.jsx("div",{className:"absolute inset-0",children:V.jsx(nN,{})}),V.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-background/80 backdrop-blur-sm rounded-lg p-3 text-sm",children:V.jsxs("div",{className:"flex items-center justify-between",children:[V.jsx("span",{className:"text-muted-foreground",children:"Interactive 3D Model"}),V.jsxs("span",{className:"text-[#0B3D91] font-semibold",children:["Rotation: ",e," | Zoom: ",n.toFixed(1),"x"]})]})})]}),V.jsx("p",{className:"text-sm text-muted-foreground",children:"Use the controls above to rotate and zoom the Cupola model. The Cupola module provides astronauts with a panoramic view of Earth and is used for observing and guiding robotic operations."})]}),V.jsxs(Rl,{className:"p-6 space-y-4",children:[V.jsx("h2",{className:"text-2xl",children:"NASA Cupola Photo Gallery"}),V.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.map(c=>V.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:scale-105 transition-transform shadow-lg",children:V.jsx(Pk,{src:c.url,alt:`Cupola view ${c.id}`,className:"w-full h-full object-cover"})},c.id))}),V.jsxs(qo,{variant:"outline",className:"w-full",children:[V.jsx(GC,{className:"h-4 w-4 mr-2"}),"View Full Gallery"]})]})]}),V.jsxs("div",{className:"space-y-6",children:[V.jsxs(Rl,{className:"p-6 space-y-4",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(rF,{className:"h-5 w-5 text-[#0B3D91]"}),V.jsx("h3",{className:"text-xl",children:"Current Earth Location"})]}),V.jsxs("div",{className:"aspect-video flex items-center justify-center bg-black rounded-lg overflow-hidden relative",children:[V.jsx(GH,{}),V.jsxs("div",{className:"absolute bottom-2 left-2 right-2 bg-black/50 backdrop-blur-sm rounded px-2 py-1 text-white text-xs text-center",children:[V.jsx("div",{children:"Lat: 25.84 N"}),V.jsx("div",{children:"Lon: -80.27 W"}),V.jsx("div",{className:"text-white/60",children:"Over: Atlantic Ocean"})]})]})]}),V.jsxs(Rl,{className:"p-6 space-y-4",children:[V.jsx("h3",{className:"text-xl",children:"Cupola Facts"}),V.jsx("div",{className:"space-y-2 text-sm",children:s.map((c,h)=>V.jsxs("div",{className:"flex justify-between py-2 border-b border-border last:border-0",children:[V.jsx("span",{className:"text-muted-foreground",children:c.label}),V.jsx("span",{className:"font-semibold text-right",children:c.value})]},h))})]}),V.jsxs(wk,{children:[V.jsx(Sk,{asChild:!0,children:V.jsxs(qo,{className:"w-full bg-[#0B3D91] hover:bg-[#0B3D91]/90",children:[V.jsx(eF,{className:"h-4 w-4 mr-2"}),"Did You Know?"]})}),V.jsxs(Tk,{children:[V.jsx(bk,{children:V.jsx(Rk,{children:"Fascinating Cupola Facts"})}),V.jsxs("div",{className:"space-y-4 text-sm",children:[V.jsxs("div",{className:"space-y-2",children:[V.jsx("h4",{className:"font-semibold",children:"Most Photographed Location"}),V.jsx("p",{className:"text-muted-foreground",children:"The Cupola is the most photographed location on the ISS, capturing hundreds of thousands of images of Earth for scientific research and public engagement."})]}),V.jsxs("div",{className:"space-y-2",children:[V.jsx("h4",{className:"font-semibold",children:"Built in Italy"}),V.jsx("p",{className:"text-muted-foreground",children:"The Cupola was manufactured by the European Space Agency in Turin, Italy, and launched to the ISS on Space Shuttle Endeavour in 2010."})]}),V.jsxs("div",{className:"space-y-2",children:[V.jsx("h4",{className:"font-semibold",children:"Robotic Control Center"}),V.jsx("p",{className:"text-muted-foreground",children:"Beyond observation, the Cupola serves as the primary control station for the ISS robotic arm, crucial for capturing visiting spacecraft and conducting repairs."})]})]})]})]})]})]}),V.jsxs("div",{className:"space-y-6",children:[V.jsxs("div",{className:"text-center",children:[V.jsx("h2",{className:"text-3xl",children:"How Cupola Benefits Earth"}),V.jsx("p",{className:"text-muted-foreground mt-2",children:"Technologies and insights from the Cupola module improve life on our planet"})]}),V.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(c=>{const h=c.icon;return V.jsxs(Rl,{className:"p-6 space-y-4 hover:shadow-lg transition-shadow",children:[V.jsx("div",{className:"w-12 h-12 rounded-lg bg-[#0B3D91]/10 flex items-center justify-center",children:V.jsx(h,{className:"h-6 w-6 text-[#0B3D91]"})}),V.jsx("h3",{className:"text-xl",children:c.title}),V.jsx("p",{className:"text-sm text-muted-foreground",children:c.description})]},c.title)})})]})]})})}function Hq({onNavigate:i}){return V.jsxs("div",{className:"flex flex-col h-full w-full bg-black",children:[V.jsx("header",{className:"flex-shrink-0 px-6 py-4 border-b border-border bg-background",children:V.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsxs(qo,{variant:"ghost",onClick:()=>i&&i("cupola"),children:[V.jsx(GN,{className:"h-4 w-4 mr-2"}),"Back"]}),V.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Interactive Cupola + Earth Viewer"})]})})}),V.jsx("div",{style:{flex:1,width:"100%",height:"100vh"},className:"absolute inset-0",children:V.jsx(nN,{})}),V.jsx("footer",{className:"flex-shrink-0 px-6 py-3 border-t border-border bg-background",children:V.jsxs("div",{className:"max-w-7xl mx-auto text-sm text-muted-foreground space-y-1",children:[V.jsxs("p",{children:["Use ",V.jsx("strong",{children:"OrbitControls"})," to rotate and zoom, or press"," ",V.jsx("strong",{children:"E"})," to enter first-person mode inside the Cupola."]}),V.jsxs("p",{children:["Walk with ",V.jsx("strong",{children:"W A S D"}),", look around with the mouse, and press ",V.jsx("strong",{children:"ESC"})," to exit FP mode."]}),V.jsxs("p",{children:["Hover over the Earth to see ",V.jsx("strong",{children:"latitude/longitude"})," ","coordinates in real-time."]})]})})]})}function Vq(){const i=J.useRef(null),e=J.useRef(null),t=J.useRef(null),n=J.useRef(null),r=J.useRef(null),s=J.useRef(null),o=J.useRef({x:0,y:0,isDragging:!1,lastX:0,lastY:0}),a=J.useRef({x:0,y:0,velocity:.002}),[c,h]=J.useState(!0);return J.useEffect(()=>{if(!i.current)return;const f=new Ox;f.background=null,e.current=f;const m=new ei(50,i.current.clientWidth/i.current.clientHeight,.1,1e3);m.position.z=5,t.current=m;const g=new mM({alpha:!0,antialias:!0});g.setSize(i.current.clientWidth,i.current.clientHeight),g.setPixelRatio(Math.min(window.devicePixelRatio,2)),i.current.appendChild(g.domElement),n.current=g;const y=new oM(16777215,.6);f.add(y);const _=new jg(16777215,1.2);_.position.set(5,3,5),f.add(_);const S=new jg(4491519,.3);S.position.set(-5,-3,-5),f.add(S);const A=new Fh(1.5,64,64),x=new Xg,C=new Zc({map:x.load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_atmos_2048.jpg",()=>h(!1)),roughness:.9,metalness:.1,bumpMap:x.load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_normal_2048.jpg"),bumpScale:.03}),T=new mi(A,C);f.add(T),r.current=T;const R=new Fh(1.52,64,64),L=new Zc({map:x.load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_clouds_1024.png"),transparent:!0,opacity:.3,depthWrite:!1}),B=new mi(R,L);f.add(B),s.current=B;const k=new Qt,O=new u0({color:16777215,size:.7,transparent:!0,opacity:.8}),D=[];for(let ae=0;ae<1e3;ae++){const U=(Math.random()-.5)*2e3,Z=(Math.random()-.5)*2e3,q=-Math.random()*2e3-100;D.push(U,Z,q)}k.setAttribute("position",new St(D,3));const N=new zx(k,O);f.add(N);const z=ae=>{o.current.isDragging=!0,o.current.lastX=ae.clientX,o.current.lastY=ae.clientY},ee=ae=>{if(o.current.x=ae.clientX/window.innerWidth*2-1,o.current.y=-(ae.clientY/window.innerHeight)*2+1,o.current.isDragging){const U=ae.clientX-o.current.lastX,Z=ae.clientY-o.current.lastY;a.current.y+=U*.005,a.current.x+=Z*.005,a.current.x=Math.max(-Math.PI/3,Math.min(Math.PI/3,a.current.x)),o.current.lastX=ae.clientX,o.current.lastY=ae.clientY}},te=()=>{o.current.isDragging=!1},ce=ae=>{ae.preventDefault();const U=.002;m.position.z+=ae.deltaY*U,m.position.z=Math.max(3,Math.min(10,m.position.z))};g.domElement.addEventListener("mousedown",z),window.addEventListener("mousemove",ee),window.addEventListener("mouseup",te),g.domElement.addEventListener("wheel",ce,{passive:!1});const K=()=>{i.current&&(m.aspect=i.current.clientWidth/i.current.clientHeight,m.updateProjectionMatrix(),g.setSize(i.current.clientWidth,i.current.clientHeight))};window.addEventListener("resize",K);const oe=()=>{requestAnimationFrame(oe),T&&B&&(o.current.isDragging||(a.current.y+=a.current.velocity),T.rotation.y=a.current.y,T.rotation.x=a.current.x,B.rotation.y=a.current.y*1.1,B.rotation.x=a.current.x),g.render(f,m)};return oe(),()=>{g.domElement.removeEventListener("mousedown",z),window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",te),g.domElement.removeEventListener("wheel",ce),window.removeEventListener("resize",K),g.dispose(),A.dispose(),C.dispose(),R.dispose(),L.dispose(),k.dispose(),O.dispose(),i.current&&g.domElement.parentNode===i.current&&i.current.removeChild(g.domElement)}},[]),V.jsxs("div",{className:"relative w-full h-full",children:[V.jsx("div",{ref:i,className:"w-full h-full"}),c&&V.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-transparent",children:V.jsx("div",{className:"text-white text-xl",children:"Loading Earth..."})}),V.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 bg-black/40 backdrop-blur-sm px-6 py-3 rounded-full border border-white/20",children:V.jsx("p",{className:"text-white/90 text-sm font-light",children:" Drag to rotate   Scroll to zoom"})})]})}function Wq(){const i=J.useRef(null);return J.useEffect(()=>{const e=i.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const n=()=>{e.width=window.innerWidth,e.height=window.innerHeight};n(),window.addEventListener("resize",n);const r=[];for(let a=0;a<150;a++)r.push({x:Math.random()*e.width,y:Math.random()*e.height,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,size:Math.random()*2+.5,opacity:Math.random()*.5+.3,hue:Math.random()*60+200});let s=0;const o=()=>{s+=.005;const a=t.createLinearGradient(0,0,e.width,e.height);a.addColorStop(0,"#0a1128"),a.addColorStop(.5,`rgba(${10+Math.sin(s)*5}, ${17+Math.cos(s)*5}, ${40+Math.sin(s*.5)*10}, 1)`),a.addColorStop(1,"#0a1128"),t.fillStyle=a,t.fillRect(0,0,e.width,e.height),r.forEach((h,f)=>{const m=Math.sin(s+h.x*.01)*.5;h.x+=h.vx+m*.1,h.y+=h.vy+Math.cos(s+h.y*.01)*.3,h.x<0&&(h.x=e.width),h.x>e.width&&(h.x=0),h.y<0&&(h.y=e.height),h.y>e.height&&(h.y=0);const g=h.opacity+Math.sin(s*2+f)*.2,y=t.createRadialGradient(h.x,h.y,0,h.x,h.y,h.size*3);y.addColorStop(0,`hsla(${h.hue}, 80%, 70%, ${g})`),y.addColorStop(.5,`hsla(${h.hue}, 80%, 50%, ${g*.5})`),y.addColorStop(1,`hsla(${h.hue}, 80%, 30%, 0)`),t.fillStyle=y,t.beginPath(),t.arc(h.x,h.y,h.size*3,0,Math.PI*2),t.fill()}),t.strokeStyle="rgba(100, 150, 255, 0.1)",t.lineWidth=.5;for(let h=0;h<r.length;h++)for(let f=h+1;f<r.length;f++){const m=r[h].x-r[f].x,g=r[h].y-r[f].y;Math.sqrt(m*m+g*g)<150&&(t.beginPath(),t.moveTo(r[h].x,r[h].y),t.lineTo(r[f].x,r[f].y),t.stroke())}const c=t.createRadialGradient(e.width/2+Math.sin(s)*100,e.height/2+Math.cos(s*.7)*100,0,e.width/2,e.height/2,Math.max(e.width,e.height)/2);c.addColorStop(0,"rgba(50, 100, 200, 0.03)"),c.addColorStop(.5,"rgba(20, 50, 150, 0.02)"),c.addColorStop(1,"rgba(10, 17, 40, 0)"),t.fillStyle=c,t.fillRect(0,0,e.width,e.height),requestAnimationFrame(o)};return o(),()=>{window.removeEventListener("resize",n)}},[]),V.jsx("canvas",{ref:i,className:"absolute inset-0 w-full h-full",style:{pointerEvents:"none"}})}function n2({onNavigate:i}){const[e,t]=J.useState({x:0,y:0});return J.useEffect(()=>{const n=r=>{const s=(r.clientX/window.innerWidth-.5)*20,o=(r.clientY/window.innerHeight-.5)*20;t({x:s,y:o})};return window.addEventListener("mousemove",n),()=>window.removeEventListener("mousemove",n)},[]),V.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-[#0a1128]",children:[V.jsx(Wq,{}),V.jsx("div",{className:"absolute inset-0 transition-transform duration-300 ease-out",style:{transform:`translate(${e.x}px, ${e.y}px) scale(1.05)`},children:V.jsx("div",{className:"absolute inset-0 flex items-center justify-center overflow-hidden",children:V.jsx(Vq,{})})}),V.jsx("div",{className:"absolute top-24 right-8 z-20",children:V.jsx("div",{className:"relative",children:V.jsx("div",{className:"flex flex-col items-center gap-1 bg-white/10 backdrop-blur-md border border-white/20 rounded-full px-6 py-4",children:V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("div",{className:"w-12 h-12 rounded-full bg-[#FF0000] flex items-center justify-center",children:V.jsx("svg",{className:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:V.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:"white"})})}),V.jsxs("div",{className:"text-white",children:[V.jsx("div",{className:"text-xs opacity-90",children:"NASA"}),V.jsx("div",{className:"font-semibold",children:"25th Anniversary"})]})]})})})}),V.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 text-center pt-20",children:V.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[V.jsx("h1",{className:"text-6xl md:text-7xl lg:text-8xl tracking-tight text-white drop-shadow-2xl",style:{fontFamily:"Inter, system-ui, sans-serif",fontWeight:700},children:"Window to the World"}),V.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-2xl mx-auto drop-shadow-lg",style:{fontFamily:"Inter, system-ui, sans-serif",fontWeight:300},children:"Experience sight and weightlessness aboard the ISS."}),V.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-6",children:[V.jsx(qo,{size:"lg",onClick:()=>i("cupola"),className:"bg-[#0B3D91] hover:bg-[#0B3D91]/90 text-white px-8 py-6 shadow-2xl transition-all hover:scale-105 border-2 border-white/20",children:"Explore the Cupola"}),V.jsx(qo,{size:"lg",onClick:()=>i("nbl"),className:"bg-[#0B3D91] hover:bg-[#0B3D91]/90 text-white px-8 py-6 shadow-2xl transition-all hover:scale-105 border-2 border-white/20",children:"Dive into the NBL"})]}),V.jsx("div",{className:"pt-12 max-w-2xl mx-auto",children:V.jsx("p",{className:"text-white/80 leading-relaxed",style:{fontFamily:"Inter, system-ui, sans-serif"},children:"Embark on an immersive journey through the International Space Station's most iconic window and explore the Neutral Buoyancy Laboratory where astronauts train for their missions. Discover the wonders of space exploration through cutting-edge educational experiences."})})]})})]})}function Xq(){const[i,e]=J.useState("home"),[t,n]=J.useState("dark");J.useEffect(()=>{const a=localStorage.getItem("theme")||"dark";n(a),document.documentElement.classList.toggle("dark",a==="dark")},[]);const r=()=>{const a=t==="dark"?"light":"dark";n(a),localStorage.setItem("theme",a),document.documentElement.classList.toggle("dark",a==="dark")},s=a=>{e(a),window.scrollTo({top:0,behavior:"smooth"})},o=()=>{switch(i){case"home":return V.jsx(n2,{onNavigate:s});case"nbl":return V.jsx(WO,{});case"cupola":return V.jsx(Gq,{onNavigate:s});case"cupola-viewer":return V.jsx("div",{className:"h-screen w-screen",children:V.jsx(Hq,{onNavigate:s})});default:return V.jsx(n2,{onNavigate:s})}};return V.jsxs("div",{className:"max-h-full min-h-screen bg-background text-foreground",children:[V.jsx(OO,{currentPage:i,onNavigate:s,theme:t,onThemeToggle:r}),V.jsx("main",{children:o()}),V.jsx(kO,{})]})}r2.createRoot(document.getElementById("root")).render(V.jsx(Xq,{}));
